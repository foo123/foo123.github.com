/**
*
*   ModelView.js
*   @version: 0.65
*   @built on 2015-08-24 20:15:23
*
*   A simple/extendable MV* (MVVM) framework
*   optionaly integrates into both jQuery as MVVM plugin and jQueryUI as MVC widget
*   https://github.com/foo123/modelview.js
*
**/!function(e,n,t){"use strict";var i,r="object"==typeof module&&module.exports,l="function"==typeof define&&define.amd;r?module.exports=(module.$deps=module.$deps||{})[n]=module.$deps[n]||t.call(e,{NODE:module})||1:l&&"function"==typeof require&&"function"==typeof require.specified&&require.specified(n)?define(n,["require","exports","module"],function(n,i,r){return t.call(e,{AMD:r})}):n in e||(e[n]=i=t.call(e,{})||1)&&l&&define(n,[],function(){return i})}(this,"ModelView",function(e){"use strict";function n(e,n){var t=[e||"",Fn];return n&&(t=t.concat(n)),t.join(".")}function t(e){return-1<Xn.indexOf(e)}function i(e,n){return e===n}function r(e,n){return e.toLowerCase()===n.tagName.toLowerCase()}function l(e,n){return e===n.id}function o(e,n){return n[Mn](e)}function a(e){var n=this;return n instanceof a?(e&&n.element(e),void(n.$handle=a.Handler.bind(n))):new a(e)}var u=void 0,s=function(e,n){return e.bind(n)},c="prototype",f=Array,d=f[c],h=RegExp,p=Object,g=p[c],m=p.create,v=p.keys,$=Function,y=($[c],String),b=y[c],_=g.toString,w=d.slice,k=function(e){return y(e)},E=function(e,n){return new $(e,n)},S=function(e,n){return e instanceof n},D=1/0,M=(Math.random,/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g),x=function(e){return e.replace(M,"\\$&")},A=function(e,n,t){return e[n]=u,t||delete e[n],e},C=4,O=5,j=6,I=8,L=16,N=17,P=32,V=64,z=128,H=256,R=512,Y=1024,F=2048,U=4096,B=L|P,W=V|P,X={"[object Number]":C,"[object String]":L,"[object Array]":P,"[object RegExp]":H,"[object Date]":R,"[object Function]":z,"[object Object]":V},G=function(e){if(null===e)return Y;if(!0===e||!1===e||e instanceof Boolean)return I;if(u===e)return F;var n=X[_.call(e)]||U;return C===n||e instanceof Number?isNaN(e)?j:isFinite(e)?C:O:L===n||e instanceof String?1===e.length?N:L:P===n||e instanceof Array?P:H===n||e instanceof RegExp?H:R===n||e instanceof Date?R:z===n||e instanceof Function?z:V===n?V:U},Z=function(e,n){return!!(n&G(e))},q=function(e){return!isNaN(parseFloat(e,10))&&isFinite(e)},J=function(e){return q(e)&&(e=+e,0===e%1&&e>=0)?!0:!1},K=function(){var e,n,t,i,r,l,o,a=arguments;for(n=a[0]||{},e=a.length,l=1;e>l;l++)if(t=a[l],V===G(t))for(r in t)i=t[r],o=G(i),n[r]=C&o?0+i:B&o?i.slice(0):i;return n},Q="hasOwnProperty",en="getAttribute",nn="setAttribute",tn="checked",rn="disabled",ln="selected",on="name",an="tagName",un="type",sn="value",cn="options",fn="selectedIndex",dn="parentNode",hn="style",pn="innerHTML",gn="innerText",mn="textContent",vn=JSON.parse,$n=(JSON.stringify,b.trim?function(e){return e.trim()}:function(e){return e.replace(/^\s+|\s+$/g,"")}),yn=b.startsWith?function(e,n,t){return e.startsWith(n,t||0)}:function(e,n,t){return n===e.slice(t||0,n.length)},bn=Date.now?Date.now:function(){return(new Date).getTime()},_n=function(){var e,n,t,i,r,l,o,a,u,s,c,f,d,h,p,g=arguments,m=g.length,v="|^",$="|v";if(m){for(o=1,p=[],l=[],f=[],c=[],e=m-1;e>=0;e--)s=g[e],c.unshift("f"+e),s.push?(f.unshift(s[1]),s=s[0]):f.unshift(null),h=s.slice(-2),$===h?(d=!0,s=s.slice(0,-2)):v===h?(d=!1,s=s.slice(0,-2)):d=!1,s=s.length?'["'+s.split(".").join('"]["')+'"]':"",n="a"+s,t="b"+s,f[0]&&(n=c[0]+"("+n+")",t=c[0]+"("+t+")"),i="a_"+e,r="b_"+e,l.unshift(""+i+"="+n+","+r+"="+t),a=d?""+o:"-"+o,u=d?"-"+o:""+o,p.unshift("("+i+" < "+r+" ? "+a+" : ("+i+" > "+r+" ? "+u+" : 0))"),o<<=1;return E(c.join(","),["return function(a,b) {","  var "+l.join(",")+";","  return "+p.join("+")+";","};"].join("\n")).apply(null,f)}return n="a",t="b",a="-1",u="1",p=""+n+" < "+t+" ? "+a+" : ("+n+" > "+t+" ? "+u+" : 0)",E("a,b","return "+p+";")},wn=function(e){for(var n=0;e=e.previousSibling;)n++;return n},kn=function(e,n){var t=e;if(n)for(;t[dn]&&t[dn]!==n;)t=t[dn];return wn(t)},En=function(e,n,t){var i,r=e.childNodes,l=r.length,o=null,a=0,u=0;for(t=t||1;l>a&&(i=r[a++],n!==i.nodeType||(o=i,++u!==t)););return o},Tn=function(e,n){return w.call((n||document).getElementsByTagName(e),0)},Sn=function(e,n,t){return!0===t?[(n||document).querySelector(e)]:w.call((n||document).querySelectorAll(e),0)},Dn=function(e,n){return yn(n,"$this::")?Sn(n.slice(7),e):Sn(n,null)},Mn=(function(){var e=document.createElement("div");return"outerHTML"in e?function(e){return e.outerHTML}:function(n){var t=e.cloneNode();return t.appendChild(n.cloneNode(!0)),t.innerHTML}}(),function(e){return!e||e.matches?"matches":e.matchesSelector?"matchesSelector":e.webkitMatchesSelector?"webkitMatchesSelector":e.mozMatchesSelector?"mozMatchesSelector":e.msMatchesSelector?"msMatchesSelector":e.oMatchesSelector?"oMatchesSelector":void 0}(this.Element?this.Element[c]:null)),xn="undefined"!=typeof window&&window.getComputedStyle?function(e){return window.getComputedStyle(e,null)}:function(e){return e.currentStyle},An=function(e){e._displayCached||(e._displayCached=xn(e).display||"block"),e[hn].display="none"!==e._displayCached?e._displayCached:"block",e._displayCached=u},Cn=function(e){e._displayCached||(e._displayCached=xn(e).display||"block"),e[hn].display="none"},On=function(e){var n=e.attributes[sn];return!n||n.specified?e[sn]:e.text},jn=function(e){for(var n,t,i=e[cn],r=e[fn],l="select-one"===e[un]||0>r,o=l?null:[],a=l?r+1:i.length,u=0>r?a:l?r:0;a>u;u++)if(t=i[u],!(!t[ln]&&u!==r||t[rn]||t[dn][rn]&&"OPTGROUP"===t[dn][an])){if(n=On(t),l)return n;o.push(n)}return o},In=function(e,n){var t,i,r=[].concat(n).map(k),l=e[cn];for(i=0;i<l.length;i++)t=l[i],t[ln]=-1<r.indexOf(On(t));r.length||(e[fn]=-1)},Ln=function(e){if(e)switch(e[an]){case"TEXTAREA":case"INPUT":return e[sn];case"SELECT":return jn(e);default:return mn in e?e[mn]:e[gn]}},Nn=function(e,n){if(e)switch(e[an]){case"TEXTAREA":case"INPUT":e[sn]=y(n);break;case"SELECT":In(e,n);break;default:mn in e?e[mn]=y(n):e[gn]=y(n)}},Pn=function(e){return e.length>0},Vn=/\s+/g,zn=function(e){var n=e.split("."),t=n[0];return n=n.slice(1).filter(Pn),[t,n.sort()]},Hn=function(e){return e.length?new h("(^|\\.)"+e.join("\\.(?:.*\\.|)")+"(\\.|$)"):!1},Rn=function(e,n){var t=this;t.v=e||null,t.n=n||{}},Yn="*",Fn="modelview",Un=0,Bn=function(e){return[e||"UUID",++Un,bn()].join("_")};this.Element&&!this.Element[c].addEventListener&&!function(){function e(e,n){Window[c][e]=HTMLDocument[c][e]=Element[c][e]=n}e("addEventListener",function(e,n){var t=this,i=t.addEventListener.listeners=t.addEventListener.listeners||{},r=i[e]=i[e]||[];r.length||(r.event=function(e){var n=t.document&&t.document.documentElement||t.documentElement||{scrollLeft:0,scrollTop:0};e.currentTarget=t,e.pageX=e.clientX+n.scrollLeft,e.pageY=e.clientY+n.scrollTop,e.preventDefault=function(){e.returnValue=!1},e.relatedTarget=e.fromElement||null,e.stopImmediatePropagation=function(){a=!1,e.cancelBubble=!0},e.stopPropagation=function(){e.cancelBubble=!0},e.target=e.srcElement||t,e.timeStamp=+new Date;for(var i,l=0,o=[].concat(r),a=!0;a&&(i=o[l]);++l)for(var u,s=0;u=r[s];++s)if(u==i){u.call(t,e);break}},t.attachEvent?t.attachEvent("on"+e,r.event):t["on"+e]=r.event),r.push(n)}),e("removeEventListener",function(e,n){for(var t,i=this,r=i.addEventListener.listeners=i.addEventListener.listeners||{},l=r[e]=r[e]||[],o=l.length-1;t=l[o];--o)if(t==n){l.splice(o,1);break}!l.length&&l.event&&(i.detachEvent?i.detachEvent("on"+e,l.event):i["on"+e]=!1)}),e("dispatchEvent",function(e){var n=this,t=e.type,i=n.addEventListener.listeners=n.addEventListener.listeners||{},r=i[t]=i[t]||[];try{return n.fireEvent("on"+t,e)}catch(l){return void(r.event&&r.event(e))}})}();var Wn="DOMEVENT_STOPPED",Xn=["blur","error","focus","focusin","focusout","load","resize","scroll"];a.Handler=function(e){if(!e[Wn]){var n,t,i,r,l,o,a,u=this,s=e.type,c=e.target,f=[];switch(c&&3===c.nodeType&&(c=c.parentNode),r=u.$element,i=r.$listeners,l=e.eventPhase||(e.target!==e.currentTarget?3:2)){case 1:f=i[1][s];break;case 2:i[0]&&i[0][s]&&(f=f.concat(i[0][s])),i[1]&&i[1][s]&&(f=f.concat(i[1][s]));break;case 3:f=i[0][s]}if(f)for(t=f.length;t&&c;){for(n=0;t>n;n++){if(!f)return;if(o=f[n],!o)break;if(o.matcher(o.matcherParam,c)&&(a=o.handler.call(c,e,c)),!1===a||!1===e.returnValue)return e[Wn]=!0,void e.preventDefault()}if(r===c)break;t=f.length,c=c.parentElement}}},a[c]={constructor:a,$element:null,$handle:null,dispose:function(){var e=this;return e.off().element(),e.$element=null,e.$handle=null,e},element:function(e){var n,t,i,r=this,l=r.$element;if(l){for(n=l.$listeners,t=v(n[1]),i=0;i<t.length;i++)l.removeEventListener(t[i],r.$handle,!0);for(t=v(n[0]),i=0;i<t.length;i++)l.removeEventListener(t[i],r.$handle,!1);l.$listeners=u}return e&&e.addEventListener?(r.$element=e,e.$listeners=e.$listeners||[{},{}],r):(r.$element=null,r)},on:function(e,n,a,s){var c,f,d,h,p,g,m,v,$=this;if(c=$.$element,!c)return $;if(!e)throw new TypeError("Invalid event type: "+e);if(m=e.split(Vn).map(zn),!m.length)return $;if("function"==typeof n&&(s=a,a=n,n=null),"function"!=typeof a)throw new TypeError("Handler must be a type of Function");for(h=0,p=m.length;p>h;h++)v=u===s?t(m[h][0]):!!s,f=c.$listeners[v?1:0],f[m[h][0]]||(f[m[h][0]]=[],c.addEventListener(m[h][0],$.$handle,v)),n?/^[a-z]+$/i.test(n)?(g=n,d=r):/^#[a-z0-9\-_]+$/i.test(n)?(g=n.slice(1),d=l):(g=n,d=o):(g=c,d=i),f[m[h][0]].push({selector:n,handler:a,matcher:d,matcherParam:g,namespace:m[h][1].join(".")});return $},off:function(e,n,t,i){var r,l,o,a,s,c,f,d,h,p,g=this,m=g.$element,v=!1;if(!m)return g;if("function"==typeof n&&(i=t,t=n,n=null),v=u===i?[0,1]:i?[1]:[0],p=e?e.split(/\s+/g).map(zn):[],p.length){for(c=0;c<v.length;c++)for(o=m.$listeners[v[c]],s=0;s<p.length;s++)if(d=p[s][1],f=p[s][0],h=Hn(d),f.length){if(a=o[f],!a||!a.length)continue;for(r=a.length-1;r>=0;r--)l=a[r],n&&n!==l.selector||t&&t!==l.handler||h&&!h.test(l.namespace)||a.splice(r,1);a.length||(delete o[f],m.removeEventListener(f,g.$handle,!!v[c]))}else for(f in o)if(a=o[f],a&&a.length){for(r=a.length-1;r>=0;r--)l=a[r],n&&n!==l.selector||t&&t!==l.handler||h&&!h.test(l.namespace)||a.splice(r,1);a.length||(delete o[f],m.removeEventListener(f,g.$handle,!!v[c]))}}else for(c=0;c<v.length;c++){o=m.$listeners[v[c]];for(f in o)if(a=o[f],a&&a.length){for(r=a.length-1;r>=0;r--)l=a[r],n&&n!==l.selector||t&&t!==l.handler||a.splice(r,1);a.length||(delete o[f],m.removeEventListener(f,g.$handle,!!v[c]))}}return g}};var Gn=2,Zn=function(e,n,t){var i=this;return i instanceof Zn?(i.type=e,i.target=n,i.currentTarget=n,i.timeStamp=bn(),i.eventPhase=Gn,void(i.namespace=t||null)):new Zn(e,n,t)};Zn[c]={constructor:Zn,type:null,target:null,currentTarget:null,timeStamp:null,eventPhase:Gn,bubbles:!1,cancelable:!1,namespace:null,stopPropagation:function(){this.bubbles=!1},preventDefault:function(){}};var qn={$PB:null,namespace:null,initPubSub:function(){var e=this;return e.$PB={},e},disposePubSub:function(){var e=this;return e.$PB=null,e},trigger:function(e,n){var t,i,r,l,o,a,u,s=this,c=s.$PB;if(a=zn(e),e=a[0],u="evt_"+e,c[Q](u)&&(t=c[u])&&(o=t.length)){for(i=t.slice(0),a=a[1].join("."),e=new Zn(e,s,a),l=0;o>l&&(r=i[l],r[2]&&r[3]||(r[3]=1,!1!==r[0](e,n)));l++);if(c[Q](u)&&(t=c[u])&&(o=t.length))if(t.oneOffs>0)for(l=o-1;l>=0;l--)i=t[l],i[2]&&i[3]&&(t.splice(l,1),t.oneOffs=t.oneOffs>0?t.oneOffs-1:0);else t.oneOffs=0}return s},on:function(e,n,t){var i,r,l,o,a,u=this,s=u.$PB;if(e&&e.length&&Z(n,z)){if(t=!!t,r=e.split(Vn).map(zn),!(a=r.length))return u;for(o=0;a>o;o++)e=r[o][0],i=r[o][1].join("."),l="evt_"+e,s[Q](l)||(s[l]=[],s[l].oneOffs=0),s[l].push([n,i,t,0]),t&&s[l].oneOffs++}return u},onTo:function(e,n,t,i){var r=this;return Z(t,z)&&(t=s(t,r)),e.on(n,t,i),r},off:function(e,n){var t,i,r,l,o,a,u,s,c,f,d,h=this,p=h.$PB;if(e&&e.length){for(u=Z(n,z),s=e.split(Vn).map(zn),c=0,f=s.length;f>c;c++)if(e=s[c][0],a=Hn(s[c][1]),e.length){if(d="evt_"+e,p[Q](d)&&(t=p[d])&&(l=t.length))for(r=l-1;r>=0;r--)o=t[r],u&&n!==o[0]||a&&!a.test(o[1])||(o[2]&&(t.oneOffs=t.oneOffs>0?t.oneOffs-1:0),t.splice(r,1))}else if(u||a)for(i in p)if(p[Q](i)){if(t=p[i],!t||!(l=t.length))continue;for(r=l-1;r>=0;r--)o=t[r],u&&n!==o[0]||a&&!a.test(o[1])||(o[2]&&(t.oneOffs=t.oneOffs>0?t.oneOffs-1:0),t.splice(r,1))}}else for(i in p)p[Q](i)&&delete p[i];return h},offFrom:function(e,n,t){var i=this;return e.off(n,t),i}};qn.publish=qn.trigger;var Jn=function(e,n){var t=this,i=arguments.length;t.$store={},t.$size=D,t.$interval=D,i>0&&e>0&&(t.$size=e),i>1&&n>0&&(t.$interval=n)};Jn[c]={constructor:Jn,$store:null,$size:null,$interval:null,dispose:function(){var e=this;return e.$store=null,e.$size=null,e.$interval=null,e},reset:function(){return this.$store={},this},size:function(e){return arguments.length?(e>0&&(this.$size=e),this):this.$size},interval:function(e){return arguments.length?(e>0&&(this.$interval=e),this):this.$interval},has:function(e){var n=this,t=e?n.$store["_"+e]:null;return!!(t&&bn()-t.time<=n.$interval)},get:function(e){if(e){var n,t=this,i=t.$store,r="_"+e;if(i[Q](r))return n=i[r],bn()-n.time>t.$interval?(delete i[r],u):n.data}return u},set:function(e,n){var t,i,r,l,o=this;if(e){for(l="_"+e,t=o.$store,i=o.$size,r=v(t);r.length>=i;)delete t[r.shift()];t[l]={key:e,data:n,time:bn()}}return o},del:function(e){var n=e?"_"+e:null;return n&&this.$store[Q](n)&&delete this.$store[n],this},toString:function(){return"[ModelView.Cache]"}};var Kn=function fi(e){return S(this,fi)?void(this.f=e||null):new fi(e)},Qn=function di(e){return S(this,di)?(this.f=e||null,void(this.fEach=1)):new di(e)},et=Math.floor,nt=Math.round,tt=Math.abs,it=function(e,n){return n.length-e.length},rt=function(e){return e.sort(it).map(x).join("|")},lt=function(e,n,t){var i=e.toString(),r=n-i.length;return r>0?new Array(r+1).join(t||" ")+i:i},ot={meridian:{am:"am",pm:"pm",AM:"AM",PM:"PM"},ordinal:{ord:{1:"st",2:"nd",3:"rd"},nth:"th"},timezone:["UTC","EST","MDT"],timezone_short:["UTC","EST","MDT"],day:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],day_short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],month:["January","February","March","April","May","June","July","August","September","October","November","December"],month_short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},at=function(e,n){var t,i,r,l,o,a,u,s=0,c=null,f=null,d=new Date;if(n=n||{},null!=e.time&&(f=new Date(e.time),null==e.year&&null==e.month&&null==e.day&&(c=new Date(f))),null===c){if(u=null!=e.ms?e.ms:null!=n.ms?n.ms:0,a=null!=e.second?e.second:null!=n.second?n.second:0,o=null!=e.minute?e.minute:null!=n.minute?n.minute:0,l=null!=e.hour?e.hour:null!=e.hour_12?"pm"===e.meridian?11+e.hour_12:e.hour_12-1:null!=n.hour?n.hour:"pm"===e.meridian?12:0,r=null!=e.day?e.day:null!=n.day?n.day:d.getDate(),i=null!=e.month?e.month:null!=n.month?n.month:d.getMonth()+1,t=null!=e.year?e.year:null!=n.year?n.year:d.getFullYear(),0>u)return!1;if(0>a||a>59)return!1;if(0>o||o>59)return!1;if(0>l||l>23)return!1;if(1>t||t>32767)return!1;if(s=t%4===0&t%100!==0|t%400===0,null!=e.leap&&s!==e.leap)return!1;if(1>i||i>12)return!1;if(1>r||r>31)return!1;if(2===i&&r>28+s)return!1;if(c=new Date(t,i-1,r,l,o,a,u),null!=e.day_week&&e.day_week!==c.getDay())return!1;if(null!=e.day_year&&e.day_year!==nt((new Date(t,i-1,r)-new Date(t,0,1))/864e5))return!1;if(null!=e.days_month&&e.days_month!==new Date(t,i,0).getDate())return!1;if(null!=e.meridian&&(l>11&&"am"===e.meridian||11>=l&&"pm"===e.meridian))return!1;if(null!=f){if(c.getFullYear()!==f.getFullYear())return!1;if(c.getMonth()!==f.getMonth())return!1;if(c.getDate()!==f.getDate())return!1;if(c.getHours()!==f.getHours())return!1;if(c.getHours()!==f.getHours())return!1;if(c.getMinutes()!==f.getMinutes())return!1;if(c.getSeconds()!==f.getSeconds())return!1}}return c},ut=function(e,n){n=n||ot;var t,i={d:"(31|30|29|28|27|26|25|24|23|22|21|20|19|18|17|16|15|14|13|12|11|10|09|08|07|06|05|04|03|02|01)",D:"("+rt(n.day_short.slice())+")",j:"(31|30|29|28|27|26|25|24|23|22|21|20|19|18|17|16|15|14|13|12|11|10|9|8|7|6|5|4|3|2|1)",l:"("+rt(n.day.slice())+")",N:"([1-7])",S:"",w:"([0-6])",z:"([1-3]?[0-9]{1,2})",W:"([0-5]?[0-9])",F:"("+rt(n.month.slice())+")",m:"(12|11|10|09|08|07|06|05|04|03|02|01)",M:"("+rt(n.month_short.slice())+")",n:"(12|11|10|9|8|7|6|5|4|3|2|1)",t:"(31|30|29|28)",L:"([01])",o:"(\\d{2,4})",Y:"([12][0-9]{3})",y:"([0-9]{2})",a:"("+rt([n.meridian.am,n.meridian.pm])+")",A:"("+rt([n.meridian.AM,n.meridian.PM])+")",B:"([0-9]{3})",g:"(12|11|10|9|8|7|6|5|4|3|2|1)",G:"(23|22|21|20|19|18|17|16|15|14|13|12|11|10|9|8|7|6|5|4|3|2|1|0)",h:"(12|11|10|09|08|07|06|05|04|03|02|01)",H:"(23|22|21|20|19|18|17|16|15|14|13|12|11|10|09|08|07|06|05|04|03|02|01|00)",i:"([0-5][0-9])",s:"([0-5][0-9])",u:"([0-9]{6})",e:"("+rt(n.timezone)+")",I:"([01])",O:"([+-][0-9]{4})",P:"([+-][0-9]{2}:[0-9]{2})",T:"("+rt(n.timezone_short)+")",Z:"(-?[0-9]{5})",U:"([0-9]{1,8})",c:"",r:""},r=n.ordinal.ord,l=[];for(t in r)r[Q](t)&&l.push(r[t]);l.push(n.ordinal.nth),i.S="("+rt(l)+")",i.c=i.Y+"-"+i.m+"-"+i.d+"\\\\"+i.T+i.H+":"+i.i+":"+i.s+i.P,i.r=i.D+",\\s"+i.d+"\\s"+i.M+"\\s"+i.Y+"\\s"+i.H+":"+i.i+":"+i.s+"\\s"+i.O;var o,t,a,u="";for(t=0,a=e.length;a>t;t++)o=e.charAt(t),u+=i[Q](o)?i[o]:x(o);return new h("^"+u+"$","")},st=function(e,n){n=n||ot;var t,i,r,l={d:function(e,n){return e=parseInt("0"===e.charAt(0)?e.slice(1):e,10),1>e||e>31?!1:null!=n.day&&e!==n.day?!1:void(n.day=e)},D:function(e,t){return e=n.day_short.indexOf(e),0>e?!1:null!=t.day_week&&e!==t.day_week?!1:void(t.day_week=e)},j:function(e,n){return e=parseInt(e,10),1>e||e>31?!1:null!=n.day&&e!==n.day?!1:void(n.day=e)},l:function(e,t){return e=n.day.indexOf(e),0>e?!1:null!=t.day_week&&e!==t.day_week?!1:void(t.day_week=e)},N:function(e,n){return e=parseInt(e,10),1>e||e>7?!1:(7===e&&(e=0),null!=n.day_week&&e!==n.day_week?!1:void(n.day_week=e))},S:null,w:function(e,n){return e=parseInt(e,10),0>e||e>6?!1:null!=n.day_week&&e!==n.day_week?!1:void(n.day_week=e)},z:function(e,n){return e=parseInt(e,10),0>e||e>366?!1:void(n.day_year=e)},W:function(e,n){return e=parseInt(e,10),1>e||e>53?!1:void(n.week_year=e)},F:function(e,t){return e=n.month.indexOf(e),0>e?!1:null!=t.month&&e+1!==t.month?!1:void(t.month=e+1)},m:function(e,n){return e=parseInt("0"===e.charAt(0)?e.slice(1):e,10),1>e||e>12?!1:null!=n.month&&e!==n.month?!1:void(n.month=e)},M:function(e,t){return e=n.month_short.indexOf(e),0>e?!1:null!=t.month&&e+1!==t.month?!1:void(t.month=e+1)},n:function(e,n){return e=parseInt(e,10),1>e||e>12?!1:null!=n.month&&e!==n.month?!1:void(n.month=e)},t:function(e,n){return e=parseInt(e,10),28>e||e>31?!1:void(n.days_month=e)},L:function(e,n){if("0"===e)n.leap=0;else{if("1"!==e)return!1;n.leap=1}},o:null,Y:function(e,n){return e=parseInt(e,10),1e3>e||e>3e3?!1:null!=n.year&&e!==n.year?!1:void(n.year=e)},y:function(e,n){return 2===e.length&&(e>="00"&&"69">=e?e="20"+e:e>="70"&&"99">=e&&(e="19"+e)),e=parseInt(e,10),1e3>e||e>3e3?!1:null!=n.year&&e!==n.year?!1:void(n.year=e)},a:function(e,t){if(n.meridian.am===e)e="am";else{if(n.meridian.pm!==e)return!1;e="pm"}return null!=t.meridian&&e!==t.meridian?!1:void(t.meridian=e)},A:function(e,t){if(n.meridian.AM===e)e="am";else{if(n.meridian.PM!==e)return!1;e="pm"}return null!=t.meridian&&e!==t.meridian?!1:void(t.meridian=e)},B:null,g:function(e,n){return e=parseInt(e,10),1>e||e>12?!1:null!=n.hour_12&&e!==n.hour_12?!1:void(n.hour_12=e)},G:function(e,n){return e=parseInt(e,10),0>e||e>23?!1:null!=n.hour&&e!==n.hour?!1:void(n.hour=e)},h:function(e,n){return e=parseInt("0"===e.charAt(0)?e.slice(1):e,10),1>e||e>12?!1:null!=n.hour_12&&e!==n.hour_12?!1:void(n.hour_12=e)},H:function(e,n){return e=parseInt("0"===e.charAt(0)?e.slice(1):e,10),0>e||e>23?!1:null!=n.hour&&e!==n.hour?!1:void(n.hour=e)},i:function(e,n){return e=parseInt("0"===e.charAt(0)?e.slice(1):e,10),0>e||e>59?!1:null!=n.minute&&e!==n.minute?!1:void(n.minute=e)},s:function(e,n){return e=parseInt("0"===e.charAt(0)?e.slice(1):e,10),0>e||e>59?!1:null!=n.second&&e!==n.second?!1:void(n.second=e)},u:function(e,n){for(var t=0;e.length>1&&"0"===e.charAt(t);)t++;return e=parseInt(e.slice(t),10),0>e?!1:(e=~~(e/1e3),null!=n.ms&&e!==n.ms?!1:void(n.ms=e))},e:null,I:null,O:null,P:null,T:null,Z:null,U:function(e,n){return e=parseInt(e,10),0>e?!1:(e*=1e3,null!=n.time&&e!==n.time?!1:void(n.time=e))},c:null,r:null},o=ut(e,n),a=0,u={};for(i=0,r=e.length;r>i;i++)t=e.charAt(i),l[Q](t)&&(++a,"c"===t?(u[a]=l.Y,u[++a]=l.m,u[++a]=l.d,++a,u[++a]=l.H,u[++a]=l.i,u[++a]=l.s,++a):"r"===t?(u[a]=l.D,u[++a]=l.d,u[++a]=l.M,u[++a]=l.Y,u[++a]=l.H,u[++a]=l.i,u[++a]=l.s,++a):l[t]&&(u[a]=l[t]));return function(e){var n,t,i=e.match(o),r={};if(!i)return!1;for(n=1;n<i.length;n++)if(u[Q](n)&&(t=u[n](i[n],r),!1===t))return!1;return at(r)}},ct=function(e,n,t){var i,r,l,o,a,u=G(e);if(L&u)return e;(Y|F)&u?a=new Date:R&u?a=new Date(e):C&u&&(a=new Date(1e3*e)),t=t||ot;var s,c={},f=a.getTimezoneOffset(),d=tt(f),h=a.getMonth();for(c.G=a.getHours(),c.j=a.getDate(),s=c.j%10,c.n=h+1,c.Y=a.getFullYear(),c.w=a.getDay(),c.N=c.w||7,c.d=lt(c.j,2,"0"),c.D=t.day_short[c.w],c.l=t.day[c.w],c.S=t.ordinal.ord[c.j]?t.ordinal.ord[c.j]:t.ordinal.ord[s]?t.ordinal.ord[s]:t.ordinal.nth,c.z=nt((new Date(c.Y,h,c.j)-new Date(c.Y,0,1))/864e5),c.W=lt(1+nt((new Date(c.Y,h,c.j-c.N+3)-new Date(c.Y,0,4))/864e5/7),2,"0"),c.F=t.month[h],c.m=lt(c.n,2,"0"),c.M=t.month_short[h],c.t=new Date(c.Y,h+1,0).getDate(),c.L=c.Y%4===0&c.Y%100!==0|c.Y%400===0,c.o=c.Y+(11===h&&c.W<9?1:0===h&&c.W>9?-1:0),c.y=c.Y.toString().slice(-2),c.a=c.G>11?t.meridian.pm:t.meridian.am,c.A=c.G>11?t.meridian.PM:t.meridian.AM,c.B=lt(et((3600*a.getUTCHours()+60*a.getUTCMinutes()+a.getUTCSeconds()+3600)/86.4)%1e3,3,"0"),c.g=c.G%12||12,c.h=lt(c.g,2,"0"),c.H=lt(c.G,2,"0"),c.i=lt(a.getMinutes(),2,"0"),c.s=lt(a.getSeconds(),2,"0"),c.u=lt(1e3*a.getMilliseconds(),6,"0"),c.e="",c.I=new Date(c.Y,0)-Date.UTC(c.Y,0)!==new Date(c.Y,6)-Date.UTC(c.Y,6)?1:0,c.O=(f>0?"-":"+")+lt(100*et(d/60)+d%60,4,"0"),c.P=c.O.substr(0,3)+":"+c.O.substr(3,2),c.T="UTC",c.Z=60*-f,c.U=a/1e3|0,c.c=[c.Y,"-",c.m,"-",c.d,"\\",c.T,c.H,":",c.i,":",c.s,c.P].join(""),c.r=[c.D,", ",c.d," ",c.M," ",c.Y," ",c.H,":",c.i,":",c.s," ",c.O].join(""),i="",l=0,o=n.length;o>l;l++)r=n.charAt(l),i+=c[Q](r)?c[r]:r;return i},ft=/\$0/g,dt=function hi(e){return e.NOT=function(){return hi(function(n,t){return!e.call(this,n,t)})},e.AND=function(n){return hi(function(t,i){var r=this;return e.call(r,t,i)&&n.call(r,t,i)})},e.OR=function(n){return hi(function(t,i){var r=this;return e.call(r,t,i)||n.call(r,t,i)})},e.XOR=function(n){return hi(function(t,i){var r=this,l=e.call(r,t,i),o=n.call(r,t,i);return l&&!o||o&&!l})},e.EQ=function(n){return hi(function(t,i){var r=this,l=e.call(r,t,i),o=n.call(r,t,i);return l==o})},e.NEQ=function(n){return hi(function(t,i){var r=this,l=e.call(r,t,i),o=n.call(r,t,i);return l!=o})},e},ht={TypeCaster:function(e){return e},Cast:{COMPOSITE:function(){var e=arguments;return Z(e[0],P)&&(e=e[0]),function(n,t){for(var i=e.length;i--;)n=e[i].call(this,n,t);return n}},EACH:Qn,FIELDS:function(e){return e=K({},e||{}),function(n){var t,i,r,l,o,a=this;for(t in e)if(e[Q](t))if(i=e[t],r=n[t],i.fEach&&Z(r,P)){for(l=r.length,o=0;l>o;o++)r[o]=i.f.call(a,r[o]);n[t]=r}else n[t]=i.call(a,r);return n}},DEFAULT:function(e){return function(n){var t=G(n);return(F&t||L&t&&!$n(n).length)&&(n=e),n}},BOOL:function(e){if(Z(e,L)&&e.length){var n=e.toLowerCase();return"true"===n||"on"===n||"1"===n}return!!e},INT:function(e){return parseInt(e,10)||0},FLOAT:function(e){return parseFloat(e,10)||0},MIN:function(e){return function(n){return e>n?e:n}},MAX:function(e){return function(n){return n>e?e:n}},CLAMP:function(e,n){if(e>n){var t=n;n=e,e=t}return function(t){return e>t?e:t>n?n:t}},TRIM:function(e){return $n(y(e))},LCASE:function(e){return y(e).toLowerCase()},UCASE:function(e){return y(e).toUpperCase()},PAD:function(e,n,t){return t=t||"L",function(i){var r,l,o=y(i),a=o.length,u=n-a;return u>0&&("LR"===t?(l=~~(u/2),r=u-l,o=new Array(r+1).join(e)+o+new Array(l+1).join(e)):"R"===t?o+=new Array(u+1).join(e):"L"===t&&(o=new Array(u+1).join(e)+o)),o}},STR:function(e){return""+e},DATETIME:function(e,n){return e=e||"Y-m-d",n=n||ot,function(t){return ct(t,e,n)}},FORMAT:function(e){return Z(e,L)?(e=new Gt(e,ft),function(n){return e.render({$0:n})}):e instanceof Gt?function(n){return e.render(n)}:Z(e,z)?function(n){return e(n)}:function(e){return y(e)}}},add:function(e,n){return Z(e,L)&&Z(n,z)&&(ht.Cast[e]=n),ht},del:function(e){return Z(e,L)&&ht.Cast[Q](e)&&delete ht.Cast[e],ht},toString:function(){return"[ModelView.Type]"}},pt={Validator:dt,Validate:{EACH:Qn,FIELDS:function(e){return e=K({},e||{}),dt(function(n){var t,i,r,l,o,a=this;for(t in e)if(e[Q](t))if(i=e[t],r=n[t],i.fEach&&Z(r,P)){for(l=r.length,o=0;l>o;o++)if(!i.f.call(a,r[o]))return!1}else if(!i.call(a,r))return!1;return!0})},NUMERIC:dt(function(e){return q(e)}),EMPTY:dt(function(e){return!e||!$n(y(e)).length}),NOT_EMPTY:dt(function(e){return!!(e&&0<$n(y(e)).length)}),MAXLEN:function(e){return dt(E("v","return v.length <= "+(e||0)+";"))},MINLEN:function(e){return dt(E("v","return v.length >= "+(e||0)+";"))},MATCH:function(e){return dt(function(n){return e.test(n)})},NOT_MATCH:function(e){return dt(function(n){return!e.test(n)})},EQUAL:function(e,n){return dt(S(e,Kn)?E("v","return this.$data."+e.f+" "+(!1!==n?"===":"==")+" v;"):!1!==n?function(n){return e===n}:function(n){return e==n})},NOT_EQUAL:function(e,n){return dt(S(e,Kn)?E("v","return this.$data."+e.f+" "+(!1!==n?"!==":"!=")+" v;"):!1!==n?function(n){return e!==n}:function(n){return e!=n})},GREATER_THAN:function(e,n){return S(e,Kn)?e="this.$data."+e.f:Z(e,L)&&(e='"'+e+'"'),dt(E("v","return "+e+" "+(!1!==n?"<":"<=")+" v;"))},LESS_THAN:function(e,n){return S(e,Kn)?e="this.$data."+e.f:Z(e,L)&&(e='"'+e+'"'),dt(E("v","return "+e+" "+(!1!==n?">":">=")+" v;"))},BETWEEN:function(e,n,t){Z(e,P)&&(t=n,n=e[1],e=e[0]);var i,r=S(e,Kn),l=S(n,Kn);return!r&&!l&&e>n&&(i=n,n=e,e=i),e=r?"this.$data."+e.f:Z(e,L)?'"'+e+'"':e,n=l?"this.$data."+n.f:Z(n,L)?'"'+n+'"':n,dt(!1!==t?E("v","return ( "+e+" < v ) && ( "+n+" > v );"):E("v","return ( "+e+" <= v ) && ( "+n+" >= v );"))},NOT_BETWEEN:function(e,n,t){Z(e,P)&&(t=n,n=e[1],e=e[0]);var i,r=S(e,Kn),l=S(n,Kn);return!r&&!l&&e>n&&(i=n,n=e,e=i),e=r?"this.$data."+e.f:Z(e,L)?'"'+e+'"':e,n=l?"this.$data."+n.f:Z(n,L)?'"'+n+'"':n,dt(!1!==t?E("v","return ( "+e+" > v ) || ( "+n+" < v );"):E("v","return ( "+e+" >= v ) || ( "+n+" <= v );"))},IN:function(){var e=w.call(arguments);return Z(e[0],P)&&(e=e[0]),dt(function(n){return-1<e.indexOf(n)})},NOT_IN:function(){var e=w.call(arguments);return Z(e[0],P)&&(e=e[0]),dt(function(n){return 0>e.indexOf(n)})},MIN_ITEMS:function(e,n){return e=parseInt(e,10),dt(z===G(n)?function(t){return t.length>=e&&t.filter(n).length>=e}:function(n){return n.length>=e})},MAX_ITEMS:function(e,n){return e=parseInt(e,10),dt(z===G(n)?function(t){return t.filter(n).length<=e}:function(n){return n.length<=e})},EMAIL:function(e){return dt(function(n){return e.test(n)})}(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/),URL:function(e){return dt(function(n){return e.test(n)})}(new h("^(?!mailto:)(?:(?:http|https|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i")),DATETIME:function(e,n){var t=st(e||"Y-m-d",n||ot);return dt(function(e){return!1!==t(e)})}},add:function(e,n){return Z(e,L)&&Z(n,z)&&(pt.Validate[e]=Z(n.XOR,z)?n:dt(n)),pt},del:function(e){return Z(e,L)&&pt.Validate[Q](e)&&delete pt.Validate[e],pt},toString:function(){return"[ModelView.Validation]"}},gt=function(e,n){if(!e)return null;var t,i,r=[],l=e.length;for(t=0;l>t;t++)i=e[t],i&&(i[Q](n)&&r.push(i[n].n),i[Q](Yn)&&r.push(i[Yn].n));return r.length?r:null},mt=function(e,n){if(!e)return null;var t,i,r=e.length;if(u!==n){for(t=0;r>t;t++)if(i=e[t]){if(i[Q](n)&&i[n].v)return i[n].v;if(i[Q](Yn)&&i[Yn].v)return i[Yn].v}}else for(t=0;r>t;t++)if(i=e[t],i&&i.v)return i.v;return null},vt=function(e,n,t,i){for(var r,l=t,o=0,a=n.length;a>o;)r=n[o++],l[Q](r)||(l[r]=new Rn),l=l[r],a>o?l=l.n:i?(l.n[Q](Yn)||(l.n[Yn]=new Rn),l.n[Yn].v=e):l.v=e;return t},$t=function(e,n,t,i){for(var r,l,o=n,a=t?[t]:null,u=0,s=e.length;s>u;){if(r=e[u++],l=G(o),!(s>u))return a&&mt(a,r)?!0:l&W&&o[Q](r)?!0:V===l&&"length"==r?!0:!1;if(l&W&&o[Q](r)){if(o=o[r],o instanceof i)return[i,o,e.slice(u)];a&&(a=gt(a,r))}else if(!a||!(a=gt(a,r)))return!1}return!1},yt=function(e,n,t,i){for(var r,l,o=n,a=t?[t]:null,u=0,s=e.length;s>u;){if(r=e[u++],l=G(o),!(s>u))return a&&(a=mt(a,r))?[!1,a]:l&W&&o[Q](r)?[!0,o[r]]:V===l&&"length"==r?[!0,v(o).length]:!1;if(l&W&&o[Q](r)){if(o=o[r],o instanceof i)return[i,o,e.slice(u)];a&&(a=gt(a,r))}else if(!a||!(a=gt(a,r)))return!1}return!1},bt=function(e,n,t,i){for(var r,l,o=n,a=t,u=0,s=e.length;s>u;){if(r=e[u++],l=G(o),!(s>u))return o[r]instanceof i?[i,o[r],e.slice(u)]:a&&l&W&&o[Q](r)?[!0,o,r,a]:!1;if(!(l&W&&o[Q](r)))return!1;if(o=o[r],o instanceof i)return[i,o,e.slice(u)];if(!a||!(a=gt(a,r)))return!1}return!1},_t=function(e,n,t,i,r,l,o){var a,u,s=n,c=null,f=null,d=null,h=0,p=e.length;for(o=!1!==o,o&&(c=[t],f=[i],d=[r]);p>h;)if(a=e[h++],u=G(s),p>h)if(u&W&&s[Q](a)){if(s=s[a],s instanceof l)return[l,s,e.slice(h),0,null,null,null];o&&(c=gt(c,a),f=gt(f,a),d=gt(d,a))}else{if(!(o&&d&&(d=gt(d,a))))return[!1,s,a,e,null,null,null];c=gt(c,a),f=gt(f,a)}else if(u&W)return s[a]instanceof l?[l,s[a],e.slice(h),0,null,null,null]:s[Q](a)?[!0,s,a,e.slice(h),c,f,d]:[!1,s,a,e.slice(h),c,f,d];return[!1,s,a,e.slice(h),null,null,null]},wt=/\[([^\]]*)\]/g,kt=/^\.+|\.+$/g,Et=function(e){return e.replace(wt,".$1").replace(kt,"")},Tt=function(e){return"["+e.split(".").join("][")+"]"},St=function(e){var n=new h("^"+e+"([\\.|\\[])");return function(e,t){var i=e.replace(n,"$1");return t?Et(i):i}},Dt=function pi(e,n,t,i){var r,l,o=!1;if(o=S(t,Qn))t=t.f,vt(t,-1<n.indexOf(".")?n.split("."):[n],i,o);else if(l=G(t),z&l)vt(t,-1<n.indexOf(".")?n.split("."):[n],i,o);else if(W&l)for(r in t)t[Q](r)&&pi(e,n+"."+r,t[r],i)},Mt=function gi(e,n,t,i){var r,l;if(l=G(t),z&l)vt(t,-1<n.indexOf(".")?n.split("."):[n],i);else if(W&l)for(r in t)t[Q](r)&&gi(e,n+"."+r,t[r],i)},xt=function mi(e,n,t){var i,r;for(i in t)t[Q](i)&&(r=t[i],n[Q](i)?Z(n[i],W)&&Z(r,W)&&(n[i]=mi(e,n[i],r)):n[i]=r);return n},At=function vi(e,n,t,i){var r,l;for(arguments.length<3&&(t=e.$data);t instanceof n;)t=t.data();if(l=i||G(t),t=V&l?K({},t):P&l?t.slice(0):t,W&l)for(r in t)t[Q](r)&&(t[r]instanceof n?t[r]=vi(t[r],n,K({},t[r].data())):W&(l=G(t[r]))&&(t[r]=vi(e,n,t[r],l)));return t},Ct=function $i(e,n,t,i,r,l){var o,a,u,s,c,f,d;if(l=l?l+".":"",i=i||e.$data,r=r||[e.$types],r&&r.length)if(t){if(c=bt(d=t.split("."),o=i,r,n))if(o=c[1],a=c[2],n===c[0])f=d.slice(0,d.length-a.length).join("."),$i(o,n,a.length?a.join("."):null);else if(f=d.slice(0,-1).join("."),u=o[a],s=mt(c[3],a),s&&(o[a]=s.call(e,u,l+t)),W&G(u)&&(r=gt(c[3],a))&&r.length){f+=f?"."+a:a,f=l+f;for(a in u)u[Q](a)&&$i(e,n,a,u,r,f)}}else if(W&G(i))for(a in i)i[Q](a)&&$i(e,n,a,i,r)},Ot=function yi(e,n,t,i,r,l){var o,a,u,s,c,f,d,h,p,g={isValid:!0,errors:[]};if(r=r||e.$data,l=l||[e.$validators],l&&l.length)if(i){if(p=function(e){return d?d+"."+e:e},c=bt(h=i.split("."),o=r,l,n))if(o=c[1],a=c[2],n===c[0]){if(d=h.slice(0,h.length-a.length).join("."),f=yi(o,n,t,a.length?a.join("."):null),f.isValid||(g.errors=g.errors.concat(f.errors.map(p)),g.isValid=!1),!g.isValid&&t)return g}else{if(d=h.slice(0,-1).join("."),u=o[a],s=mt(c[3],a),s&&!s.call(e,u,i)&&(g.errors.push(i),g.isValid=!1,t))return g;if(W&G(u)&&(l=gt(c[3],a))&&l.length){d+=d?"."+a:a;for(a in u)if(u[Q](a)&&(f=yi(e,n,t,a,u,l),f.isValid||(g.errors=g.errors.concat(f.errors.map(p)),g.isValid=!1),t&&!g.isValid))return g}}}else if(W&G(r))for(a in r)if(r[Q](a)&&(f=yi(e,n,t,a,r,l),f.isValid||(g.errors=g.errors.concat(f.errors),g.isValid=!1),t&&!g.isValid))return g;return g},jt=function(e,n){var t,i,r,l,o,a,u,s,c,f,d,h,p,g,m,$=e.target,y=$.$syncTo,b=n.key;if(b){for(i=b+".",r=v(y),l=r.length,p=$.atomic,g=$.$atom,$.atomic=!0,$.$atom=b,s=0;l>s;s++)if(c=r[s],c===b||yn(c,i))for(f=y[c],t=$.get(c),d=0,h=f.length;h>d;d++)a=f[d][0],o=f[d][1],$.__syncing[a.$id]=$.__syncing[a.$id]||[],m=$.__syncing[a.$id],0>m.indexOf(o)&&(m.push(o),(u=f[d][2])?u.call(a,o,t,c,$):a.set(o,t,1),m.pop());
$.$atom=g,$.atomic=p}},It=function bi(e,n,t,i,r,l,o){var a=this;return a instanceof bi?(a.$id=Bn("Model"),a.namespace=a.id=e||a.$id,a.key=St(a.id),a.$view=null,a.atomic=!1,a.$atom=null,a.$autovalidate=!0,a.$types={},a.$validators={},a.$getters={},a.$setters={},a.$idependencies={},a.$syncTo={},void a.data(n||{}).types(t).validators(i).getters(r).setters(l).dependencies(o).initPubSub()):new bi(e,n,t,i,r,l,o)};It.count=function(e){if(!arguments.length)return 0;var n=G(e);return V===n?v(e).length:P===n?e.length:F!==n?1:0},It.Sorter=_n,It.Field=Kn,It[c]=K(m(p[c]),qn,{constructor:It,id:null,$id:null,$view:null,$data:null,$types:null,$idependencies:null,$validators:null,$getters:null,$setters:null,atomic:!1,$atom:null,$autovalidate:!0,$syncTo:null,$syncHandler:null,__syncing:null,dispose:function(){var e=this;return e.disposePubSub().$view=null,e.$data=null,e.$types=null,e.$idependencies=null,e.$validators=null,e.$getters=null,e.$setters=null,e.atomic=!1,e.$atom=null,e.key=null,e.$autovalidate=!1,e.$syncTo=null,e.$syncHandler=null,e.__syncing=null,e},view:function(e){var n=this;return arguments.length?(n.$view=e,n):n.$view},data:function(e){var n=this;return arguments.length?(n.$data=e,n):n.$data},dependencies:function(e){var n,t,i,r,l,o,a=this,u=a.$idependencies;if(Z(e,V))for(n in e)if(e[Q](n))for(t=e[n]?[].concat(e[n]):[],i=0;i<t.length;i++)for(l=t[i].split("."),r=l[0],u[Q](r)||(u[r]=[]),0>u[r].indexOf(n)&&u[r].push(n),o=1;o<l.length;o++)r+="."+l[o],u[Q](r)||(u[r]=[]),0>u[r].indexOf(n)&&u[r].push(n);return a},defaults:function(e){var n,t,i=this,r=i.$data;if(Z(e,V))for(n in e)e[Q](n)&&(t=e[n],r[Q](n)?Z(r[n],W)&&Z(t,W)&&(r[n]=xt(i,r[n],t)):r[n]=t);return i},types:function(e){var n,t=this;if(Z(e,V))for(n in e)e[Q](n)&&Dt(t,n,e[n],t.$types);return t},validators:function(e){var n,t=this;if(Z(e,V))for(n in e)e[Q](n)&&Dt(t,n,e[n],t.$validators);return t},getters:function(e){var n,t=this;if(Z(e,V))for(n in e)e[Q](n)&&Mt(t,n,e[n],t.$getters);return t},setters:function(e){var n,t=this;if(Z(e,V))for(n in e)e[Q](n)&&Mt(t,n,e[n],t.$setters);return t},serialize:function(){return At(this,It)},typecast:function(e){return Ct(this,It,e),this},validate:function(e,n){return Ot(this,It,!!e,n)},autovalidate:function(e){var n=this;return arguments.length?(n.$autovalidate=!!e,n):n.$autovalidate},has:function(e,n){var t,i=this,r=i.$data,l=i.$getters;return 0>e.indexOf(".")&&(r[Q](e)||!n&&(t=l[e]||l[Yn])&&t.v)?!0:(t=$t(e.split("."),r,n?null:l,It))?!0===t?!0:t[1].has(t[2].join(".")):!1},get:function(e,n){var t,i=this,r=i.$data,l=i.$getters;return 0>e.indexOf(".")?!n&&(t=l[e]||l[Yn])&&t.v?t.v.call(i,e):r[e]:(t=yt(e.split("."),r,n?null:l,It))?It===t[0]?t[1].get(t[2].join("."),n):!1===t[0]?t[1].call(i,e):t[1]:u},getAll:function(e,n){var t,i,r,l,o,a,u,s,c,f,d,h,p,g,m,$,y,b=this,_=[];if(!e||!e.length)return _;for(e.substr&&(e=[e]),n=!0===n,g=b.$data,d=n?null:[b.$getters],l=0,o=e.length;o>l;l++)for(y=e[l],m=[[g,y,d]];m.length;)for($=m.pop(),c=$[0],y=$[1],h=$[2],a=y.split("."),s=0,u=a.length;u>s;)if(r=a[s++],u>s)if(f=G(c),f&V){if(Yn===r){for(r=a.slice(s).join("."),t=v(c),i=0;i<t.length;i++)m.push([c,t[i]+"."+r,gt(h,t[i])]);break}c[Q](r)&&(c=c[r],h=gt(h,r))}else{if(!(f&P))break;if(Yn===r){for(r=a.slice(s).join("."),i=0;i<c.length;i++)m.push([c,""+i+"."+r,gt(h,""+i)]);break}c[Q](r)&&(c=c[r],h=gt(h,r))}else if(f=G(c),f&V)if(Yn===r)for(t=v(c),i=0;i<t.length;i++)_.push(n?c[t[i]]:(p=mt(h,t[i]))||(p=mt(h,r))?p.call(b,c[t[i]]):c[t[i]]);else!n&&(p=mt(h,r))?_.push(p.call(b,c[r])):c[Q](r)&&_.push(c[r]);else if(f&P)if(Yn===r)for(i=0;i<c.length;i++)_.push(n?c[i]:(p=mt(h,i))||(p=mt(h,r))?p.call(b,c[i]):c[i]);else!n&&(p=mt(h,r))?_.push(p.call(b,c[r])):c[Q](r)&&_.push(c[r]);return _},set:function(e,n,t,i){var r,l,o,a,u,s,c,f,d,h,p,g,m,v,$,y=this,b=null,_=null,w=!1,k=!1,E=y.$autovalidate;if(y.atomic&&yn(e,y.$atom))return y;if(o=y.$data,h=y.$types,p=y.$validators,g=y.$setters,m=y.$idependencies,w=P&G(n),0>e.indexOf("."))a=e,d=(r=g[a])?r.v:null,c=(r=h[a]||h[Yn])?r.v:null,f=E&&(r=p[a]||p[Yn])?r.v:null,w&&(c||(b=(l=h[a]||h[Yn])&&l.n[Yn]?l.n[Yn].v:null),E&&!f&&(_=(l=p[a]||p[Yn])&&l.n[Yn]?l.n[Yn].v:null)),k=!0;else if(r=_t(e.split("."),o,h,E?p:null,g,It)){if(o=r[1],a=r[2],It===r[0])return a.length?(a=a.join("."),v=o.get(a),v!==n?o.set(a,n,t,i):t=!1):(v=o.data(),v!==n?o.data(n):t=!1),t&&(y.publish("change",{key:e,value:n,action:"set",valuePrev:v,$callData:i}),m[Q](e)&&y.notify(m[e])),y;if(d=mt(r[6],a),!d&&!1===r[0]&&r[3].length)return y;c=mt(r[4],a),f=mt(r[5],a),w&&(c||(b=mt(gt(r[4],a),Yn)),E&&!f&&(_=mt(gt(r[5],a),Yn))),k=!0}if(k){if(c)n=c.call(y,n,e);else if(b)for(u=0,s=n.length;s>u;u++)n[u]=b.call(y,n[u],e);if($=!0,f)$=f.call(y,n,e);else if(_)for(u=0,s=n.length;s>u;u++)if(!_.call(y,n[u],e)){$=!1;break}if(!$)return t&&(i&&(i.error=!0),y.publish("error",{key:e,value:o[a],action:"set",$callData:i})),y;if(d)return!1!==d.call(y,e,n,t)&&(t&&(y.publish("change",{key:e,value:n,action:"set",$callData:i}),m[Q](e)&&y.notify(m[e])),y.$atom&&e===y.$atom&&(y.atomic=!0)),y;v=o[a],v!==n&&(o[a]=n,t&&(y.publish("change",{key:e,value:n,valuePrev:v,action:"set",$callData:i}),m[Q](e)&&y.notify(m[e])),y.$atom&&e===y.$atom&&(y.atomic=!0))}return y},add:function(e,n,t,i){var r,l,o,a,s,c,f,d,h,p,g,m,v,$=this,y=-1,b=null,_=null,w=!1,k=!1,E=$.$autovalidate;if($.atomic&&yn(e,$.$atom))return $;if(l=$.$data,h=$.$types,p=$.$validators,g=$.$setters,m=$.$idependencies,w=P&G(n),0>e.indexOf("."))o=e,d=(r=g[o])&&r.n[Yn]?r.n[Yn].v:null,c=(r=h[o]||h[Yn])&&r.n[Yn]?r.n[Yn].v:null,f=E&&(r=p[o]||p[Yn])&&r.n[Yn]?r.n[Yn].v:null,w&&(c||(b=mt(gt(gt([h[o]||h[Yn]],Yn),Yn),Yn)),E&&!f&&(_=mt(gt(gt([p[o]||p[Yn]],Yn),Yn),Yn))),k=!0;else if(r=_t(e.split("."),l,h,E?p:null,g,It)){if(l=r[1],o=r[2],It===r[0])return o.length?(o=o.join("."),l.add(o,n,t,i)):(y=0,l.data(n)),t&&($.publish("change",{key:e,value:n,action:"append",index:y,$callData:i}),m[Q](e)&&$.notify(m[e])),$;if(d=mt(gt(r[6],o),Yn),!d&&!1===r[0]&&r[3].length)return $;c=mt(gt(r[4],o),Yn),f=mt(gt(r[5],o),Yn),w&&(c||(b=mt(gt(gt(r[4],o),Yn),Yn)),E&&!f&&(_=mt(gt(gt(r[5],o),Yn),Yn))),k=!0}if(k){if(c)n=c.call($,n,e);else if(b)for(a=0,s=n.length;s>a;a++)n[a]=b.call($,n[a],e);if(v=!0,f)v=f.call($,n,e);else if(_)for(a=0,s=n.length;s>a;a++)if(!_.call($,n[a],e)){v=!1;break}if(!v)return t&&(i&&(i.error=!0),$.publish("error",{key:e,value:u,action:"append",index:-1,$callData:i})),$;if(d)return!1!==d.call($,e,n,t)&&(t&&(P===G(l[o])&&(y=l[o].length),$.publish("change",{key:e,value:n,action:"append",index:y,$callData:i}),m[Q](e)&&$.notify(m[e])),$.$atom&&e===$.$atom&&($.atomic=!0)),$;P===G(l[o])?(y=l[o].length,l[o].push(n)):(y=-1,l[o]=n),t&&($.publish("change",{key:e,value:n,action:"append",index:y,$callData:i}),m[Q](e)&&$.notify(m[e])),$.$atom&&e===$.$atom&&($.atomic=!0)}return $},ins:function(e,n,t,i,r){var l,o,a,s,c,f,d,h,p,g,m,v,$,y=this,b=null,_=null,w=!1,k=!1,E=y.$autovalidate;if(y.atomic&&yn(e,y.$atom))return y;if(o=y.$data,p=y.$types,g=y.$validators,m=y.$setters,v=y.$idependencies,w=P&G(n),0>e.indexOf("."))a=e,h=(l=m[a])&&l.n[Yn]?l.n[Yn].v:null,f=(l=p[a]||p[Yn])&&l.n[Yn]?l.n[Yn].v:null,d=E&&(l=g[a]||g[Yn])&&l.n[Yn]?l.n[Yn].v:null,k=!0,w&&(f||(b=mt(gt(gt([p[a]||p[Yn]],Yn),Yn),Yn)),E&&!d&&(_=mt(gt(gt([g[a]||g[Yn]],Yn),Yn),Yn)));else if(l=_t(e.split("."),o,p,E?g:null,m,It)){if(o=l[1],a=l[2],It===l[0])return a.length?(a=a.join("."),o.ins(a,n,t,i,r)):o.data(n),i&&(y.publish("change",{key:e,value:n,action:"insert",index:t,$callData:r}),v[Q](e)&&y.notify(v[e])),y;if(h=mt(gt(l[6],a),Yn),!h&&!1===l[0]&&l[3].length)return y;f=mt(gt(l[4],a),Yn),d=mt(gt(l[5],a),Yn),w&&(f||(b=mt(gt(gt(l[4],a),Yn),Yn)),E&&!d&&(_=mt(gt(gt(l[5],a),Yn),Yn))),k=!0}if(k){if(f)n=f.call(y,n,e);else if(b)for(s=0,c=n.length;c>s;s++)n[s]=b.call(y,n[s],e);if($=!0,d)$=d.call(y,n,e);else if(_)for(s=0,c=n.length;c>s;s++)if(!_.call(y,n[s],e)){$=!1;break}if(!$)return i&&(r&&(r.error=!0),y.publish("error",{key:e,value:u,action:"insert",index:-1,$callData:r})),y;if(h)return!1!==h.call(y,e,n,i)&&(i&&(y.publish("change",{key:e,value:n,action:"insert",index:t,$callData:r}),v[Q](e)&&y.notify(v[e])),y.$atom&&e===y.$atom&&(y.atomic=!0)),y;P===G(o[a])?o[a].splice(t,0,n):(t=-1,o[a]=n),i&&(y.publish("change",{key:e,value:n,action:"insert",index:t,$callData:r}),v[Q](e)&&y.notify(v[e])),y.$atom&&e===y.$atom&&(y.atomic=!0)}return y},del:function(e,n,t,i){var r,l,o,a,s=this,c=-1,f=!1;if(s.atomic&&yn(e,s.$atom))return s;if(t=!1!==t,l=s.$data,0>e.indexOf("."))o=e,f=!0;else if(r=_t(e.split("."),l,null,null,null,It,!1)){if(l=r[1],o=r[2],It===r[0]&&o.length)return o=o.join("."),a=l.get(o),l.del(o,t,n,i),n&&s.publish("change",{key:e,value:a,action:"delete",index:c,rearrange:t,$callData:i}),s.$atom&&e===s.$atom&&(s.atomic=!0),s;if(r[3].length)return s;f=!0}return f&&(a=l[o],l[o]=u,t?(T=G(l),P==T&&J(o)?(c=+o,l.splice(c,1)):V==T&&delete l[o]):delete l[o],n&&s.publish("change",{key:e,value:a,action:"delete",index:c,rearrange:t,$callData:i}),s.$atom&&e===s.$atom&&(s.atomic=!0)),s},delAll:function(e,n){var t,i,r,l,o,a,u,s,c,f,d,h,p,g,m=this;if(!e||!e.length)return m;for(e.substr&&(e=[e]),n=!1!==n,d=m.$data,l=0,o=e.length;o>l;l++)for(g=e[l],h=[[d,g]];h.length;)for(p=h.pop(),c=p[0],g=p[1],a=g.split("."),s=0,u=a.length;u>s;)if(r=a[s++],u>s)if(f=G(c),f&V){if(Yn===r){for(r=a.slice(s).join("."),t=v(c),i=0;i<t.length;i++)h.push([c,t[i]+"."+r]);break}c[Q](r)&&(c=c[r])}else{if(!(f&P))break;if(Yn===r){for(r=a.slice(s).join("."),i=0;i<c.length;i++)h.push([c,""+i+"."+r]);break}c[Q](r)&&(c=c[r])}else if(f=G(c),f&V)if(Yn===r)for(t=v(c),i=0;i<t.length;i++)delete c[t[i]];else c[Q](r)&&delete c[r];else if(f&P)if(Yn===r)for(i=c.length-1;i>=0;i--)n?c.splice(i,1):delete c[i];else c[Q](r)&&(n&&J(r)?c.splice(+r,1):delete c[r]);return m},sync:function(e,n){var t,i,r,l,o,a,u=this;for(t in n)if(n[Q](t)){for(i=n[t],u.$syncTo[t]=u.$syncTo[t]||[],r=null,P===G(i)&&(r=i[1]||null,i=i[0]),l=u.$syncTo[t],a=1,o=l.length-1;o>=0;o--)if(e===l[o][0]&&i===l[o][1]){l[o][2]=r,a=0;break}a&&l.push([e,i,r])}return u.$syncHandler||(u.__syncing=u.__syncing||{},u.on("change",u.$syncHandler=jt)),u},unsync:function(e){var n,t,i,r=this,l=r.$syncTo;for(n in l)if(l[Q](n)){if(!(t=l[n])||!t.length)continue;for(i=t.length-1;i>=0;i--)e===t[i][0]&&(r.__syncing&&r.__syncing[e.$id]&&A(r.__syncing,e.$id),t.splice(i,1))}return r},notify:function(e,n,t){var i,r,l,o,a,u,s=this,c=s.$idependencies,f=[],d={};if(e){if(a=G(e),n=n||"change",l={key:"",action:"set"},t&&(t[Q]("value")&&(l.value=t.value),t[Q]("action")&&(l.action=t.action),t[Q]("index")&&(l.index=t.index),t[Q]("rearrange")&&(l.rearrange=t.rearrange),t[Q]("$callData")&&(l.$callData=t.$callData)),L===a)l.key=e,d["_"+e]=1,c[Q](e)&&(f=f.concat(c[e])),s.publish(n,l);else if(P===a)for(r=e.length,i=0;r>i;i++)l.key=o=e[i],d[Q]("_"+o)||(d["_"+o]=1,c[Q](o)&&(f=f.concat(c[o])),s.publish(n,l));for(;r=f.length;){for(u=[],l={key:"",action:"set"},i=0;r>i;i++)o=f[i],d[Q]("_"+o)||(d["_"+o]=1,c[Q](o)&&(u=u.concat(c[o])),l.key=o,s.publish("change",l));f=u}}return s},atom:function(e){var n=this;return u!==e&&(!1===e?(n.atomic=!1,n.$atom=null):(n.atomic=!1,n.$atom=e)),n},toString:function(){return"[ModelView.Model id: "+this.id+"]"}}),It[c].append=It[c].add,It[c].insert=It[c].ins,It[c].remove=It[c]["delete"]=It[c].del,It[c].deleteAll=It[c].delAll;var Lt="lastIndexOf",Nt="match",Pt="nodeValue",Vt="nodeType",zt="parentNode",Ht="global",Rt="ignoreCase",Yt=/[a-zA-Z0-9_\-]/,Ft=function(e){return parseInt(e,10)},Ut=function(e,n,t){for(var i,r,l,o,a,s,c,f,d,h,p=[],g=0,m=!1,v=-1,$=0,y=!1,b={};i=n.exec(e);){if(r=n.lastIndex-i[0].length,l=e.slice(g,r),d=-1,t&&(c=l[Lt]("<"),f=l[Lt](">"),c>f?(d=-1,y=!0):f>c&&(d=f+1,y=!1)),p.push([1,y,l,d]),y)if(-1<(a=l[Lt]("="))){for(m="",s=a;a>-1&&Yt.test(o=l.charAt(--a));)m=o+m;v=r-g-s-2,$=v+i[0].length}else m&&(v=$+r-g-2-1,$+=v+i[0].length);else m=!1,$=0,v=-1;h=i[1]?i[1]:i[0],b[Q](h)?b[h].push(p.length):b[h]=[p.length],p.push([0,y,h,u,m,v]),g=n.lastIndex}return l=e.slice(g),d=-1,t&&(c=l[Lt]("<"),f=l[Lt](">"),c>f?(d=-1,y=!0):f>c&&(d=f+1,y=!1)),p.push([1,y,l,d]),[b,p]},Bt=function(e,n,t){var i,r,l,o,a,u,s,c,f,d,h,p,g,m,v,$,y,b,_,w,k;if(r=[],l=[],d=e,d.attributes&&(a=d.attributes.length))if(t&&d.firstChild&&8===d.firstChild[Vt]&&"att:"===d.firstChild[Pt].slice(0,4))for(c=d.firstChild[Pt].split("\n"),a=c.length,m={},o=0;a>o;o++)u=c[o].split("|"),y=u[0].slice(4),h=d.attributes[y],m[Q](y)||(m[y]=[1,[]],l.push([h,m[y],d])),m[y][1].push([u[1].slice(4),u[2].split(",").map(Ft)]);else for(o=0;a>o;o++)h=d.attributes[o],(u=h[Pt][Nt](n))&&l.push([0,h,u,d]);if(3===d[Vt])t&&d.previousSibling&&d.nextSibling&&8===d.previousSibling[Vt]&&8===d.nextSibling[Vt]&&"key:"===(p=d.previousSibling[Pt]).slice(0,4)&&"/key"===d.nextSibling[Pt]?(u=[d[Pt],p.slice(4)],r.push([d,u,d[zt]])):(u=d[Pt][Nt](n))&&r.push([d,u,d[zt]]);else if(d.firstChild)for(k=[d=d.firstChild];k.length;){if(d.attributes&&(a=d.attributes.length))if(t&&d.firstChild&&8===d.firstChild[Vt]&&"att:"===d.firstChild[Pt].slice(0,4))for(c=d.firstChild[Pt].split("\n"),a=c.length,m={},o=0;a>o;o++)u=c[o].split("|"),y=u[0].slice(4),h=d.attributes[y],m[Q](y)||(m[y]=[1,[]],l.push([h,m[y],d])),m[y][1].push([u[1].slice(4),u[2].split(",").map(Ft)]);else for(o=0;a>o;o++)h=d.attributes[o],(u=h[Pt][Nt](n))&&l.push([h,u,d]);if(d.firstChild)k.push(d=d.firstChild);else{for(3===d[Vt]&&(t&&d.previousSibling&&d.nextSibling&&8===d.previousSibling[Vt]&&8===d.nextSibling[Vt]&&"key:"===(p=d.previousSibling[Pt]).slice(0,4)&&"/key"===d.nextSibling[Pt]?(u=[d[Pt],p.slice(4)],r.push([d,u,d[zt]])):(u=d[Pt][Nt](n))&&r.push([d,u,d[zt]])),d=k.pop();k.length&&!d.nextSibling;)d=k.pop();d.nextSibling&&k.push(d=d.nextSibling)}}for(i={},o=0,a=r.length;a>o;o++)if(s=r[o],w=s[0],u=s[1],d=s[2],$=w[Pt],$.length>u[0].length){do p=u[1]?u[1]:u[0],g=w.splitText(u.index),w=g.splitText(u[0].length),i[Q](p)?i[p][0].push([g,d]):i[p]=[[[g,d]],[]],u=w[Pt][Nt](n);while(u)}else p=u[1]?u[1]:u[0],g=w,i[Q](p)?i[p][0].push([g,d]):i[p]=[[[g,d]],[]];for(o=0,a=l.length;a>o;o++)if(s=l[o],h=s[0],u=s[1],d=s[2],$=h[Pt],w=document.createTextNode($||""),v=[[],[w]],1===u[0])for(c=u[1],f=c.length,_=0,o=0;f>o;o++)b=c[o],p=b[0],g=w.splitText(b[1][0]-_),w=g.splitText(b[1][1]),v[0].push(p),v[1].push(g,w),i[Q](p)?(i[p][0].push([g,d]),i[p][1].push([h,v[1],$,d])):i[p]=[[[g,d]],[[h,v[1],$,d]]],_+=b[1][1]+b[1][0];else if($.length>u[0].length){do p=u[1]?u[1]:u[0],g=w.splitText(u.index),w=g.splitText(u[0].length),v[0].push(p),v[1].push(g,w),i[Q](p)?(i[p][0].push([g,d]),i[p][1].push([h,v[1],$,d])):i[p]=[[[g,d]],[[h,v[1],$,d]]],u=w[Pt][Nt](n);while(u)}else g=w,p=u[1]?u[1]:u[0],v[0].push(p),i[Q](p)?(i[p][0].push([g,d]),i[p][1].push([h,v[1],$,d])):i[p]=[[[g,d]],[[h,v[1],$,d]]];return[i,e]},Wt=function(e){var n,t,i,r,l,o=this.$tpl[1],a=this.$revivable,u=o.length,s=[],c="";for(t=0;u>t;t++)n=o[t],i=n[0],l=n[1],r=n[2],i?(a&&!l&&n[3]>-1&&s.length&&(r=r.slice(0,n[3])+"<!--"+s.join("\n")+"-->"+r.slice(n[3]),s=[]),c+=r):(e[Q](r)&&(n[3]=String(e[r])),a?l?(c+=n[3],n[4]&&s.push("att:"+n[4]+"|key:"+r+"|"+[n[5],n[3].length].join(","))):c+="<!--key:"+r+"-->"+n[3]+"<!--/key-->":c+=n[3]);return c},Xt=function(e){var n,t,i,r,l,o,a,u,s,c,f,d,h,p,g=this.$tpl[0];for(r=v(e),a=r.length,o=0;a>o;o++)if(l=r[o],u=String(e[l]),g[Q](l)){for(s=g[l][0],t=0,i=s.length;i>t;t++)s[t][0][Pt]=u;for(c=g[l][1],t=0,i=c.length;i>t;t++){if(n=c[t],f=n[1],h=f.length,p=h?f[0][Pt]:"",h>1)for(d=1;h>d;d++)p+=f[d][Pt];n[0][Pt]=p}}return this},Gt=function _i(e,n,t){var i=this;return i instanceof _i?(i.initPubSub(),i.$revivable=!0===t,void(e.substr&&e.substring?(i.$key=n[Ht]?n:new RegExp(n.source,n[Rt]?"gi":"g"),i.$tpl=_i.multisplit_string(e,i.$key,i.$revivable),i.render=Wt):(i.$key=n[Ht]?new RegExp(n.source,n[Rt]?"i":""):n,i.$tpl=Bt(e,i.$key,i.$revivable),i.render=Xt))):new _i(e,n,t)};Gt.multisplit_string=Ut,Gt.multisplit_node=Bt,Gt[c]=K(m(p[c]),qn,{constructor:Gt,id:null,$tpl:null,$key:null,$revivable:!1,dispose:function(){var e=this;return e.disposePubSub(),e.$key=null,e.$tpl=null,e.$revivable=null,e},keys:function(){return v(this.$tpl[0])},render:function(){},bind:function(e){var n=this;if(e){var t,i=n.$tpl[0],r=Bt(e,n.$key,!1)[0];for(t in r)r[Q](t)&&(i[Q](t)?(i[t][0]=i[t][0].concat(r[t][0]),i[t][1]=i[t][1].concat(r[t][1])):i[t]=r[t])}return n},free:function(e){var n=this;if(e){var t,i,r,l,o,a,u,s=n.$tpl[0],c=v(s),f=c.length;for(l=0;f>l;l++){for(t=c[l],o=s[t],a=o[0],r=a.length,i=r-1;i>=0;i--)e.contains(a[i][1])&&a.splice(i,1);for(u=o[1],r=u.length,i=r-1;i>=0;i--)e.contains(u[i][3])&&u.splice(i,1)}}return n},toString:function(){return"[ModelView.Tpl id: "+this.id+"]"}});var Zt="mv_namedkey",qt=function(e,n){if(e)for(var t=0,i=e.length;i>t;t++)if(n==y(e[t]))return!0;return!1},Jt=function(e,n){return new h(x(e).replace("__MODEL__",x(n||"")).replace("__KEY__","(\\S+?)"),"")},Kt=function(e,n,t){return[e?"["+e+"]":null,n?n[1]?"["+n[0]+'*="|'+n[1]+'"]':"["+n[0]+"]":null,t?t[1]?'input[name="'+t[0]+'"],textarea[name="'+t[0]+'"],select[name="'+t[0]+'"]':'input[name^="'+t[0]+'"],textarea[name^="'+t[0]+'"],select[name^="'+t[0]+'"]':null]},Qt=function(e,n){return n&&n[e]?(Z(n[e],L)&&(n[e]={action:n[e]}),n[e]):void 0},ei=/^\d+$/,ni=/\[\s*\]$/,ti=function(e,n){var t,i,r,l,o,a,u,s,c,f,d,h,p=e.$model,g=n.length,m=p.id+".",v={};for(t=0;g>t;t++)if(i=n[t],r=i[en]("name"))for(f=(i[un]||"").toLowerCase(),l=Et(r),yn(l,m)&&(l=l.slice(m.length)),o=l.split("."),u=p.$data;o.length;)a=o.shift(),o.length?(u[Q](a)||(u[a]=ei.test(o[0])?[]:{}),u=u[a]):"radio"===f?v[r]||(c="",h=e.get('input[type="radio"][name="'+r+'"]',0,1),h.length>1?h.forEach(function(){i[tn]&&(c=i[sn])}):i[tn]&&(c=i[sn]),v[r]=1,p.set(l,c)):"checkbox"===f?v[r]||(d=ni.test(r),h=e.get('input[type="checkbox"][name="'+r+'"]',0,1),d?(c=[],h.forEach(function(e){e[tn]&&c.push(e[sn])})):h.length>1?(c=[],h.forEach(function(e){c.push(e[tn]?e[sn]:(s=e[en]("data-else"))?s:"")})):c=i[tn]?i[sn]:(s=i[en]("data-else"))?s:"",v[r]=1,p.set(l,c)):(c=Ln(i),p.set(l,c))},ii=function(e,n){var t,i,r,l,o,a,u,s,c,f,d,h={},p=n&&n.length?n+".":null,g=Sn("input,textarea,select",e),m=g.length,v={};for(t=0;m>t;t++)if(i=g[t],r=i[en]("name")){if(c=(i[un]||"").toLowerCase(),l=Et(r),p){if(!yn(l,p))continue;l=l.slice(p.length)}for(o=l.split("."),u=h;o.length;)a=o.shift(),o.length?(u[Q](a)||(u[a]=ei.test(o[0])?[]:{}),u=u[a]):(u[Q](a)||(u[a]=""),"radio"===c?v[r]||(s="",d=Sn('input[type="radio"][name="'+r+'"]',e),d.length>1?d.forEach(function(){i[tn]&&(s=i[sn])}):i[tn]&&(s=i[sn]),v[r]=1,u[a]=s):"checkbox"===c?v[r]||(f=ni.test(r),d=Sn('input[type="radio"][name="'+r+'"]',e),f?(s=[],d.forEach(function(e){e[tn]&&s.push(e[sn])})):d.length>1?(s=[],d.forEach(function(e){s.push(e[tn]?e[sn]:(alternative=e[en]("data-else"))?alternative:"")})):s=i[tn]?i[sn]:(alternative=i[en]("data-else"))?alternative:"",v[r]=1,u[a]=s):(s=Ln(i),u[a]=s))}return h},ri=function(e,n,t,i){var r,l,o,a,u,s,c=e.$model,f="sync"==n.type,d=f?"change":n.type,h=t.length,p=i&&i.key?i.key:null,g=!p,m=p?p+".":null,v=c.atomic,$=c.$atom,y=v?$+".":null;for(r=0;h>r;r++)l=t[r],l&&(o=Qt(d,e.attr(l,"bind")),o&&o[Q]("action")&&(a="do_"+o.action,Z(e[a],z)&&(u=l[on],s=o.key,s||(!l[Zt]&&u&&(l[Zt]=c.key(u,1)),s=l[Zt]),v&&s&&($===s||yn(s,y))||p&&!s||(g||s===p||yn(s,m))&&e[a](n,l,o))))},li=function(e,n,t){var i,r,l,o,a,u,s=e.$model,c={},f=t.length;for(i=0;f>i;i++)if(r=t[i],r&&(l=r[on],o=0,!r[Zt]&&l&&(r[Zt]=s.key(l,1)),o=r[Zt])){if(a="_"+o,c[Q](a))u=c[a][0];else{if(!s.has(o))continue;c[a]=[u=s.get(o)]}e.do_bind(n,r,{name:l,key:o,value:u})}},oi=function(e,n,t){var i,r,l,o,a=e.$model,u="sync"==n.type,s=!1,c=e.$tpl.keys(),f=c.length,d={};if(u)for(l=0;f>l;l++)o=c[l],d[o]=a.get(o),s=!0;else if(t&&t.key)for(i=t.key,r=i+".",l=0;f>l;l++)o=c[l],(i===o||yn(o,r))&&(d[o]=a.get(o),s=!0);s&&e.$tpl.render(d)},ai={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},ui={27:"escape",9:"tab",32:"space",13:"enter",8:"backspace",145:"scrolllock",20:"capslock",144:"numlock",19:"pause",45:"insert",36:"home",46:"delete",35:"end",33:"pageup",34:"pagedown",37:"left",38:"up",39:"right",40:"down",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12"},si=function(e,n){return function(t){return e[n](t,{el:this})}},ci=function wi(e,n,t,i,r){var l=this;return l instanceof wi?(l.namespace=l.id=e||Bn("View"),(t=t||{})[Q]("bind")||(t.bind="data-bind"),l.$atts=t,i=i||wi._CACHE_SIZE,r=r||wi._REFRESH_INTERVAL,l.$memoize=new Jn(i,D),l.$selectors=new Jn(i,r),l.$atbind=l.attribute("bind"),l.$shortcuts={},l.$num_shortcuts=0,void l.model(n||new It).initPubSub()):new wi(e,n,t,i,r)};return ci._CACHE_SIZE=600,ci._REFRESH_INTERVAL=D,ci.node=En,ci.index=wn,ci.indexClosest=kn,ci.getDomRef=Dn,ci.serialize=ii,ci[c]=K(m(p[c]),qn,{constructor:ci,id:null,$dom:null,$tpl:null,$model:null,$livebind:null,$autobind:!1,$isomorphic:!1,$bindbubble:!1,$template:null,$atts:null,$memoize:null,$selectors:null,$atbind:null,$shortcuts:null,$num_shortcuts:null,dispose:function(){var e=this;return e.unbind().disposePubSub(),e.$model&&e.$model.dispose(),e.$model=null,e.$dom=null,e.$tpl&&e.$tpl.dispose(),e.$tpl=null,e.$template=null,e.$atts=null,e.$memoize.dispose(),e.$memoize=null,e.$selectors.dispose(),e.$selectors=null,e.$livebind=null,e.$isomorphic=null,e.$atbind=null,e.$shortcuts=null,e.$num_shortcuts=null,e},model:function(e){var n=this;return arguments.length?(n.$model&&n.$model.dispose(),n.$model=e.view(n),n):n.$model},attribute:function(e,n){var t=this;return arguments.length>1?(t.$atts[e]=n,t.$atbind=t.$atts.bind,t.$atkeys=t.$atts.keys,t):e?t.$atts[e]||u:u},template:function(e){var n=this;return arguments.length?(Z(e,z)&&(n.$template=e),n):n.$template},events:function(e){var n,t=this;if(Z(e,V))for(n in e)e[Q](n)&&Z(e[n],z)&&(t["on_"+n.split(":").join("_")]=e[n]);return t},shortcuts:function(e){var n,t,i,r,l,o=this,a=o.$shortcuts;if(Z(e,V))for(n in e)if(e[Q](n)){for(r=[],i=n.toLowerCase().split("+").map($n),l=i.length-1;l>=0;l--)t=i[l],("alt"===t||"ctrl"===t||"shift"===t||"meta"===t)&&(r.push(t),i.splice(l,1));t=r.sort().concat(i).join("+"),!1===e[n]?a[Q](t)&&(A(a,t),o.$num_shortcuts--):(a[Q](t)||o.$num_shortcuts++,a[t]=e[n])}return o},actions:function(e){var n,t=this;if(Z(e,V))for(n in e)e[Q](n)&&Z(e[n],z)&&(t["do_"+n]=e[n]);return t},autovalidate:function(e){return arguments.length?(this.$model.autovalidate(e),this):this.$model.autovalidate()},livebind:function(e){var n=this;return arguments.length?(n.$livebind=e?Jt(e,n.$model?n.$model.id:""):null,n):n.$livebind},isomorphic:function(e){var n=this;return arguments.length?(n.$isomorphic=!!e,n):n.$isomorphic},autobind:function(e){var n=this;return arguments.length?(n.$autobind=!!e,n):n.$autobind},bindbubble:function(e){var n=this;return arguments.length?(n.$bindbubble=!!e,n):n.$bindbubble},get:function(e,n,t,i){var r,l=this,o=l.$selectors;return n=n||l.$dom,(i||!(r=o.get(e)))&&(r=Sn(e,n),t&&n[Mn](e)&&r.push(n),i||o.set(e,r)),r},attr:function(e,n){var t,i,r=this,l=r.$atts[n],o=r.$memoize;return(l=e[en](l))?(t=o.get(l),u===t&&(t=vn(l),t.set&&(t.click=t.set,t.click.action="set",A(t,"set")),t.each&&(t.change={action:"each",key:t.each},A(t,"each")),t.show&&(t.change={action:"show",key:t.show},A(t,"show")),t.hide&&(t.change={action:"hide",key:t.hide},A(t,"hide")),t.html?(t.change={action:"html",key:t.html},A(t,"html"),A(t,"text")):t.text&&(t.change={action:"html",key:t.text,text:1},A(t,"text")),t.css&&(t.change={action:"css",css:t.css},A(t,"css")),t.value&&(t.change&&"prop"==t.change.action?t.change.prop.value=t.value:t.change={action:"prop",prop:{value:t.value}},A(t,"value")),t.checked&&(t.change&&"prop"==t.change.action?t.change.prop.checked=t.checked:t.change={action:"prop",prop:{checked:t.checked}},A(t,"checked")),t.disabled&&(t.change&&"prop"==t.change.action?t.change.prop.disabled=t.disabled:t.change={action:"prop",prop:{disabled:t.disabled}},A(t,"disabled")),t.options&&(t.change&&"prop"==t.change.action?t.change.prop.options=t.options:t.change={action:"prop",prop:{options:t.options}},A(t,"options")),(i=t.change)&&!i.key&&t.key&&(i.key=t.key),o.set(l,t)),t):u},add:function(e,n){var t=this;return e&&(t.$tpl&&t.$tpl.bind(e),!1!==n&&t.sync(null,e)),t},remove:function(e,n){var t=this;return e&&(t.$tpl&&t.$tpl.free(e),!1!==n&&t.$selectors.reset()),t},bind:function(e,t){var i,r,l,o=this,u=o.$model,s=Kt(o.$atbind,null,[u.id+"["]),c=s[0],f=s[2],d=o.$autobind,h=!!o.$livebind,p="undefined"!=typeof document;e=e||["change","click"],o.$dom=t||(p?document.body:null),l=function(e){return n(e,o.namespace)},h&&(o.$tpl=Gt(o.$dom,o.$livebind,o.$isomorphic)),p&&o.on_view_change&&e.length&&a(o.$dom).on(e.map(l).join(" "),d?[f,c].join(","):c,function(e){var n=this,t=!1,i=!1,r=o.$bindbubble?o.attr(n,"bind"):null;return(e.target===n||r&&r.bubble)&&(i=o.$bindbubble?!!r:n[Mn](c),t=d&&"change"==e.type&&n[Mn](f),(i||t)&&o.on_view_change(e,{el:n,isBind:i,isAutoBind:t})),!0});for(i in o)Z(o[i],z)&&(yn(i,"on_model_")?(r=i.slice(9),r.length&&o.onTo(u,r,o[i])):p&&(yn(i,"on_document_")?(r=i.slice(12),r.length&&a(document.body).on(l(r),si(o,i))):yn(i,"on_view_")&&"on_view_change"!==i?(r=i.slice(8),r.length&&a(o.$dom).on(l(r),d?[f,c].join(","):c,si(o,i))):yn(i,"on_dom_")&&(r=i.slice(7),r.length&&a(o.$dom).on(l(r),si(o,i)))));return o},unbind:function(e,t){var i,r,l=this,o=l.$model,u=Kt(l.$atbind,null,[o.id+"["]),s=n("",l.namespace),c=l.$autobind,f=(!!l.$livebind,"undefined"!=typeof document);return e=e||null,r=t||l.$dom,i=function(e){return n(e,l.namespace)},f&&l.on_view_change&&a(r).off(e&&e.length?e.map(i).join(" "):s,c?[u[2],u[0]].join(","):u[0]),l.offFrom(o),f&&(a(r).off(s),a(document.body).off(s)),l.$tpl&&(l.$tpl.dispose(),l.$tpl=null),l},rebind:function(e,n){var t=this;return t.$memoize.reset(),t.$selectors.reset(),t.unbind().bind(e,n)},sync:function(e,n){var t,i,r,l=this,o=l.$autobind,a=!!l.$livebind,u=Kt(l.$atbind,null,o?[l.$model.id+"["]:0),s=Zn("sync",l),c="undefined"!=typeof document;return l.$selectors.reset(),n?(s.currentTarget=n,c&&(t=l.get(u[0],n,0,1),o&&(i=l.get(u[2],n,0,1)))):c&&(e=e||l.$dom,r=!(e===l.$dom),t=l.get(u[0],e,0,r),o&&(i=l.get(u[2],e,0,r))),c&&t.length&&ri(l,s,t),c&&o&&i.length&&li(l,s,i),a&&l.$tpl&&oi(l,s),l},sync_model:function(e){var n,t,i=this,r=i.$autobind,l="undefined"!=typeof document;return l&&r&&(n=Kt(null,null,[i.$model.id+"["]),i.$selectors.reset(),t=i.get(n[2],e||i.$dom,0,1),t.length&&ti(i,t)),i},reset:function(){var e=this;return e.$memoize.reset(),e.$selectors.reset(),e},on_view_change:function(e,n){var t,i,r,l,o,a,u,s=this,c=s.$model,f=n.el,d={};n.isAutoBind&&(t=f[on])&&(f[Zt]||(f[Zt]=c.key(t,1)),i=f[Zt],i&&c.has(i)&&(a=f[un].toLowerCase(),"checkbox"===a?(o=ni.test(t),l=s.get('input[type="checkbox"][name="'+t+'"]'),o?(r=[],l.forEach(function(e){e[tn]&&r.push(e[sn])})):l.length>1?(r=[],l.forEach(function(e){r.push(e[tn]?e[sn]:(u=e[en]("data-else"))?u:"")})):r=f[tn]?f[sn]:(u=f[en]("data-else"))?u:""):r=Ln(f),d.$trigger=f,c.set(i,r,1,d))),!d.error&&n.isBind&&ri(s,e,[f]),s.publish("change",n)},on_document_keydown:function(e,n){var t,i,r,l,o,a,u,s=this,c=s.$shortcuts,f=n.el;return r="TEXTAREA"===f.tagName?"text":"INPUT"===f.tagName?f[un].toLowerCase():"",s.$num_shortcuts&&"text"!==r&&"email"!==r&&"url"!==r&&"number"!==r?(o=e.keyCode||e.which,u=[],e.altKey&&u.push("alt"),e.ctrlKey&&u.push("ctrl"),e.metaKey&&u.push("meta"),e.shiftKey&&u.push("shift"),ui[Q](o)?l=ui[o]:(a=188===o?",":190===o?".":y.fromCharCode(o).toLowerCase(),e.shiftKey&&ai[Q](a)&&(a=ai[a]),l=a),l=u.concat(l).join("+"),l&&c[Q](l)&&c[l]&&(t=c[l],i=!0,t.substr?Z(s["do_"+t],z)&&(s["do_"+t](e,f,{}),i=!1):i=t.call(s,e,f,{}),!1===i)?(e.stopPropagation(),e.preventDefault(),!1):void 0):void 0},on_model_change:function(e,n){var t,i,r,l=this,o=l.$model,a=l.$autobind,u=!!l.$livebind,s=Kt(l.$atbind,null,a?[o.id+Tt(n.key)]:0),c="undefined"!=typeof document;c&&(t=l.get(s[0]),a&&(i=l.get(s[2])),n.$callData&&n.$callData.$trigger&&(r=function(e){return e!==n.$callData.$trigger},t=t.filter(r),a&&(i=i.filter(r)),n.$callData=null)),c&&t.length&&ri(l,e,t,n),c&&a&&i.length&&li(l,e,i,n),u&&l.$tpl&&oi(l,e,n)},on_model_error:function(e,n){var t,i,r=this,l=r.$model,o=r.$autobind,a=!!r.$livebind,u=Kt(r.$atbind,null,o?[l.id+Tt(n.key)]:0),s="undefined"!=typeof document;s&&(t=r.get(u[0])).length&&ri(r,e,t,n),s&&o&&(i=r.get(u[2])).length&&li(r,e,i,n),a&&r.$tpl&&oi(r,e,n)},do_nop:null,do_each:function(){},do_prop:function(e,n,t){if(Z(t.prop,V)){var i,r,l,o,a,u=this,s=u.$model,c=t.prop;n=(a=n[en]("data-domref"))?ci.getDomRef(n,a):[n],n&&n.length&&n.forEach(function(e){if(e)for(i in c)if(c[Q](i)){if(r=c[i],!s.has(r))continue;switch(l=s.get(r),o=G(l),i){case"value":Nn(e,l);break;case"checked":case"disabled":e[i]=I===o?l:y(l)==e[sn];break;case"options":if("SELECT"===e[an]&&P===o){var n,t,a=l.length,u="",f=Tn("optgroup",e);for(n=jn(e),f=f.length?f[0]:e,Tn("option",f).forEach(function(e){f.removeChild(e)}),t=0;a>t;t++)u+=l[t]&&l[t].label?'<option value="'+l[t].value+'">'+l[t].label+"</option>":'<option value="'+l[t]+'">'+l[t]+"</option>";f[pn]=u,In(e,n)}break;default:e[nn](i,l)}}})}},do_html:function(e,n,t){if(t.key){var i,r=this,l=r.$model,o=t.key;n=(i=n[en]("data-domref"))?ci.getDomRef(n,i):[n],n&&n.length&&o&&l.has(o)&&n.forEach(function(e){e&&(e[t.text?mn in e?mn:gn:pn]=l.get(o))})}},do_css:function(e,n,t){if(Z(t.css,V)){var i,r,l,o,a=this,u=a.$model,s=t.css;n=(o=n[en]("data-domref"))?ci.getDomRef(n,o):[n],n&&n.length&&n.forEach(function(e){if(e)for(r in s)s[Q](r)&&(i=s[r],l=u.get(i),l&&(e.style[r]=l))})}},do_set:function(e,n,t){var i,r,l=this,o=l.$model,a=null;t.key?a=t.key:n[on]&&(n[Zt]||(n[Zt]=o.key(n[on],1)),a=n[Zt]),a&&(t[Q]("value")?i=t.value:((r=n[en]("data-domref"))&&(n=ci.getDomRef(n,r)[0]),i=Ln(n)),o.set(a,i,1))},do_tpl:function(e,n,t){var i,r,l,o,a=this,u=t.key,s=t.tpl;a.$template&&u&&s&&(i=a.$model,u&&i.has(u)&&(n=(o=n[en]("data-domref"))?ci.getDomRef(n,o):[n],n&&n.length&&(r=t.mode||"replace",l=a.$template(s,i.get(u)),n.forEach(function(e){e&&("replace"==r&&(e[pn]=""),l&&(e[pn]+=l))}))))},do_show:function(e,n,t){var i,r,l,o=this,a=o.$model,u=t.key;u&&(n=(r=n[en]("data-domref"))?ci.getDomRef(n,r):[n],n&&n.length&&(i=a.get(u),l=t[Q]("value")?t.value===i:!!i,n.forEach(function(e){e&&(l?An(e):Cn(e))})))},do_hide:function(e,n,t){var i,r,l,o=this,a=o.$model,u=t.key;u&&(n=(r=n[en]("data-domref"))?ci.getDomRef(n,r):[n],n&&n.length&&(i=a.get(u),l=t[Q]("value")?t.value===i:!!i,n.forEach(function(e){e&&(l?Cn(e):An(e))})))},do_bind:function(e,n,t){var i,r,l,o=this,a=(o.$model,t.name),u=t.key,s=n[un].toLowerCase();u&&(i=t.value,r=G(i),"radio"===s?y(i)==n[sn]&&(o.get('input[name="'+a+'"]').forEach(function(e){n!==e&&(e[tn]=!1)}),n[tn]=!0):"checkbox"===s?(l=ni.test(a),l?(i=P===r?i:[i],n[tn]=qt(i,n[sn])):n[tn]=P===r?qt(i,n[sn]):I===r?i:y(i)==n[sn]):Nn(n,i))},toString:function(){return"[ModelView.View id: "+this.id+"]"}}),e.ModelView={VERSION:"0.65",UUID:Bn,Extend:K,Type:ht,Validation:pt,PublishSubscribeInterface:qn,Cache:Jn,Model:It,Tpl:Gt,View:ci},!function(e,n){e.jquery=function(n){if(!n.ModelView){n.ModelView=e;var t=(Function.prototype.call.bind(Array.prototype.slice),n.extend),i=e.View,r=e.Model;n.fn.modelview=function(e,l){var o=arguments.length,a=o?e:null,u=e,s=!0,c=!1,f=[];return this.each(function(){var e,d,h,p,g=n(this);if(g.data("modelview")){if(s=!1,d=g.data("modelview"),e=d.$model,"view"===a)f.push(d);else if("model"===a){if(o>1)return d.model(l),this;f.push(e)}else if("data"===a){if(o>1)return e.data(l),this;f.push(e.data())}else"sync"===a?d.sync(l):"reset"===a?d.reset():"dispose"===a&&(g.data("modelview",null),d.dispose());return this}return c||(h={id:"model",data:{},types:{},validators:{},getters:{},setters:{},dependencies:{}},p={viewClass:i,modelClass:r,id:"view",bindAttribute:"data-bind",livebind:null,autobind:!1,isomorphic:!1,bindbubble:!1,autovalidate:!0,events:null,autoSync:!0,cacheSize:i._CACHE_SIZE,refreshInterval:i._REFRESH_INTERVAL,model:null,template:null,actions:{},handlers:{},shortcuts:{}},u=t({},p,u),!u.model||u.model instanceof r||(u.model=t({},h,u.model)),c=!0),u.model?(e=u.model instanceof r?u.model:new u.modelClass(u.model.id,u.model.data,u.model.types,u.model.validators,u.model.getters,u.model.setters,u.model.dependencies),d=new u.viewClass(u.id,e,{bind:u.bindAttribute||"data-bind"},u.cacheSize,u.refreshInterval).template(u.template).events(u.handlers).shortcuts(u.shortcuts).actions(u.actions).livebind(u.livebind).autobind(u.autobind).isomorphic(u.isomorphic).bindbubble(u.bindbubble).autovalidate(u.autovalidate).bind(u.events,g[0]),g.data("modelview",d),void(u.autoSync&&d.sync())):this
}),!s&&f.length?1==this.length?f[0]:f:this}}!n.widget||n.mvc&&n.mvc.ModelViewWidget||n.widget("mvc.ModelViewWidget",{options:{},$view:null,_create:function(){var e=this;e.$view=e.element.modelview(e.options).modelview("view")},value:function(e,n){var t=this;return 1<arguments.length?(t.$view.$model.set(e,n,1),t.element):t.$view.$model.get(e)},view:function(){return this.$view},model:function(){return this.$view.$model},_destroy:function(){var e=this.self.$view=null;e.element.modelview("dispose")}})},"undefined"!=typeof n.jQuery&&e.jquery(n.jQuery)}(e.ModelView,this),e.ModelView});