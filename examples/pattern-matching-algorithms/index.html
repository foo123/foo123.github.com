<!doctype html>
<html lang="en" class="no-ie">
<head>
<title>Pattern Matching Algorithms Tests</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
<meta name="description" content="Pattern Matching Algorithms Tests" />
<meta property="og:title" content="Pattern Matching Algorithms Tests">
<meta property="og:description" content="Pattern Matching Algorithms Tests">
<meta property="og:image" content="https://foo123.github.io/thumbs/pattern-matching-algorithms.jpg">
<meta property="og:url" content="https://foo123.github.io/examples/pattern-matching-algorithms/">
<meta name="twitter:card" content="summary">
<link rel="stylesheet" type="text/css" href="../common/css/common.min.css" />
<style type="text/css">
body {
    position: relative;
    font-family: Helvetica, sans-serif;
    font-size: 16px;
    background-color: #121212;
    color: #aaa;
}
input,select,textarea {
    position: relative;
    display: block;
    box-sizing: border-box;
    color: #fff;
    background: #f90b13;
    border-radius: 10px;
    padding: 14px 20px;
    width: 100%;
    margin: 4px auto 20px auto;
}
.button {
    position: relative;
    display: inline-block;
    box-sizing: border-box;
    color: #fff;
    background: #f90b13;
    box-shadow: inset 0px 1px 0px 0px #ffffff;
    border-radius: 20px;
    border: 2px solid transparent;
    font-size: 14px;
    font-weight: bold;
    font-style: normal;
    text-decoration: none;
    text-indent: 0;
    text-align: center;
    text-shadow: 1px 1px 0px #ffffff;
    padding: 10px 28px;
    cursor: pointer;
}
.button:hover {
    border-color: #fff;
}
.button:active {
    top: 1px;
    left: 1px;
}
.showcase {
    margin: 5px 2px;
    color: white;
    font-style: italic;
    font-size: 0.8em;
}
.showcase a{
    color: #f90b13;
    display: inline-block;
    margin-bottom: 1px;
    text-decoration: none;
    border-bottom:1px dotted #f90b13;
}
.showcase a:hover,
.showcase a:active,
.showcase a:visited{
    text-decoration: none;
}
#footer {
    margin-top: 20px;
}
#controls,#cons {
    padding: 0 20px;
}
#console {
    border: 1px solid #aaa;
    background: #efefef;
    color: #121212;
    min-height: 360px;
    padding: 20px;
    font-size: 18px;
}
.loader {
    display: inline-block;
    width: 20px;
    height: 20px;
    background: transparent url(../common/assets/ajax-loader.gif) 0 0 no-repeat;
}
.algo_info b,.algo_info strong {
    font-size: 18px;
}
.algo_info_ref {
    font-size: 16px;
}
.algo_info_desc {
    margin: 0;
    font-size: 16px;
}
#console.processing > #loader {display: inline-block;}
#console.processing > #result {display: none;}
#console:not(.processing) > #loader {display: none;}
#console:not(.processing) > #result {display: block;}

#forkongithub a{background:#f90b13;color:#fff;text-decoration:none;font-family:Helvetica, sans-serif;text-align:center;font-weight:bold;padding:5px 40px;font-size:0.9rem;line-height:1.4rem;position:relative;transition:0.5s;}#forkongithub a:hover{background:#f90b13;color:#fff;}#forkongithub a::before,#forkongithub a::after{content:"";width:100%;display:block;position:absolute;z-index:100;top:1px;left:0;height:1px;background:#fff;}#forkongithub a::after{bottom:1px;top:auto;}@media screen and (min-width:800px){#forkongithub{position:absolute;display:block;z-index:100;top:0;right:0;width:200px;overflow:hidden;height:200px;}#forkongithub a{width:200px;position:absolute;top:60px;right:-60px;transform:rotate(45deg);-webkit-transform:rotate(45deg);box-shadow:4px 4px 10px rgba(0,0,0,0.8);}}

@media (max-width: 420px) {
#console {
    padding: 20px 4px;
}
#controls,#cons {
    padding: 0;
}
}
</style>
<script type="text/javascript" src="../common/js/require.js"></script>
<script type="text/javascript" src="../common/js/require-config.js"></script>
</head>
<body class="responsive-864-container" style="max-width:2000px; margin:0 auto; overflow-x:hidden;">

<span id="forkongithub"><a href="https://github.com/foo123/PatternMatchingAlgorithms">Check me out on GitHub</a></span>

<header id="header" class="fluid col-1-1" style="padding:0 14px;">
<h1>Pattern Matching Algorithms Tests</h1>
</header>

<br>

<section id="panel" class="fluid col-1-1" style="padding: 14px; min-height: 68vh">
<div id="controls" class="fluid col-1-4">
<strong>Algorithm: </strong>
<div class="cont"><select name="model[algorithm][selected]">
    <option value="NaiveMatcher">Naive Matcher</option>
    <option value="FSAMatcher">FSA Matcher</option>
    <option value="RabinKarpMatcher">Rabin-Karp Matcher</option>
    <option value="KnuthMorrisPrattMatcher">Knuth-Morris-Pratt Matcher</option>
    <option value="BoyerMooreMatcher">Boyer-Moore Matcher</option>
    <option value="TwoWayMatcher">Two-Way Matcher</option>
</select></div>

<strong>Text: </strong>
<textarea name="model[algorithm][text]" rows="4"></textarea>

<strong>Pattern: </strong>
<input name="model[algorithm][pattern]" type="text" value=""/>

<button id="test" type="button" class="button" mv-evt mv-on-click="test">Run Test</button>
<br><br>
</div>

<div id="cons" class="fluid col-2-3">
<strong>Console: </strong> <br>
<div id="console" class="fluid col-1-1">
    <div class="algo_info">
        <b>Selected Algorithm: {algorithm.name}</b>
        <br><br>
        <b>Reference Link:</b> <a class="algo_info_ref" href="{algorithm.reflink}" target="_blank">{algorithm.reflink}</a>
        <br><br>
        <b>Summary:</b> <p class="algo_info_desc" mv-model="algorithm.desc" mv-model-evt mv-on-model-change="html"></p>
        <br><br>
    </div>
    <div id="loader" class="loader"></div>
    <div id="result">
        <b style="display:inline-block;width:70px">Pattern</b>:&nbsp;&nbsp;<i style="white-space:pre-wrap">{algorithm.pattern}</i><br>
        <b style="display:inline-block;width:70px">Text</b>:&nbsp;&nbsp;<span style="white-space:pre-wrap;font-style:italic" mv-model="algorithm.matchedtext" mv-model-evt mv-on-model-change="html"></span><br><br>
        <b>Time Taken = {result.tms} (ms)</b><br><br>
        <span mv-model="result.matched" mv-model-evt mv-on-model-change="show">
            <span style="color:green;font-weight:bold;font-size:20px;">&#10003;&nbsp;&nbsp;</span>
            <b>Matched at position {result.pos}</b>
        </span>
        <span mv-model="result.matched" mv-model-evt mv-on-model-change="hide">
            <span style="color:red;font-weight:bold;font-size:20px;">&#10060;&nbsp;&nbsp;</span>
            <b>NOT Matched</b>
        </span>
        <br><br>
    </div>
</div>
</div>
</section>
<footer id="footer">
<div class="fluid col-1-1 text-right" style="margin-top: 10px; padding-right: 20px;"><a href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=DP8WED9XW9TAE" class="donate">donate</a></div>

<div class="showcase">DOM abstraction by <a href="http://jquery.com/" target="_blank">jQuery</a></div>
<div class="showcase">Module management by <a href="http://requirejs.org/" target="_blank">RequireJS</a></div>
<div class="showcase">Routing by <a href="https://github.com/foo123/Dromeo" target="_blank">Dromeo</a></div>
<div class="showcase">Templating by <a href="https://github.com/foo123/Contemplate" target="_blank">Contemplate</a></div>
<div class="showcase">Widgets by <a href="https://github.com/foo123/HtmlWidget" target="_blank">HtmlWidget</a></div>
<div class="showcase">MVC by <a href="https://github.com/foo123/modelview.js" target="_blank">ModelView</a></div>
</footer>

<script type="text/javascript">//<![CDATA[
require(['jQuery', 'Dromeo', 'ModelView', 'ModelViewValidation', 'ModelViewjQuery', 'Matchy', 'Pattern'],
function($, $R, $MV, _, __, $M, $P) {
"use strict";

var $window = $(window),
    $panel = $('#panel'),
    $console = $('#console'),
    appRouter, appView, appModel
;

$MV.jquery($);
$P.Matchy($M);

function time(f, repeat)
{
    var i, t0, t1, t = 0;
    if (0 < repeat)
    {
        for (i=1; i<=repeat; ++i)
        {
            t0 = performance.now();
            f();
            t1 = performance.now();
            t += t1 - t0;
        }
        return t / repeat;
    }
    else
    {
        t0 = performance.now();
        f();
        t1 = performance.now();
        return t1 - t0;
    }
}
function doTest(model)
{
    //
    // get selected match algorithm
    //
    var selectedAlgorithm,
        matcher, reflink, desc,
        pattern, text, result
    ;

    pattern = model.get('algorithm.pattern');
    text = model.get('algorithm.text');
    selectedAlgorithm = model.get('algorithm.selected');

    matcher = $P[selectedAlgorithm].pattern(pattern);

    model.set('algorithm.name', selectedAlgorithm);
    model.set('algorithm.reflink', matcher.reference);
    model.set('algorithm.desc', matcher.description || '');
    model.notify('algorithm');
    $console.addClass('processing');

    setTimeout(function() {
        var tms = time(function() {
            result = matcher.match(text);
        }, 1000);
        model.set('algorithm.matchedtext', -1 !== result ? (text.slice(0, result)+'<span style="color:red">'+text.slice(result, result+pattern.length)+'</span>'+text.slice(result+pattern.length)) : text, 1);
        matcher = null;
        setTimeout(function() {
            //
            // show results
            //
            model.set('result', {matched: (-1 < result), pos: result, tms: tms.toFixed(4)}, 1);
            $console.removeClass('processing');
        }, 100);
    }, 100);
}

$panel.modelview({

    id: 'PatternMatchingAlgorithmsPanel',

    livebind: 'text',
    autobind: true,
    events: ['change', 'click'],
    autoSync: true,

    model: {
        id: 'model',

        data: {
            algorithm: {
                selected: 'NaiveMatcher',
                pattern: 'rain',
                text: 'The rain in Spain stays mainly in the plain',
                matchedtext: 'The <span style="color:red">rain</span> in Spain stays mainly in the plain',
                name: 'NaiveMatcher',
                reflink: $P['NaiveMatcher'].reference,
                desc: $P['NaiveMatcher'].description
            },
            result: {matched: true, pos: 4, tms: 0}
        },

        types: {
            algorithm: {
                selected: $MV.Type.Cast.STR,
                name: $MV.Type.Cast.STR,
                reflink: $MV.Type.Cast.STR,
                desc: $MV.Type.Cast.STR,
                pattern: $MV.Type.Cast.STR,
                text: $MV.Type.Cast.STR
            }
        }/*,

        validators: {}*/
    },

    actions: {
        test: function(evt, $el, data) {
            var model = this.$model, algoInfo = model.get('algorithm');
            location.hash = '#' + appRouter.glue({
                action: 'test',
                match_algorithm: algoInfo.selected,
                pattern: algoInfo.pattern,
                text: algoInfo.text
            });
            doTest(model);
        }
    }
});

appView = $panel.modelview('view');
appModel = appView.$model;
appRouter = new $R();
//$panel.modelview('sync');

appRouter.one({route:'#{%ALL%:hash}', handler:function(params) {
    params = params.data;
    params = params && params.hash ? appRouter.unglue(params.hash.split('+').join('%20')) : null;
    if (params && params.action && ('test' === params.action))
    {
        if (null != params.match_algorithm)
            appModel.set('algorithm.selected', params.match_algorithm);
        if (null != params.pattern)
            appModel.set('algorithm.pattern', params.pattern);
        if (null !== params.text)
            appModel.set('algorithm.text', params.text);
        setTimeout(function() {doTest(appModel);}, 10);
    }
}});

$window.one('hashchange', function(evt) {
    appRouter.route(location.hash);
}).trigger('hashchange');
});
//]]></script>

</body>
</html>