/**
*
* SciLite,
* A scientific computing environment similar to Octave/Matlab in pure JavaScript
* @version: 0.9.0
* https://github.com/foo123/SciLite
*
**/
!function(t,n,r){"use strict";"object"==typeof module&&module.exports?(module.$deps=module.$deps||{})&&(module.exports=module.$deps[n]=r.call(t)):"function"==typeof define&&define.amd&&"function"==typeof require&&"function"==typeof require.specified&&require.specified(n)?define(n,["module"],function(n){return r.moduleUri=n.uri,r.call(t)}):n in t||(t[n]=r.call(t)||1)&&"function"==typeof define&&define.amd&&define(function(){return t[n]})}("undefined"!=typeof self?self:this,"SciLite",function(n){"use strict";function t(){}var O=Math,q=O.PI,i=O.E,l=1/0,u=NaN,$=1e-15,A=Object.prototype.hasOwnProperty,h=Object.prototype.toString,p=Number.isNaN,b=Array.isArray||function(n){return"[object Array]"===h.call(n)},T={VERSION:"0.9.0",fn:{},op:null,constant:{pi:q,e:i,eps:$,inf:l,Inf:l,nan:u,NaN:u}},m=T.constant,E=T.fn;function g(n){throw"not supported"+(n?" for this input":"")}function _(n,t){return n instanceof t}function d(n){return"function"==typeof n}function z(n){return"[object Object]"===h.call(n)}function I(n){return"string"==typeof n}function Y(n){return"number"==typeof n&&!isFinite(n)}function M(n){return"number"==typeof n}function w(n){return Number.isInteger(n)}function o(n){return n instanceof C}function v(n,t){if(M(n)||o(n))return!0;if(!1===t){if(y(n)&&1===n.length)return!0;if(S(n)&&1===n.length&&1===n[0].length)return!0}return!1}function y(n){return b(n)&&v(n[0])}function S(n){return b(n)&&b(n[0])&&v(n[0][0])}function J(n){return!b(n)}function G(n){return b(n)&&!b(n[0])}function c(n){return b(n)&&b(n[0])}function H(n){return!o(n)||0===n.im}function k(n,t){return M(n)?n:o(n)?t?0===n.im&&n.re:n:y(n)?1===n.length&&k(n[0],t):!!S(n)&&1===n.length&&1===n[0].length&&k(n[0][0],t)}function X(n,t){for(var r=new Array(n),e=0;e<n;++e)r[e]=d(t)?t(e):t;return r}function P(n,t,r){for(var e,i,o=new Array(n),u=0;u<n;++u)for(o[u]=i=new Array(t),e=0;e<t;++e)i[e]=d(r)?r(u,e):r;return o}function K(n){var t;return b(n)&&(A.call(n,"$mainRet$")?(t=n.$mainRet$,(n=n.map(K)).$mainRet$=K(t)):n=n.map(K)),n}function nn(t,n,r){return!0===t?n:M(n)||r&&o(n)?t(n):b(n)?n.map(function(n){return nn(t,n,r)}):n}function s(n){return I(n)?0<n.length:p(n)?0:M(n)?0!==n:o(n)?s(n.re)||s(n.im):b(n)?0<n.length&&0<n.filter(s).length:!0===n}function tn(n,r){return v(r)?v(n)?R(n,r):n.filter(function(n){return tn(n,r)}).length===n.length:!!b(r)&&(v(n)?tn(r,n):n.length===r.length&&n.filter(function(n,t){return tn(n,r[t])}).length===r.length)}function C(n,t,r){var e=this;if(!_(e,C))return new C(n,t,r);o(n)?(e.re=n.re,e.im=n.im):(t=t||0,"polar"===r?(e._rho=O.abs(n),e._theta=t,e.re=e._rho*O.cos(e._theta),e.im=e._rho*O.sin(e._theta)):(e.re=n,e.im=t))}function rn(n){return o(n)?n.im?n.div(n.abs()):O.sign(n.re):O.sign(n)}E.clc=t,E.disp=t,E.clear=t,E.help=t,E.who=t,E.whos=t,E.exist=t,T.exist=function(n,t){return z(t)&&I(n)&&A.call(t,n)?1:0},C.prototype={constructor:C,re:0,im:0,_rho:null,_rho2:null,_theta:null,_str:null,abs:function(n){var t=this;return null==t._rho&&(t._rho=ln(t.re,t.im)),t._rho},norm2:function(){return null==this._rho2&&(this._rho2=O.pow(this.abs(),2)),this._rho2},angle:function(){var n=this;return null==n._theta&&(n._theta=0===n.re?(n.im<0?-1:1)*q/2:O.atan(n.im/n.re)),n._theta},add:function(n){return M(n)?new C(this.re+n,this.im):new C(this.re+n.re,this.im+n.im)},sub:function(n){return M(n)?new C(this.re-n,this.im):new C(this.re-n.re,this.im-n.im)},mul:function(n){var t,r,e,i=this;return M(n)?new C(i.re?i.re*n:0,i.im?i.im*n:0):(t=i.re,r=n.re,i=i.im,new C((e=t*(r+(n=n.im)))-n*(t+i),e+r*(i-t)))},div:function(n){var t,r,e,i=this;return M(n)?new C(i.re?i.re/n:0,i.im?i.im/n:0):(e=n.norm2(),t=i.re,r=n.re/e,i=i.im,new C((e=t*(r+(n=-n.im/e)))-n*(t+i),e+r*(i-t)))},pow:function(n){var t,r;return M(n)?new C(O.pow(this.abs(),n),this.angle()*n,"polar"):o(n)?(t=this.abs(),r=this.angle(),new C(O.pow(t,n.re),n.im*O.log(t),"polar").mul(new C(O.exp(-n.im*r),r*n.re,"polar"))):void 0},neg:function(){return new C(-this.re,-this.im)},conj:function(){return new C(this.re,-this.im)},inv:function(){var n=this.norm2();return new C(this.re/n,-this.im/n)},toString:function(){var n=this;return null==n._str&&(n._str=un(n.re)+(n.im<0?" - ":" + ")+un(O.abs(n.im))+"i"),n._str},valueOf:function(){return this.re}};new C(0,1);var en=new C(i,0),on={sign:rn,sqrt:function(n){return n.pow(new C(.5))},exp:function(n){return en.pow(n)},log:function(n){return new C(O.log(n.abs()),n.angle())},sin:function(n){return new C(O.sin(n.re)*O.cosh(n.im),O.cos(n.re)*O.sinh(n.im))},cos:function(n){return new C(O.cos(n.re)*O.cosh(n.im),-O.sin(n.re)*O.sinh(n.im))},tan:function(n){return on.sin(n).div(on.cos(n))},sinh:function(n){return new C(O.sinh(n.re)*O.cos(n.im),O.cosh(n.re)*O.sin(n.im))},cosh:function(n){return new C(O.cosh(n.re)*O.cos(n.im),O.sinh(n.re)*O.sin(n.im))},tanh:function(n){return on.sinh(n).div(on.cosh(n))},asin:null,acos:null,atan:null,asinh:null,acosh:null,atanh:null};function un(n){return p(n)?n="nan":Y(n)?n=(n<0?"-":"")+"inf":M(n)?n=w(n)?String(n):n.toFixed(4).replace(/\.0{4}$/,""):o(n)&&(n=String(n)),n}function fn(n){var t;return null==n?n="":I(n)?-1===["\\cdots","\\vdots","\\ddots"].indexOf(n)&&(n="\\text{"+n+"}"):n=p(n)?"\\text{nan}":M(n)?$===n?String($):un(n).split("nan").join("\\text{nan}").split("inf").join("\\text{inf}"):o(n)?String(n).split("nan").join("\\text{nan}").split("inf").join("\\text{inf}"):S(n)?(t=!1,V(n)>T.MAXPRINTSIZE&&(n=n.map(function(n){return n.slice(0,O.round(T.MAXPRINTSIZE/2)).concat("\\cdots").concat(n.slice(1-O.round(T.MAXPRINTSIZE/2)))}),t=!0),"\\begin{bmatrix}"+(n=B(n)>T.MAXPRINTSIZE?n.slice(0,O.round(T.MAXPRINTSIZE/2)).concat([X(T.MAXPRINTSIZE,function(n){return O.round(T.MAXPRINTSIZE/2)===n&&t?"\\ddots":"\\vdots"})]).concat(n.slice(1-O.round(T.MAXPRINTSIZE/2))):n).map(function(n){return n.map(fn).join(" & ")}).join(" \\\\ ")+"\\end{bmatrix}"):b(n)?(n=n.length>T.MAXPRINTSIZE?n.slice(0,O.round(T.MAXPRINTSIZE/2)).concat(["\\cdots"]).concat(n.slice(1-O.round(T.MAXPRINTSIZE/2))):n).map(fn).join(" \\hskip 1em "):"object"==typeof n||"function"==typeof n?"":String(n),n}function r(n){return b(n)?n.map(r):!o(n)||n.im?n:n.re}function an(n){return b(n)?n.map(an):M(n)?new C(n,0):n}function ln(n,t){n=O.abs(n),t=O.abs(t);var r=0;return 0===n?t:0===t?n:t<n?n*O.sqrt(1+(r=t/n)*r):n<t?t*O.sqrt(1+(r=n/t)*r):n*O.SQRT2}function cn(){var n,t,r,e=0,i=0;if(M(cn.z1))return r=cn.z1,cn.z1=null,r;for(;0===e||1===e;)e=O.random();for(;0===i||1===i;)i=O.random();return t=(n=O.sqrt(-2*O.log(e)))*O.cos(2*q*i),r=n*O.sin(2*q*i),cn.z1=r,t}function R(r,e){if(I(r)){if(I(e))return r===e?1:0;if(v(e))return r===String(e)?1:0;if(y(e))return e.map(function(n){return R(r,n)});if(S(e))return P(B(e),V(e),function(n,t){return R(r,e[n][t])})}else if(M(r)){if(I(e))return String(r)===e?1:0;if(M(e))return r===e?1:0;if(o(e))return e.re===r&&0===e.im?1:0;if(y(e))return e.map(function(n){return R(r,n)});if(S(e))return P(B(e),V(e),function(n,t){return R(r,e[n][t])})}else if(o(r)){if(I(e))return String(r)===e?1:0;if(M(e))return r.re===e&&0===r.im?1:0;if(o(e))return r.re===e.re&&r.im===e.im?1:0;if(y(e))return e.map(function(n){return R(r,n)});if(S(e))return P(B(e),V(e),function(n,t){return R(r,e[n][t])})}else if(y(r)){if(I(e)||v(e))return r.map(function(n){return R(n,e)});if(y(e)){if(r.length!==e.length)throw"eq: inputs have incompatible dimensions";return r.map(function(n,t){return R(n,e[t])})}if(S(e)){if(r.length!==V(e))throw"eq: inputs have incompatible dimensions";return P(B(e),V(e),function(n,t){return R(r[t],e[n][t])})}}else if(S(r)){if(I(e)||v(e))return P(B(r),V(r),function(n,t){return R(r[n][t],e)});if(y(e)){if(V(r)!==e.length)throw"eq: inputs have incompatible dimensions";return P(B(r),V(r),function(n,t){return R(r[n][t],e[t])})}if(S(e)){if(B(r)!==B(e)||V(r)!==V(e))throw"eq: inputs have incompatible dimensions";return P(B(r),V(r),function(n,t){return R(r[n][t],e[n][t])})}}return 0}function j(r,e){if(I(r)){if(I(e))return r<e?1:0;if(v(e))return r<String(e)?1:0;if(y(e))return e.map(function(n){return j(r,n)});if(S(e))return P(B(e),V(e),function(n,t){return j(r,e[n][t])})}else if(M(r)){if(I(e))return String(r)<e?1:0;if(M(e))return r<e?1:0;if(o(e))return e.re<r&&0===e.im?1:0;if(y(e))return e.map(function(n){return j(r,n)});if(S(e))return P(B(e),V(e),function(n,t){return j(r,e[n][t])})}else if(o(r)){if(I(e))return String(r)<e?1:0;if(M(e))return r.re<e&&0===r.im?1:0;if(o(e))return 0;if(y(e))return e.map(function(n){return j(r,n)});if(S(e))return P(B(e),V(e),function(n,t){return j(r,e[n][t])})}else if(y(r)){if(I(e)||v(e))return r.map(function(n){return j(n,e)});if(y(e)){if(r.length!==e.length)throw"lt: inputs have incompatible dimensions";return r.map(function(n,t){return j(n,e[t])})}if(S(e)){if(r.length!==V(e))throw"lt: inputs have incompatible dimensions";return P(B(e),V(e),function(n,t){return j(r[t],e[n][t])})}}else if(S(r)){if(I(e)||v(e))return P(B(r),V(r),function(n,t){return j(r[n][t],e)});if(y(e)){if(V(r)!==e.length)throw"lt: inputs have incompatible dimensions";return P(B(r),V(r),function(n,t){return j(r[n][t],e[t])})}if(S(e)){if(B(r)!==B(e)||V(r)!==V(e))throw"lt: inputs have incompatible dimensions";return P(B(r),V(r),function(n,t){return j(r[n][t],e[n][t])})}}return 0}function a(r,e){if(I(r)){if(I(e))return r<=e?1:0;if(v(e))return r<=String(e)?1:0;if(y(e))return e.map(function(n){return a(r,n)});if(S(e))return P(B(e),V(e),function(n,t){return a(r,e[n][t])})}else if(M(r)){if(I(e))return String(r)<=e?1:0;if(M(e))return r<=e?1:0;if(o(e))return e.re<=r&&0===e.im?1:0;if(y(e))return e.map(function(n){return a(r,n)});if(S(e))return P(B(e),V(e),function(n,t){return a(r,e[n][t])})}else if(o(r)){if(I(e))return String(r)<=e?1:0;if(M(e))return r.re<=e&&0===r.im?1:0;if(o(e))return R(r,e)?1:0;if(y(e))return e.map(function(n){return a(r,n)});if(S(e))return P(B(e),V(e),function(n,t){return a(r,e[n][t])})}else if(y(r)){if(I(e)||v(e))return r.map(function(n){return a(n,e)});if(y(e)){if(r.length!==e.length)throw"le: inputs have incompatible dimensions";return r.map(function(n,t){return a(n,e[t])})}if(S(e)){if(r.length!==V(e))throw"le: inputs have incompatible dimensions";return P(B(e),V(e),function(n,t){return a(r[t],e[n][t])})}}else if(S(r)){if(I(e)||v(e))return P(B(r),V(r),function(n,t){return a(r[n][t],e)});if(y(e)){if(V(r)!==e.length)throw"le: inputs have incompatible dimensions";return P(B(r),V(r),function(n,t){return a(r[n][t],e[t])})}if(S(e)){if(B(r)!==B(e)||V(r)!==V(e))throw"le: inputs have incompatible dimensions";return P(B(r),V(r),function(n,t){return a(r[n][t],e[n][t])})}}return 0}function Z(n,t){return M(n)&&M(t)?n+t:o(n)&&v(t)?n.add(t):o(t)&&v(n)?t.add(n):u}function W(n,t){return M(n)&&M(t)?n-t:o(n)&&v(t)?n.sub(t):o(t)&&v(n)?t.neg().add(n):u}function F(n,t){return M(n)&&M(t)?n*t:o(n)&&v(t)?n.mul(t):o(t)&&v(n)?t.mul(n):u}function Q(n,t){return M(n)&&M(t)?n/t:o(n)&&v(t)?n.div(t):o(t)&&v(n)?t.inv().mul(n):u}function sn(n,t){return M(n)&&M(t)?O.pow(n,t):o(n)&&v(t)?n.pow(t):o(t)&&v(n)?new C(n,0).pow(t):u}function hn(n){return M(n)?-n:o(n)?n.neg():u}function D(n){return M(n)?n:o(n)?n.conj():u}function pn(n){return M(n)?0===n?l:1/n:o(n)?0===n.abs()?new C(l,n.im<0?l:-l):n.inv():u}function U(n){return M(n)?O.abs(n):o(n)?n.abs():u}function mn(t,e){if(I(t)&&I(e))return t+e;if(v(t)&&v(e))return Z(t,e);if(S(t)&&S(e)){if(B(t)===B(e)&&V(t)===V(e))return t.map(function(n,r){return n.map(function(n,t){return mn(n,e[r][t])})});throw"add: matrix dimensions do not match"}if(y(t)&&y(e)){if(t.length===e.length)return t.map(function(n,t){return mn(n,e[t])});throw"add: vector dimensions do not match"}return b(t)?t.map(function(n){return mn(n,e)}):b(e)?e.map(function(n){return mn(t,n)}):t}function gn(t,e){if(v(t)&&v(e))return W(t,e);if(S(t)&&S(e)){if(B(t)===B(e)&&V(t)===V(e))return t.map(function(n,r){return n.map(function(n,t){return gn(n,e[r][t])})});throw"sub: matrix dimensions do not match"}if(y(t)&&y(e)){if(t.length===e.length)return t.map(function(n,t){return gn(n,e[t])});throw"sub: vector dimensions do not match"}return b(t)?t.map(function(n){return gn(n,e)}):b(e)?e.map(function(n){return gn(t,n)}):t}function dn(t,e){if(v(t)&&v(e))return F(t,e);if(S(t)&&S(e)){if(B(t)===B(e)&&V(t)===V(e))return t.map(function(n,r){return n.map(function(n,t){return dn(n,e[r][t])})});throw"dotmul: matrix dimensions do not match"}if(y(t)&&y(e)){if(t.length===e.length)return t.map(function(n,t){return dn(n,e[t])});throw"dotmul: vector dimensions do not match"}return b(t)?t.map(function(n){return dn(n,e)}):b(e)?e.map(function(n){return dn(t,n)}):t}function vn(t,e){if(v(t)&&v(e))return Q(t,e);if(S(t)&&S(e)){if(B(t)===B(e)&&V(t)===V(e))return t.map(function(n,r){return n.map(function(n,t){return vn(n,e[r][t])})});throw"dotdiv: matrix dimensions do not match"}if(y(t)&&y(e)){if(t.length===e.length)return t.map(function(n,t){return vn(n,e[t])});throw"dotdiv: vector dimensions do not match"}return b(t)?t.map(function(n){return vn(n,e)}):b(e)?e.map(function(n){return vn(t,n)}):t}function f(i,o){if(v(i)&&v(o))return F(i,o);if(S(i)&&S(o)){if(V(i)===B(o))return n=B(i),t=V(o),u=B(o),P(n,t,function(n,t){for(var r=0,e=0;e<u;++e)r=Z(r,F(i[n][e],o[e][t]));return r});throw"mul: matrix-matrix dimensions do not match"}if(y(i)&&S(o)){if(i.length===B(o))return t=V(o),u=i.length,P(n=1,t,function(n,t){for(var r=0,e=0;e<u;++e)r=Z(r,F(i[e],o[e][t]));return r});throw"mul: vector-matrix dimensions do not match"}if(S(i)&&y(o)){var n,t,u;if(V(i)===o.length)return n=B(i),u=o.length,P(n,t=1,function(n,t){for(var r=0,e=0;e<u;++e)r=Z(r,F(i[n][e],o[e]));return r});throw"mul: matrix-vector dimensions do not match"}return b(i)?i.map(function(n){return f(n,o)}):b(o)?o.map(function(n){return f(i,n)}):i}function yn(n,t){if(v(n)&&v(t))return sn(n,t);if(S(n)&&B(n)===V(n)&&w(t)){if(t<0&&(t=-t,!(n=Dn(n))||!n.length))throw"pow: no inverse";if(0===t)return In(B(n));if(1===t)return n;if(2===t)return f(n,n);for(var r=In(B(n));0!==t;)1&t&&(r=f(r,n)),0<(t>>=1)&&(n=f(n,n));return r}return n}function wn(n){return nn(function(n){return o(n)?n.re:n},n,!0)}function xn(n){return nn(function(n){return o(n)?n.im:0},n,!0)}function bn(n){return nn(U,n,!0)}function Sn(e,n=":",r=null){if(G(e)){if(y(n)&&n.length===e.length&&$n(n,function(n){return 0===n||1===n}))return u=1===(u=n.reduce(function(n,t,r){return 1===t&&n.push(e[r]),n},[])).length?u[0]:u;if(":"===(n=v(n)?k(n,!0):n)||w(n)||y(n))return t=e.length,1===(u=(n=w(n=":"===n?jn(1,t):n)?[n]:n).map(function(n){if(n<1&&(n+=t),n<1||t<n)throw"get: index out of bounds";return e[n-1]})).length?u[0]:u;throw"get: invalid range"}if(c(e)){var i=B(e),o=V(e),t=i*o;if(null==r&&S(n)&&B(n)===i&&V(n)===o&&$n(n,function(n){return 0===n||1===n})){for(var u=[],f=0;f<o;++f)for(var a=0;a<i;++a)1===n[a][f]&&u.push(e[a][f]);return u=1===u.length?u[0]:u}if(v(n)&&(n=k(n,!0)),v(r)&&(r=k(r,!0)),":"===n||w(n)||y(n)){if(w(n=":"===n?jn(1,i):n)&&(n=[n]),null==r)return u=1===(u=n.map(function(n){if(n<1&&(n+=t),n<1||t<n)throw"get: index out of bounds";return e[(n-1)%i][O.floor((n-1)/i)]})).length?u[0]:u;if(":"===r||w(r)||y(r))return w(r=":"===r?jn(1,o):r)&&(r=[r]),u=1===(u=n.map(function(t){if(t<1&&(t+=i),t<1||i<t)throw"get: index out of bounds";return r.map(function(n){if(n<1&&(n+=o),n<1||o<n)throw"get: index out of bounds";return e[t-1][n-1]})})).length&&1===u[0].length?u[0][0]:u}throw"get: invalid range"}return e}function kn(i,n=":",o=null,u=null){if(G(i)){if(y(n)&&n.length===i.length&&$n(n,function(n){return 0===n||1===n})){if(J(u))return n.forEach(function(n,t){1===n&&(i[t]=u)}),i;if(b(u))return e=0,n.forEach(function(n,t){if(1===n){if(e>=u.length)throw"set: index out of bounds";i[t]=u[e++]}}),i}if(":"===(n=v(n)?k(n,!0):n)||w(n)||y(n)){var r=i.length;if(w(n=":"===n?jn(1,r):n)&&(n=[n]),J(u))return n.forEach(function(n){if(n<1&&(n+=r),n<1||r<n)throw"set: index out of bounds";i[n-1]=u}),i;if(b(u)&&u.length>=n.length)return n.forEach(function(n,t){if(n<1&&(n+=r),n<1||r<n)throw"set: index out of bounds";i[n-1]=u[t]}),i;throw"set: invalid value or range does not match dimensions"}throw"set: invalid range"}if(c(i)){var f=B(i),a=V(i),r=f*a;if(S(n)&&B(n)===f&&V(n)===a&&$n(n,function(n){return 0===n||1===n})){if(J(u))return n.forEach(function(n,r){n.forEach(function(n,t){1===n&&(i[r][t]=u)})}),i;if(b(u)){for(var e=0,t=0;t<a;++t)for(var l=0;l<f;++l)if(1===n[l][t]){if(e>=u.length)throw"set: index out of bounds";i[l][t]=u[e++]}return i}}if(v(n)&&(n=k(n,!0)),v(o)&&(o=k(o,!0)),":"===n||w(n)||y(n)){if(null==o){if(w(n=":"===n?jn(1,r):n)&&(n=[n]),J(u))return n.forEach(function(n){if(n<1&&(n+=r),n<1||r<n)throw"set: index out of bounds";i[(n-1)%f][O.floor((n-1)/f)]=u}),i;if(G(u)&&u.length>=n.length)return n.forEach(function(n,t){if(n<1&&(n+=r),n<1||r<n)throw"set: index out of bounds";i[(n-1)%f][O.floor((n-1)/f)]=u[t]}),i}else if(":"===o||w(o)||y(o)){if(w(n=":"===n?jn(1,f):n)&&(n=[n]),w(o=":"===o?jn(1,a):o)&&(o=[o]),J(u))return n.forEach(function(t){if(t<1&&(t+=f),t<1||f<t)throw"set: index out of bounds";o.forEach(function(n){if(n<1&&(n+=a),n<1||a<n)throw"set: index out of bounds";i[t-1][n-1]=u})}),i;if(c(u)&&u.length>=n.length&&u[0].length>=o.length)return n.forEach(function(r,e){if(r<1&&(r+=f),r<1||f<r)throw"set: index out of bounds";o.forEach(function(n,t){if(n<1&&(n+=a),n<1||a<n)throw"set: index out of bounds";i[r-1][n-1]=u[e][t]})}),i}throw"set: invalid value or range does not match dimensions"}throw"set: invalid range"}return i}function An(n,t,r){return"horz"===n&&c(t)&&c(r)&&B(t)===B(r)?t.map(function(n,t){return n.concat(r[t])}):"vert"===n&&c(t)&&c(r)&&V(t)===V(r)?t.concat(r):void g(!0)}function Tn(t){var n=[].slice.call(arguments,1);return b(n[0])&&(n=n[0]),J(t)?n.length?n.map(function(n){return[1,1][n-1]}):[1,1]:G(t)?n.length?n.map(function(n){return[1,t.length][n-1]}):[1,t.length]:c(t)?n.length?n.map(function(n){return[B(t),V(t)][n-1]}):[B(t),V(t)]:[]}function En(n){return b(n)?O.max.apply(O,Tn(n)):null==n?0:1}function _n(n=1,t=null){return y(n)&&(t=n[1],n=n[0]),P(n,t=t||n,0)}function In(n){return P(n=k(n=null==n?1:n,!0),n,function(n,t){return n===t?1:0})}function Pn(r,i){return i=i||0,J(r)?[[r]]:G(r)?P(r.length,r.length,function(n,t){return i===n-t?r[n]:0}):c(r)?r.reduce(function(n,t,e){return t.reduce(function(n,t,r){return i===e-r&&n.push(t),n},n)},[]):[]}function Cn(r){return c(r)?P(V(r),B(r),function(n,t){return r[t][n]}):r}function Rn(r){return c(r)?P(V(r),B(r),function(n,t){return v(r[t][n])?D(r[t][n]):r[t][n]}):v(r)?D(r):r}function jn(n,t,r){if(1===arguments.length){if(c(n)){for(var e,i=B(n),o=V(n),u=new Array(o*i),f=0,a=0;a<o;++a)for(e=0;e<i;++e)u[f++]=n[e][a];return u}return n}if(null!=r&&null!=t||(null!=t?(r=t,t=1):(r=n,n=t=1)),n=k(n,!0),t=k(t,!0),r=k(r,!0),u=[],0<t)for(;n<=r;n+=t)u.push(n);else if(t<0)for(;r<=n;n+=t)u.push(n);return u}function Ln(t){return v(t)?t:y(t)?t.reduce(Z,0):S(t)?X(V(t),function(n){return Ln(Mn(t,n))}):0}function Nn(t){return v(t)?t:y(t)?t.reduce(F,1):S(t)?X(V(t),function(n){return Nn(Mn(t,n))}):0}function qn(t){return v(t)?t:y(t)?O.min.apply(null,t):S(t)?X(V(t),function(n){return qn(Mn(t,n))}):0}function zn(t){return v(t)?t:y(t)?O.max.apply(null,t):S(t)?X(V(t),function(n){return zn(Mn(t,n))}):0}function On(t){return v(t)?t:y(t)?Q(Ln(t),t.length):S(t)?X(V(t),function(n){return On(Mn(t,n))}):0}function $n(n,t){if(v(n))return t(n,1,1)?1:0;if(y(n)){for(var r=0,e=n.length;r<e;++r)if(!t(n[r],r+1,1))return 0;return 1}if(S(n)){for(var r=0,i=B(n),o=V(n);r<i;++r)for(var u=0;u<o;++u)if(!t(n[r][u],r+1,u+1))return 0;return 1}return 0}function B(n){return n.length}function V(n){return n[0].length}function Mn(t,r){return X(t.length,function(n){return t[n][r]})}function Xn(n,t,r){var e;t!==r&&(e=n[t],n[t]=n[r],n[r]=e)}function Zn(n,t,r,e,i,o){var u,f=n[0].length;for(null==e&&(e=1),null==i&&(i=1),u=o||0;u<f;++u)n[t][u]=Z(F(i,n[t][u]),F(e,n[r][u]))}function Wn(r,e,i,n,t){var o=B(r),u=V(r);return o&&u?b(e)&&b(i)?(e=e.filter(function(n){return 0<=n&&n<o}),i=i.filter(function(n){return 0<=n&&n<u}),P(e.length,i.length,function(n,t){return r[e[n]][i[t]]})):((e=null==e?0:e)<0&&(e+=o),(i=null==i?0:i)<0&&(i+=u),(n=null==n?o-1:n)<0&&(n+=o),(t=null==t?u-1:t)<0&&(t+=u),e=O.max(0,O.min(o-1,e)),n=O.max(0,O.min(o-1,n)),i=O.max(0,O.min(u-1,i)),t=O.max(0,O.min(u-1,t)),e<=n&&i<=t?P(n-e+1,t-i+1,function(n,t){return r[e+n][i+t]}):[]):[]}function Fn(r,e,n){var i=B(r),o=V(r),u=B(e),f=V(e);return"vert"===(n=n||"horz")?P(i+u,O.max(o,f),function(n,t){return o<=t?n<i?0:e[n-i][t]:f<=t?n<i?r[n][t]:0:(n<i?r[n]:e[n-i])[t]}):P(O.max(i,u),o+f,function(n,t){return i<=n?t<o?0:e[n][t-o]:u<=n?t<o?r[n][t]:0:t<o?r[n][t]:e[n][t-o]})}function Qn(n,t){return M(t)&&0<t?v(n)?a(U(n),t)?0:n:b(n)?n.map(function(n){return Qn(n,t)}):n:n}function Dn(n){var t,r,e;return v(n)?pn(n):S(n)&&B(n)===V(n)?1===(r=t=B(n))?[[pn(n[0][0])]]:R((e=Vn(n,!0))[0][t-1][r-1],0)?[]:e[3].map(function(n,t){return n.map(function(n){return Q(n,e[0][t][t])})}):[]}function Un(r){var n,e,t,i,o,u;return v(r)?pn(r):S(r)?(n=B(r),t=V(r),tn(r,0)?Cn(r):1===n&&1===t?[[pn(r[0][0])]]:1===n||1===t?(o=r.reduce(function(n,t){return Z(n,F(t,D(t)))},0),P(t,n,function(n,t){return Q(D(r[t][n]),o)})):(u=(e=Vn(r,!0))[1].length)===t?n===t?e[3].map(function(n,t){return n.map(function(n){return Q(n,e[0][t][t])})}):f(Dn(f(i=Rn(r),r)),i):u===n?f(i=Rn(r),Dn(f(r,i))):(t=function(n,e){var t,r,i=B(n),o=V(n);e=e||Vn(n,!0);return t=e[1],r=t.length,n=Wn(n,X(i,function(n){return n}),X(r,function(n){return t[n][1]})),i=Wn(e[0],0,0,r-1,o-1).map(function(n,r){return n.map(function(n,t){for(t=r;t+1<o&&R(e[0][r][t],0);)++t;return Q(n,e[0][r][t])})}),[n,i]}(r,e),o=f(Dn(f(i=Rn(o=t[0]),o)),i),u=f(i=Rn(u=t[1]),Dn(f(u,i))),f(u,o))):[]}function Bn(n,t,r){var e,i,o,u,f,a,l,c,s,h,p,m,g,d,v=B(n),y=V(n),w=y,x=0;for(b(r)&&(w=O.min(w,r[1])),g=Fn(n,In(v)),e=new Array(w),i=1,d=function(n,t){t=t||0;for(var r=x-1;0<=r;--r)if(n===e[r][t])return r;return-1},o=l=0;o<v&&!(w<=l);++o){for(u=o;R(U(g[u][l]),0);)if(v<=++u&&(u=o,w<=++l)){l=-1;break}if(-1===l)break;for(c=-1,h=null,m=0,u=f=u;u<v;++u)R(p=U(g[u][l]),0)?++m:null!=h&&!j(p,h)||(h=p,c=u);for(;;){if(-1===c)break;if(v-f===m+1){for(o!==c&&(Xn(g,o,c),i=hn(i)),j(g[o][l],0)&&(Zn(g,o,o,0,-1,l),i=hn(i)),u=c,f=o;0<=u&&-1!==(a=d(u));)u=f-=x-a;e[x++]=[u,l],i=o<w?F(i,g[o][o]):0;break}for(m=0,s=c,u=f;u<v;++u)u!==s&&(Zn(g,u,s,hn(Q(g[u][l],g[s][l])),1,l),R(p=U(g[u][l]),0)?++m:j(p,h)&&(h=p,c=u))}++l}return x<w&&(i=0),r=Wn(g,0,y,v-1,v+y-1),g=Wn(g,0,0,v-1,y-1),e.length>x&&(e.length=x),t?[g,e,i,r]:g}function Vn(n,t,r){var e,i,o,u,f,a,l=B(n),c=V(n),s=c;for(b(r)&&O.min(s,r[1]),a=Fn((s=Bn(n,!0,r))[0],s[3]),e=s[1],n=s[2],i=e.length,u=0;u<i;++u)for(o=e[u][1],f=0;f<u;++f)R(a[f][o],0)||(Zn(a,f,u,hn(a[f][o]),a[u][o]),R(a[f][e[f][1]],1))||Zn(a,f,f,0,pn(a[f][e[f][1]]),e[f][1]);return R(a[i-1][e[i-1][1]],1)||Zn(a,i-1,i-1,0,pn(a[i-1][e[i-1][1]]),e[i-1][1]),r=Wn(a,0,c,l-1,l+c-1),a=Wn(a,0,0,l-1,c-1),t?[a,e,n,r]:a}function Yn(n,t,r){var e,i,o,u=B(n),f=V(n);if(!1===r||u===f){for(e=O.min(u,f),i=0;i<e;++i){if("lower"===t||"diagonal"===t)for(o=i+1;o<e;++o)if(!R(n[i][o],0))return;if("upper"===t||"diagonal"===t)for(o=0;o<i;++o)if(!R(n[i][o],0))return}if(f<u){for(i=e;i<u;++i)for(o=0;o<f;++o)if(!R(n[i][o],0))return}else if(u<f)for(o=e;o<f;++o)for(i=0;i<u;++i)if(!R(n[i][o],0))return;return 1}}function Jn(e,n){var t;if(S(e=v(e)?[[e]]:e))return(t=B(e))!==V(e)?0:1===t?e[0][0]:Yn(e,"lower")||Yn(e,"upper")?e.reduce(function(n,t,r){return F(n,e[r][r])},1):!0===n?function n(t,r){var e,i,o,u,f,a,l,c,s,h,p,m,g,d;function v(r,n,e,i){return P(n-1,n-1,function(n,t){return e<=n&&++n,i<=t&&++t,r[n][t]})}if(1===r)f=t[0][0];else if(2===r)a=t[0][0],l=t[0][1],c=t[1][0],f=W(F(a,s=t[1][1]),F(l,c));else if(3===r)a=t[0][0],l=t[0][1],c=t[0][2],s=t[1][0],h=t[1][1],p=t[1][2],m=t[2][0],g=t[2][1],d=t[2][2],f=W(W(W(Z(Z(F(F(a,h),d),F(F(l,p),m)),F(F(c,s),g)),F(F(c,h),m)),F(F(l,s),d)),F(F(a,p),g));else{for(e=o=i=0;e<r;++e)R(t[0][e],0)&&++i,R(t[e][0],0)&&++o;if(u=1,f=0,i<o)for(e=0;e<r;++e)R(t[e][0],0)||(f=Z(f,F(t[e][0],F(u,n(v(t,r,e,0),r-1))))),u=1===u?-1:1;else for(e=0;e<r;++e)R(t[0][e],0)||(f=Z(f,F(t[0][e],F(u,n(v(t,r,0,e),r-1))))),u=1===u?-1:1}return f}(e,t):Bn(e,!0)[2];throw"det: input not supported"}function Gn(e){return v(e)?e:S(e)?e.reduce(function(n,t,r){return Z(n,r<t.length?e[r][r]:0)},0):0}function Hn(n){if(!S(n))return[];var e,i,t,o,r=B(n);if(r!==V(n))return[];for(i=r,o=new Array(i+1),t=_n(i,i),o[i]=1,e=1;e<=i;++e)t=f(n,t).map(function(n,r){return n.map(function(n,t){return r===t?Z(n,o[i-e+1]):n})}),o[i-e]=Q(Gn(f(n,t)),-e);return o.reverse()}function Kn(n){for(var t,r,e,i,o,u,f=B(n),a=V(n),l=!1,c=K(n),s=In(f),h=X(f,0),p=In(f),m=1,g=0;g<f-1;++g){if(R(c[g][g],0)){for(e=g+1,i=!0;e<f&&i;)R(c[e][g],0)?++e:i=!1;if(f<=e){l=!0;break}Xn(c,g,e),Xn(p,g,e)}for(o=c[g][g],s[g][g]=o,h[g]=F(m,o),t=g+1;t<f;++t){for(u=c[t][g],s[t][g]=u,r=g+1;r<a;++r)c[t][r]=Q(W(F(o,c[t][r]),F(c[g][r],u)),m);c[t][g]=0}m=c[g][g]}return l?[]:(h[f-1]=m,[Pn(h),s,c,p])}function nt(n,t,r){if(v(n)&&v(t))return Q(t,n);if(!S(n))return[];if(!y(t)&&!S(t))return[];var e,i=V(n);if(B(n)!==i)return[];if(e=y(t)?(h=t.length,1):(h=B(t),V(t)),i!==h)return[];var o,u,f,a,l,c,s,h=Bn(Cn(n),!0);if(h[1].length!==i)return[];if(o=Cn(h[3]),u=Cn(h[0]),y(t)){for(f=X(i,0),a=0;a<i;++a){if(R(u[a][a],0))return[];for(l=s=0;l<a;++l)s=Z(s,F(u[a][l],f[l]));f[a]=Q(W(t[a],s),u[a][a])}return X(i,function(t){return X(i,function(n){return F(f[n],o[t][n])}).reduce(Z,0)})}for(f=_n(i,e),a=0;a<i;++a){if(R(u[a][a],0))return[];for(c=0;c<e;++c){for(l=s=0;l<a;++l)s=Z(s,F(u[a][l],f[l][c]));f[a][c]=Q(W(t[a][c],s),u[a][a])}}return P(i,e,function(t,r){return X(i,function(n){return F(f[n][r],o[t][n])}).reduce(Z,0)})}function tt(n,t){if(!n.length)return 0;t=t||0;for(var r=n.length,e=0,i=n[0];e+1<r;)++e,i=Z(F(i,t),n[e]);return i}function rt(t){if(t.length<=1)return[];for(var n,r,e,i,o,u,f,a,l,c=t.length-1,s=1e-10,h=new C(s,0),p=new C(0,0),m=new C(1,0),g=function(n){return tt(t,n)},d=function(n){return Q(W(g(Z(n,h)),g(n)),h)},v=t.map(function(n){return C(n).abs()}),y=v.length-1;0<y&&!v[y];)--y;for(r=(O.max.apply(null,v.slice(0,y))||0)/(v[y]||1)+1,n=v[0]/(v[0]+O.max.apply(null,v.slice(1))||1),e=X(c,function(){return new C(n+(r-n)*O.random(),O.random()*q/2,"polar")}),f=0;;){for(y=i=0;y<c;++y){if(o=e[y],a=g(o),0===(l=d(o)).re&&0===l.im){if(a.re<=s&&a.im<=s){++i;continue}u=new C(r,0)}else u=a.div(l);(a=u.div(m.sub(u.mul(e.reduce(function(n,t,r){return n=r===y||o.re===t.re&&o.im===t.im?n:n.add(o.sub(t).inv())},p))))).re<=s&&a.im<=s&&++i,e[y]=o.sub(a)}if(i===c)break;if(1e3<++f)break}return e}function et(n,t){for(var r=n.length-1,e=t.length-1,i=[];0<=r&&0<=e;)i.unshift(Z(n[r--],t[e--]));for(;0<=r;)i.unshift(n[r--]);for(;0<=e;)i.unshift(t[e--]);return i}function it(n,t){var r,e,i,o,u,f=n.length,a=t.length,l=f+a-1;if(!f||!a)return[];for(u=new Array(l),f<a&&(o=n,f=(n=t).length,a=(t=o).length),r=0;r<l;++r)for(e=u[r]=0;e<a;++e)0<=(i=r-e)&&i<f&&(u[r]=Z(u[r],F(n[i],t[e])));return u}E.complex=C,["sign","sqrt","exp","log","sin","cos","tan","sinh","cosh","tanh","asin","acos","atan","asinh","acosh","atanh"].forEach(function(t){E[t]=on[t]?function(n){return nn(function(n){return(o(n)?on:O)[t](n)},n,!0)}:function(n){return nn(O[t],n,!1)}}),T.MAXPRINTSIZE=l,T.tex=function(n){return b(n)?n=n.length?A.call(n,"$mainRet$")?"\\["+n.map(fn).join("\\]\n\\[")+"\\]":b(n[0])?b(n[0][0])||!b(n[1])||n[0].length!==n[1].length?"\\["+n.map(fn).join("\\]\n\\[")+"\\]":"\\["+fn(n)+"\\]":"\\["+(n=n.length>T.MAXPRINTSIZE?n.slice(0,O.round(T.MAXPRINTSIZE/2)).concat("\\vdots").concat(n.slice(1-O.round(T.MAXPRINTSIZE/2))):n).map(fn).join("\\]\n\\[")+"\\]":"":(n=fn(n)).length&&(n="\\["+n+"\\]"),n},E.times=dn,E.real=wn,E.imag=xn,E.conj=function(n){return nn(D,n,!0)},E.abs=bn,E.angle=function(n){return nn(function(n){return o(n)?n.angle():n<0?q:0},n,!0)},E.ceil=function(n){return nn(function(n){return o(n)?new C(O.ceil(n.re),O.ceil(n.im)):O.ceil(n)},n,!0)},E.floor=function(n){return nn(function(n){return o(n)?new C(O.floor(n.re),O.floor(n.im)):O.floor(n)},n,!0)},E.round=function(n){return nn(function(n){return o(n)?new C(O.round(n.re),O.round(n.im)):O.round(n)},n,!0)},E.mod=function(n,r){return R(r=k(r||0),0)?n:nn(function(n){var t;return w(n)?((t=n%r)<0&&0<r&&(t+=r),t):n},n,!0)},E.bitshift=function(n,t){return nn(function(n){return w(n)?t<0?n>>-t:n<<t:n},n,!0)},E.bitand=function r(t,e){if(w(t)){if(w(e))return t&e;if(b(e))return e.map(function(n){return r(t,n)})}else if(b(t)){if(w(e))return t.map(function(n){return r(n,e)});if(b(e)&&t.length===e.length)return t.map(function(n,t){return r(n,e[t])})}return 0},E.bitor=function r(t,e){if(w(t)){if(w(e))return t|e;if(b(e))return e.map(function(n){return r(t,n)})}else if(b(t)){if(w(e))return t.map(function(n){return r(n,e)});if(b(e)&&t.length===e.length)return t.map(function(n,t){return r(n,e[t])})}return 0},E.bitxor=function r(t,e){if(w(t)){if(w(e))return t^e;if(b(e))return e.map(function(n){return r(t,n)})}else if(b(t)){if(w(e))return t.map(function(n){return r(n,e)});if(b(e)&&t.length===e.length)return t.map(function(n,t){return r(n,e[t])})}return 0},E.bin2dec=function n(t){return b(t)?t.map(n):I(t)?parseInt(t,2):t},E.dec2bin=function n(t){return b(t)?t.map(n):M(t)?t.toString(2):t},E.hex2dec=function n(t){return b(t)?t.map(n):I(t)?parseInt(t,16):t},E.dec2hex=function n(t){return b(t)?t.map(n):M(t)?t.toString(16):t},E.tolower=function n(t){return b(t)?t.map(n):I(t)?t.toLowerCase():t},E.toupper=function n(t){return b(t)?t.map(n):I(t)?t.toUpperCase():t},T.get=Sn,T.set=kn,E.sub2ind=function(n,t,r){return y(t)&&(r=t[1],t=t[0]),1===n.length?t:t-1+n[0]*(r-1)+1},E.ind2sub=function(n,t){return 1===n.length?[t,1]:[(t-1)%n[0]+1,O.floor((t-1)/n[0])+1]},E.cat=function(n,t,r){var e,i=[];if(1===n)for(i=t,e=2;e<arguments.length;++e)i=An("vert",i,arguments[e]);else if(2===n)for(i=t,e=2;e<arguments.length;++e)i=An("horz",i,arguments[e]);return i},E.horzcat=function(n,t){for(var r=n,e=1;e<arguments.length;++e)r=An("horz",r,arguments[e]);return r},E.vertcat=function(n,t){for(var r=n,e=1;e<arguments.length;++e)r=An("vert",r,arguments[e]);return r},E.reshape=function(r,e,n){y(e)&&(n=e[1],e=e[0]);var i,t=e*n;return J(r)&&1===e&&1===n?[[r]]:G(r)&&r.length===t?P(e,n,function(n,t){return r[n+e*t]}):c(r)&&B(r)*V(r)==t?(i=B(r),P(e,n,function(n,t){n+=e*t;return r[n%i][O.floor(n/i)]})):r},E.squeeze=function(n){return n},E.repmat=function(r,e,i){return y(e)&&(i=e[1],e=e[0]),null==i&&(i=e),c(r=G(r=J(r)?[[r]]:r)?[r]:r)?P(e*B(r),i*V(r),function(n,t){return r[n%e][t%i]}):r},E.repelem=function(t,r){var e,i;if(y(t))if(y(r)){if(r.length===t.length)return e=0,i=-1,X(Ln(r),function(n){return n===e&&(e+=r[++i]),t[i]})}else if(w(r))return i=-1,X(r*t.length,function(n){return 0==n%r&&++i,t[i]});return t},E.size=Tn,E.length=En,E.numel=function(n){return Nn(Tn(n))},E.ndims=function(n){return En(Tn(n))},E.rows=function(n){return Tn(n,1)},E.columns=function(n){return Tn(n,2)},E.zeros=_n,E.ones=function(n=1,t=null){return y(n)&&(t=n[1],n=n[0]),P(n,t=t||n,1)},E.meshgrid=function(r,e){if(1===arguments.length&&(e=r),y(r)&&y(e))return[P(e.length,r.length,function(n,t){return r[t]}),P(e.length,r.length,function(n,t){return e[n]})];throw"meshgrid: invalid inputs"},E.eye=In,E.diag=Pn,E.dot=function t(r,e){if(v(r)&&v(e))return F(r,D(e));if(y(r)&&y(e)){if(r.length===e.length)return r.reduce(function(n,t,r){return Z(n,F(t,D(e[r])))},0)}else if(S(r)&&S(e)&&B(r)===B(e)&&V(r)===V(e))return X(V(r),function(n){return t(Mn(r,n),Mn(e,n))});return 0},E.cross=function(n,t){if(!y(n)||3!==n.length)throw"cross: input 1 not vector of length 3";if(y(t)&&3===t.length)return[W(F(n[1],t[2]),F(n[2],t[1])),W(F(n[2],t[0]),F(n[0],t[2])),W(F(n[0],t[1]),F(n[1],t[0]))];throw"cross: input 2 not vector of length 3"},E.kron=function(r,e){var n,t,i,o;if(S(r)){if(S(e))return n=B(r),t=V(r),i=B(e),o=V(e),P(n*i,t*o,function(n,t){return f(r[O.floor(n/i)][O.floor(t/o)],e[n%i][t%o])});if(y(e))return n=B(r),t=V(r),i=1,o=e.length,P(n*i,t*o,function(n,t){return f(r[n][O.floor(t/o)],e[t%o])})}else if(y(r)){if(y(e))return P(r.length,e.length,function(n,t){return f(r[n],e[t])});if(S(e))return n=r.length,i=B(e),o=V(e),P(n*i,(t=1)*o,function(n,t){return f(r[O.floor(n/i)],e[n%i][t%o])})}return f(r,e)},E.transpose=Cn,E.ctranspose=Rn,E.rand=function(n,t){return n?(y(n)&&(t=n[1],n=n[0]),P(n,t=t||n,function(){return O.random()})):O.random()},E.randi=function(n,t,r){return t||r?(y(t)&&(r=t[1],t=t[0]),P(t,r=r||t,function(){return O.ceil(O.random()*n)})):O.ceil(O.random()*n)},E.randn=function(n,t){return n?(y(n)&&(t=n[1],n=n[0]),P(n,t=t||n,cn)):cn()},E.linspace=function(n,t,r=100){for(var e=(t-n)/(r-1),i=new Array(r),o=0,u=n;o<r;++o,u+=e)i[o]=u;return i},E.logspace=function(n,t,r=100){for(var e=O.pow(t/n,1/(r-1)),i=new Array(r),o=0,u=n;o<r;++o,u*=e)i[o]=u;return i},E.colon=jn,E.sum=Ln,E.prod=Nn,E.min=qn,E.max=zn,E.norm=function(n,t){if(Y(t=null==t?2:t)){if(v(n))return U(n);if(y(n))return(t<0?qn:zn)(bn(n));if(S(n)&&0<t)return zn(Ln(bn(Cn(n))))}else if(M(t)){if(1===t){if(v(n))return U(n);if(y(n))return Ln(bn(n));if(S(n))return zn(Ln(bn(n)))}else if(2===t){if(v(n))return U(n);if(y(n))return O.sqrt(Ln(n.map(function(n){return F(n,D(n))})))}else if(0<t){if(v(n))return U(n);if(y(n))return O.pow(Ln(n.map(function(n){return sn(U(n),t)})),1/t)}}else if("fro"===t&&S(n))return O.sqrt(Gn(f(Rn(n),n)));g(!0)},E.mean=On,E.std=function t(r){return v(r)?0:y(r)?1===r.length?0:O.sqrt(Q(Ln(yn(bn(gn(r,On(r))),2)),r.length-1)):S(r)?X(V(r),function(n){return t(Mn(r,n))}):0},E.find=function(n){return i=function(n){return!R(n,0)},y(n=n)?n.reduce(function(n,t,r){return i(t,r+1,1)&&n.push(r+1),n},[]):S(n)?(o=B(n),n.reduce(function(n,t,e){return t.reduce(function(n,t,r){return i(t,e+1,r+1)&&n.push(e+o*r+1),n},n)},[])):[];var i,o},E.any=function(n){var t=n,r=function(n){return!R(n,0)};if(v(t))return r(t,1,1)?1:0;if(y(t)){for(var e=0,i=t.length;e<i;++e)if(r(t[e],e+1,1))return 1}else if(S(t))for(var e=0,o=B(t),u=V(t);e<o;++e)for(var f=0;f<u;++f)if(r(t[e][f],e+1,f+1))return 1;return 0},E.all=function(n){return $n(n,function(n){return!R(n,0)})},E.isreal=function(n){return $n(n,H)},E.isempty=function(n){return b(n)?b(n[0])?n[0].length?0:1:n.length?0:1:0},E.magic=function n(r){if(!w(r=k(r,!0))||r<=2)return 1===r?[[1]]:[];var e,i,o,u,f,t,a,l,c,s,h,p,m,g=1&r,d=0==(3&r),v=r*r,y=r-g>>1;if(g)return e=r+y,i=y+g,P(r,r,function(n,t){return(e+n-(t=r-1-t))%r*r+(i+t+n)%r+1});if(d)return c=0,P(r,r,function(n,t){return++c,(n+1&3)>>1==(t+1&3)>>1?v-(c-1):c});for(p=n(y),f=(u=(o=g=y*y)<<1)+g,m=P(r,r,function(n,t){return n<y&&t<y?p[n][t]:n<y?p[n][t-y]+f:t<y?p[n-y][t]+u:p[n-y][t-y]+o}),a=t=y>>>1,h=0;h<y;++h)for(s=0;s<r;++s)!(s<t||r-a<s||s===t&&h===t)||0===s&&h===t||(l=m[s][h],m[s][h]=m[s][h+y],m[s][h+y]=l);return m},E.inv=function(n){if(S(n=v(n)?[[n]]:n))return Dn(n);throw"inv: input not supported"},E.pinv=function(n,t){if(S(n=v(n)?[[n]]:n))return Un(Qn(n,t));throw"pinv: input not supported"},E.ref=function(n,t){if(S(n=v(n)?[[n]]:n))return xt([(n=Bn(Qn(n,t),!0))[0],n[1].map(function(n){return n[1]+1})],n[0]);throw"ref: input not supported"},E.rref=function(n,t){if(S(n=v(n)?[[n]]:n))return xt([(n=Vn(Qn(n,t),!0))[0],n[1].map(function(n){return n[1]+1})],n[0]);throw"rref: input not supported"},E.rank=function(n){if(S(n=v(n)?[[n]]:n))return Bn(n,!0)[1].length;throw"rank: input not supported"},E.det=Jn,E.trace=Gn,E.charpoly=Hn,E.eig=function(t){return S(t)?r((Yn(t,"upper")||Yn(t,"lower")?X(O.min(B(t),V(t)),function(n){return t[n][n]}):rt(Hn(t))).sort(function(n,t){return U(n)-U(t)})):[]},E.rowspace=function(n,t){return Bn(r=Qn(n,t),!0)[1].map(function(n){return r[n[0]]});var r},E.colspace=function(n,t){return Bn(r=Qn(n,t),!0)[1].map(function(t){return X(r.length,function(n){return r[n][t[1]]})});var r},E.null=function(n,t){return n=Qn(n,t),i=V(n),o=(n=Vn(n,!0))[0],u=n[1],f=u.length,n=u.reduce(function(n,t){for(var r=0;r<n.length&&t[1]>n[r];)++r;return r<n.length&&t[1]===n[r]&&n.splice(r,1),n},X(i,function(n){return n})),a=f?u.reduce(function(n,t,r){return F(n,o[r][t[1]])},1):1,n.map(function(t){for(var n,r=X(i,function(n){return n===t?a:0}),e=0;e<f;++e)(n=u[e][1])<=t&&(r[n]=W(r[n],F(Q(a,o[e][n]),o[e][t])));return r});var i,o,u,f,a},E.svd=function(n,t){if(S(n=v(n)?[[n]]:n))return xt([(n=function z(n,t){M(t)||(t=$);var r,e=V(n),i=B(n);if(i<e)return r=z(Cn(n),t),[Cn(r[2]),r[1],Cn(r[0])];var o,u,f,a,l,c,s,h,p,m,g,d,v,y,w,x,b,S,k,A,T,E=i,_=e,I=K(n),P=_n(i,E),C=X(e,0),R=_n(e,_),j=Number.MIN_VALUE/t,L=new Array(e),N=new Array(e),q=new Array(e);for(N[0]=0,y=1;y<=e;++y){for(b=y+1,f=0,d=y;d<=i;++d)f+=O.pow(wn(I[d-1][y-1]),2)+O.pow(xn(I[d-1][y-1]),2);if(L[y-1]=0,j<f&&(f=O.sqrt(f),L[y-1]=f,l=0===(a=U(I[y-1][y-1]))?1:Q(I[y-1][y-1],a),I[y-1][y-1]=F(l,f+a),y!==e+0)){for(v=b;v<=e+0;++v){for(l=0,d=y;d<=i;++d)l=Z(l,F(D(I[d-1][y-1]),I[d-1][v-1]));for(l=Q(l,f*(f+a)),d=y;d<=i;++d)I[d-1][v-1]=W(I[d-1][v-1],F(l,I[d-1][y-1]))}for(l=hn(rn(D(I[y-1][y-1]))),v=b;v<=e+0;++v)I[y-1][v-1]=F(l,I[y-1][v-1])}if(y===e)break;for(f=0,v=b;v<=e;++v)f+=O.pow(wn(I[y-1][v-1]),2)+O.pow(xn(I[y-1][v-1]),2);if(N[b-1]=0,j<f){for(f=O.sqrt(f),N[b-1]=f,l=0===(a=U(I[y-1][b-1]))?1:Q(I[y-1][b-1],a),I[y-1][b-1]=F(l,f+a),d=b;d<=i;++d){for(l=0,v=b;v<=e;++v)l=Z(l,F(D(I[y-1][v-1]),I[d-1][v-1]));for(l=Q(l,f*(f+a)),v=b;v<=e;++v)I[d-1][v-1]=W(I[d-1][v-1],F(l,I[y-1][v-1]))}for(l=hn(rn(D(I[y-1][b-1]))),d=b;d<=i;++d)I[d-1][b-1]=F(I[d-1][b-1],l)}}for(c=0,y=1;y<=e;++y)C[y-1]=L[y-1],q[y-1]=N[y-1],c=O.max(c,C[y-1]+q[y-1]);if(c*=t,0<E)for(v=1;v<=E;++v)P[v-1][v-1]=1;if(0<_)for(v=1;v<=_;++v)R[v-1][v-1]=1;for(x=1;x<=e;++x){for(y=e+1-x,A=1;A<=50;++A){for(T=!0,k=1;k<=y;++k){if(O.abs(q[(w=y+1-k)-1])<=c){T=!1;break}if(O.abs(C[w-1-1])<=c){T=!0;break}}if(T)for(g=0,S=w-(m=1),d=w;d<=y&&(h=m*q[d-1],q[d-1]=g*q[d-1],!(O.abs(h)<=c));++y)if(a=ln(h,p=C[d-1]),g=p/(C[d-1]=a),m=-h/a,0<E)for(v=1;v<=e;++v)o=wn(P[v-1][S-1]),u=wn(P[v-1][d-1]),P[v-1][S-1]=o*g+u*m,P[v-1][d-1]=u*g-o*m;if(a=C[y-1],w===y)break;for(o=C[w-1],s=ln(h=(((u=C[y-1-1])-a)*(u+a)+((s=q[y-1-1])-(p=q[y-1]))*(s+p))/(2*p*u),1),h=((o-a)*(o+a)+(u/(h+(s=h<0?-s:s))-p)*p)/o,d=S=w+(m=g=1);S<=y;++S){if(s=q[d-1],u=C[d-1],p=m*s,s*=g,a=ln(p,h),h=o*(g=h/(q[d-1-1]=a))+s*(m=p/a),s=s*g-o*m,p=u*m,u*=g,0<_)for(v=1;v<=e;++v)o=wn(R[v-1][d-1-1]),a=wn(R[v-1][d-1]),R[v-1][d-1-1]=o*g+a*m,R[v-1][d-1]=a*g-o*m;if(a=ln(p,h),h=(g=h/(C[d-1-1]=a))*s+(m=p/a)*u,o=g*u-m*s,0<E)for(v=1;v<=e;++v)u=wn(P[v-1][d-1-1]),a=wn(P[v-1][d-1]),P[v-1][d-1-1]=u*g+a*m,P[v-1][d-1]=a*g-u*m}q[w-1]=0,q[y-1]=h,C[y-1]=o}if(a<0&&(C[y-1]=-a,0<_))for(v=1;v<=e;++v)R[v-1][y-1]=hn(R[v-1][y-1])}for(y=1;y<=e;++y){for(s=-1,d=v=y;d<=e;++d)s<C[d-1]&&(s=C[d-1],v=d);if(v!==y){if(C[v-1]=C[y-1],C[y-1]=s,0<_)for(d=1;d<=e;++d)l=R[d-1][v-1],R[d-1][v-1]=R[d-1][y-1],R[d-1][y-1]=l;if(0<E)for(d=1;d<=e;++d)l=P[d-1][v-1],P[d-1][v-1]=P[d-1][y-1],P[d-1][y-1]=l}}if(0<E)for(x=1;x<=e;++x)if(0!==L[(y=e+1-x)-1]){for(l=hn(rn(I[y-1][y-1])),v=1;v<=E;++v)P[y-1][v-1]=F(l,P[y-1][v-1]);for(v=1;v<=E;++v){for(l=0,d=y;d<=i;++d)l=Z(l,F(D(I[d-1][y-1]),P[d-1][v-1]));for(l=Q(l,F(U(I[y-1][y-1]),L[y-1])),d=y;d<=i;++d)P[d-1][v-1]=W(P[d-1][v-1],F(l,I[d-1][y-1]))}}if(0<_&&2<=e)for(x=2;x<=e;++x)if(0!==N[(b=1+(y=e+1-x))-1]){for(l=hn(rn(D(I[y-1][b-1]))),v=1;v<=_;++v)R[b-1][v-1]=F(l,R[b-1][v-1]);for(v=1;v<=_;++v){for(l=0,d=b;d<=e;++d)l=Z(l,F(I[y-1][d-1],R[d-1][v-1]));for(l=Q(l,F(U(I[y-1][b-1]),N[b-1])),d=b;d<=e;++d)R[d-1][v-1]=W(R[d-1][v-1],F(l,D(I[y-1][d-1])))}}return[P,C,R]}(n,t))[0],Pn(n[1]),n[2]],n[1]);throw"svd: input not supported"},E.lu=function(n){if(S(n=v(n)?[[n]]:n))return xt(n=Kn(n),n[0]);throw"lu: input not supported"},E.qr=function(n){var t,r;if(S(n=v(n)?[[n]]:n))return B(n=n),t=V(n),r=Cn(n),xt(r=(n=Kn(Fn(f(r,n),r)))?[Cn(Wn(n[2],0,t,-1,-1)),n[0],Cn(n[1])]:[],r[0]);throw"qr: input not supported"},E.ldl=function(n){if(S(n=v(n)?[[n]]:n))return xt(n=function(n){var t,r,e,i,o,u,f=B(n);if(f===V(n)&&tn(n,Rn(n))){for(o=_n(f,f),u=In(f),t=0;t<f;++t){for(r=0;r<t;++r){for(i=e=0;e<r;++e)i=Z(i,F(F(u[t][e],D(u[r][e])),o[e][e]));u[t][r]=Q(W(n[t][r],i),o[r][r])}for(i=e=0;e<t;++e)i=Z(i,F(F(u[t][e],D(u[t][e])),o[e][e]));if(o[t][t]=W(n[t][t],i),a(o[t][t],0))return[]}return[u,o]}return[]}(n),n[0]);throw"ldl: input not supported"},E.linsolve=nt,E.polyval=function(t,n){if(v(t)?t=[t]:S(t)&&1===B(t)&&(t=t[0]),!y(t))throw"polyval: input 1 not supported";if(v(n))return r(tt(t,n));if(y(n))return n.map(function(n){return r(tt(t,n))});throw"polyval: input 2 not supported"},E.polyvalm=function(t,n){if(v(t)?t=[t]:S(t)&&1===B(t)&&(t=t[0]),!y(t))throw"polyval: input 1 not supported";if(S(n)&&B(n)===V(n))return r(function(r,n){if(!r.length)return 0;for(var t=r.length,e=0,i=B(n),o=P(i,i,function(n,t){return n===t?r[0]:0});e+1<t;)++e,o=mn(f(o,n),P(i,i,function(n,t){return n===t?r[e]:0}));return o}(t,n));if(v(x))return r(tt(t,x));if(y(x))return x.map(function(n){return r(tt(t,n))});throw"polyvalm: input 2 not supported"},E.polyfit=function(n,t,i){if(v(n)?n=[n]:S(n)&&1===B(n)&&(n=n[0]),v(t)?t=[t]:S(t)&&1===B(t)&&(t=t[0]),!y(n))throw"polyfit: input 1 not supported";if(!y(t))throw"polyfit: input 2 not supported";if(n.length!==t.length)throw"polyfit: input 1 and 2 must have same length";if(3!==arguments.length)return r(function(e,i){var n,o,u,t,r,f,a,l;if(!(y(e)&&e.length&&y(i)&&i.length))return[];for(e=e.slice(),i=i.slice(),u=O.min(e.length,i.length),e.length=u,i.length=u,a={},l=[],o=0;o<u;++o)if(f=String(e[o]),A.call(a,f)){if(!R(i[a[f]],i[o]))return[];l.push(o)}else a[f]=o;for(;l.length;)o=l.pop(),e.splice(o,1),i.splice(o,1);for(l=a=null,t=X(u=e.length,function(n){for(var t=1,r=0;r<u;++r)r!==n&&(t=F(t,W(e[n],e[r])));return t=Q(i[n],t)}),r=X(u,function(n){return[1,hn(e[n])]}),n=[],o=0;o<u;++o)n=et(n,r.reduce(function(n,t,r){return n=r!==o?ot(n,t):n},[t[o]]));return n}(n,t));if(!w(i)||i<0)throw"polyfit: input 3 not positive int";return r(f(Un(n.reduce(function(n,t){for(var r=1,e=[1];r<=i;++r)e.unshift(F(t,e[0]));return n.push(e),n},[])),t))},E.roots=function(n){if(v(n)?n=[n]:S(n)&&1===B(n)&&(n=n[0]),y(n))return r(rt(n).sort(function(n,t){return wn(n)-wn(t)}));throw"roots: input not supported"},E.poly=function(n){if(v(n)?n=[n]:S(n)&&1===B(n)&&(n=n[0]),y(n))return r(n.reduce(function(n,t){return ot(n,[1,hn(t)])},[1]));throw"poly: input not supported"};var ot=it;function ut(n,t,r){var e,i=[],o=n.slice(),u=o.length-t.length,f=t;if(0<=u)for(i=X(u+1,0);0<=u;){for(e=u,t=f.concat(X(u,0)),i[i.length-1-u]=Q(o[0],t[0]),o=et(o,ot(t,[-i[i.length-1-u]]));o.length&&R(o[0],0);)o.shift();if((u=o.length-f.length)===e)break}return[i,r?X(n.length-o.length,0).concat(o):o]}E.conv=function(n,t){if(v(n)||v(t))return dn(n,t);if(S(n)&&1===B(n)&&(n=n[0]),S(t)&&1===B(t)&&(t=t[0]),!y(n))throw"conv: input 1 not supported";if(y(t))return it(n,t);throw"conv: input 2 not supported"};var ft=ut;E.deconv=function(n,t){var r;if(v(n)||v(t))r=[vn(n,t),0];else{if(S(n)&&1===B(n)&&(n=n[0]),S(t)&&1===B(t)&&(t=t[0]),!y(n))throw"deconv: input 1 not supported";if(!y(t))throw"deconv: input 2 not supported";if(!t.length||1===t.length&&R(t[0],0))throw"deconv: divisor is zero";r=ut(n,t,!0)}return xt(r,r[0])},E.polydiv=function(n,t){var r;if(v(n)||v(t))r=[vn(n,t),0];else{if(S(n)&&1===B(n)&&(n=n[0]),S(t)&&1===B(t)&&(t=t[0]),!y(n))throw"polydiv: input 1 not supported";if(!y(t))throw"polydiv: input 2 not supported";if(!t.length||1===t.length&&R(t[0],0))throw"polydiv: divisor is zero";r=ft(n,t,!1)}return xt(r,r[0])},E.conv2=function(t,r){if(v(t)||v(r))return dn(t,r);if(y(t)){if(y(r))return it(t,r);if(S(r))return X(V(r),function(n){return it(t,Mn(r,n))})}else{if(y(r)){if(y(t))return it(t,r);if(S(t))return X(t[0].length,function(n){return it(Mn(t,n),r)});throw"conv2: input 1 not supported"}if(!S(t))throw"conv2: input 1 not supported";if(S(r)){var n,e,i,o,u,f,a,l,c,s,h,p,m,g=t,d=r;for(B(g)<B(d)&&(m=g,g=d,d=m),n=B(g),e=V(g),u=_n(f=n+(i=B(d))-1,a=e+(o=V(d))-1),c=0;c<f;++c)for(s=0;s<a;++s){for(h=l=0;h<=c&&!(n<=h);++h)if(!(i<=c-h))for(p=0;p<=s&&!(e<=p);++p)o<=s-p||(l=Z(l,F(g[h][p],d[c-h][s-p])));u[c][s]=l}return u}}throw"conv2: input 2 not supported"},E.filter=function(n,t,r,e,i){if(v(n)?n=[n]:S(n)&&1===B(n)&&(n=n[0]),v(t)?t=[t]:S(t)&&1===B(t)&&(t=t[0]),v(r)?r=[r]:S(r)&&1===B(r)&&(r=r[0]),y(n)&&y(t)&&y(r)){var o,u,f,a,l=n,c=t,s=r,h=s.length,p=c.length,m=l.length,g=new Array(h),d=c[0];for(c=c.map(function(n){return Q(n,d)}),l=l.map(function(n){return Q(n,d)}),o=0;o<h;++o){for(f=o,u=a=0;0<=f&&u<m;++u,--f)a=Z(a,F(l[u],s[f]));for(f=o-1,u=1;0<=f&&u<p;++u,--f)a=W(a,F(c[u],g[f]));g[o]=a}return g}throw"filter: inputs not supported"};var at={},lt={};function ct(n,t){for(var r,e,i=n.length,o={},u=0;u<i;++u)1!==o[u]&&(e=n[r=function(n,t){for(var r=0;1<t;)r=(r<<1)+(1&n),n>>=1,t>>=1;return r}(u,i)],t[r]=n[u],t[u]=e,o[r]=1)}function st(n,t,r){var e,i=n.length;if(1===i)r[0]=n[0];else{for(e=0;e<i;++e)r[e]=new C(0,0);for(var o,u,f,a,l,c,s=function(n){for(var t=O.sqrt(n),r=3;r<=t;){if(0==n%r)return r;r+=2}return n}(i),h=i/s,p=1/O.sqrt(s),m=new Array(h),g=new Array(h),d=0;d<s;++d){for(e=0;e<h;++e)m[e]=n[e*s+d];for(1<h&&(pt(m,t,g),m=g,g=recursive_resulte),o=O.cos(2*q*d/i),u=(t?-1:1)*O.sin(2*q*d/i),f=1,e=a=0;e<i;++e)l=p*m[e%h].re,c=p*m[e%h].im,r[e]=r[e].add(new C(f*l-a*c,f*c+a*l)),l=f*o-a*u,a=f*u+a*o,f=l,a=a}}}function ht(n,t,r){var e,i,o,u,f,a,l,c,s,h,p,m,g,d,v,y=n.length,w=1;for(ct(n,r);w<y;){for(v=void 0,null==(v=lt[d=w])&&(lt[d]=v=O.cos(q/d)),e=v,i=(t?-1:1)*(d=void 0,null==(d=at[v=w])&&(at[v]=d=O.sin(q/v)),d),u=y/(2*w),o=0;o<u;++o)for(l=1,f=c=0;f<w;++f)h=r[m=2*o*w+f].re,p=r[m].im,g=r[s=m+w].re,a=r[s].im,r[m]=new C(O.SQRT1_2*(h+(m=l*g-c*a)),O.SQRT1_2*(p+(g=c*g+l*a))),r[s]=new C(O.SQRT1_2*(h-m),O.SQRT1_2*(p-g)),a=l*i+c*e,l=l*e-c*i,c=a;w<<=1}}function pt(n,t,r){var e,i=n.length;if(!(i<=0))return e=!1,null==r&&(r=new Array(i),e=!0),(i&i-1?st:ht)(n,t,r),e?r:void 0}function mt(n,t,r){var e=n.length,i=n[0].length;if(!(e<=0||i<=0)){var o,u,f=!1,a=new Array(e),l=new Array(i),c=new Array(e),s=new Array(i);if(null==r){for(r=new Array(e),o=0;o<e;++o)r[o]=new Array(i);f=!0}for(u=0;u<i;++u,0){for(o=0;o<e;++o)a[o]=n[o][u];for(pt(a,t,c),o=0;o<e;++o)r[o][u]=c[o]}for(o=0;o<e;++o){for(u=0;u<i;++u,0)l[u]=r[o][u];for(pt(l,t,s),u=0;u<i;++u,0)r[o][u]=s[u]}return f?r:void 0}}function e(){if(!_(this,e))return new e;this.data=[]}E.fft=function(t){if(v(t)?t=[t]:S(t)&&1===B(t)&&(t=t[0]),S(t))return X(V(t),function(n){return r(pt(an(Mn(t,n)),!1))});if(y(t))return r(pt(an(t),!1));throw"fft: input not supported"},E.ifft=function(t){if(v(t)?t=[t]:S(t)&&1===B(t)&&(t=t[0]),S(t))return X(V(t),function(n){return r(pt(an(Mn(t,n)),!0))});if(y(t))return r(pt(an(t),!0));throw"ifft: input not supported"},E.fft2=function(n){if(S(n))return r(mt(an(n),!1));throw"fft2: input not supported"},E.ifft2=function(n){if(S(n))return r(mt(an(n),!0));throw"ifft2: input not supported"},T.PALETTE=["#ff0000","#00ff00","#0000ff","#00ffff","#ff00ff","#ffff00","#4eca8e","#df7c26","#e6e641","#6da20b","#37ed75","#a20ac4","#e6efd2","#22ad51","#2c7496","#bb3e25","#42cda8","#c02a98","#404ad4","#3f8c36","#d15fec","#c4f84d","#eb5291","#38b3e0","#29790c","#4f17e8"],e.prototype={constructor:e,canvas:null,type:"",data:null,no:0,xscale:"linear",yscale:"linear",xlabel:"",ylabel:"",title:"",xmin:0,xmax:1,ymin:0,ymax:1,scx:1,scy:1,sc:1,pt:45,pb:60,pl:70,pr:20,render:function(n,t){var r=this;return t&&(r.canvas=t,r.type=n,-1<["plot","scatter","bar","barh","pie"].indexOf(n)&&r.data&&r.data.length&&r.renderData(),"xlabel"===n&&r.xlabel&&r.xlabel.length&&r.renderXLabel(),"ylabel"===n&&r.ylabel&&r.ylabel.length&&r.renderYLabel(),"title"===n&&r.title&&r.title.length&&r.renderTitle(),r.canvas=null),t},renderData:function(){var m,g,d,v=this,y=v.canvas.getContext("2d"),w=v.type,x=v.canvas.width,b=v.canvas.height,S=0,k=v.data.length;-1===["pie"].indexOf(w)&&(v.renderAxes(),m=v.no),"bar"===w?S=O.max(1,O.floor((x-v.pl-v.pr)/(m*k))):"barh"===w?S=O.max(1,O.floor((b-v.pt-v.pb)/(m*k))):"pie"===w&&(1<k&&1&k&&(k+=1),g=O.floor(O.sqrt(k)),d=k/g,S=O.min((x-v.pl-v.pr)/d,(b-v.pt-v.pb)/g)),v.data.forEach(function(n,t){var r=n.x,e=n.y,i=n.style;if("plot"===w){for(y.beginPath(),y.lineWidth=i.LineWidth,y.setLineDash(i.LineStyle),y.strokeStyle="rgb("+i.Color.map(function(n){return O.round(255*n)}).join(",")+")",y.lineJoin="bevel",y.moveTo(v.x(r[0]),v.y(e[0])),p=1;p<m;++p)y.lineTo(v.x(r[p]),v.y(e[p]));y.stroke()}else if("scatter"===w)for(y.fillStyle="rgb("+i.Color.map(function(n){return O.round(255*n)}).join(",")+")",p=0;p<m;++p)y.beginPath(),y.arc(v.x(r[p]),v.y(e[p]),2*i.LineWidth,0,2*q),y.closePath(),y.fill();else if("bar"===w)for(y.fillStyle="rgb("+i.Color.map(function(n){return O.round(255*n)}).join(",")+")",p=0;p<m;++p)y.fillRect(v.pl+t*S*.8+p*k*S,v.y(0)>v.y(e[p])?v.y(e[p]):v.y(0),.8*S,O.abs(v.y(e[p])-v.y(0)));else if("barh"===w)for(y.fillStyle="rgb("+i.Color.map(function(n){return O.round(255*n)}).join(",")+")",p=0;p<m;++p)y.fillRect(v.y(0)>v.y(e[p])?v.y(e[p]):v.y(0),v.pt+t*S*.8+p*k*S,O.abs(v.y(e[p])-v.y(0)),.8*S);else if("pie"===w){var o,u,f=Ln(bn(e)),a=.4*S,l=-q/2,n=t%d,c=O.floor(t/d),s=(x-d*S)/2+n*S+S/2,h=(b-g*S)/2+c*S+S/2,p=0;for(m=e.length;p<m;++p)u=e[p]/f,o=l+2*q*u,y.beginPath(),y.moveTo(s,h),y.arc(s,h,a,l,o,!1),y.closePath(),y.fillStyle=T.PALETTE[p%T.PALETTE.length],y.fill(),y.font="10 px sans-serif",y.textAlign="center",y.fillStyle="#000",y.strokeStyle="#000",y.fillText((100*u).toFixed(2)+"%",s+(22+a)*O.cos((l+o)/2),h+(22+a)*O.sin((l+o)/2)),l=o}})},renderXLabel:function(){var n=this,t=n.canvas.getContext("2d"),r=n.canvas.width,e=n.canvas.height;t.font=String(15)+"px sans-serif",t.fillStyle="#000",t.textAlign="center",t.strokeStyle="#000",t.fillText(n.xlabel,r/2,e-1-n.pb/4)},renderYLabel:function(){var n=this.canvas.getContext("2d"),t=(this.canvas.width,this.canvas.height);n.font=String(15)+"px sans-serif",n.fillStyle="#000",n.textAlign="center",n.strokeStyle="#000",n.save(),n.translate(19.5,t/2),n.rotate(-O.PI/2),n.fillText(this.ylabel,0,0),n.restore()},renderTitle:function(){var n=this,t=n.canvas.getContext("2d"),r=n.canvas.width;n.canvas.height;t.font=String(18)+"px sans-serif",t.fillStyle="#000",t.textAlign="center",t.strokeStyle="#000",t.fillText(n.title,r/2,n.pt/2)},renderAxes:function(){var n,t,r,e,i,o,u,f,a,l,c,s=this,h=s.canvas.getContext("2d"),p=s.canvas.width,m=s.canvas.height;s.type;function g(n,t){return!1===t||n<1?parseFloat(n.toFixed(4)):O.ceil(n)}function d(n){return n.toFixed(3).replace(/0+$/,"").replace(/\.$/,"")}if(s.updateAxes(),n=s.xmin,s.xmax,t=s.ymin,s.ymax,"barh"===s.type){for(l=O.max(60,g((p-s.pl-s.pr)/16)),r=[],a=s.pl;f=s.y(a,!0),!(a>p-1-s.pr);a+=l)r.push({t:f,p:a});c=O.max(1,O.floor((m-s.pt-s.pb)/(s.no*s.data.length))),e=X(s.no,function(n){return{t:n+1,p:s.pt+n*s.data.length*c+s.data.length*c*.8/2}})}else{if("bar"===s.type)c=O.max(1,O.floor((p-s.pl-s.pr)/(s.no*s.data.length))),r=X(s.no,function(n){return{t:n+1,p:s.pl+n*s.data.length*c+s.data.length*c*.8/2}});else if(r=[],"log"===s.xscale)for(f=O.pow(10,O.floor(O.log10(n)));!((a=s.x(f))>p-1-s.pr);f*=10)for(r.push({t:f,p:a}),u=1;u<=8&&!((a=s.x(u*f))>p-1-s.pr);++u)r.push({t:u*f,p:a});else for(l=O.max(60,g((p-s.pl-s.pr)/16)),a=s.pl;f=s.x(a,!0),!(a>p-1-s.pr);a+=l)r.push({t:f,p:a});if(e=[],"log"===s.yscale)for(f=O.pow(10,O.floor(O.log10(t)));!((a=s.y(f))<s.pt);f*=10)for(e.push({t:f,p:a}),u=1;u<=8&&!((a=s.y(u*f))<s.pt);++u)e.push({t:u*f,p:a});else for(l=O.max(40,g((m-s.pt-s.pb)/16)),a=m-1-s.pb;f=s.y(a,!0),!(a<s.pt);a-=l)e.push({t:f,p:a})}h.font=String(10)+"px sans-serif",h.fillStyle="#000",h.textAlign="center",h.strokeStyle="#000",h.lineWidth=1,h.beginPath(),h.moveTo(s.pl,s.pt),h.lineTo(p-1-s.pr,s.pt),h.lineTo(p-1-s.pr,m-1-s.pb),h.lineTo(s.pl,m-1-s.pb),h.lineTo(s.pl,s.pt),h.stroke(),i=O.max(8,.001*m),r.forEach(function(n){h.lineWidth=.5,h.beginPath(),h.moveTo(n.p,m-1-s.pb),h.lineTo(n.p,m-1-s.pb-i),h.stroke(),h.beginPath(),h.moveTo(n.p,s.pt),h.lineTo(n.p,s.pt+i),h.stroke(),"log"===s.xscale?w(O.log10(n.t))&&h.fillText("10^"+String(O.floor(O.log10(n.t))),n.p,m-1-s.pb+5+10):h.fillText(d(n.t),n.p,m-1-s.pb+5+10)}),o=O.max(8,.001*p),e.forEach(function(n,t){h.lineWidth=.5,h.beginPath(),h.moveTo(s.pl,n.p),h.lineTo(s.pl+o,n.p),h.stroke(),h.beginPath(),h.moveTo(p-1-s.pr,n.p),h.lineTo(p-1-s.pr-o,n.p),h.stroke(),"log"===s.yscale?w(O.log10(n.t))&&h.fillText("10^"+String(O.floor(O.log10(n.t))),s.pl-21,n.p):h.fillText(d(n.t),s.pl-21,n.p)})},updateAxes:function(){var r=this,n=r.canvas.width,t=r.canvas.height,e=l,i=-l,o=l,u=-l,f=l;r.data.forEach(function(n,t){"barh"===r.type||"bar"===r.type?f=O.min(f,n.y.length):(f=O.min(f,n.x.length,n.y.length),e=O.min(e,qn(n.x)),i=O.max(i,zn(n.x))),o=O.min(o,qn(n.y)),u=O.max(u,zn(n.y))}),"barh"!==r.type&&"bar"!==r.type||(e=1,i=f,0<o&&(o=0),u<0&&(u=0)),e===i&&(e-=$,i+=$),o===u&&(o-=$,u+=$),r.no=f,r.xmin=e,r.xmax=i,r.ymin=o,r.ymax=u,"log"===r.xscale?(r.xmin=O.pow(10,O.floor(O.log10(r.xmin||$))),r.xmax=O.pow(10,O.ceil(O.log10(r.xmax||$))),r.scx=(n-1-r.pl-r.pr)/(O.log10(r.xmax)-O.log10(r.xmin))):r.scx=(n-1-r.pl-r.pr)/(r.xmax-r.xmin),"log"===r.yscale?(r.ymin=O.pow(10,O.floor(O.log10(r.ymin||$))),r.ymax=O.pow(10,O.ceil(O.log10(r.ymax||$))),r.scy=("barh"===r.type?n-1-r.pl-r.pr:t-1-r.pt-r.pb)/(O.log10(r.ymax)-O.log10(r.ymin))):r.scy=("barh"===r.type?n-1-r.pl-r.pr:t-1-r.pt-r.pb)/(r.ymax-r.ymin),r.sc=O.min(r.scx,r.scy)},x:function(n,t){var r=this,e=r.xmin,i=r.yscale===r.xscale?r.sc:r.scx;return!0===t?(n-r.pl)/i+e:("log"===r.xscale&&(e=O.log10(e),n=O.log10(n||$)),(n-e)*i+r.pl)},y:function(n,t){var r=this,e=r.ymin,i=r.yscale===r.xscale?r.sc:r.scy,o=r.canvas.height;return!0===t?"barh"===r.type?(n-r.pl)/i+e:(o-1-n-r.pb)/i+e:("log"===r.yscale&&(e=O.log10(e),n=O.log10(n||$)),"barh"===r.type?(n-e)*i+r.pl:o-1-((n-e)*i+r.pb))},option:function(n,t,r){var e,i,o,u={"-":[],"--":[15,5],":":[5,5],"-.":[15,5,5,5]},f={red:"r",green:"g",blue:"b",cyan:"c",magenta:"m",yellow:"y",black:"k",white:"w"},a={r:[1,0,0],g:[0,1,0],b:[0,0,1],c:[0,1,1],m:[1,0,1],y:[1,1,0],k:[0,0,0],w:[1,1,1]};for(n.Color||(n.Color=a.b),n.LineWidth||(n.LineWidth=1),n._LineStyle||(n._LineStyle="-"),n.LineStyle||(n.LineStyle=u["-"]),r=r||0;r<t.length;){if("Color"===t[r])I(e=t[r+1])?A.call(f,e)?n.Color=a[f[e]]:A.call(a,e)&&(n.Color=a[e]):y(e)&&3===e.length&&(n.Color=e);else if("LineWidth"===t[r])M(e=t[r+1])&&(n.LineWidth=2*e);else{if("LineStyle"!==t[r]){if(I(t[r])){for(i in o=!1,e=t[r],a)-1<e.indexOf(i)&&(n.Color=a[i],o=!0);for(i in u)"-"!==i&&-1<e.indexOf(i)&&(n._LineStyle=i,n.LineStyle=u[i],o=!0);if(o){r+=1;continue}}break}I(e=t[r+1])&&A.call(u,e)&&(n._LineStyle=e,n.LineStyle=u[e])}r+=2}return r},parse:function(n,t,r){var e,i,o,u,f,a,l=this,c=0;if("pie"===t)for(;c<n.length&&y(n[c]);)l.data.push({y:n[c++]});else if("plot3"===t)for(;c<n.length;)f=u=o=null,y(n[c])&&(o=n[c]),y(n[c+1])&&(u=n[c+1]),y(n[c+2])&&(f=n[c+2],c+=3),o&&u&&f?(c=l.option(a={},n,c,r),l.data.push({x:o,y:u,z:f,style:a})):c+=1;else for(;c<n.length;)if(u=o=null,y(n[c])&&(o=n[c]),y(n[c+1])||S(n[c+1])?(u=n[c+1],c+=2):o&&(o=jn(1,(u=o).length),c+=1),o&&u)if(c=l.option(a={},n,c,r),S(u))for(e=0,i=V(u);e<i;++e)l.data.push({x:o,y:Mn(u,e),style:a});else l.data.push({x:o,y:u,style:a});else c+=1;return l}},T.figure=e,E.plot=function(){var n=e().parse(arguments);return n.xscale="linear",n.yscale="linear",n.data.length?n.render("plot",T.createCanvas(700,525)):null},E.loglog=function(){var n=e().parse(arguments);return n.xscale="log",n.yscale="log",n.data.length?n.render("plot",T.createCanvas(700,525)):null},E.semilogx=function(){var n=e().parse(arguments);return n.xscale="log",n.yscale="linear",n.data.length?n.render("plot",T.createCanvas(700,525)):null},E.semilogy=function(){var n=e().parse(arguments);return n.xscale="linear",n.yscale="log",n.data.length?n.render("plot",T.createCanvas(700,525)):null},E.scatter=function(){var n=e().parse(arguments);return n.xscale="linear",n.yscale="linear",n.data.length?n.render("scatter",T.createCanvas(700,525)):null},E.bar=function(){var n=e().parse(arguments);return n.xscale="linear",n.yscale="linear",n.data.length?n.render("bar",T.createCanvas(700,525)):null},E.barh=function(){var n=e().parse(arguments);return n.xscale="linear",n.yscale="linear",n.data.length?n.render("barh",T.createCanvas(700,525)):null},E.piechart=function(){var n=e().parse(arguments,"pie");return n.data.length?n.render("pie",T.createCanvas(700,525)):null},E.donutchart=function(){return E.piechart.apply([].slice.call(arguments))},E.xlabel=function(n){var t=e();return t.xlabel=String(n),t.render("xlabel",T.currentCanvas())},E.ylabel=function(n){var t=e();return t.ylabel=String(n),t.render("ylabel",T.currentCanvas())},E.title=function(n){var t=e();return t.title=String(n),t.render("title",T.currentCanvas())};var gt={"[]":{name:"literal_array",arity:1,fixity:-1,associativity:-1,commutativity:0,priority:0,fn:function(){var t=[],r=[];return[].forEach.call(arguments,function(n){","!==n&&(";"===n?r.length&&(b(r[0])?t=t.length?An("vert",t,r):r:t.push(r),r=[]):!_(n,L)&&b(n)?r=r.length?An("horz",r,n):n:r.push(n))}),r.length&&(b(r[0])?t=t.length?An("vert",t,r):r:t.length?t.push(r):t=r),t}},"(:)":{name:"colon",arity:1,fixity:1,associativity:-1,commutativity:0,priority:30,fn:function(n){return jn(n)}},":":{name:"colon1",arity:2,fixity:1,associativity:-1,commutativity:0,priority:30,fn:function(n,t){return jn(n,t)}},"::":{name:"colon2",arity:3,fixity:1,associativity:-1,commutativity:0,priority:30,fn:function(n,t,r){return jn(n,t,r)}},"'":{name:"ctranspose",arity:1,fixity:1,associativity:-1,commutativity:0,priority:10,fn:Rn},".'":{name:"transpose",arity:1,fixity:1,associativity:-1,commutativity:0,priority:10,fn:Cn},"^":{name:"pow",arity:2,fixity:0,associativity:-1,commutativity:0,priority:15,fn:yn},".^":{name:"dotpow",arity:2,fixity:0,associativity:-1,commutativity:0,priority:15,fn:function e(t,i){if(v(t)&&v(i))return sn(t,i);if(S(t)&&S(i)){if(B(t)===B(i)&&V(t)===V(i))return t.map(function(n,r){return n.map(function(n,t){return e(n,i[r][t])})});throw"dotpow: matrix dimensions do not match"}if(y(t)&&y(i)){if(t.length===i.length)return t.map(function(n,t){return e(n,i[t])});throw"dotpow: vector dimensions do not match"}return b(t)?t.map(function(n){return e(n,i)}):b(i)?i.map(function(n){return e(t,n)}):t}},"\\":{name:"mldivide",arity:2,fixity:0,associativity:-1,commutativity:0,priority:20,fn:function(n,t){return nt(n,t)}},"/":{name:"div",arity:2,fixity:0,associativity:-1,commutativity:0,priority:20,fn:vn},"./":{name:"dotdiv",arity:2,fixity:0,associativity:-1,commutativity:0,priority:20,fn:vn},"*":{name:"mul",arity:2,fixity:0,associativity:-1,commutativity:1,priority:20,fn:f},".*":{name:"dotmul",arity:2,fixity:0,associativity:-1,commutativity:1,priority:20,fn:dn},"+":{name:"add",arity:2,fixity:0,associativity:-1,commutativity:1,priority:25,fn:mn},"-":{name:"sub",arity:2,fixity:0,associativity:-1,commutativity:-1,priority:25,fn:gn},">=":{name:"ge",arity:2,fixity:0,associativity:-1,commutativity:0,priority:35,fn:function r(e,i){if(I(e)){if(I(i))return i<=e?1:0;if(v(i))return e>=String(i)?1:0;if(y(i))return i.map(function(n){return r(e,n)});if(S(i))return P(B(i),V(i),function(n,t){return r(e,i[n][t])})}else if(M(e)){if(I(i))return String(e)>=i?1:0;if(M(i))return i<=e?1:0;if(o(i))return i.re>=e&&0===i.im?1:0;if(y(i))return i.map(function(n){return r(e,n)});if(S(i))return P(B(i),V(i),function(n,t){return r(e,i[n][t])})}else if(o(e)){if(I(i))return String(e)>=i?1:0;if(M(i))return e.re>=i&&0===e.im?1:0;if(o(i))return R(e,i)?1:0;if(y(i))return i.map(function(n){return r(e,n)});if(S(i))return P(B(i),V(i),function(n,t){return r(e,i[n][t])})}else if(y(e)){if(I(i)||v(i))return e.map(function(n){return r(n,i)});if(y(i)){if(e.length!==i.length)throw"ge: inputs have incompatible dimensions";return e.map(function(n,t){return r(n,i[t])})}if(S(i)){if(e.length!==V(i))throw"ge: inputs have incompatible dimensions";return P(B(i),V(i),function(n,t){return r(e[t],i[n][t])})}}else if(S(e)){if(I(i)||v(i))return P(B(e),V(e),function(n,t){return r(e[n][t],i)});if(y(i)){if(V(e)!==i.length)throw"ge: inputs have incompatible dimensions";return P(B(e),V(e),function(n,t){return r(e[n][t],i[t])})}if(S(i)){if(B(e)!==B(i)||V(e)!==V(i))throw"ge: inputs have incompatible dimensions";return P(B(e),V(e),function(n,t){return r(e[n][t],i[n][t])})}}return 0}},"<=":{name:"le",arity:2,fixity:0,associativity:-1,commutativity:0,priority:35,fn:a},">":{name:"gt",arity:2,fixity:0,associativity:-1,commutativity:0,priority:35,fn:function r(e,i){if(I(e)){if(I(i))return i<e?1:0;if(v(i))return e>String(i)?1:0;if(y(i))return i.map(function(n){return r(e,n)});if(S(i))return P(B(i),V(i),function(n,t){return r(e,i[n][t])})}else if(M(e)){if(I(i))return String(e)>i?1:0;if(M(i))return i<e?1:0;if(o(i))return i.re>e&&0===i.im?1:0;if(y(i))return i.map(function(n){return r(e,n)});if(S(i))return P(B(i),V(i),function(n,t){return r(e,i[n][t])})}else if(o(e)){if(I(i))return String(e)>i?1:0;if(M(i))return e.re>i&&0===e.im?1:0;if(o(i))return 0;if(y(i))return i.map(function(n){return r(e,n)});if(S(i))return P(B(i),V(i),function(n,t){return r(e,i[n][t])})}else if(y(e)){if(I(i)||v(i))return e.map(function(n){return r(n,i)});if(y(i)){if(e.length!==i.length)throw"gt: inputs have incompatible dimensions";return e.map(function(n,t){return r(n,i[t])})}if(S(i)){if(e.length!==V(i))throw"gt: inputs have incompatible dimensions";return P(B(i),V(i),function(n,t){return r(e[t],i[n][t])})}}else if(S(e)){if(I(i)||v(i))return P(B(e),V(e),function(n,t){return r(e[n][t],i)});if(y(i)){if(V(e)!==i.length)throw"gt: inputs have incompatible dimensions";return P(B(e),V(e),function(n,t){return r(e[n][t],i[t])})}if(S(i)){if(B(e)!==B(i)||V(e)!==V(i))throw"gt: inputs have incompatible dimensions";return P(B(e),V(e),function(n,t){return r(e[n][t],i[n][t])})}}return 0}},"<":{name:"lt",arity:2,fixity:0,associativity:-1,commutativity:0,priority:35,fn:j},"~=":{name:"ne",arity:2,fixity:0,associativity:-1,commutativity:1,priority:40,fn:function r(e,i){if(I(e)){if(I(i))return e===i?0:1;if(v(i))return e===String(i)?0:1;if(y(i))return i.map(function(n){return r(e,n)});if(S(i))return P(B(i),V(i),function(n,t){return r(e,i[n][t])})}else if(M(e)){if(I(i))return String(e)===i?0:1;if(M(i))return e===i?0:1;if(o(i))return i.re===e&&0===i.im?0:1;if(y(i))return i.map(function(n){return r(e,n)});if(S(i))return P(B(i),V(i),function(n,t){return r(e,i[n][t])})}else if(o(e)){if(I(i))return String(e)===i?0:1;if(M(i))return e.re===i&&0===e.im?0:1;if(o(i))return e.re===i.re&&e.im===i.im?0:1;if(y(i))return i.map(function(n){return r(e,n)});if(S(i))return P(B(i),V(i),function(n,t){return r(e,i[n][t])})}else if(y(e)){if(I(i)||v(i))return e.map(function(n){return r(n,i)});if(y(i)){if(e.length!==i.length)throw"ne: inputs have incompatible dimensions";return e.map(function(n,t){return r(n,i[t])})}if(S(i)){if(e.length!==V(i))throw"ne: inputs have incompatible dimensions";return P(B(i),V(i),function(n,t){return r(e[t],i[n][t])})}}else if(S(e)){if(I(i)||v(i))return P(B(e),V(e),function(n,t){return r(e[n][t],i)});if(y(i)){if(V(e)!==i.length)throw"ne: inputs have incompatible dimensions";return P(B(e),V(e),function(n,t){return r(e[n][t],i[t])})}if(S(i)){if(B(e)!==B(i)||V(e)!==V(i))throw"ne: inputs have incompatible dimensions";return P(B(e),V(e),function(n,t){return r(e[n][t],i[n][t])})}}return 0}},"==":{name:"eq",arity:2,fixity:0,associativity:-1,commutativity:1,priority:40,fn:R},"&&":{name:"and",arity:2,fixity:0,associativity:-1,commutativity:1,priority:32,fn:function(n,t){return s(n)&&s(t)?1:0}},"||":{name:"or",arity:2,fixity:0,associativity:-1,commutativity:1,priority:33,fn:function(n,t){return s(n)||s(t)?1:0}},xor:{name:"xor",arity:2,fixity:0,associativity:-1,commutativity:1,priority:33,fn:function(n,t){return s(n)&&!s(t)||s(t)&&!s(n)?1:0}},"~":{name:"not",arity:1,fixity:-1,associativity:-1,commutativity:-1,priority:31,fn:function(n){return s(n)?0:1}},"=":{name:"set",breakpoint:"end",arity:2,fixity:0,associativity:-1,commutativity:0,priority:45,fn:async function(n,t){var r,e;return b(n)&&_(n[0],L)?(e=n,b(r=t)?await Promise.all(e.map(function(n,t){return dt(n,t<r.length?r[t]:null)})):await Promise.all(e.map(function(n,t){return dt(n,0===t?r:null)}))):dt(n,A.call(t,"$mainRet$")?t.$mainRet$:t)}}};async function dt(n,t){if(_(n,L)&&I(n.v))return await n.set(t),n.get(!0);throw"setting non-variable"}async function vt(n,t,r){var e,i,o,u,f;if(s(await St(n.if.cond,t,r)))for(e=0,u=(f=n.if.statements).length;e<u;++e)await St(f[e],t,r);else{if(n.elseif.length)for(i=0,o=n.elseif.length;i<o;++i)if(s(await St(n.elseif[i].cond,t,r))){for(e=0,u=(f=n.elseif[i].statements).length;e<u;++e)await St(f[e],t,r);return}if(n.else.statements.length)for(e=0,u=(f=n.else.statements).length;e<u;++e)await St(f[e],t,r)}}async function yt(n,t,r){var e,i,o,u,f,a,l=!1,c=!1,s=await St(n.val,t,r),h=n.statements;if(b(s)){for(f=(r=r||{}).brk,a=r.cont,r.brk=function(){l=!0},r.cont=function(){c=!0},o=0,u=s.length;o<u;++o){for(c=l=!1,await n.ind.set(s[o]),e=0,i=h.length;e<i&&(await St(h[e],t,r),!l&&!c);++e);if(l)break}r.brk=f,r.cont=a}}async function wt(n,t,r){var e,i,o=!1,u=!1,f=n.statements,a=(r=r||{}).brk,l=r.cont;for(r.brk=function(){o=!0},r.cont=function(){u=!0};s(await St(n.cond,t,r));){for(u=o=!1,e=0,i=f.length;e<i&&(await St(f[e],t,r),!o&&!u);++e);if(o)break}r.brk=a,r.cont=l}function L(n,t,r){if(!_(this,L))return new L(n,t,r);this.ctx=n,this.v=t,this.i=r}function N(n,t){if(!_(this,N))return new N(n,t);null==t&&(t=n,n=""),this.op=n,this.arg=t}function xt(n,t){return 2===arguments.length&&b(n)&&(n.$mainRet$=t),n}async function bt(n){return _(n,L)?await n.get():n}async function St(n,t,r){if(_(n,N))return At(n,t,r);if(b(n)){for(var e=0,i=n.length,o=new Array(i);e<i;++e)o[e]=await St(n[e],t,r);return o}return n}function kt(v,y,w,i){var x,b=0,S=0,o=v;function k(n,t,r){null==r&&(r=S),null==t&&(t=b);var e=o.split("\n")[r];return(n=String(n)+" at line "+String((w||0)+r)+" position "+String((i||0)+t)+":")+"\n"+e+"\n"+new Array(t).join(" ")+"^\n"}return function i(n){var t,r,e,o,u,f,a,l=[],c=[],s=[];function h(n){var t,r,e,i,o,u,f,a;if(c.length)if(n)for(;0<c.length;){if(o=(i=c.shift())[0],n===(u=gt[o]).breakpoint){c.unshift(i);break}if("-"===o&&1===l.length)l[0]=N(gt["*"].fn,[l[0],N(-1)]);else{if(u.arity>l.length)throw k('invalid or missing argument for "'+o+'"',i[1],i[2]);a=l.splice(0,u.arity).reverse(),f=N(u.fn,a),l.unshift(f)}}else if(r=(t=c.shift())[0],1===(e=gt[r]).fixity){if(e.arity>l.length)throw k('invalid or missing argument for "'+r+'"',t[1],t[2]);a=l.splice(0,e.arity).reverse(),f=N(e.fn,a),l.unshift(f)}else{if(-1!==e.fixity)for(;0<c.length&&(o=(i=c[0])[0],(u=gt[o]).priority<e.priority||u.priority===e.priority&&(u.associativity<e.associativity||u.associativity===e.associativity&&-1===u.associativity));){if("-"===o&&1===l.length)l[0]=N(gt["*"].fn,[l[0],N(-1)]);else{if(u.arity>l.length)throw k('invalid or missing argument for "'+o+'"',i[1],i[2]);a=l.splice(0,u.arity).reverse(),f=N(u.fn,a),l.unshift(f)}c.shift()}c.unshift(t)}}function p(n){if(h(!0),1<l.length||0<c.length)throw k("mismatched terms and operators",c.length?c[0][1]:b,c.length?c[0][2]:S);!0===n&&(_(l[0],N)&&s.push(l[0]),l=[],c=[])}function m(n,t){var r,e=n.test?v.match(n):n===v.slice(0,n.length);return!!e&&(!1===t?n.test?e:[n,n]:n.test?(r=e[t||0].length,v=v.slice(r),b+=r,e):(r=n.length,v=v.slice(r),b+=r,[n,n]))}function g(n,t,r){for(var e,i=r||0,o="";i<v.length;)if(n===(e=v.charAt(i))){if(!(i+1<v.length&&n===v.charAt(i+1)))break;o+=e,i+=2}else o+=e,i+=1;return t&&(v=v.slice(i+1),b+=i+1),[o,i+1]}function d(){var n,t,r,e=function(n,t,r){for(var e,i=0,o=0;i<v.length;)if(e=v.charAt(i),!r||'"'!==e&&"'"!==e){if(t===e)++o;else if(n===e){if(0===o)break;--o}++i}else i=g(e,!1,i+1)[1];return o||i>=v.length?-1:i}("]","[",!0);if(-1===e)throw k("mismatched brackets");if(n=v.slice(0,e),/[\[\]]/.test(n)){for(t=[];r=i(",;]");)if(t.push(r),m(","))t.push(N(","));else{if(!m(";"))break;t.push(N(";"))}m(/^\s+/),m("]")}else t=/[,;\n]/.test(n)?n.trim().split(/[;\n]/g).reduce(function(n,t){var r=n.length,e=0;return t.trim().split(-1<t.indexOf(",")?",":/\s+/g).reduce(function(n,t){return(t=kt(t.trim(),y,S+w,b))&&(e?n.push(N(",")):r&&n.push(N(";")),n.push(t),e=1),n},n)},[]):n.trim().split(/\s+/g).reduce(function(n,t){return(t=kt(t.trim(),y,S+w,b))&&(n.length&&n.push(N(",")),n.push(t)),n},[]),v=v.slice(e+1),b+=e+1,1<(n=n.split("\n")).length&&(S+=n.length-1,n.slice(0,-1).forEach(function(n){b-=n.length+1}));return N(gt["[]"].fn,t)}for(;0<v.length;)if(m(/^if\b/)){if(p(!0),!(a=i("\n")))throw k('missing or invalid condition in "if"');for(m("\n")&&(++S,b=0),u=(f={if:{cond:a,statements:[]},elseif:[],else:{statements:[]}}).if;;)if((a=i(["elseif","else","end"]))&&(u.statements=u.statements.concat(a)),m("elseif")){if(!(a=i("\n")))throw k('missing or invalid condition in "elseif"');m("\n")&&(++S,b=0),f.elseif.push({cond:a,statements:[]}),u=f.elseif[f.elseif.length-1]}else if(m("else"))m(/^[ \t\v\f]+/),m("\n")&&(++S,b=0),u=f.else;else if(m("end")||!a)break;s.push(N(vt,f))}else if(m(/^for\b/)){if(p(!0),!(t=m(/^\s+([_a-z][_a-z0-9]*)\s*=\s*/i)))throw k('missing or invalid declaration in "for"');if(!(a=i("\n")))throw k('missing or invalid declaration in "for"');for(m("\n")&&(++S,b=0),f={ind:L(y,t[1]),val:a,statements:[]};(a=i(["end"]))&&(f.statements=f.statements.concat(a)),!m("end")&&a;);s.push(N(yt,f))}else if(m(/^while\b/)){if(p(!0),!(a=i("\n")))throw k('missing or invalid condition in "while"');for(m("\n")&&(++S,b=0),f={cond:a,statements:[]};(a=i(["end"]))&&(f.statements=f.statements.concat(a)),!m("end")&&a;);s.push(N(wt,f))}else if(m(/^break\b/))s.push(N("break",""));else if(m(/^continue\b/))s.push(N("continue",""));else if(t=m(/^(elseif|else|end)\b/,!1)){if(n&&-1<n.indexOf(t[1]))break;if("end"!==t[1])throw k('unexpected "'+t[1]+'"');m("end"),l.unshift(N("v",L(y,"end")))}else if(m("..."))m(/^[ \t\v\f]+/);else if(m(";",!1)){if(n&&-1<n.indexOf(";"))break;m(";"),p(!0)}else if(m("\n",!1)){if(n&&-1<n.indexOf("\n"))break;m("\n"),++S,p(!(b=0))}else if(m(/^\s+/)){if(n&&-1<n.indexOf(" "))break}else if(t=m("%"))x=v.indexOf("\n"),v=v.slice(-1<x?x+1:v.length),++S,p(!(b=0));else if(t=(t=m("'"))||m('"'))u=g(t[0],!0)[0],l.unshift(N("'"===t[0]?u.split(""):u));else if(t=m(/^(&&|\|\|)[^&\|]/,1))o=t[1],c.unshift([o,b,S]),h();else if(t=m(/^(xor)[^a-zA-Z]/,1))o=t[1],c.unshift([o,b,S]),h();else if(t=m(/^(>=|<=|==|~=|>|<)[^<>=]/,1))o=t[1],c.unshift([o,b,S]),h();else if(t=m("~"))c.unshift(["~",b,S]),h();else if(t=m("="))c.unshift(["=",b,S]),h();else if(t=m(/^(\+|-|\.\*|\*|\.\/|\/|\\|\.\^|\^)/i))o=t[0],c.unshift([o,b,S]),h();else if(t=m(/^([_a-z][_a-z0-9]*)\s*\(/i)){if(r=t[1],m(/^\s*\:\s*\)/))u=N("v",L(y,r)),l.unshift(u),c.unshift(["(:)",b,S]),h();else{for(f=[];(a=i(",)"))&&f.push(a),m(","););if(!m(")"))throw k("mismatched parentheses");u=A.call(E,r)?N(E[r],f):N("v",L(y,r,f.length?f:null)),l.unshift(u)}m(/^[ \t\v\f]+/),(t=(t=m("'"))||m(".'"))&&(c.unshift([t[0],b,S]),h())}else if(t=m(/^[_a-z][_a-z0-9]*/i))r=t[0],u=A.call(E,r)&&0===E[r].length?N(E[r],[]):N("v",L(y,r)),l.unshift(u),m(/^[ \t\v\f]+/),(t=(t=m("'"))||m(".'"))&&(c.unshift([t[0],b,S]),h());else if(t=m(/^(-?\s*\d+(\.\d+)?([eE]-?\d+)?)([ij])?/))f=parseFloat(t[1].split(/\s+/).join(""),10),u=N(t[4]?new C(0,f):f),l.unshift(u);else if("["===(e=v.charAt(0)))v=v.slice(1),b+=1,(u=d())&&(l.unshift(u),m(/^[ \t\v\f]+/),t=(t=m("'"))||m(".'"))&&(c.unshift([t[0],b,S]),h());else{if("]"===e){if(n&&-1<n.indexOf("]"))break;throw k("mismatched brackets")}if("("===e)if(v=v.slice(1),b+=1,m(/^\s*\:\s*\)/))c.unshift(["(:)",b,S]),h();else{if(l.length&&c.reduce(function(n,t){return n+("-"===t[0]&&1===l.length?1:gt[t[0]].arity)},0)<=l.length){for(h("end"),u=l.shift(),f=[];(a=i(",)"))&&f.push(a),m(","););if(!m(")"))throw k("mismatched parentheses");f.length&&(u=N("v",L(y,u,f)))}else if(u=i(")"),!m(")"))throw k("mismatched parentheses");u&&(l.unshift(u),m(/^[ \t\v\f]+/),t=(t=m("'"))||m(".'"))&&(c.unshift([t[0],b,S]),h())}else{if(")"===e){if(n&&-1<n.indexOf(")"))break;throw k("mismatched parentheses")}if(","===e&&n&&-1<n.indexOf(","))break;if(":"!==e)throw k(n?'missing expected "'+(I(n)?n.split(""):n).join('" or "')+'"':'unexpected "'+e+'"');if(n&&-1<n.indexOf(":"))break;for(v=v.slice(1),a=[b+=1,S],h("end"),l.length?f=1:(f=0,l.unshift(N(":")));u=i(":,)\n"),m(/^[ \t\v\f]+/),u?(l.unshift(u),++f):m(":",!1)&&l.unshift(N(":")),m(":"););1<f&&(c.unshift([3===f?"::":":",a[0],a[1]]),h())}}return p(!0),0===s.length?null:1===s.length?s[0]:s}(!1)}async function At(n,t,r){if(_(n,N)){if(""===n.op)return n.arg;if("v"===n.op)return!1===t?n.arg:_(n.arg.v,N)?bt(n.arg):z(t)&&A.call(t,n.arg.v)?t[n.arg.v]:await bt(n.arg);if(vt===n.op)return vt(n.arg,t,r);if(yt===n.op)return yt(n.arg,t,r);if(wt===n.op)return wt(n.arg,t,r);if("break"===n.op)return void(r&&d(r.brk)&&r.brk());if("continue"===n.op)return void(r&&d(r.cont)&&r.cont());if(gt["="].fn===n.op)return 2===n.arg.length&&"v"===n.arg[1].op?n.op.apply(null,[await At(n.arg[0],!1),n.arg[1].arg.isByRef()?K(await At(n.arg[1],t,r)):await At(n.arg[1],t,r)]):n.op.apply(null,[await At(n.arg[0],!1)].concat(await Promise.all(n.arg.slice(1).map(function(n){return At(n,t,r)}))));if(d(n.op))return n.op.apply(null,await Promise.all(n.arg.map(function(n){return At(n,t,r)})))}throw"invalid expr"}return T.op=gt,L.prototype={constructor:L,ctx:null,v:null,i:null,get:async function(n){var t,r,e=this;if(_(e.v,N))t=await St(e.v);else{if(!A.call(e.ctx,e.v)&&!A.call(m,e.v))throw'undefined variable "'+e.v+'"';t=(A.call(e.ctx,e.v)?e.ctx:m)[e.v]}return!0!==n&&null!=e.i?(r=Tn(t),n=await Promise.all(e.i.map(function(n,t){return St(n,{end:1===e.i.length?r[0]*r[1]:r[t]})})),Sn.apply(null,[t].concat(n))):t},set:async function(n){var t,r,e,i=this;if(null!=i.i){if(_(i.v,N))t=await St(i.v);else{if(!A.call(i.ctx,i.v))throw'undefined variable "'+i.v+'"';t=i.ctx[i.v]}r=Tn(t),1===(e=await Promise.all(i.i.map(function(n,t){return St(n,{end:1===i.i.length?r[0]*r[1]:r[t]})}))).length&&(e=e.concat(null)),kn.apply(null,[t].concat(e).concat([n]))}else _(i.v,N)||(i.ctx[i.v]=n);return i},isset:function(){return I(this.v)&&A.call(this.ctx,this.v)},isByRef:function(){return null==this.i}},N.prototype={constructor:N,op:null,arg:null},T.ret=xt,T.createCanvas=function(n,t){},T.currentCanvas=function(){},T.createContext=function(){return{ans:null}},T.eval=async function(n,t,r){t=t||T.createContext();var e=kt(String(n),t,null==r?1:r,1),i=null,o=!1;if(b(e))for(var u=0,f=e.length;u<f;++u)e[u]&&(i=await At(e[u]),o=!0);else e&&(i=await At(e),o=!0);return o&&(b(i)||p(i)||v(i)||I(i))&&(t.ans=i),o?i:null},T});