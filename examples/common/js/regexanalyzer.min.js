/**
*
*   RegExAnalyzer
*   @version: 0.4.3
*
*   A simple Regular Expression Analyzer for PHP, Python, Node/JS
*   https://github.com/foo123/regex-analyzer
*
**/
!function(e,t,r){"use strict";var a,p="object"==typeof module&&module.exports,n="function"==typeof define&&define.amd;p?module.exports=(module.$deps=module.$deps||{})[t]=module.$deps[t]||r.call(e,{NODE:module})||1:n&&"function"==typeof require&&"function"==typeof require.specified&&require.specified(t)?define(t,["require","exports","module"],function(t,a,p){return r.call(e,{AMD:p})}):t in e||(e[t]=a=r.call(e,{})||1)&&n&&define(t,[],function(){return a})}(this,"RegExAnalyzer",function(){"use strict";var e="0.4.3",t="prototype",r=Object,a=Array,p=r.keys,n=r[t].toString,s=String.fromCharCode,h="\\",l={".":"MatchAnyChar","|":"MatchEither","?":"MatchZeroOrOne","*":"MatchZeroOrMore","+":"MatchOneOrMore","^":"MatchStart",$:"MatchEnd","{":"StartRepeats","}":"EndRepeats","(":"StartGroup",")":"EndGroup","[":"StartCharGroup","]":"EndCharGroup"},g={"\\":"EscapeChar","/":"/",0:"NULChar",f:"FormFeed",n:"LineFeed",r:"CarriageReturn",t:"HorizontalTab",v:"VerticalTab",b:"MatchWordBoundary",B:"MatchNonWordBoundary",s:"MatchSpaceChar",S:"MatchNonSpaceChar",w:"MatchWordChar",W:"MatchNonWordChar",d:"MatchDigitChar",D:"MatchNonDigitChar"},i=function(e,t){return Math.round((t-e)*Math.random()+e)},o=function(e,t){e&&(e instanceof a||"[object Array]"==n.call(e))&&(t=e[1],e=e[0]);var r,p,h=e.charCodeAt(0),l=t.charCodeAt(0);if(l==h)return[s(h)];for(p=[],r=h;l>=r;++r)p.push(s(r));return p},u=" 	",f="~!@#$%^&*()-+=[]{}\\|;:,./<>?",c="0123456789",y=c+"abcdefABCDEF",d="_"+o("a","z").join("")+o("A","Z").join(""),S=u+f+c+d,C=S.split(""),M=function(){return f.charAt(i(0,f.length-1))},x=function(e){return!1!==e?u.charAt(i(0,u.length-1)):(M()+A()+v()).charAt(i(0,2))},A=function(e){return!1!==e?c.charAt(i(0,c.length-1)):(M()+x()+v()).charAt(i(0,2))},v=function(e){return!1!==e?d.charAt(i(0,d.length-1)):(M()+x()+A()).charAt(i(0,2))},$=function(e){return!1!==e?(d+c).charAt(i(0,d.length+c.length-1)):(M()+x()).charAt(i(0,1))},m=function(){return S.charAt(i(0,S.length-1))},G=function(e,t){if(!1!==t)return e.length?e[i(0,e.length-1)]:"";var r=C.filter(function(t){return 0>e.indexOf(t)});return r.length?r[i(0,r.length-1)]:""},O=function(e,t,r){for(var a=r||0;a<t.length&&-1<e.indexOf(t.charAt(a));)a++;return a-r},b=function(e){var t=!1;return e.length>2&&"x"===e.charAt(0)&&2==O(y,e,1)?[t=e.slice(0,3),t.slice(1)]:!1},R=function(e){var t=!1;return e.length>4&&"u"===e.charAt(0)&&4==O(y,e,1)?[t=e.slice(0,5),t.slice(1)]:!1},N=function(e){var t,r=0,a=!1;return e.length>2&&"{"===e.charAt(r)?(a=["","",null],r++,(t=O(u,e,r))&&(r+=t),1<=(t=O(c,e,r))?(a[1]=e.slice(r,r+t),r+=t,(t=O(u,e,r))&&(r+=t),1==O(",",e,r)&&(r+=1),(t=O(u,e,r))&&(r+=t),1<=(t=O(c,e,r))&&(a[2]=e.slice(r,r+t),r+=t),(t=O(u,e,r))&&(r+=t),"}"===e.charAt(r)?(r++,a[0]=e.slice(0,r),a):!1):!1):!1},k=function(e,t){if(t&&(t instanceof a||"[object Array]"==n.call(t)))for(var r=0,p=t.length;p>r;r++)e[t[r]]=1;else for(var r in t)e[r]=1;return e},q=function(e,t){return t?(e.charAt&&(e=e.split("")),e=e.map(function(e){return i(0,1)?e.toLowerCase():e.toUpperCase()}),t||(e=e.join("")),e):i(0,1)?e.toLowerCase():e.toUpperCase()},E=function Z(e){var t,r,a,p,n,s,h,l,g={},i={};if(h=e.type,"Alternation"==h)for(a=0,p=e.part.length;p>a;a++)n=Z(e.part[a]),g=k(g,n.peek),i=k(i,n.negativepeek);else if("Group"==h)n=Z(e.part),g=k(g,n.peek),i=k(i,n.negativepeek);else if("Sequence"==h){for(a=0,p=e.part.length,r=e.part[a],s=a>=p||!r||"Quantifier"!=r.type||!r.flags.MatchZeroOrMore&&!r.flags.MatchZeroOrOne&&"0"!=r.flags.MatchMinimum;!s;)n=Z(r.part),g=k(g,n.peek),i=k(i,n.negativepeek),a++,r=e.part[a],s=a>=p||!r||"Quantifier"!=r.type||!r.flags.MatchZeroOrMore&&!r.flags.MatchZeroOrOne&&"0"!=r.flags.MatchMinimum;p>a&&(r=e.part[a],"Special"!=r.type||"^"!=r.part&&"$"!=r.part||(r=e.part[a+1]||null),r&&"Quantifier"==r.type&&(r=r.part),r&&(n=Z(r),g=k(g,n.peek),i=k(i,n.negativepeek)))}else if("CharGroup"==h)for(t=e.flags.NotMatch?i:g,a=0,p=e.part.length;p>a;a++)r=e.part[a],l=r.type,"Chars"==l?t=k(t,r.part):"CharRange"==l?t=k(t,o(r.part)):"UnicodeChar"==l||"HexChar"==l?t[r.flags.Char]=1:"Special"==l&&("D"==r.part?e.flags.NotMatch?g["\\d"]=1:i["\\d"]=1:"W"==r.part?e.flags.NotMatch?g["\\w"]=1:i["\\W"]=1:"S"==r.part?e.flags.NotMatch?g["\\s"]=1:i["\\s"]=1:t["\\"+r.part]=1);else"String"==h?g[e.part.charAt(0)]=1:"Special"!=h||e.flags.MatchStart||e.flags.MatchEnd?("UnicodeChar"==h||"HexChar"==h)&&(g[e.flags.Char]=1):"D"==e.part?i["\\d"]=1:"W"==e.part?i["\\W"]=1:"S"==e.part?i["\\s"]=1:g["\\"+e.part]=1;return{peek:g,negativepeek:i}},I=function j(e,t){var r,a,p,n,s="";if(n=e.type,"Alternation"==n)s+=j(e.part[i(0,e.part.length-1)],t);else if("Group"==n)s+=j(e.part,t);else if("Sequence"==n){var h,l,g;for(p=e.part.length,r=e.part[a],a=0;p>a;a++)if(r=e.part[a])if(h=1,"Quantifier"==r.type)for(r.flags.MatchZeroOrMore?h=i(0,10):r.flags.MatchZeroOrOne?h=i(0,1):r.flags.MatchOneOrMore?h=i(1,11):(l=parseInt(r.flags.MatchMinimum,10),g=parseInt(r.flags.MatchMaximum,10),h=i(l,isNaN(g)?l+10:g));h>0;)h--,s+=j(r.part,t);else"Special"==r.type?r.flags.MatchAnyChar&&(s+=m()):s+=j(r,t)}else if("CharGroup"==n){var u,f=[];for(a=0,p=e.part.length;p>a;a++)r=e.part[a],u=r.type,"Chars"==u?f=f.concat(t?q(r.part,!0):r.part):"CharRange"==u?f=f.concat(t?q(o(r.part),!0):o(r.part)):"UnicodeChar"==u||"HexChar"==u?f.push(t?q(r.flags.Char):r.flags.Char):"Special"==u&&f.push("D"==r.part?A(!1):"W"==r.part?$(!1):"S"==r.part?x(!1):"d"==r.part?A():"w"==r.part?$():"s"==r.part?x():"\\"+r.part);s+=G(f,!e.flags.NotMatch)}else"String"==n?s+=t?q(e.part):e.part:"Special"!=n||e.flags.MatchStart||e.flags.MatchEnd?("UnicodeChar"==n||"HexChar"==n)&&(s+=t?q(e.flags.Char):e.flags.Char):s+="D"==e.part?A(!1):"W"==e.part?$(!1):"S"==e.part?x(!1):"d"==e.part?A():"w"==e.part?$():"s"==e.part?x():"."==e.part?m():"\\"+e.part;return s},W=function z(e){var t,r,a,p="",n=[],i=[],o={},u=!1,f=e.regex.substr(e.pos,2);for("?:"==f?(o.NotCaptured=1,e.pos+=2):"?="==f?(o.LookAhead=1,e.pos+=2):"?!"==f&&(o.NegativeLookAhead=1,e.pos+=2),o.GroupIndex=++e.groupIndex;e.pos<e.regex.length;)if(t=e.regex.charAt(e.pos++),u=h==t?!0:!1,u&&(t=e.regex.charAt(e.pos++)),u)"u"==t?(p.length&&(i.push({part:p,flags:{},type:"String"}),p=""),a=R(e.regex.substr(e.pos-1)),e.pos+=a[0].length-1,i.push({part:a[0],flags:{Char:s(parseInt(a[1],16)),Code:a[1]},type:"UnicodeChar"})):"x"==t?(p.length&&(i.push({part:p,flags:{},type:"String"}),p=""),a=b(e.regex.substr(e.pos-1)),e.pos+=a[0].length-1,i.push({part:a[0],flags:{Char:s(parseInt(a[1],16)),Code:a[1]},type:"HexChar"})):g[t]&&"/"!=t?(p.length&&(i.push({part:p,flags:{},type:"String"}),p=""),r={},r[g[t]]=1,i.push({part:t,flags:r,type:"Special"})):p+=t;else{if(")"==t)return p.length&&(i.push({part:p,flags:{},type:"String"}),p=""),n.length?(n.push({part:i,flags:{},type:"Sequence"}),i=[],r={},r[l["|"]]=1,{part:{part:n,flags:r,type:"Alternation"},flags:o,type:"Group"}):{part:{part:i,flags:{},type:"Sequence"},flags:o,type:"Group"};if("|"==t)p.length&&(i.push({part:p,flags:{},type:"String"}),p=""),n.push({part:i,flags:{},type:"Sequence"}),i=[];else if("["==t)p.length&&(i.push({part:p,flags:{},type:"String"}),p=""),i.push(w(e));else if("("==t)p.length&&(i.push({part:p,flags:{},type:"String"}),p=""),i.push(z(e));else if("{"==t){p.length&&(i.push({part:p,flags:{},type:"String"}),p=""),a=N(e.regex.substr(e.pos-1)),e.pos+=a[0].length-1,r={part:a[0],MatchMinimum:a[1],MatchMaximum:a[2]||"unlimited"},r[l[t]]=1,"?"==e.regex.charAt(e.pos)?(r.isGreedy=0,e.pos++):r.isGreedy=1;var c=i.pop();"String"==c.type&&c.part.length>1&&(i.push({part:c.part.slice(0,-1),flags:{},type:"String"}),c.part=c.part.slice(-1)),i.push({part:c,flags:r,type:"Quantifier"})}else if("*"==t||"+"==t||"?"==t){p.length&&(i.push({part:p,flags:{},type:"String"}),p=""),r={},r[l[t]]=1,"?"==e.regex.charAt(e.pos)?(r.isGreedy=0,e.pos++):r.isGreedy=1;var c=i.pop();"String"==c.type&&c.part.length>1&&(i.push({part:c.part.slice(0,-1),flags:{},type:"String"}),c.part=c.part.slice(-1)),i.push({part:c,flags:r,type:"Quantifier"})}else l[t]?(p.length&&(i.push({part:p,flags:{},type:"String"}),p=""),r={},r[l[t]]=1,i.push({part:t,flags:r,type:"Special"})):p+=t}return p.length&&(i.push({part:p,flags:{},type:"String"}),p=""),n.length?(n.push({part:i,flags:{},type:"Sequence"}),i=[],r={},r[l["|"]]=1,{part:{part:n,flags:r,type:"Alternation"},flags:o,type:"Group"}):{part:{part:i,flags:{},type:"Sequence"},flags:o,type:"Group"}},w=function(e){var t,r,a,p,n,l,i=[],o=[],u={},f=!1,c=!1;for("^"==e.regex.charAt(e.pos)&&(u.NotMatch=1,e.pos++);e.pos<e.regex.length;)if(l=!1,a=r,r=e.regex.charAt(e.pos++),c=h==r?!0:!1,c&&(r=e.regex.charAt(e.pos++)),c&&("u"==r?(n=R(e.regex.substr(e.pos-1)),e.pos+=n[0].length-1,r=s(parseInt(n[1],16)),l=!0):"x"==r&&(n=b(e.regex.substr(e.pos-1)),e.pos+=n[0].length-1,r=s(parseInt(n[1],16)),l=!0)),f)o.length&&(i.push({part:o,flags:{},type:"Chars"}),o=[]),p[1]=r,f=!1,i.push({part:p,flags:{},type:"CharRange"});else if(c)!l&&g[r]&&"/"!=r?(o.length&&(i.push({part:o,flags:{},type:"Chars"}),o=[]),t={},t[g[r]]=1,i.push({part:r,flags:t,type:"Special"})):o.push(r);else{if("]"==r)return o.length&&(i.push({part:o,flags:{},type:"Chars"}),o=[]),{part:i,flags:u,type:"CharGroup"};"-"==r?(p=[a,""],o.pop(),f=!0):o.push(r)}return o.length&&(i.push({part:o,flags:{},type:"Chars"}),o=[]),{part:i,flags:u,type:"CharGroup"}},D=function(e){for(var t,r,a,p={pos:0,groupIndex:0,regex:e},n="",i=[],o=[],u=!1;p.pos<p.regex.length;)if(t=p.regex.charAt(p.pos++),u=h==t?!0:!1,u&&(t=p.regex.charAt(p.pos++)),u)"u"==t?(n.length&&(o.push({part:n,flags:{},type:"String"}),n=""),a=R(p.regex.substr(p.pos-1)),p.pos+=a[0].length-1,o.push({part:a[0],flags:{Char:s(parseInt(a[1],16)),Code:a[1]},type:"UnicodeChar"})):"x"==t?(n.length&&(o.push({part:n,flags:{},type:"String"}),n=""),a=b(p.regex.substr(p.pos-1)),p.pos+=a[0].length-1,o.push({part:a[0],flags:{Char:s(parseInt(a[1],16)),Code:a[1]},type:"HexChar"})):g[t]&&"/"!=t?(n.length&&(o.push({part:n,flags:{},type:"String"}),n=""),r={},r[g[t]]=1,o.push({part:t,flags:r,type:"Special"})):n+=t;else if("|"==t)n.length&&(o.push({part:n,flags:{},type:"String"}),n=""),i.push({part:o,flags:{},type:"Sequence"}),o=[];else if("["==t)n.length&&(o.push({part:n,flags:{},type:"String"}),n=""),o.push(w(p));else if("("==t)n.length&&(o.push({part:n,flags:{},type:"String"}),n=""),o.push(W(p));else if("{"==t){n.length&&(o.push({part:n,flags:{},type:"String"}),n=""),a=N(p.regex.substr(p.pos-1)),p.pos+=a[0].length-1,r={part:a[0],MatchMinimum:a[1],MatchMaximum:a[2]||"unlimited"},r[l[t]]=1,"?"==p.regex.charAt(p.pos)?(r.isGreedy=0,p.pos++):r.isGreedy=1;var f=o.pop();"String"==f.type&&f.part.length>1&&(o.push({part:f.part.slice(0,-1),flags:{},type:"String"}),f.part=f.part.slice(-1)),o.push({part:f,flags:r,type:"Quantifier"})}else if("*"==t||"+"==t||"?"==t){n.length&&(o.push({part:n,flags:{},type:"String"}),n=""),r={},r[l[t]]=1,"?"==p.regex.charAt(p.pos)?(r.isGreedy=0,p.pos++):r.isGreedy=1;var f=o.pop();"String"==f.type&&f.part.length>1&&(o.push({part:f.part.slice(0,-1),flags:{},type:"String"}),f.part=f.part.slice(-1)),o.push({part:f,flags:r,type:"Quantifier"})}else l[t]?(n.length&&(o.push({part:n,flags:{},type:"String"}),n=""),r={},r[l[t]]=1,o.push({part:t,flags:r,type:"Special"})):n+=t;return n.length&&(o.push({part:n,flags:{},type:"String"}),n=""),i.length?(i.push({part:o,flags:{},type:"Sequence"}),o=[],r={},r[l["|"]]=1,{part:i,flags:r,type:"Alternation"}):{part:o,flags:{},type:"Sequence"}},U=function Q(e,t){return this instanceof Q?void(e&&this.regex(e,t)):new Q(e,t)};return U.VERSION=e,U.getCharRange=o,U[t]={constructor:U,$regex:null,$flags:null,$parts:null,$needsRefresh:!0,dispose:function(){var e=this;return e.$regex=null,e.$flags=null,e.$parts=null,e},regex:function(e,t){var r=this;if(e){t=t||"/";for(var a={},p=e.toString(),n=p.length,s=p.charAt(n-1);t!==s;)a[s]=1,p=p.substr(0,n-1),n=p.length,s=p.charAt(n-1);t==p.charAt(0)&&t==p.charAt(n-1)&&(p=p.substr(1,n-2)),r.$regex!==p&&(r.$needsRefresh=!0),r.$regex=p,r.$flags=a}return r},analyze:function(){var e=this;return e.$needsRefresh&&(e.$parts=D(e.$regex),e.$needsRefresh=!1),e},getRegex:function(){return new RegExp(this.$regex,p(this.$flags).join(""))},getParts:function(){var e=this;return e.$needsRefresh&&e.analyze(),e.$parts},generateSample:function(){var e=this;return e.$needsRefresh&&e.analyze(),I(e.$parts,e.$flags&&e.$flags.i)},getPeekChars:function(){var e,t,r,a,p,n,s=this;s.$needsRefresh&&s.analyze(),t=E(s.$parts),e=s.$flags&&s.$flags.i;for(r in t){n={},p=t[r];for(a in p)"\\d"==a?(delete p[a],n=k(n,o("0","9"))):"\\s"==a?(delete p[a],n=k(n,["\f","\n","\r","	",""," ","\u2028","\u2029"])):"\\w"==a?(delete p[a],n=k(n,["_"].concat(o("0","9")).concat(o("a","z")).concat(o("A","Z")))):"\\."==a?(delete p[a],n[l["."]]=1):"\\"!=a.charAt(0)&&e?(n[a.toLowerCase()]=1,n[a.toUpperCase()]=1):"\\"==a.charAt(0)&&delete p[a];t[r]=k(p,n)}return t}},U});