/**
*
*   RegExAnalyzer
*   @version: 0.4.1
*
*   A simple Regular Expression Analyzer for PHP, Python, Node/JS
*   https://github.com/foo123/regex-analyzer
*
**/
!function(e,t,r){"use strict";var a,p="object"==typeof module&&module.exports,s="function"==typeof define&&define.amd;p?module.exports=(module.$deps=module.$deps||{})[t]=module.$deps[t]||r.call(e,{NODE:module})||1:s&&"function"==typeof require&&"function"==typeof require.specified&&require.specified(t)?define(t,["require","exports","module"],function(t,a,p){return r.call(e,{AMD:p})}):t in e||(e[t]=a=r.call(e,{})||1)&&s&&define(t,[],function(){return a})}(this,"RegExAnalyzer",function(){"use strict";var e="0.4.1",t=Object,r=Array,a=t.prototype.toString,p="\\",s=/^\{\s*(\d+)\s*,?\s*(\d+)?\s*\}/,n=/^u([0-9a-fA-F]{4})/,h=/^x([0-9a-fA-F]{2})/,l={".":"MatchAnyChar","|":"MatchEither","?":"MatchZeroOrOne","*":"MatchZeroOrMore","+":"MatchOneOrMore","^":"MatchStart",$:"MatchEnd","{":"StartRepeats","}":"EndRepeats","(":"StartGroup",")":"EndGroup","[":"StartCharGroup","]":"EndCharGroup"},g={"\\":"EscapeChar","/":"/",0:"NULChar",f:"FormFeed",n:"LineFeed",r:"CarriageReturn",t:"HorizontalTab",v:"VerticalTab",b:"MatchWordBoundary",B:"MatchNonWordBoundary",s:"MatchSpaceChar",S:"MatchNonSpaceChar",w:"MatchWordChar",W:"MatchNonWordChar",d:"MatchDigitChar",D:"MatchNonDigitChar"},o=function(e,t){return Math.round((t-e)*Math.random()+e)},i=function(e,t){e&&(e instanceof r||"[object Array]"==a.call(e))&&(t=e[1],e=e[0]);var p,s,n=e.charCodeAt(0),h=t.charCodeAt(0);if(h==n)return[String.fromCharCode(n)];for(s=[],p=n;h>=p;++p)s.push(String.fromCharCode(p));return s},f=("\r\n".split("")," 	".split("")),u="~!@#$%^&*()-+=[]{}\\|;:,./<>?".split(""),c="0123456789".split(""),y=["_"].concat(i("a","z")).concat(i("A","Z")),d=f.concat(u).concat(c).concat(y),C=function(){return u[o(0,u.length-1)]},S=function(e){return!1!==e?f[o(0,f.length-1)]:[C(),x(),M()][o(0,2)]},x=function(e){return!1!==e?c[o(0,c.length-1)]:[C(),S(),M()][o(0,2)]},M=function(e){return!1!==e?y[o(0,y.length-1)]:[C(),S(),x()][o(0,2)]},m=function(e){return!1!==e?["_"].concat(y).concat(c)[o(0,y.length+c.length)]:[C(),S()][o(0,1)]},A=function(){return d[o(0,d.length-1)]},v=function(e,t){if(!1!==t)return e.length?e[o(0,e.length-1)]:"";var r=d.filter(function(t){return 0>e.indexOf(t)});return r.length?r[o(0,r.length-1)]:""},$=function(e,t){if(t&&(t instanceof r||"[object Array]"==a.call(t)))for(var p=0,s=t.length;s>p;p++)e[t[p]]=1;else for(var p in t)e[p]=1;return e},G=function(e,t){return t?(e.charAt&&(e=e.split("")),e=e.map(function(e){return o(0,1)?e.toLowerCase():e.toUpperCase()}),t||(e=e.join("")),e):o(0,1)?e.toLowerCase():e.toUpperCase()},O=function(e){var t,r,a,p,s,n,h,l,g={},o={};if(h=e.type,"Alternation"==h)for(a=0,p=e.part.length;p>a;a++)s=O(e.part[a]),g=$(g,s.peek),o=$(o,s.negativepeek);else if("Group"==h)s=O(e.part),g=$(g,s.peek),o=$(o,s.negativepeek);else if("Sequence"==h){for(a=0,p=e.part.length,r=e.part[a],n=a>=p||!r||"Quantifier"!=r.type||!r.flags.MatchZeroOrMore&&!r.flags.MatchZeroOrOne&&"0"!=r.flags.MatchMinimum;!n;)s=O(r.part),g=$(g,s.peek),o=$(o,s.negativepeek),a++,r=e.part[a],n=a>=p||!r||"Quantifier"!=r.type||!r.flags.MatchZeroOrMore&&!r.flags.MatchZeroOrOne&&"0"!=r.flags.MatchMinimum;p>a&&(r=e.part[a],"Special"!=r.type||"^"!=r.part&&"$"!=r.part||(r=e.part[a+1]||null),r&&"Quantifier"==r.type&&(r=r.part),r&&(s=O(r),g=$(g,s.peek),o=$(o,s.negativepeek)))}else if("CharGroup"==h)for(t=e.flags.NotMatch?o:g,a=0,p=e.part.length;p>a;a++)r=e.part[a],l=r.type,"Chars"==l?t=$(t,r.part):"CharRange"==l?t=$(t,i(r.part)):"UnicodeChar"==l||"HexChar"==l?t[r.flags.Char]=1:"Special"==l&&("D"==r.part?e.flags.NotMatch?g["\\d"]=1:o["\\d"]=1:"W"==r.part?e.flags.NotMatch?g["\\w"]=1:o["\\W"]=1:"S"==r.part?e.flags.NotMatch?g["\\s"]=1:o["\\s"]=1:t["\\"+r.part]=1);else"String"==h?g[e.part.charAt(0)]=1:"Special"!=h||e.flags.MatchStart||e.flags.MatchEnd?("UnicodeChar"==h||"HexChar"==h)&&(g[e.flags.Char]=1):"D"==e.part?o["\\d"]=1:"W"==e.part?o["\\W"]=1:"S"==e.part?o["\\s"]=1:g["\\"+e.part]=1;return{peek:g,negativepeek:o}},b=function(e,t){var r,a,p,s,n="";if(s=e.type,"Alternation"==s)n+=b(e.part[o(0,e.part.length-1)],t);else if("Group"==s)n+=b(e.part,t);else if("Sequence"==s){var h,l,g;for(p=e.part.length,r=e.part[a],a=0;p>a;a++)if(r=e.part[a])if(h=1,"Quantifier"==r.type)for(r.flags.MatchZeroOrMore?h=o(0,10):r.flags.MatchZeroOrOne?h=o(0,1):r.flags.MatchOneOrMore?h=o(1,11):(l=parseInt(r.flags.MatchMinimum,10),g=parseInt(r.flags.MatchMaximum,10),h=o(l,isNaN(g)?l+10:g));h>0;)h--,n+=b(r.part,t);else"Special"==r.type?r.flags.MatchAnyChar&&(n+=A()):n+=b(r,t)}else if("CharGroup"==s){var f,u=[];for(a=0,p=e.part.length;p>a;a++)r=e.part[a],f=r.type,"Chars"==f?u=u.concat(t?G(r.part,!0):r.part):"CharRange"==f?u=u.concat(t?G(i(r.part),!0):i(r.part)):"UnicodeChar"==f||"HexChar"==f?u.push(t?G(r.flags.Char):r.flags.Char):"Special"==f&&u.push("D"==r.part?x(!1):"W"==r.part?m(!1):"S"==r.part?S(!1):"d"==r.part?x():"w"==r.part?m():"s"==r.part?S():"\\"+r.part);n+=v(u,!e.flags.NotMatch)}else"String"==s?n+=t?G(e.part):e.part:"Special"!=s||e.flags.MatchStart||e.flags.MatchEnd?("UnicodeChar"==s||"HexChar"==s)&&(n+=t?G(e.flags.Char):e.flags.Char):n+="D"==e.part?x(!1):"W"==e.part?m(!1):"S"==e.part?S(!1):"d"==e.part?x():"w"==e.part?m():"s"==e.part?S():"."==e.part?A():"\\"+e.part;return n},N=function(e){var t,r,a,o="",i=[],f=[],u={},c=!1,y=e.regex.substr(e.pos,2);for("?:"==y?(u.NotCaptured=1,e.pos+=2):"?="==y?(u.LookAhead=1,e.pos+=2):"?!"==y&&(u.NegativeLookAhead=1,e.pos+=2),u.GroupIndex=++e.groupIndex;e.pos<e.regex.length;)if(t=e.regex.charAt(e.pos++),c=p==t?!0:!1,c&&(t=e.regex.charAt(e.pos++)),c)"u"==t?(o.length&&(f.push({part:o,flags:{},type:"String"}),o=""),a=n.exec(e.regex.substr(e.pos-1)),e.pos+=a[0].length-1,f.push({part:a[0],flags:{Char:String.fromCharCode(parseInt(a[1],16)),Code:a[1]},type:"UnicodeChar"})):"x"==t?(o.length&&(f.push({part:o,flags:{},type:"String"}),o=""),a=h.exec(e.regex.substr(e.pos-1)),e.pos+=a[0].length-1,f.push({part:a[0],flags:{Char:String.fromCharCode(parseInt(a[1],16)),Code:a[1]},type:"HexChar"})):g[t]&&"/"!=t?(o.length&&(f.push({part:o,flags:{},type:"String"}),o=""),r={},r[g[t]]=1,f.push({part:t,flags:r,type:"Special"})):o+=t;else{if(")"==t)return o.length&&(f.push({part:o,flags:{},type:"String"}),o=""),i.length?(i.push({part:f,flags:{},type:"Sequence"}),f=[],r={},r[l["|"]]=1,{part:{part:i,flags:r,type:"Alternation"},flags:u,type:"Group"}):{part:{part:f,flags:{},type:"Sequence"},flags:u,type:"Group"};if("|"==t)o.length&&(f.push({part:o,flags:{},type:"String"}),o=""),i.push({part:f,flags:{},type:"Sequence"}),f=[];else if("["==t)o.length&&(f.push({part:o,flags:{},type:"String"}),o=""),f.push(R(e));else if("("==t)o.length&&(f.push({part:o,flags:{},type:"String"}),o=""),f.push(N(e));else if("{"==t){o.length&&(f.push({part:o,flags:{},type:"String"}),o=""),a=s.exec(e.regex.substr(e.pos-1)),e.pos+=a[0].length-1,r={part:a[0],MatchMinimum:a[1],MatchMaximum:a[2]||"unlimited"},r[l[t]]=1,"?"==e.regex.charAt(e.pos)?(r.isGreedy=0,e.pos++):r.isGreedy=1;var d=f.pop();"String"==d.type&&d.part.length>1&&(f.push({part:d.part.slice(0,-1),flags:{},type:"String"}),d.part=d.part.slice(-1)),f.push({part:d,flags:r,type:"Quantifier"})}else if("*"==t||"+"==t||"?"==t){o.length&&(f.push({part:o,flags:{},type:"String"}),o=""),r={},r[l[t]]=1,"?"==e.regex.charAt(e.pos)?(r.isGreedy=0,e.pos++):r.isGreedy=1;var d=f.pop();"String"==d.type&&d.part.length>1&&(f.push({part:d.part.slice(0,-1),flags:{},type:"String"}),d.part=d.part.slice(-1)),f.push({part:d,flags:r,type:"Quantifier"})}else l[t]?(o.length&&(f.push({part:o,flags:{},type:"String"}),o=""),r={},r[l[t]]=1,f.push({part:t,flags:r,type:"Special"})):o+=t}return o.length&&(f.push({part:o,flags:{},type:"String"}),o=""),i.length?(i.push({part:f,flags:{},type:"Sequence"}),f=[],r={},r[l["|"]]=1,{part:{part:i,flags:r,type:"Alternation"},flags:u,type:"Group"}):{part:{part:f,flags:{},type:"Sequence"},flags:u,type:"Group"}},R=function(e){var t,r,a,s,l,o,i=[],f=[],u={},c=!1,y=!1;for("^"==e.regex.charAt(e.pos)&&(u.NotMatch=1,e.pos++);e.pos<e.regex.length;)if(o=!1,a=r,r=e.regex.charAt(e.pos++),y=p==r?!0:!1,y&&(r=e.regex.charAt(e.pos++)),y&&("u"==r?(l=n.exec(e.regex.substr(e.pos-1)),e.pos+=l[0].length-1,r=String.fromCharCode(parseInt(l[1],16)),o=!0):"x"==r&&(l=h.exec(e.regex.substr(e.pos-1)),e.pos+=l[0].length-1,r=String.fromCharCode(parseInt(l[1],16)),o=!0)),c)f.length&&(i.push({part:f,flags:{},type:"Chars"}),f=[]),s[1]=r,c=!1,i.push({part:s,flags:{},type:"CharRange"});else if(y)!o&&g[r]&&"/"!=r?(f.length&&(i.push({part:f,flags:{},type:"Chars"}),f=[]),t={},t[g[r]]=1,i.push({part:r,flags:t,type:"Special"})):f.push(r);else{if("]"==r)return f.length&&(i.push({part:f,flags:{},type:"Chars"}),f=[]),{part:i,flags:u,type:"CharGroup"};"-"==r?(s=[a,""],f.pop(),c=!0):f.push(r)}return f.length&&(i.push({part:f,flags:{},type:"Chars"}),f=[]),{part:i,flags:u,type:"CharGroup"}},q=function(e){for(var t,r,a,o={pos:0,groupIndex:0,regex:e},i="",f=[],u=[],c=!1;o.pos<o.regex.length;)if(t=o.regex.charAt(o.pos++),c=p==t?!0:!1,c&&(t=o.regex.charAt(o.pos++)),c)"u"==t?(i.length&&(u.push({part:i,flags:{},type:"String"}),i=""),a=n.exec(o.regex.substr(o.pos-1)),o.pos+=a[0].length-1,u.push({part:a[0],flags:{Char:String.fromCharCode(parseInt(a[1],16)),Code:a[1]},type:"UnicodeChar"})):"x"==t?(i.length&&(u.push({part:i,flags:{},type:"String"}),i=""),a=h.exec(o.regex.substr(o.pos-1)),o.pos+=a[0].length-1,u.push({part:a[0],flags:{Char:String.fromCharCode(parseInt(a[1],16)),Code:a[1]},type:"HexChar"})):g[t]&&"/"!=t?(i.length&&(u.push({part:i,flags:{},type:"String"}),i=""),r={},r[g[t]]=1,u.push({part:t,flags:r,type:"Special"})):i+=t;else if("|"==t)i.length&&(u.push({part:i,flags:{},type:"String"}),i=""),f.push({part:u,flags:{},type:"Sequence"}),u=[];else if("["==t)i.length&&(u.push({part:i,flags:{},type:"String"}),i=""),u.push(R(o));else if("("==t)i.length&&(u.push({part:i,flags:{},type:"String"}),i=""),u.push(N(o));else if("{"==t){i.length&&(u.push({part:i,flags:{},type:"String"}),i=""),a=s.exec(o.regex.substr(o.pos-1)),o.pos+=a[0].length-1,r={part:a[0],MatchMinimum:a[1],MatchMaximum:a[2]||"unlimited"},r[l[t]]=1,"?"==o.regex.charAt(o.pos)?(r.isGreedy=0,o.pos++):r.isGreedy=1;var y=u.pop();"String"==y.type&&y.part.length>1&&(u.push({part:y.part.slice(0,-1),flags:{},type:"String"}),y.part=y.part.slice(-1)),u.push({part:y,flags:r,type:"Quantifier"})}else if("*"==t||"+"==t||"?"==t){i.length&&(u.push({part:i,flags:{},type:"String"}),i=""),r={},r[l[t]]=1,"?"==o.regex.charAt(o.pos)?(r.isGreedy=0,o.pos++):r.isGreedy=1;var y=u.pop();"String"==y.type&&y.part.length>1&&(u.push({part:y.part.slice(0,-1),flags:{},type:"String"}),y.part=y.part.slice(-1)),u.push({part:y,flags:r,type:"Quantifier"})}else l[t]?(i.length&&(u.push({part:i,flags:{},type:"String"}),i=""),r={},r[l[t]]=1,u.push({part:t,flags:r,type:"Special"})):i+=t;return i.length&&(u.push({part:i,flags:{},type:"String"}),i=""),f.length?(f.push({part:u,flags:{},type:"Sequence"}),u=[],r={},r[l["|"]]=1,{part:f,flags:r,type:"Alternation"}):{part:u,flags:{},type:"Sequence"}},k=function(e,t){e&&this.regex(e,t)};return k.VERSION=e,k.getCharRange=i,k.prototype={constructor:k,$regex:null,$flags:null,$parts:null,$needsRefresh:!0,dispose:function(){var e=this;return e.$regex=null,e.$flags=null,e.$parts=null,e},regex:function(e,t){var r=this;if(e){t=t||"/";for(var a={},p=e.toString(),s=p.length,n=p.charAt(s-1);t!==n;)a[n]=1,p=p.substr(0,s-1),s=p.length,n=p.charAt(s-1);t==p.charAt(0)&&t==p.charAt(s-1)&&(p=p.substr(1,s-2)),r.$regex!==p&&(r.$needsRefresh=!0),r.$regex=p,r.$flags=a}return r},analyze:function(){var e=this;return e.$needsRefresh&&(e.$parts=q(e.$regex),e.$needsRefresh=!1),e},getParts:function(){var e=this;return e.$needsRefresh&&e.analyze(),e.$parts},generateSample:function(){var e=this;return e.$needsRefresh&&e.analyze(),b(e.$parts,e.$flags&&e.$flags.i)},getPeekChars:function(){var e,t,r,a,p,s,n=this;n.$needsRefresh&&n.analyze(),t=O(n.$parts),e=n.$flags&&n.$flags.i;for(r in t){s={},p=t[r];for(a in p)"\\d"==a?(delete p[a],s=$(s,i("0","9"))):"\\s"==a?(delete p[a],s=$(s,["\f","\n","\r","	",""," ","\u2028","\u2029"])):"\\w"==a?(delete p[a],s=$(s,["_"].concat(i("0","9")).concat(i("a","z")).concat(i("A","Z")))):"\\."==a?(delete p[a],s[l["."]]=1):"\\"!=a.charAt(0)&&e?(s[a.toLowerCase()]=1,s[a.toUpperCase()]=1):"\\"==a.charAt(0)&&delete p[a];t[r]=$(p,s)}return t}},k});