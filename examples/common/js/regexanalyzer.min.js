/**
*
*   RegExAnalyzer
*   @version: 0.4.2
*
*   A simple Regular Expression Analyzer for PHP, Python, Node/JS
*   https://github.com/foo123/regex-analyzer
*
**/
!function(e,t,r){"use strict";var a,p="object"==typeof module&&module.exports,s="function"==typeof define&&define.amd;p?module.exports=(module.$deps=module.$deps||{})[t]=module.$deps[t]||r.call(e,{NODE:module})||1:s&&"function"==typeof require&&"function"==typeof require.specified&&require.specified(t)?define(t,["require","exports","module"],function(t,a,p){return r.call(e,{AMD:p})}):t in e||(e[t]=a=r.call(e,{})||1)&&s&&define(t,[],function(){return a})}(this,"RegExAnalyzer",function(){"use strict";var e="0.4.2",t=Object,r=Array,a=t.keys,p=t.prototype.toString,s="\\",n=/^\{\s*(\d+)\s*,?\s*(\d+)?\s*\}/,h=/^u([0-9a-fA-F]{4})/,l=/^x([0-9a-fA-F]{2})/,g={".":"MatchAnyChar","|":"MatchEither","?":"MatchZeroOrOne","*":"MatchZeroOrMore","+":"MatchOneOrMore","^":"MatchStart",$:"MatchEnd","{":"StartRepeats","}":"EndRepeats","(":"StartGroup",")":"EndGroup","[":"StartCharGroup","]":"EndCharGroup"},o={"\\":"EscapeChar","/":"/",0:"NULChar",f:"FormFeed",n:"LineFeed",r:"CarriageReturn",t:"HorizontalTab",v:"VerticalTab",b:"MatchWordBoundary",B:"MatchNonWordBoundary",s:"MatchSpaceChar",S:"MatchNonSpaceChar",w:"MatchWordChar",W:"MatchNonWordChar",d:"MatchDigitChar",D:"MatchNonDigitChar"},i=function(e,t){return Math.round((t-e)*Math.random()+e)},f=function(e,t){e&&(e instanceof r||"[object Array]"==p.call(e))&&(t=e[1],e=e[0]);var a,s,n=e.charCodeAt(0),h=t.charCodeAt(0);if(h==n)return[String.fromCharCode(n)];for(s=[],a=n;h>=a;++a)s.push(String.fromCharCode(a));return s},u=("\r\n".split("")," 	".split("")),c="~!@#$%^&*()-+=[]{}\\|;:,./<>?".split(""),y="0123456789".split(""),d=["_"].concat(f("a","z")).concat(f("A","Z")),C=u.concat(c).concat(y).concat(d),S=function(){return c[i(0,c.length-1)]},x=function(e){return!1!==e?u[i(0,u.length-1)]:[S(),M(),m()][i(0,2)]},M=function(e){return!1!==e?y[i(0,y.length-1)]:[S(),x(),m()][i(0,2)]},m=function(e){return!1!==e?d[i(0,d.length-1)]:[S(),x(),M()][i(0,2)]},A=function(e){return!1!==e?["_"].concat(d).concat(y)[i(0,d.length+y.length)]:[S(),x()][i(0,1)]},$=function(){return C[i(0,C.length-1)]},v=function(e,t){if(!1!==t)return e.length?e[i(0,e.length-1)]:"";var r=C.filter(function(t){return 0>e.indexOf(t)});return r.length?r[i(0,r.length-1)]:""},G=function(e,t){if(t&&(t instanceof r||"[object Array]"==p.call(t)))for(var a=0,s=t.length;s>a;a++)e[t[a]]=1;else for(var a in t)e[a]=1;return e},O=function(e,t){return t?(e.charAt&&(e=e.split("")),e=e.map(function(e){return i(0,1)?e.toLowerCase():e.toUpperCase()}),t||(e=e.join("")),e):i(0,1)?e.toLowerCase():e.toUpperCase()},b=function(e){var t,r,a,p,s,n,h,l,g={},o={};if(h=e.type,"Alternation"==h)for(a=0,p=e.part.length;p>a;a++)s=b(e.part[a]),g=G(g,s.peek),o=G(o,s.negativepeek);else if("Group"==h)s=b(e.part),g=G(g,s.peek),o=G(o,s.negativepeek);else if("Sequence"==h){for(a=0,p=e.part.length,r=e.part[a],n=a>=p||!r||"Quantifier"!=r.type||!r.flags.MatchZeroOrMore&&!r.flags.MatchZeroOrOne&&"0"!=r.flags.MatchMinimum;!n;)s=b(r.part),g=G(g,s.peek),o=G(o,s.negativepeek),a++,r=e.part[a],n=a>=p||!r||"Quantifier"!=r.type||!r.flags.MatchZeroOrMore&&!r.flags.MatchZeroOrOne&&"0"!=r.flags.MatchMinimum;p>a&&(r=e.part[a],"Special"!=r.type||"^"!=r.part&&"$"!=r.part||(r=e.part[a+1]||null),r&&"Quantifier"==r.type&&(r=r.part),r&&(s=b(r),g=G(g,s.peek),o=G(o,s.negativepeek)))}else if("CharGroup"==h)for(t=e.flags.NotMatch?o:g,a=0,p=e.part.length;p>a;a++)r=e.part[a],l=r.type,"Chars"==l?t=G(t,r.part):"CharRange"==l?t=G(t,f(r.part)):"UnicodeChar"==l||"HexChar"==l?t[r.flags.Char]=1:"Special"==l&&("D"==r.part?e.flags.NotMatch?g["\\d"]=1:o["\\d"]=1:"W"==r.part?e.flags.NotMatch?g["\\w"]=1:o["\\W"]=1:"S"==r.part?e.flags.NotMatch?g["\\s"]=1:o["\\s"]=1:t["\\"+r.part]=1);else"String"==h?g[e.part.charAt(0)]=1:"Special"!=h||e.flags.MatchStart||e.flags.MatchEnd?("UnicodeChar"==h||"HexChar"==h)&&(g[e.flags.Char]=1):"D"==e.part?o["\\d"]=1:"W"==e.part?o["\\W"]=1:"S"==e.part?o["\\s"]=1:g["\\"+e.part]=1;return{peek:g,negativepeek:o}},R=function(e,t){var r,a,p,s,n="";if(s=e.type,"Alternation"==s)n+=R(e.part[i(0,e.part.length-1)],t);else if("Group"==s)n+=R(e.part,t);else if("Sequence"==s){var h,l,g;for(p=e.part.length,r=e.part[a],a=0;p>a;a++)if(r=e.part[a])if(h=1,"Quantifier"==r.type)for(r.flags.MatchZeroOrMore?h=i(0,10):r.flags.MatchZeroOrOne?h=i(0,1):r.flags.MatchOneOrMore?h=i(1,11):(l=parseInt(r.flags.MatchMinimum,10),g=parseInt(r.flags.MatchMaximum,10),h=i(l,isNaN(g)?l+10:g));h>0;)h--,n+=R(r.part,t);else"Special"==r.type?r.flags.MatchAnyChar&&(n+=$()):n+=R(r,t)}else if("CharGroup"==s){var o,u=[];for(a=0,p=e.part.length;p>a;a++)r=e.part[a],o=r.type,"Chars"==o?u=u.concat(t?O(r.part,!0):r.part):"CharRange"==o?u=u.concat(t?O(f(r.part),!0):f(r.part)):"UnicodeChar"==o||"HexChar"==o?u.push(t?O(r.flags.Char):r.flags.Char):"Special"==o&&u.push("D"==r.part?M(!1):"W"==r.part?A(!1):"S"==r.part?x(!1):"d"==r.part?M():"w"==r.part?A():"s"==r.part?x():"\\"+r.part);n+=v(u,!e.flags.NotMatch)}else"String"==s?n+=t?O(e.part):e.part:"Special"!=s||e.flags.MatchStart||e.flags.MatchEnd?("UnicodeChar"==s||"HexChar"==s)&&(n+=t?O(e.flags.Char):e.flags.Char):n+="D"==e.part?M(!1):"W"==e.part?A(!1):"S"==e.part?x(!1):"d"==e.part?M():"w"==e.part?A():"s"==e.part?x():"."==e.part?$():"\\"+e.part;return n},N=function(e){var t,r,a,p="",i=[],f=[],u={},c=!1,y=e.regex.substr(e.pos,2);for("?:"==y?(u.NotCaptured=1,e.pos+=2):"?="==y?(u.LookAhead=1,e.pos+=2):"?!"==y&&(u.NegativeLookAhead=1,e.pos+=2),u.GroupIndex=++e.groupIndex;e.pos<e.regex.length;)if(t=e.regex.charAt(e.pos++),c=s==t?!0:!1,c&&(t=e.regex.charAt(e.pos++)),c)"u"==t?(p.length&&(f.push({part:p,flags:{},type:"String"}),p=""),a=h.exec(e.regex.substr(e.pos-1)),e.pos+=a[0].length-1,f.push({part:a[0],flags:{Char:String.fromCharCode(parseInt(a[1],16)),Code:a[1]},type:"UnicodeChar"})):"x"==t?(p.length&&(f.push({part:p,flags:{},type:"String"}),p=""),a=l.exec(e.regex.substr(e.pos-1)),e.pos+=a[0].length-1,f.push({part:a[0],flags:{Char:String.fromCharCode(parseInt(a[1],16)),Code:a[1]},type:"HexChar"})):o[t]&&"/"!=t?(p.length&&(f.push({part:p,flags:{},type:"String"}),p=""),r={},r[o[t]]=1,f.push({part:t,flags:r,type:"Special"})):p+=t;else{if(")"==t)return p.length&&(f.push({part:p,flags:{},type:"String"}),p=""),i.length?(i.push({part:f,flags:{},type:"Sequence"}),f=[],r={},r[g["|"]]=1,{part:{part:i,flags:r,type:"Alternation"},flags:u,type:"Group"}):{part:{part:f,flags:{},type:"Sequence"},flags:u,type:"Group"};if("|"==t)p.length&&(f.push({part:p,flags:{},type:"String"}),p=""),i.push({part:f,flags:{},type:"Sequence"}),f=[];else if("["==t)p.length&&(f.push({part:p,flags:{},type:"String"}),p=""),f.push(k(e));else if("("==t)p.length&&(f.push({part:p,flags:{},type:"String"}),p=""),f.push(N(e));else if("{"==t){p.length&&(f.push({part:p,flags:{},type:"String"}),p=""),a=n.exec(e.regex.substr(e.pos-1)),e.pos+=a[0].length-1,r={part:a[0],MatchMinimum:a[1],MatchMaximum:a[2]||"unlimited"},r[g[t]]=1,"?"==e.regex.charAt(e.pos)?(r.isGreedy=0,e.pos++):r.isGreedy=1;var d=f.pop();"String"==d.type&&d.part.length>1&&(f.push({part:d.part.slice(0,-1),flags:{},type:"String"}),d.part=d.part.slice(-1)),f.push({part:d,flags:r,type:"Quantifier"})}else if("*"==t||"+"==t||"?"==t){p.length&&(f.push({part:p,flags:{},type:"String"}),p=""),r={},r[g[t]]=1,"?"==e.regex.charAt(e.pos)?(r.isGreedy=0,e.pos++):r.isGreedy=1;var d=f.pop();"String"==d.type&&d.part.length>1&&(f.push({part:d.part.slice(0,-1),flags:{},type:"String"}),d.part=d.part.slice(-1)),f.push({part:d,flags:r,type:"Quantifier"})}else g[t]?(p.length&&(f.push({part:p,flags:{},type:"String"}),p=""),r={},r[g[t]]=1,f.push({part:t,flags:r,type:"Special"})):p+=t}return p.length&&(f.push({part:p,flags:{},type:"String"}),p=""),i.length?(i.push({part:f,flags:{},type:"Sequence"}),f=[],r={},r[g["|"]]=1,{part:{part:i,flags:r,type:"Alternation"},flags:u,type:"Group"}):{part:{part:f,flags:{},type:"Sequence"},flags:u,type:"Group"}},k=function(e){var t,r,a,p,n,g,i=[],f=[],u={},c=!1,y=!1;for("^"==e.regex.charAt(e.pos)&&(u.NotMatch=1,e.pos++);e.pos<e.regex.length;)if(g=!1,a=r,r=e.regex.charAt(e.pos++),y=s==r?!0:!1,y&&(r=e.regex.charAt(e.pos++)),y&&("u"==r?(n=h.exec(e.regex.substr(e.pos-1)),e.pos+=n[0].length-1,r=String.fromCharCode(parseInt(n[1],16)),g=!0):"x"==r&&(n=l.exec(e.regex.substr(e.pos-1)),e.pos+=n[0].length-1,r=String.fromCharCode(parseInt(n[1],16)),g=!0)),c)f.length&&(i.push({part:f,flags:{},type:"Chars"}),f=[]),p[1]=r,c=!1,i.push({part:p,flags:{},type:"CharRange"});else if(y)!g&&o[r]&&"/"!=r?(f.length&&(i.push({part:f,flags:{},type:"Chars"}),f=[]),t={},t[o[r]]=1,i.push({part:r,flags:t,type:"Special"})):f.push(r);else{if("]"==r)return f.length&&(i.push({part:f,flags:{},type:"Chars"}),f=[]),{part:i,flags:u,type:"CharGroup"};"-"==r?(p=[a,""],f.pop(),c=!0):f.push(r)}return f.length&&(i.push({part:f,flags:{},type:"Chars"}),f=[]),{part:i,flags:u,type:"CharGroup"}},q=function(e){for(var t,r,a,p={pos:0,groupIndex:0,regex:e},i="",f=[],u=[],c=!1;p.pos<p.regex.length;)if(t=p.regex.charAt(p.pos++),c=s==t?!0:!1,c&&(t=p.regex.charAt(p.pos++)),c)"u"==t?(i.length&&(u.push({part:i,flags:{},type:"String"}),i=""),a=h.exec(p.regex.substr(p.pos-1)),p.pos+=a[0].length-1,u.push({part:a[0],flags:{Char:String.fromCharCode(parseInt(a[1],16)),Code:a[1]},type:"UnicodeChar"})):"x"==t?(i.length&&(u.push({part:i,flags:{},type:"String"}),i=""),a=l.exec(p.regex.substr(p.pos-1)),p.pos+=a[0].length-1,u.push({part:a[0],flags:{Char:String.fromCharCode(parseInt(a[1],16)),Code:a[1]},type:"HexChar"})):o[t]&&"/"!=t?(i.length&&(u.push({part:i,flags:{},type:"String"}),i=""),r={},r[o[t]]=1,u.push({part:t,flags:r,type:"Special"})):i+=t;else if("|"==t)i.length&&(u.push({part:i,flags:{},type:"String"}),i=""),f.push({part:u,flags:{},type:"Sequence"}),u=[];else if("["==t)i.length&&(u.push({part:i,flags:{},type:"String"}),i=""),u.push(k(p));else if("("==t)i.length&&(u.push({part:i,flags:{},type:"String"}),i=""),u.push(N(p));else if("{"==t){i.length&&(u.push({part:i,flags:{},type:"String"}),i=""),a=n.exec(p.regex.substr(p.pos-1)),p.pos+=a[0].length-1,r={part:a[0],MatchMinimum:a[1],MatchMaximum:a[2]||"unlimited"},r[g[t]]=1,"?"==p.regex.charAt(p.pos)?(r.isGreedy=0,p.pos++):r.isGreedy=1;var y=u.pop();"String"==y.type&&y.part.length>1&&(u.push({part:y.part.slice(0,-1),flags:{},type:"String"}),y.part=y.part.slice(-1)),u.push({part:y,flags:r,type:"Quantifier"})}else if("*"==t||"+"==t||"?"==t){i.length&&(u.push({part:i,flags:{},type:"String"}),i=""),r={},r[g[t]]=1,"?"==p.regex.charAt(p.pos)?(r.isGreedy=0,p.pos++):r.isGreedy=1;var y=u.pop();"String"==y.type&&y.part.length>1&&(u.push({part:y.part.slice(0,-1),flags:{},type:"String"}),y.part=y.part.slice(-1)),u.push({part:y,flags:r,type:"Quantifier"})}else g[t]?(i.length&&(u.push({part:i,flags:{},type:"String"}),i=""),r={},r[g[t]]=1,u.push({part:t,flags:r,type:"Special"})):i+=t;return i.length&&(u.push({part:i,flags:{},type:"String"}),i=""),f.length?(f.push({part:u,flags:{},type:"Sequence"}),u=[],r={},r[g["|"]]=1,{part:f,flags:r,type:"Alternation"}):{part:u,flags:{},type:"Sequence"}},E=function(e,t){e&&this.regex(e,t)};return E.VERSION=e,E.getCharRange=f,E.prototype={constructor:E,$regex:null,$flags:null,$parts:null,$needsRefresh:!0,dispose:function(){var e=this;return e.$regex=null,e.$flags=null,e.$parts=null,e},regex:function(e,t){var r=this;if(e){t=t||"/";for(var a={},p=e.toString(),s=p.length,n=p.charAt(s-1);t!==n;)a[n]=1,p=p.substr(0,s-1),s=p.length,n=p.charAt(s-1);t==p.charAt(0)&&t==p.charAt(s-1)&&(p=p.substr(1,s-2)),r.$regex!==p&&(r.$needsRefresh=!0),r.$regex=p,r.$flags=a}return r},analyze:function(){var e=this;return e.$needsRefresh&&(e.$parts=q(e.$regex),e.$needsRefresh=!1),e},getRegex:function(){return new RegExp(this.$regex,a(this.$flags).join(""))},getParts:function(){var e=this;return e.$needsRefresh&&e.analyze(),e.$parts},generateSample:function(){var e=this;return e.$needsRefresh&&e.analyze(),R(e.$parts,e.$flags&&e.$flags.i)},getPeekChars:function(){var e,t,r,a,p,s,n=this;n.$needsRefresh&&n.analyze(),t=b(n.$parts),e=n.$flags&&n.$flags.i;for(r in t){s={},p=t[r];for(a in p)"\\d"==a?(delete p[a],s=G(s,f("0","9"))):"\\s"==a?(delete p[a],s=G(s,["\f","\n","\r","	",""," ","\u2028","\u2029"])):"\\w"==a?(delete p[a],s=G(s,["_"].concat(f("0","9")).concat(f("a","z")).concat(f("A","Z")))):"\\."==a?(delete p[a],s[g["."]]=1):"\\"!=a.charAt(0)&&e?(s[a.toLowerCase()]=1,s[a.toUpperCase()]=1):"\\"==a.charAt(0)&&delete p[a];t[r]=G(p,s)}return t}},E});