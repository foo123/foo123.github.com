/**
*
*   RegExAnalyzer
*   @version: 0.4.3
*
*   A simple Regular Expression Analyzer for PHP, Python, Node/JS, ActionScript
*   https://github.com/foo123/RegexAnalyzer
*
**/
!function(e,t,r){"use strict";var a,p="object"==typeof module&&module.exports,n="function"==typeof define&&define.amd;p?module.exports=(module.$deps=module.$deps||{})[t]=module.$deps[t]||r.call(e,{NODE:module})||1:n&&"function"==typeof require&&"function"==typeof require.specified&&require.specified(t)?define(t,["require","exports","module"],function(t,a,p){return r.call(e,{AMD:p})}):t in e||(e[t]=a=r.call(e,{})||1)&&n&&define(t,[],function(){return a})}(this,"RegExAnalyzer",function(){"use strict";var e="0.4.3",t="prototype",r=Object,a=r.keys,p=(r[t].toString,String.fromCharCode),n="charAt",s="charCodeAt",l=1/0,g="hasOwnProperty",i="\\",h={".":"MatchAnyChar","|":"MatchEither","?":"MatchZeroOrOne","*":"MatchZeroOrMore","+":"MatchOneOrMore","^":"MatchStart",$:"MatchEnd","{":"StartRepeats","}":"EndRepeats","(":"StartGroup",")":"EndGroup","[":"StartCharGroup","]":"EndCharGroup"},u={"\\":"EscapeChar","/":"/",0:"NULChar",f:"FormFeed",n:"LineFeed",r:"CarriageReturn",t:"HorizontalTab",v:"VerticalTab",b:"MatchWordBoundary",B:"MatchNonWordBoundary",s:"MatchSpaceChar",S:"MatchNonSpaceChar",w:"MatchWordChar",W:"MatchNonWordChar",d:"MatchDigitChar",D:"MatchNonDigitChar"},f=function(e,t){return Math.round((t-e)*Math.random()+e)},o=function(e){return e[s](0)},c=function(e){return[e[s](0),e[s](e.length-1)]},y=function(e,t){e&&"function"==typeof e.push&&(t=e[1],e=e[0]);var r,a,n=e[s](0),l=t[s](0);if(l==n)return[p(n)];for(a=[],r=n;l>=r;++r)a.push(p(r));return a},d=function(e,t){if(t&&"function"==typeof t.push)for(var r=0,a=t.length;a>r;r++)e[t[r]]=1;else for(var r in t)e[r]=1;return e},S=" 	",C="~!@#$%^&*()-+=[]{}\\|;:,./<>?",M="0123456789",x=c(M),v=[x,[o("a"),o("f")],[o("A"),o("F")]],m="_"+y("a","z").join("")+y("A","Z").join(""),$=S+C+M+m,G=$.split(""),O=function(e,t,r,a,p){r=r||0,a=a||1,p=p||l;for(var s,g=r,i=0,h=t.length;h>g&&p>=i&&-1<e.indexOf(s=t[n](g));)g++,i++;return i>=a?i:!1},R=function(e,t,r,a,p){r=r||0,a=a||1,p=p||l;for(var n,g=r,i=0,h=t.length;h>g&&p>=i&&(n=t[s](g))>=e[0]&&n<=e[1];)g++,i++;return i>=a?i:!1},b=function(e,t,r,a,p){r=r||0,a=a||1,p=p||l;for(var n,g,i,h=r,u=0,f=t.length,o=e.length,c=!0;f>h&&p>=u&&c;)for(n=t[s](h),c=!1,g=0;o>g;g++)if(i=e[g],n>=i[0]&&n<=i[1]){h++,u++,c=!0;break}return u>=a?u:!1},N=function(){return C[n](f(0,C.length-1))},A=function(e){return!1!==e?S[n](f(0,S.length-1)):(N()+k()+q())[n](f(0,2))},k=function(e){return!1!==e?M[n](f(0,M.length-1)):(N()+A()+q())[n](f(0,2))},q=function(e){return!1!==e?m[n](f(0,m.length-1)):(N()+A()+k())[n](f(0,2))},E=function(e){return!1!==e?(m+M)[n](f(0,m.length+M.length-1)):(N()+A())[n](f(0,1))},I=function(){return $[n](f(0,$.length-1))},W=function(e,t){if(!1!==t)return e.length?e[f(0,e.length-1)]:"";var r=G.filter(function(t){return 0>e.indexOf(t)});return r.length?r[f(0,r.length-1)]:""},w=function(e){return f(0,1)?e.toLowerCase():e.toUpperCase()},Z=function(e,t){return t?(e[n]&&(e=e.split("")),e=e.map(w)):w(e)},D=function P(e,t){var r,a,p,n,s="";if(n=e.type,"Alternation"==n)s+=P(e.part[f(0,e.part.length-1)],t);else if("Group"==n)s+=P(e.part,t);else if("Sequence"==n){var l,g,i;for(p=e.part.length,r=e.part[a],a=0;p>a;a++)if(r=e.part[a])if(l=1,"Quantifier"==r.type)for(r.flags.MatchZeroOrMore?l=f(0,10):r.flags.MatchZeroOrOne?l=f(0,1):r.flags.MatchOneOrMore?l=f(1,11):(g=parseInt(r.flags.MatchMinimum,10),i=parseInt(r.flags.MatchMaximum,10),l=f(g,isNaN(i)?g+10:i));l>0;)l--,s+=P(r.part,t);else"Special"==r.type?r.flags.MatchAnyChar&&(s+=I()):s+=P(r,t)}else if("CharGroup"==n){var h,u=[];for(a=0,p=e.part.length;p>a;a++)if(r=e.part[a],h=r.type,"Chars"==h)u=u.concat(t?Z(r.part,!0):r.part);else if("CharRange"==h)u=u.concat(t?Z(y(r.part),!0):y(r.part));else if("UnicodeChar"==h||"HexChar"==h)u.push(t?Z(r.flags.Char):r.flags.Char);else if("Special"==h){var o=r.part;u.push("D"==o?k(!1):"W"==o?E(!1):"S"==o?A(!1):"d"==o?k():"w"==o?E():"s"==o?A():"\\"+o)}s+=W(u,!e.flags.NotMatch)}else if("String"==n)s+=t?Z(e.part):e.part;else if("Special"!=n||e.flags.MatchStart||e.flags.MatchEnd)("UnicodeChar"==n||"HexChar"==n)&&(s+=t?Z(e.flags.Char):e.flags.Char);else{var o=e.part;s+="D"==o?k(!1):"W"==o?E(!1):"S"==o?A(!1):"d"==o?k():"w"==o?E():"s"==o?A():"."==o?I():"\\"+o}return s},U=function T(e){var t,r,a,p,s,l,g,i,h={},u={};if(g=e.type,"Alternation"==g)for(a=0,p=e.part.length;p>a;a++)s=T(e.part[a]),h=d(h,s.peek),u=d(u,s.negativepeek);else if("Group"==g)s=T(e.part),h=d(h,s.peek),u=d(u,s.negativepeek);else if("Sequence"==g){for(a=0,p=e.part.length,r=e.part[a],l=a>=p||!r||"Quantifier"!=r.type||!r.flags.MatchZeroOrMore&&!r.flags.MatchZeroOrOne&&"0"!=r.flags.MatchMinimum;!l;)s=T(r.part),h=d(h,s.peek),u=d(u,s.negativepeek),a++,r=e.part[a],l=a>=p||!r||"Quantifier"!=r.type||!r.flags.MatchZeroOrMore&&!r.flags.MatchZeroOrOne&&"0"!=r.flags.MatchMinimum;p>a&&(r=e.part[a],"Special"!=r.type||"^"!=r.part&&"$"!=r.part||(r=e.part[a+1]||null),r&&"Quantifier"==r.type&&(r=r.part),r&&(s=T(r),h=d(h,s.peek),u=d(u,s.negativepeek)))}else if("CharGroup"==g){for(t=e.flags.NotMatch?u:h,a=0,p=e.part.length;p>a;a++)if(r=e.part[a],i=r.type,"Chars"==i)t=d(t,r.part);else if("CharRange"==i)t=d(t,y(r.part));else if("UnicodeChar"==i||"HexChar"==i)t[r.flags.Char]=1;else if("Special"==i){var f=r.part;"D"==f?e.flags.NotMatch?h["\\d"]=1:u["\\d"]=1:"W"==f?e.flags.NotMatch?h["\\w"]=1:u["\\W"]=1:"S"==f?e.flags.NotMatch?h["\\s"]=1:u["\\s"]=1:t["\\"+f]=1}}else"String"==g?h[e.part[n](0)]=1:"Special"!=g||e.flags.MatchStart||e.flags.MatchEnd?("UnicodeChar"==g||"HexChar"==g)&&(h[e.flags.Char]=1):"D"==e.part?u["\\d"]=1:"W"==e.part?u["\\W"]=1:"S"==e.part?u["\\s"]=1:h["\\"+e.part]=1;return{peek:h,negativepeek:u}},z=function(e){var t=!1;return e.length>2&&"x"===e[n](0)&&b(v,e,1,2,2)?[t=e.slice(0,3),t.slice(1)]:!1},Q=function(e){var t=!1;return e.length>4&&"u"===e[n](0)&&b(v,e,1,4,4)?[t=e.slice(0,5),t.slice(1)]:!1},H=function(e){var t,r=e.length,a=0,p=!1;return r>2&&"{"===e[n](a)?(p=["","",null],a++,(t=O(S,e,a))&&(a+=t),(t=R(x,e,a))?(p[1]=e.slice(a,a+t),a+=t,(t=O(S,e,a))&&(a+=t),r>a&&","===e[n](a)&&(a+=1),(t=O(S,e,a))&&(a+=t),(t=R(x,e,a))&&(p[2]=e.slice(a,a+t),a+=t),(t=O(S,e,a))&&(a+=t),r>a&&"}"===e[n](a)?(a++,p[0]=e.slice(0,a),p):!1):!1):!1},L=function V(e){var t,r,a,s,l="",f=[],o=[],c={},y=!1,d=e.regex.substr(e.pos,2);for("?:"==d?(c.NotCaptured=1,e.pos+=2):"?="==d?(c.LookAhead=1,e.pos+=2):"?!"==d&&(c.NegativeLookAhead=1,e.pos+=2),c.GroupIndex=++e.groupIndex,s=e.regex.length;e.pos<s;)if(t=e.regex[n](e.pos++),y=i==t?!0:!1,y&&(t=e.regex[n](e.pos++)),y)"u"==t?(l.length&&(o.push({part:l,flags:{},type:"String"}),l=""),a=Q(e.regex.substr(e.pos-1)),e.pos+=a[0].length-1,o.push({part:a[0],flags:{Char:p(parseInt(a[1],16)),Code:a[1]},type:"UnicodeChar"})):"x"==t?(l.length&&(o.push({part:l,flags:{},type:"String"}),l=""),a=z(e.regex.substr(e.pos-1)),e.pos+=a[0].length-1,o.push({part:a[0],flags:{Char:p(parseInt(a[1],16)),Code:a[1]},type:"HexChar"})):u[g](t)&&"/"!=t?(l.length&&(o.push({part:l,flags:{},type:"String"}),l=""),r={},r[u[t]]=1,o.push({part:t,flags:r,type:"Special"})):l+=t;else{if(")"==t)return l.length&&(o.push({part:l,flags:{},type:"String"}),l=""),f.length?(f.push({part:o,flags:{},type:"Sequence"}),o=[],r={},r[h["|"]]=1,{part:{part:f,flags:r,type:"Alternation"},flags:c,type:"Group"}):{part:{part:o,flags:{},type:"Sequence"},flags:c,type:"Group"};if("|"==t)l.length&&(o.push({part:l,flags:{},type:"String"}),l=""),f.push({part:o,flags:{},type:"Sequence"}),o=[];else if("["==t)l.length&&(o.push({part:l,flags:{},type:"String"}),l=""),o.push(j(e));else if("("==t)l.length&&(o.push({part:l,flags:{},type:"String"}),l=""),o.push(V(e));else if("{"==t){l.length&&(o.push({part:l,flags:{},type:"String"}),l=""),a=H(e.regex.substr(e.pos-1)),e.pos+=a[0].length-1,r={part:a[0],MatchMinimum:a[1],MatchMaximum:a[2]||"unlimited"},r[h[t]]=1,e.pos<s&&"?"==e.regex[n](e.pos)?(r.isGreedy=0,e.pos++):r.isGreedy=1;var S=o.pop();"String"==S.type&&S.part.length>1&&(o.push({part:S.part.slice(0,-1),flags:{},type:"String"}),S.part=S.part.slice(-1)),o.push({part:S,flags:r,type:"Quantifier"})}else if("*"==t||"+"==t||"?"==t){l.length&&(o.push({part:l,flags:{},type:"String"}),l=""),r={},r[h[t]]=1,e.pos<s&&"?"==e.regex[n](e.pos)?(r.isGreedy=0,e.pos++):r.isGreedy=1;var S=o.pop();"String"==S.type&&S.part.length>1&&(o.push({part:S.part.slice(0,-1),flags:{},type:"String"}),S.part=S.part.slice(-1)),o.push({part:S,flags:r,type:"Quantifier"})}else h[g](t)?(l.length&&(o.push({part:l,flags:{},type:"String"}),l=""),r={},r[h[t]]=1,o.push({part:t,flags:r,type:"Special"})):l+=t}return l.length&&(o.push({part:l,flags:{},type:"String"}),l=""),f.length?(f.push({part:o,flags:{},type:"Sequence"}),o=[],r={},r[h["|"]]=1,{part:{part:f,flags:r,type:"Alternation"},flags:c,type:"Group"}):{part:{part:o,flags:{},type:"Sequence"},flags:c,type:"Group"}},j=function(e){var t,r,a,s,l,h,f,o=[],c=[],y={},d=!1,S=!1;for("^"==e.regex[n](e.pos)&&(y.NotMatch=1,e.pos++),a=e.regex.length;e.pos<a;)if(f=!1,s=r,r=e.regex[n](e.pos++),S=i==r?!0:!1,S&&(r=e.regex[n](e.pos++)),S&&("u"==r?(h=Q(e.regex.substr(e.pos-1)),e.pos+=h[0].length-1,r=p(parseInt(h[1],16)),f=!0):"x"==r&&(h=z(e.regex.substr(e.pos-1)),e.pos+=h[0].length-1,r=p(parseInt(h[1],16)),f=!0)),d)c.length&&(o.push({part:c,flags:{},type:"Chars"}),c=[]),l[1]=r,d=!1,o.push({part:l,flags:{},type:"CharRange"});else if(S)!f&&u[g](r)&&"/"!=r?(c.length&&(o.push({part:c,flags:{},type:"Chars"}),c=[]),t={},t[u[r]]=1,o.push({part:r,flags:t,type:"Special"})):c.push(r);else{if("]"==r)return c.length&&(o.push({part:c,flags:{},type:"Chars"}),c=[]),{part:o,flags:y,type:"CharGroup"};"-"==r?(l=[s,""],c.pop(),d=!0):c.push(r)}return c.length&&(o.push({part:c,flags:{},type:"Chars"}),c=[]),{part:o,flags:y,type:"CharGroup"}},F=function(e){var t,r,a,s,l={pos:0,groupIndex:0,regex:e},f="",o=[],c=[],y=!1;for(t=l.regex.length;l.pos<t;)if(r=l.regex[n](l.pos++),y=i==r?!0:!1,y&&(r=l.regex[n](l.pos++)),y)"u"==r?(f.length&&(c.push({part:f,flags:{},type:"String"}),f=""),s=Q(l.regex.substr(l.pos-1)),l.pos+=s[0].length-1,c.push({part:s[0],flags:{Char:p(parseInt(s[1],16)),Code:s[1]},type:"UnicodeChar"})):"x"==r?(f.length&&(c.push({part:f,flags:{},type:"String"}),f=""),s=z(l.regex.substr(l.pos-1)),l.pos+=s[0].length-1,c.push({part:s[0],flags:{Char:p(parseInt(s[1],16)),Code:s[1]},type:"HexChar"})):u[g](r)&&"/"!=r?(f.length&&(c.push({part:f,flags:{},type:"String"}),f=""),a={},a[u[r]]=1,c.push({part:r,flags:a,type:"Special"})):f+=r;else if("|"==r)f.length&&(c.push({part:f,flags:{},type:"String"}),f=""),o.push({part:c,flags:{},type:"Sequence"}),c=[];else if("["==r)f.length&&(c.push({part:f,flags:{},type:"String"}),f=""),c.push(j(l));else if("("==r)f.length&&(c.push({part:f,flags:{},type:"String"}),f=""),c.push(L(l));else if("{"==r){f.length&&(c.push({part:f,flags:{},type:"String"}),f=""),s=H(l.regex.substr(l.pos-1)),l.pos+=s[0].length-1,a={part:s[0],MatchMinimum:s[1],MatchMaximum:s[2]||"unlimited"},a[h[r]]=1,l.pos<t&&"?"==l.regex[n](l.pos)?(a.isGreedy=0,l.pos++):a.isGreedy=1;var d=c.pop();"String"==d.type&&d.part.length>1&&(c.push({part:d.part.slice(0,-1),flags:{},type:"String"}),d.part=d.part.slice(-1)),c.push({part:d,flags:a,type:"Quantifier"})}else if("*"==r||"+"==r||"?"==r){f.length&&(c.push({part:f,flags:{},type:"String"}),f=""),a={},a[h[r]]=1,l.pos<t&&"?"==l.regex[n](l.pos)?(a.isGreedy=0,l.pos++):a.isGreedy=1;var d=c.pop();"String"==d.type&&d.part.length>1&&(c.push({part:d.part.slice(0,-1),flags:{},type:"String"}),d.part=d.part.slice(-1)),c.push({part:d,flags:a,type:"Quantifier"})}else h[g](r)?(f.length&&(c.push({part:f,flags:{},type:"String"}),f=""),a={},a[h[r]]=1,c.push({part:r,flags:a,type:"Special"})):f+=r;return f.length&&(c.push({part:f,flags:{},type:"String"}),f=""),o.length?(o.push({part:c,flags:{},type:"Sequence"}),c=[],a={},a[h["|"]]=1,{part:o,flags:a,type:"Alternation"}):{part:c,flags:{},type:"Sequence"}},B=function _(e,t){return this instanceof _?void(e&&this.regex(e,t)):new _(e,t)};return B.VERSION=e,B.getCharRange=y,B[t]={constructor:B,$regex:null,$flags:null,$parts:null,$needsRefresh:!0,dispose:function(){var e=this;return e.$regex=null,e.$flags=null,e.$parts=null,e},regex:function(e,t){var r=this;if(e){t=t||"/";for(var a={},p=e.toString(),s=p.length,l=p[n](s-1);t!==l;)a[l]=1,p=p.substr(0,s-1),s=p.length,l=p[n](s-1);t==p[n](0)&&t==p[n](s-1)&&(p=p.substr(1,s-2)),r.$regex!==p&&(r.$needsRefresh=!0),r.$regex=p,r.$flags=a}return r},analyze:function(){var e=this;return e.$needsRefresh&&(e.$parts=F(e.$regex),e.$needsRefresh=!1),e},getRegex:function(){return new RegExp(this.$regex,a(this.$flags).join(""))},getParts:function(){var e=this;return e.$needsRefresh&&e.analyze(),e.$parts},generateSample:function(){var e=this;return e.$needsRefresh&&e.analyze(),D(e.$parts,e.$flags&&e.$flags.i)},match:function(){return!1},getPeekChars:function(){var e,t,r,a,p,s,l=this;l.$needsRefresh&&l.analyze(),t=U(l.$parts),e=l.$flags&&l.$flags.i;for(r in t){s={},p=t[r];for(a in p)"\\d"==a?(delete p[a],s=d(s,y("0","9"))):"\\s"==a?(delete p[a],s=d(s,["\f","\n","\r","	",""," ","\u2028","\u2029"])):"\\w"==a?(delete p[a],s=d(s,["_"].concat(y("0","9")).concat(y("a","z")).concat(y("A","Z")))):"\\."==a?(delete p[a],s[h["."]]=1):"\\"!=a[n](0)&&e?(s[a.toLowerCase()]=1,s[a.toUpperCase()]=1):"\\"==a[n](0)&&delete p[a];t[r]=d(p,s)}return t}},B});