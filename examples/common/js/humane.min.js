/**
 * humane.js
 * Humanized Messages for Notifications
 *
 * @VERSION 4.0.0
 * https://github.com/foo123/humane-js
 *
 * adapted from https://github.com/wavded/humane-js
 * @license MIT
 */
!function(e,t,n){"undefined"!=typeof module?module.exports=n():"function"==typeof define&&"object"==typeof define.amd?define(n):t[e]=n()}("humane","undefined"!=typeof self?self:this,function(e,t){"use strict";var o=window,i=document,r={on:function(e,t,n){"addEventListener"in o?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)},off:function(e,t,n){"removeEventListener"in o?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)},bind:function(e,t){return function(){e.apply(t,arguments)}},isArray:Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},config:function(e,t){return null!=e?e:t},transSupport:!1,useFilter:/msie [678]/i.test(navigator.userAgent),_checkTransition:function(){var e,t=i.createElement("div"),n={webkit:"webkit",Moz:"",O:"o",ms:"MS"};for(e in n)e+"Transition"in t.style&&(this.vendorPrefix=n[e],this.transSupport=!0)}};function n(e){var t=this;e=e||{},t.queue=[],t.baseCls=e.baseCls||"humane",t.addnCls=e.addnCls||"",t.timeout="timeout"in e?e.timeout:2500,t.waitForMove=e.waitForMove||!1,t.clickToClose=e.clickToClose||!1,t.timeoutAfterMove=e.timeoutAfterMove||!1,t.container=e.container;try{t._setupEl()}catch(e){r.on(o,"load",r.bind(t._setupEl,t))}}return r._checkTransition(),n.VERSION="4.0.0",n.prototype={constructor:n,queue:null,baseCls:"humane",addnCls:"",timeout:2500,currentTimer:null,waitForMove:!1,clickToClose:!1,timeoutAfterMove:!1,container:null,removeEventsSet:!1,_animating:!1,removeEvent:null,transEvent:null,currentMsg:null,_setupEl:function(){var e=this,t=i.createElement("div");if(t.style.display="none",!e.container){if(!i.body)throw"document.body is null";e.container=i.body}e.container.appendChild(t),e.el=t,e.removeEvent=r.bind(function(){var e=r.config(this.currentMsg.timeoutAfterMove,this.timeoutAfterMove);e?setTimeout(r.bind(this.remove,this),e):this.remove()},e),e.transEvent=r.bind(e._afterAnimation,e),e._run()},_afterTimeout:function(){var e=this;r.config(e.currentMsg.waitForMove,e.waitForMove)?e.removeEventsSet||(r.on(i.body,"mousemove",e.removeEvent),r.on(i.body,"click",e.removeEvent),r.on(i.body,"keypress",e.removeEvent),r.on(i.body,"touchstart",e.removeEvent),e.removeEventsSet=!0):e.remove()},_run:function(){var e,t,n=this;!n._animating&&n.queue.length&&n.el&&(n._animating=!0,n.currentTimer&&(clearTimeout(n.currentTimer),n.currentTimer=null),e=n.queue.shift(),r.config(e.clickToClose,n.clickToClose)&&(r.on(n.el,"click",n.removeEvent),r.on(n.el,"touchstart",n.removeEvent)),0<(t=r.config(e.timeout,n.timeout))&&(n.currentTimer=setTimeout(r.bind(n._afterTimeout,n),t)),r.isArray(e.html)&&(e.html="<ul><li>"+e.html.join("<li>")+"</ul>"),n.el.innerHTML=e.html,n.currentMsg=e,n.el.className=n.baseCls,r.transSupport?(n.el.style.display="block",setTimeout(r.bind(n._showMsg,n),50)):n._showMsg())},_setOpacity:function(e){if(r.useFilter)try{this.el.filters.item("DXImageTransform.Microsoft.Alpha").Opacity=100*e}catch(e){}else this.el.style.opacity=String(e)},_showMsg:function(){var e,t,n=this,o=r.config(n.currentMsg.addnCls,n.addnCls);r.transSupport?n.el.className=n.baseCls+" "+o+" "+n.baseCls+"-animate":(e=0,n.el.className=n.baseCls+" "+o+" "+n.baseCls+"-js-animate",n._setOpacity(0),n.el.style.display="block",t=setInterval(function(){e<1?(1<(e+=.1)&&(e=1),n._setOpacity(e)):clearInterval(t)},30))},_hideMsg:function(){var e,t,n=this,o=r.config(n.currentMsg.addnCls,n.addnCls);r.transSupport?(n.el.className=n.baseCls+" "+o,r.on(n.el,r.vendorPrefix?r.vendorPrefix+"TransitionEnd":"transitionend",n.transEvent)):(e=1,t=setInterval(function(){0<e?((e-=.1)<0&&(e=0),n._setOpacity(e)):(n.el.className=n.baseCls+" "+o,clearInterval(t),n._afterAnimation())},30))},_afterAnimation:function(){var e=this;r.transSupport&&r.off(e.el,r.vendorPrefix?r.vendorPrefix+"TransitionEnd":"transitionend",e.transEvent),e.currentMsg.cb&&e.currentMsg.cb(),e.el.style.display="none",e._animating=!1,e._run()},remove:function(e){var t=this,e="function"==typeof e?e:null;r.off(i.body,"mousemove",t.removeEvent),r.off(i.body,"click",t.removeEvent),r.off(i.body,"keypress",t.removeEvent),r.off(i.body,"touchstart",t.removeEvent),r.off(this.el,"click",t.removeEvent),r.off(this.el,"touchstart",t.removeEvent),t.removeEventsSet=!1,e&&t.currentMsg&&(t.currentMsg.cb=e),t._animating?t._hideMsg():e&&e()},log:function(e,t,n,o){var i=this,r={};if(o)for(var s in o)r[s]=o[s];if("function"==typeof t)n=t;else if(t)for(var s in t)r[s]=t[s];return r.html=e,n&&(r.cb=n),i.queue.push(r),i._run(),i},spawn:function(o,i){var r=this;return function(e,t,n){return(!0===i?r.clone():r).log(e,t,n,o),r}},create:function(e){return new n(e)},clone:function(){var e=this;return new n({baseCls:e.baseCls,addnCls:e.addnCls,timeout:e.timeout,waitForMove:e.waitForMove,clickToClose:e.clickToClose,timeoutAfterMove:e.timeoutAfterMove,container:e.container})}},new n});