/**
*
*   RegexAnalyzer
*   @version: 0.5.0
*
*   A simple Regular Expression Analyzer for PHP, Python, Node/XPCOM/JS, ActionScript
*   https://github.com/foo123/RegexAnalyzer
*
**/
!function(e,t,r){"use strict";"undefined"!=typeof Components&&"object"==typeof Components.classes&&"object"==typeof Components.classesByID&&Components.utils&&"function"==typeof Components.utils["import"]?(e.$deps=e.$deps||{})&&(e.EXPORTED_SYMBOLS=[t])&&(e[t]=e.$deps[t]=r.call(e)):"object"==typeof module&&module.exports?(module.$deps=module.$deps||{})&&(module.exports=module.$deps[t]=r.call(e)):"undefined"!=typeof System&&"function"==typeof System.register&&"function"==typeof System["import"]?System.register(t,[],function(a){a(t,r.call(e))}):"function"==typeof define&&define.amd&&"function"==typeof require&&"function"==typeof require.specified&&require.specified(t)?define(t,["module"],function(t){return r.moduleUri=t.uri,r.call(e)}):t in e||(e[t]=r.call(e)||1)&&"function"==typeof define&&define.amd&&define(function(){return e[t]})}(this,"RegexAnalyzer",function(e){"use strict";var t="0.5.0",r="prototype",a=Object,n=(Array,a.keys,a[r].toString,String.fromCharCode),s="charAt",l="charCodeAt",o=(JSON.stringify,1/0),i="hasOwnProperty",u="\\",f={".":"MatchAnyChar","|":"MatchEither","?":"MatchZeroOrOne","*":"MatchZeroOrMore","+":"MatchOneOrMore","^":"MatchStart",$:"MatchEnd","{":"StartRepeats","}":"EndRepeats","(":"StartGroup",")":"EndGroup","[":"StartCharGroup","]":"EndCharGroup"},p={"\\":"EscapeChar","/":"/",0:"NULChar",f:"FormFeed",n:"LineFeed",r:"CarriageReturn",t:"HorizontalTab",v:"VerticalTab",b:"MatchWordBoundary",B:"MatchNonWordBoundary",s:"MatchSpaceChar",S:"MatchNonSpaceChar",w:"MatchWordChar",W:"MatchNonWordChar",d:"MatchDigitChar",D:"MatchNonDigitChar"},h=1,c=2,g=3,v=4,d=5,m=6,y=7,M=8,C=9,N=10,_=11,S=function(e){var t=this;t.re=e,t.len=e.length,t.pos=0,t.groupIndex=0,t.inGroup=0},O=function se(e,t,r){var a=this;if(!(a instanceof se))return new se(e,t,r);switch(a.type=e,a.val=t,a.flags=r||{},e){case h:a.typeName="Sequence";break;case c:a.typeName="Alternation";break;case g:a.typeName="Group";break;case M:a.typeName="CharacterGroup";break;case C:a.typeName="Characters";break;case N:a.typeName="CharacterRange";break;case _:a.typeName="String";break;case v:a.typeName="Quantifier";break;case d:a.typeName="UnicodeChar";break;case m:a.typeName="HexChar";break;case y:a.typeName="Special"}};O.toObjectStatic=function le(e){return e instanceof O?{type:e.typeName,value:le(e.val),flags:e.flags}:e instanceof Array?e.map(le):e},O[r]={constructor:O,type:null,typeName:null,val:null,flags:null,dispose:function(){var e=this;return e.val=null,e.flags=null,e.type=null,e.typeName=null,e},toObject:function(){return O.toObjectStatic(this)}};var b=function(e,t){return Math.round((t-e)*Math.random()+e)},k=function(e){return e[l](0)},x=function(e){return[e[l](0),e[l](e.length-1)]},R=function(e,t){e&&"function"==typeof e.push&&(t=e[1],e=e[0]);var r,a,s=e[l](0),o=t[l](0);if(o==s)return[n(s)];for(a=[],r=s;o>=r;++r)a.push(n(r));return a},G=function(e,t){if(t){var r,a;if("function"==typeof t.push)for(r=0,a=t.length;a>r;r++)e[t[r]]=1;else for(r in t)t[i](r)&&(e[r]=1)}return e},w=" 	\x0B",A="~!@#$%^&*()-+=[]{}\\|;:,./<>?",E="0123456789",I=x(E),Z=[I,[k("a"),k("f")],[k("A"),k("F")]],W="_"+R("a","z").join("")+R("A","Z").join(""),j=w+A+E+W,z=j.split(""),D=function(e,t,r,a,n){r=r||0,a=a||1,n=n||o;for(var l,i=r,u=0,f=t.length;f>i&&n>=u&&-1<e.indexOf(l=t[s](i));)i++,u++;return u>=a?u:!1},$=function(e,t,r,a,n){r=r||0,a=a||1,n=n||o;for(var s,i=r,u=0,f=t.length;f>i&&n>=u&&(s=t[l](i))>=e[0]&&s<=e[1];)i++,u++;return u>=a?u:!1},L=function(e,t,r,a,n){r=r||0,a=a||1,n=n||o;for(var s,i,u,f=r,p=0,h=t.length,c=e.length,g=!0;h>f&&n>=p&&g;)for(s=t[l](f),g=!1,i=0;c>i;i++)if(u=e[i],s>=u[0]&&s<=u[1]){f++,p++,g=!0;break}return p>=a?p:!1},B=function(){return A[s](b(0,A.length-1))},U=function(e){return!1!==e?w[s](b(0,w.length-1)):(B()+q()+F())[s](b(0,2))},q=function(e){return!1!==e?E[s](b(0,E.length-1)):(B()+U()+F())[s](b(0,2))},F=function(e){return!1!==e?W[s](b(0,W.length-1)):(B()+U()+q())[s](b(0,2))},P=function(e){return!1!==e?(W+E)[s](b(0,W.length+E.length-1)):(B()+U())[s](b(0,1))},T=function(){return j[s](b(0,j.length-1))},H=function(e,t){if(!1!==t)return e.length?e[b(0,e.length-1)]:"";var r=z.filter(function(t){return 0>e.indexOf(t)});return r.length?r[b(0,r.length-1)]:""},V=function(e){return b(0,1)?e.toLowerCase():e.toUpperCase()},J=function(e,t){return t?(e[s]&&(e=e.split("")),e=e.map(V)):V(e)},Q=function oe(e,t,r){var a,n,s,l,o="";if(0>=e)return o;if(l=t.type,c===l)o+=oe(e,t.val[b(0,t.val.length-1)],r);else if(g===l)o+=oe(e,t.val,r);else if(h===l){var i,u,f;for(s=t.val.length,a=t.val[n],n=0;s>n;n++)if(a=t.val[n])if(i=1,v===a.type)for(a.flags.MatchZeroOrMore?i=b(0,2*e):a.flags.MatchZeroOrOne?i=b(0,1):a.flags.MatchOneOrMore?i=b(1,2*e+1):(u=parseInt(a.flags.MatchMinimum,10),f=parseInt(a.flags.MatchMaximum,10),i=b(u,isNaN(f)?u+2*e:f));i>0&&(i--,o+=oe(e,a.val,r),!(o.length>=e)););else y===a.type?a.flags.MatchAnyChar&&(o+=T()):o+=oe(e,a,r)}else if(M===l){var p,S=[];for(n=0,s=t.val.length;s>n;n++)if(a=t.val[n],p=a.type,C===p)S=S.concat(r?J(a.val,!0):a.val);else if(N===p)S=S.concat(r?J(R(a.val),!0):R(a.val));else if(d===p||m===p)S.push(r?J(a.flags.Char):a.flags.Char);else if(y===p){var O=a.val;"D"===O?S.push(q(!1)):"W"===O?S.push(P(!1)):"S"===O?S.push(U(!1)):"d"===O?S.push(q()):"w"===O?S.push(P()):"s"===O?S.push(U()):S.push("\\"+O)}o+=H(S,!t.flags.NotMatch)}else if(_===l)o+=r?J(t.val):t.val;else if(y!==l||t.flags.MatchStart||t.flags.MatchEnd)d!==l&&m!==l||(o+=r?J(t.flags.Char):t.flags.Char);else{var O=t.val;o+="D"===O?q(!1):"W"===O?P(!1):"S"===O?U(!1):"d"===O?q():"w"===O?P():"s"===O?U():"."===O?T():"\\"+O}return o},X=function ie(e){var t,r,a,n,l,o,i,u,f={},p={};if(i=e.type,c===i)for(a=0,n=e.val.length;n>a;a++)l=ie(e.val[a]),f=G(f,l.peek),p=G(p,l.negativepeek);else if(g===i)l=ie(e.val),f=G(f,l.peek),p=G(p,l.negativepeek);else if(h===i){for(a=0,n=e.val.length,r=e.val[a],o=a>=n||!r||v!==r.type||!r.flags.MatchZeroOrMore&&!r.flags.MatchZeroOrOne&&"0"!==r.flags.MatchMinimum;!o;)l=ie(r.val),f=G(f,l.peek),p=G(p,l.negativepeek),a++,r=e.val[a],o=a>=n||!r||v!==r.type||!r.flags.MatchZeroOrMore&&!r.flags.MatchZeroOrOne&&"0"!==r.flags.MatchMinimum;n>a&&(r=e.val[a],y!==r.type||"^"!==r.val&&"$"!==r.val||(r=e.val[a+1]||null),r&&v===r.type&&(r=r.val),r&&(l=ie(r),f=G(f,l.peek),p=G(p,l.negativepeek)))}else if(M===i){for(t=e.flags.NotMatch?p:f,a=0,n=e.val.length;n>a;a++)if(r=e.val[a],u=r.type,C===u)t=G(t,r.val);else if(N===u)t=G(t,R(r.val));else if(d===u||m===u)t[r.flags.Char]=1;else if(y===u){var S=r.val;"D"===S?e.flags.NotMatch?f["\\d"]=1:p["\\d"]=1:"W"===S?e.flags.NotMatch?f["\\w"]=1:p["\\W"]=1:"S"===S?e.flags.NotMatch?f["\\s"]=1:p["\\s"]=1:t["\\"+S]=1}}else _===i?f[e.val[s](0)]=1:y!==i||e.flags.MatchStart||e.flags.MatchEnd?d!==i&&m!==i||(f[e.flags.Char]=1):"D"===e.val?p["\\d"]=1:"W"===e.val?p["\\W"]=1:"S"===e.val?p["\\s"]=1:f["\\"+e.val]=1;return{peek:f,negativepeek:p}},Y=function ue(e){var t,r,a,n,s,l=0;if(n=e.type,c===n){for(s=e.val.length?ue(e.val[0])||0:0,t=1,r=e.val.length;r>t;t++)a=ue(e.val[t])||0,s>a&&(s=a);l+=s}else if(g===n)l+=ue(e.val)||0;else if(h===n)for(l+=e.val.length?ue(e.val[0])||0:0,t=1,r=e.val.length;r>t;t++)l+=ue(e.val[t])||0;else v===n?l+=e.flags.MatchZeroOrMore||e.flags.MatchZeroOrOne||"0"===e.flags.MatchMinimum?0:ue(e.val)||0:M===n?l+=1:_===n?l+=e.val.length:y!==n||e.flags.MatchStart||e.flags.MatchEnd?d!==n&&m!==n||(l+=1):l+=1;return l},K=function(e){var t=!1;return e.length>2&&"x"===e[s](0)&&L(Z,e,1,2,2)?[t=e.slice(0,3),t.slice(1)]:!1},ee=function(e){var t=!1;return e.length>4&&"u"===e[s](0)&&L(Z,e,1,4,4)?[t=e.slice(0,5),t.slice(1)]:!1},te=function(e){var t,r=e.length,a=0,n=!1;return r>2&&"{"===e[s](a)?(n=["","",null],a++,(t=D(w,e,a))&&(a+=t),(t=$(I,e,a))?(n[1]=e.slice(a,a+t),a+=t,(t=D(w,e,a))&&(a+=t),r>a&&","===e[s](a)&&(a+=1),(t=D(w,e,a))&&(a+=t),(t=$(I,e,a))&&(n[2]=e.slice(a,a+t),a+=t),(t=D(w,e,a))&&(a+=t),r>a&&"}"===e[s](a)?(a++,n[0]=e.slice(0,a),n):!1):!1):!1},re=function(e){var t,r,a,l,o,f,h,c=[],g=[],v={},d=!1,m=!1;for("^"===e.re[s](e.pos)&&(v.NotMatch=1,e.pos++),a=e.len;e.pos<a;)if(h=!1,l=r,r=e.re[s](e.pos++),m=u==r,m&&(r=e.re[s](e.pos++)),m&&("u"===r?(f=ee(e.re.substr(e.pos-1)),e.pos+=f[0].length-1,r=n(parseInt(f[1],16)),h=!0):"x"===r&&(f=K(e.re.substr(e.pos-1)),e.pos+=f[0].length-1,r=n(parseInt(f[1],16)),h=!0)),d)g.length&&(c.push(O(C,g)),g=[]),o[1]=r,d=!1,c.push(O(N,o));else if(m)!h&&p[i](r)&&"/"!=r?(g.length&&(c.push(O(C,g)),g=[]),t={},t[p[r]]=1,c.push(O(y,r,t))):g.push(r);else{if("]"===r)return g.length&&(c.push(O(C,g)),g=[]),O(M,c,v);"-"===r?(o=[l,""],g.pop(),d=!0):g.push(r)}return g.length&&(c.push(O(C,g)),g=[]),O(M,c,v)},ae=function fe(e){var t,r,a,l,o,M="",C=0,N=[],S=[],b={},k=!1;for(e.inGroup>0&&(o=e.re.substr(e.pos,2),"?:"===o?(b.NotCaptured=1,e.pos+=2):"?="===o?(b.LookAhead=1,e.pos+=2):"?!"===o&&(b.NegativeLookAhead=1,e.pos+=2),b.GroupIndex=++e.groupIndex),t=e.len;e.pos<t;)if(r=e.re[s](e.pos++),k=u==r,k&&(r=e.re[s](e.pos++)),k)"u"===r?(C&&(S.push(O(_,M)),M="",C=0),a=ee(e.re.substr(e.pos-1)),e.pos+=a[0].length-1,S.push(O(d,a[0],{Char:n(parseInt(a[1],16)),Code:a[1]}))):"x"===r?(C&&(S.push(O(_,M)),M="",C=0),a=K(e.re.substr(e.pos-1)),e.pos+=a[0].length-1,S.push(O(m,a[0],{Char:n(parseInt(a[1],16)),Code:a[1]}))):p[i](r)&&"/"!=r?(C&&(S.push(O(_,M)),M="",C=0),l={},l[p[r]]=1,S.push(O(y,r,l))):(M+=r,C+=1);else{if(e.inGroup>0&&")"===r)return C&&(S.push(O(_,M)),M="",C=0),N.length?(N.push(O(h,S)),S=[],l={},l[f["|"]]=1,O(g,O(c,N,l),b)):O(g,O(h,S),b);if("|"===r)C&&(S.push(O(_,M)),M="",C=0),N.push(O(h,S)),S=[];else if("["===r)C&&(S.push(O(_,M)),M="",C=0),S.push(re(e));else if("("===r)C&&(S.push(O(_,M)),M="",C=0),e.inGroup+=1,S.push(fe(e)),e.inGroup-=1;else if("{"===r){C&&(S.push(O(_,M)),M="",C=0),a=te(e.re.substr(e.pos-1)),e.pos+=a[0].length-1,l={val:a[0],MatchMinimum:a[1],MatchMaximum:a[2]||"unlimited"},l[f[r]]=1,e.pos<t&&"?"==e.re[s](e.pos)?(l.isGreedy=0,e.pos++):l.isGreedy=1;var x=S.pop();_===x.type&&x.val.length>1&&(S.push(O(_,x.val.slice(0,-1))),x.val=x.val.slice(-1)),S.push(O(v,x,l))}else if("*"===r||"+"===r||"?"===r){C&&(S.push(O(_,M)),M="",C=0),l={},l[f[r]]=1,e.pos<t&&"?"==e.re[s](e.pos)?(l.isGreedy=0,e.pos++):l.isGreedy=1;var x=S.pop();_===x.type&&x.val.length>1&&(S.push(O(_,x.val.slice(0,-1))),x.val=x.val.slice(-1)),S.push(O(v,x,l))}else f[i](r)?(C&&(S.push(O(_,M)),M="",C=0),l={},l[f[r]]=1,S.push(O(y,r,l))):(M+=r,C+=1)}return C&&(S.push(O(_,M)),M="",C=0),N.length?(N.push(O(h,S)),S=[],l={},b[f["|"]]=1,O(c,N,l)):O(h,S)},ne=function pe(e,t){return this instanceof pe?void(e&&this.regex(e,t)):new pe(e,t)};return ne.VERSION=t,ne.Node=O,ne.getCharRange=R,ne[r]={constructor:ne,_regex:null,_flags:null,_parts:null,_needsRefresh:!1,dispose:function(){var e=this;return e._regex=null,e._flags=null,e._parts=null,e},regex:function(e,t){var r=this;if(e){t=t||"/";for(var a={},n=e.toString(),l=n.length,o=n[s](l-1);t!==o;)a[o]=1,n=n.slice(0,-1),l=n.length,o=n[s](l-1);t===n[s](0)&&t===n[s](l-1)&&(n=n.slice(1,-1)),r._regex!==n&&(r._needsRefresh=!0),r._regex=n,r._flags=a}return r},getRegex:function(e){return e=e||this._flags||{},new RegExp(this._regex,(e.g||e.G?"g":"")+(e.i||e.I?"i":"")+(e.m||e.M?"m":""))},getParts:function(){var e=this;return e._needsRefresh&&e.analyze(),e._parts},analyze:function(){var e=this;return e._needsRefresh&&(e._parts=ae(new S(e._regex)),e._needsRefresh=!1),e},sample:function(e){var t=this;return t._needsRefresh&&t.analyze(),Q(e||10,t._parts,t._flags&&t._flags.i)},minimum:function(){var e=this;return e._needsRefresh&&e.analyze(),Y(e._parts)},match:function(e){return!1},peek:function(){var e,t,r,a,n,l,o=this;o._needsRefresh&&o.analyze(),t=X(o._parts),e=o._flags&&o._flags.i;for(r in t){l={},n=t[r];for(a in n)"\\d"===a?(delete n[a],l=G(l,R("0","9"))):"\\s"===a?(delete n[a],l=G(l,["\f","\n","\r","	","\x0B"," ","\u2028","\u2029"])):"\\w"===a?(delete n[a],l=G(l,["_"].concat(R("0","9")).concat(R("a","z")).concat(R("A","Z")))):"\\."===a?(delete n[a],l[f["."]]=1):"\\"!==a[s](0)&&e?(l[a.toLowerCase()]=1,l[a.toUpperCase()]=1):"\\"===a[s](0)&&delete n[a];t[r]=G(n,l)}return t}},ne[r].getPeekChars=ne[r].peek,ne[r].generateSample=ne[r].sample,ne[r].minimumLength=ne[r].minimum,ne});