/**
*
*   RegexAnalyzer
*   @version: 0.4.4
*
*   A simple Regular Expression Analyzer for PHP, Python, Node/JS, ActionScript
*   https://github.com/foo123/RegexAnalyzer
*
**/
!function(e,t,r){"use strict";var a,p="object"==typeof module&&module.exports,n="function"==typeof define&&define.amd;p?module.exports=(module.$deps=module.$deps||{})[t]=module.$deps[t]||r.call(e,{NODE:module})||1:n&&"function"==typeof require&&"function"==typeof require.specified&&require.specified(t)?define(t,["require","exports","module"],function(t,a,p){return r.call(e,{AMD:p})}):t in e||(e[t]=a=r.call(e,{})||1)&&n&&define(t,[],function(){return a})}(this,"RegexAnalyzer",function(){"use strict";var e="0.4.4",t="prototype",r=Object,a=r.keys,p=(r[t].toString,String.fromCharCode),n="charAt",s="charCodeAt",l=1/0,o="hasOwnProperty",f="\\",i={".":"MatchAnyChar","|":"MatchEither","?":"MatchZeroOrOne","*":"MatchZeroOrMore","+":"MatchOneOrMore","^":"MatchStart",$:"MatchEnd","{":"StartRepeats","}":"EndRepeats","(":"StartGroup",")":"EndGroup","[":"StartCharGroup","]":"EndCharGroup"},u={"\\":"EscapeChar","/":"/",0:"NULChar",f:"FormFeed",n:"LineFeed",r:"CarriageReturn",t:"HorizontalTab",v:"VerticalTab",b:"MatchWordBoundary",B:"MatchNonWordBoundary",s:"MatchSpaceChar",S:"MatchNonSpaceChar",w:"MatchWordChar",W:"MatchNonWordChar",d:"MatchDigitChar",D:"MatchNonDigitChar"},h=1,g=2,c=3,y=4,d=5,m=6,M=7,N=8,C=9,S=10,v=11,_=function(e,t){return Math.round((t-e)*Math.random()+e)},x=function(e){return e[s](0)},O=function(e){return[e[s](0),e[s](e.length-1)]},G=function(e,t){e&&"function"==typeof e.push&&(t=e[1],e=e[0]);var r,a,n=e[s](0),l=t[s](0);if(l==n)return[p(n)];for(a=[],r=n;l>=r;++r)a.push(p(r));return a},k=function(e,t){if(t){var r,a;if("function"==typeof t.push)for(r=0,a=t.length;a>r;r++)e[t[r]]=1;else for(r in t)t[o](r)&&(e[r]=1)}return e},R=" 	",A="~!@#$%^&*()-+=[]{}\\|;:,./<>?",b="0123456789",E=O(b),W=[E,[x("a"),x("f")],[x("A"),x("F")]],w="_"+G("a","z").join("")+G("A","Z").join(""),I=R+A+b+w,Z=I.split(""),q=function(e,t,r,a,p){r=r||0,a=a||1,p=p||l;for(var s,o=r,f=0,i=t.length;i>o&&p>=f&&-1<e.indexOf(s=t[n](o));)o++,f++;return f>=a?f:!1},D=function(e,t,r,a,p){r=r||0,a=a||1,p=p||l;for(var n,o=r,f=0,i=t.length;i>o&&p>=f&&(n=t[s](o))>=e[0]&&n<=e[1];)o++,f++;return f>=a?f:!1},z=function(e,t,r,a,p){r=r||0,a=a||1,p=p||l;for(var n,o,f,i=r,u=0,h=t.length,g=e.length,c=!0;h>i&&p>=u&&c;)for(n=t[s](i),c=!1,o=0;g>o;o++)if(f=e[o],n>=f[0]&&n<=f[1]){i++,u++,c=!0;break}return u>=a?u:!1},L=function(){return A[n](_(0,A.length-1))},$=function(e){return!1!==e?R[n](_(0,R.length-1)):(L()+j()+F())[n](_(0,2))},j=function(e){return!1!==e?b[n](_(0,b.length-1)):(L()+$()+F())[n](_(0,2))},F=function(e){return!1!==e?w[n](_(0,w.length-1)):(L()+$()+j())[n](_(0,2))},U=function(e){return!1!==e?(w+b)[n](_(0,w.length+b.length-1)):(L()+$())[n](_(0,1))},B=function(){return I[n](_(0,I.length-1))},P=function(e,t){if(!1!==t)return e.length?e[_(0,e.length-1)]:"";var r=Z.filter(function(t){return 0>e.indexOf(t)});return r.length?r[_(0,r.length-1)]:""},H=function(e){return _(0,1)?e.toLowerCase():e.toUpperCase()},Q=function(e,t){return t?(e[n]&&(e=e.split("")),e=e.map(H)):H(e)},T=function rt(e,t){var r,a,p,n,s="";if(n=e.type,g===n)s+=rt(e.part[_(0,e.part.length-1)],t);else if(c===n)s+=rt(e.part,t);else if(h===n){var l,o,f;for(p=e.part.length,r=e.part[a],a=0;p>a;a++)if(r=e.part[a])if(l=1,y===r.type)for(r.flags.MatchZeroOrMore?l=_(0,10):r.flags.MatchZeroOrOne?l=_(0,1):r.flags.MatchOneOrMore?l=_(1,11):(o=parseInt(r.flags.MatchMinimum,10),f=parseInt(r.flags.MatchMaximum,10),l=_(o,isNaN(f)?o+10:f));l>0;)l--,s+=rt(r.part,t);else M===r.type?r.flags.MatchAnyChar&&(s+=B()):s+=rt(r,t)}else if(N===n){var i,u=[];for(a=0,p=e.part.length;p>a;a++)if(r=e.part[a],i=r.type,C===i)u=u.concat(t?Q(r.part,!0):r.part);else if(S===i)u=u.concat(t?Q(G(r.part),!0):G(r.part));else if(d===i||m===i)u.push(t?Q(r.flags.Char):r.flags.Char);else if(M===i){var x=r.part;u.push("D"==x?j(!1):"W"==x?U(!1):"S"==x?$(!1):"d"==x?j():"w"==x?U():"s"==x?$():"\\"+x)}s+=P(u,!e.flags.NotMatch)}else if(v===n)s+=t?Q(e.part):e.part;else if(M!==n||e.flags.MatchStart||e.flags.MatchEnd)(d===n||m===n)&&(s+=t?Q(e.flags.Char):e.flags.Char);else{var x=e.part;s+="D"==x?j(!1):"W"==x?U(!1):"S"==x?$(!1):"d"==x?j():"w"==x?U():"s"==x?$():"."==x?B():"\\"+x}return s},V=function at(e){var t,r,a,p,s,l,o,f,i={},u={};if(o=e.type,g===o)for(a=0,p=e.part.length;p>a;a++)s=at(e.part[a]),i=k(i,s.peek),u=k(u,s.negativepeek);else if(c===o)s=at(e.part),i=k(i,s.peek),u=k(u,s.negativepeek);else if(h===o){for(a=0,p=e.part.length,r=e.part[a],l=a>=p||!r||y!=r.type||!r.flags.MatchZeroOrMore&&!r.flags.MatchZeroOrOne&&"0"!=r.flags.MatchMinimum;!l;)s=at(r.part),i=k(i,s.peek),u=k(u,s.negativepeek),a++,r=e.part[a],l=a>=p||!r||y!=r.type||!r.flags.MatchZeroOrMore&&!r.flags.MatchZeroOrOne&&"0"!=r.flags.MatchMinimum;p>a&&(r=e.part[a],M!==r.type||"^"!=r.part&&"$"!=r.part||(r=e.part[a+1]||null),r&&y===r.type&&(r=r.part),r&&(s=at(r),i=k(i,s.peek),u=k(u,s.negativepeek)))}else if(N===o){for(t=e.flags.NotMatch?u:i,a=0,p=e.part.length;p>a;a++)if(r=e.part[a],f=r.type,C===f)t=k(t,r.part);else if(S===f)t=k(t,G(r.part));else if(d===f||m===f)t[r.flags.Char]=1;else if(M===f){var _=r.part;"D"==_?e.flags.NotMatch?i["\\d"]=1:u["\\d"]=1:"W"==_?e.flags.NotMatch?i["\\w"]=1:u["\\W"]=1:"S"==_?e.flags.NotMatch?i["\\s"]=1:u["\\s"]=1:t["\\"+_]=1}}else v===o?i[e.part[n](0)]=1:M!==o||e.flags.MatchStart||e.flags.MatchEnd?(d===o||m===o)&&(i[e.flags.Char]=1):"D"==e.part?u["\\d"]=1:"W"==e.part?u["\\W"]=1:"S"==e.part?u["\\s"]=1:i["\\"+e.part]=1;return{peek:i,negativepeek:u}},J=function(e){var t=!1;return e.length>2&&"x"===e[n](0)&&z(W,e,1,2,2)?[t=e.slice(0,3),t.slice(1)]:!1},K=function(e){var t=!1;return e.length>4&&"u"===e[n](0)&&z(W,e,1,4,4)?[t=e.slice(0,5),t.slice(1)]:!1},X=function(e){var t,r=e.length,a=0,p=!1;return r>2&&"{"===e[n](a)?(p=["","",null],a++,(t=q(R,e,a))&&(a+=t),(t=D(E,e,a))?(p[1]=e.slice(a,a+t),a+=t,(t=q(R,e,a))&&(a+=t),r>a&&","===e[n](a)&&(a+=1),(t=q(R,e,a))&&(a+=t),(t=D(E,e,a))&&(p[2]=e.slice(a,a+t),a+=t),(t=q(R,e,a))&&(a+=t),r>a&&"}"===e[n](a)?(a++,p[0]=e.slice(0,a),p):!1):!1):!1},Y=function(e){var t,r,a,s,l,i,h,g=[],c=[],y={},d=!1,m=!1;for("^"==e.re[n](e.pos)&&(y.NotMatch=1,e.pos++),a=e.len;e.pos<a;)if(h=!1,s=r,r=e.re[n](e.pos++),m=f==r?!0:!1,m&&(r=e.re[n](e.pos++)),m&&("u"==r?(i=K(e.re.substr(e.pos-1)),e.pos+=i[0].length-1,r=p(parseInt(i[1],16)),h=!0):"x"==r&&(i=J(e.re.substr(e.pos-1)),e.pos+=i[0].length-1,r=p(parseInt(i[1],16)),h=!0)),d)c.length&&(g.push({part:c,flags:{},typeName:"Chars",type:C}),c=[]),l[1]=r,d=!1,g.push({part:l,flags:{},typeName:"CharRange",type:S});else if(m)!h&&u[o](r)&&"/"!=r?(c.length&&(g.push({part:c,flags:{},typeName:"Chars",type:C}),c=[]),t={},t[u[r]]=1,g.push({part:r,flags:t,typeName:"Special",type:M})):c.push(r);else{if("]"==r)return c.length&&(g.push({part:c,flags:{},typeName:"Chars",type:C}),c=[]),{part:g,flags:y,typeName:"CharGroup",type:N};"-"==r?(l=[s,""],c.pop(),d=!0):c.push(r)}return c.length&&(g.push({part:c,flags:{},typeName:"Chars",type:C}),c=[]),{part:g,flags:y,typeName:"CharGroup",type:N}},et=function pt(e){var t,r,a,s,l,N="",C=0,S=[],_=[],x={},O=!1;for(e.inGroup>0&&(l=e.re.substr(e.pos,2),"?:"==l?(x.NotCaptured=1,e.pos+=2):"?="==l?(x.LookAhead=1,e.pos+=2):"?!"==l&&(x.NegativeLookAhead=1,e.pos+=2),x.GroupIndex=++e.groupIndex),t=e.len;e.pos<t;)if(r=e.re[n](e.pos++),O=f==r?!0:!1,O&&(r=e.re[n](e.pos++)),O)"u"==r?(C&&(_.push({part:N,flags:{},typeName:"String",type:v}),N="",C=0),a=K(e.re.substr(e.pos-1)),e.pos+=a[0].length-1,_.push({part:a[0],flags:{Char:p(parseInt(a[1],16)),Code:a[1]},typeName:"UnicodeChar",type:d})):"x"==r?(C&&(_.push({part:N,flags:{},typeName:"String",type:v}),N="",C=0),a=J(e.re.substr(e.pos-1)),e.pos+=a[0].length-1,_.push({part:a[0],flags:{Char:p(parseInt(a[1],16)),Code:a[1]},typeName:"HexChar",type:m})):u[o](r)&&"/"!=r?(C&&(_.push({part:N,flags:{},typeName:"String",type:v}),N="",C=0),s={},s[u[r]]=1,_.push({part:r,flags:s,typeName:"Special",type:M})):(N+=r,C+=1);else{if(e.inGroup>0&&")"==r)return C&&(_.push({part:N,flags:{},typeName:"String",type:v}),N="",C=0),S.length?(S.push({part:_,flags:{},typeName:"Sequence",type:h}),_=[],s={},s[i["|"]]=1,{part:{part:S,flags:s,typeName:"Alternation",type:g},flags:x,typeName:"Group",type:c}):{part:{part:_,flags:{},typeName:"Sequence",type:h},flags:x,typeName:"Group",type:c};if("|"==r)C&&(_.push({part:N,flags:{},typeName:"String",type:v}),N="",C=0),S.push({part:_,flags:{},typeName:"Sequence",type:h}),_=[];else if("["==r)C&&(_.push({part:N,flags:{},typeName:"String",type:v}),N="",C=0),_.push(Y(e));else if("("==r)C&&(_.push({part:N,flags:{},typeName:"String",type:v}),N="",C=0),e.inGroup+=1,_.push(pt(e)),e.inGroup-=1;else if("{"==r){C&&(_.push({part:N,flags:{},typeName:"String",type:v}),N="",C=0),a=X(e.re.substr(e.pos-1)),e.pos+=a[0].length-1,s={part:a[0],MatchMinimum:a[1],MatchMaximum:a[2]||"unlimited"},s[i[r]]=1,e.pos<t&&"?"==e.re[n](e.pos)?(s.isGreedy=0,e.pos++):s.isGreedy=1;var G=_.pop();v===G.type&&G.part.length>1&&(_.push({part:G.part.slice(0,-1),flags:{},typeName:"String",type:v}),G.part=G.part.slice(-1)),_.push({part:G,flags:s,typeName:"Quantifier",type:y})}else if("*"==r||"+"==r||"?"==r){C&&(_.push({part:N,flags:{},typeName:"String",type:v}),N="",C=0),s={},s[i[r]]=1,e.pos<t&&"?"==e.re[n](e.pos)?(s.isGreedy=0,e.pos++):s.isGreedy=1;var G=_.pop();v===G.type&&G.part.length>1&&(_.push({part:G.part.slice(0,-1),flags:{},typeName:"String",type:v}),G.part=G.part.slice(-1)),_.push({part:G,flags:s,typeName:"Quantifier",type:y})}else i[o](r)?(C&&(_.push({part:N,flags:{},typeName:"String",type:v}),N="",C=0),s={},s[i[r]]=1,_.push({part:r,flags:s,typeName:"Special",type:M})):(N+=r,C+=1)}return C&&(_.push({part:N,flags:{},typeName:"String",type:v}),N="",C=0),S.length?(S.push({part:_,flags:{},typeName:"Sequence",type:h}),_=[],s={},x[i["|"]]=1,{part:S,flags:s,typeName:"Alternation",type:g}):{part:_,flags:{},typeName:"Sequence",type:h}},tt=function nt(e,t){return this instanceof nt?void(e&&this.regex(e,t)):new nt(e,t)};return tt.VERSION=e,tt.getCharRange=G,tt[t]={constructor:tt,_regex:null,_flags:null,_parts:null,_needsRefresh:!1,dispose:function(){var e=this;return e._regex=null,e._flags=null,e._parts=null,e},regex:function(e,t){var r=this;if(e){t=t||"/";for(var a={},p=e.toString(),s=p.length,l=p[n](s-1);t!==l;)a[l]=1,p=p.slice(0,-1),s=p.length,l=p[n](s-1);t==p[n](0)&&t==p[n](s-1)&&(p=p.slice(1,-1)),r._regex!==p&&(r._needsRefresh=!0),r._regex=p,r._flags=a}return r},getRegex:function(){return new RegExp(this._regex,a(this._flags).join(""))},getParts:function(){var e=this;return e._needsRefresh&&e.analyze(),e._parts},analyze:function(){var e=this;return e._needsRefresh&&(e._parts=et({re:e._regex,len:e._regex.length,pos:0,groupIndex:0,inGroup:0}),e._needsRefresh=!1),e},sample:function(){var e=this;return e._needsRefresh&&e.analyze(),T(e._parts,e._flags&&e._flags.i)},match:function(){return!1},peek:function(){var e,t,r,a,p,s,l=this;l._needsRefresh&&l.analyze(),t=V(l._parts),e=l._flags&&l._flags.i;for(r in t){s={},p=t[r];for(a in p)"\\d"==a?(delete p[a],s=k(s,G("0","9"))):"\\s"==a?(delete p[a],s=k(s,["\f","\n","\r","	",""," ","\u2028","\u2029"])):"\\w"==a?(delete p[a],s=k(s,["_"].concat(G("0","9")).concat(G("a","z")).concat(G("A","Z")))):"\\."==a?(delete p[a],s[i["."]]=1):"\\"!=a[n](0)&&e?(s[a.toLowerCase()]=1,s[a.toUpperCase()]=1):"\\"==a[n](0)&&delete p[a];t[r]=k(p,s)}return t}},tt[t].getPeekChars=tt[t].peek,tt[t].generateSample=tt[t].sample,tt});