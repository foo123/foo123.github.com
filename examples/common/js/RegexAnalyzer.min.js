/**
*
*   RegexAnalyzer
*   @version: 0.5.0
*
*   A simple Regular Expression Analyzer for PHP, Python, Node/XPCOM/JS, ActionScript
*   https://github.com/foo123/RegexAnalyzer
*
**/
!function(e,t,n){"use strict";"undefined"!=typeof Components&&"object"==typeof Components.classes&&"object"==typeof Components.classesByID&&Components.utils&&"function"==typeof Components.utils["import"]?(e.$deps=e.$deps||{})&&(e.EXPORTED_SYMBOLS=[t])&&(e[t]=e.$deps[t]=n.call(e)):"object"==typeof module&&module.exports?(module.$deps=module.$deps||{})&&(module.exports=module.$deps[t]=n.call(e)):"undefined"!=typeof System&&"function"==typeof System.register&&"function"==typeof System["import"]?System.register(t,[],function(r){r(t,n.call(e))}):"function"==typeof define&&define.amd&&"function"==typeof require&&"function"==typeof require.specified&&require.specified(t)?define(t,["module"],function(t){return n.moduleUri=t.uri,n.call(e)}):t in e||(e[t]=n.call(e)||1)&&"function"==typeof define&&define.amd&&define(function(){return e[t]})}(this,"RegexAnalyzer",function(e){"use strict";var t="0.5.0",n="prototype",r=Object,a=(Array,r.keys,r[n].toString,String.fromCharCode),s="charAt",i="charCodeAt",l=(JSON.stringify,1/0),u="hasOwnProperty",o="\\",f={".":"MatchAnyChar","|":"MatchEither","?":"MatchZeroOrOne","*":"MatchZeroOrMore","+":"MatchOneOrMore","^":"MatchStart",$:"MatchEnd","{":"StartRepeats","}":"EndRepeats","(":"StartGroup",")":"EndGroup","[":"StartCharGroup","]":"EndCharGroup"},p={"\\":"EscapeChar","/":"/",0:"NULChar",f:"FormFeed",n:"LineFeed",r:"CarriageReturn",t:"HorizontalTab",v:"VerticalTab",b:"MatchWordBoundary",B:"MatchNonWordBoundary",s:"MatchSpaceChar",S:"MatchNonSpaceChar",w:"MatchWordChar",W:"MatchNonWordChar",d:"MatchDigitChar",D:"MatchNonDigitChar"},h=1,c=2,g=3,v=4,d=5,m=6,y=7,M=8,C=9,_=10,x=11,O=function(e){var t=this;t.re=e,t.len=e.length,t.pos=0,t.groupIndex=0,t.inGroup=0},N=function oe(e,t,n){var r=this;if(!(r instanceof oe))return new oe(e,t,n);switch(r.type=e,r.val=t,r.flags=n||{},e){case h:r.typeName="Sequence";break;case c:r.typeName="Alternation";break;case g:r.typeName="Group";break;case M:r.typeName="CharacterGroup";break;case C:r.typeName="Characters";break;case _:r.typeName="CharacterRange";break;case x:r.typeName="String";break;case v:r.typeName="Quantifier";break;case d:r.typeName="UnicodeChar";break;case m:r.typeName="HexChar";break;case y:r.typeName="Special"}};N.toObjectStatic=function fe(e){return e instanceof N?{type:e.typeName,value:fe(e.val),flags:e.flags}:e instanceof Array?e.map(fe):e},N[n]={constructor:N,type:null,typeName:null,val:null,flags:null,dispose:function(){var e=this;return e.val=null,e.flags=null,e.type=null,e.typeName=null,e},toObject:function(){return N.toObjectStatic(this)}};var S=function(e,t){return Math.round((t-e)*Math.random()+e)},b=function(e){return e[i](0)},R=function(e){return[e[i](0),e[i](e.length-1)]},k=function(e,t){e&&"function"==typeof e.push&&(t=e[1],e=e[0]);var n,r,s=e[i](0),l=t[i](0);if(l==s)return[a(s)];for(r=[],n=s;l>=n;++n)r.push(a(n));return r},G=function(e,t){if(t){var n,r;if("function"==typeof t.push)for(n=0,r=t.length;r>n;n++)e[t[n]]=1;else for(n in t)t[u](n)&&(e[n]=1)}return e},I=" 	\x0B",A="~!@#$%^&*()-+=[]{}\\|;:,./<>?",w="0123456789",E=R(w),L=[E,[b("a"),b("f")],[b("A"),b("F")]],j="_"+k("a","z").join("")+k("A","Z").join(""),z=I+A+w+j,Z=z.split(""),$=function(e,t,n,r,a){n=n||0,r=r||1,a=a||l;for(var i,u=n,o=0,f=t.length;f>u&&a>=o&&-1<e.indexOf(i=t[s](u));)u++,o++;return o>=r?o:!1},B=function(e,t,n,r,a){n=n||0,r=r||1,a=a||l;for(var s,u=n,o=0,f=t.length;f>u&&a>=o&&(s=t[i](u))>=e[0]&&s<=e[1];)u++,o++;return o>=r?o:!1},D=function(e,t,n,r,a){n=n||0,r=r||1,a=a||l;for(var s,u,o,f=n,p=0,h=t.length,c=e.length,g=!0;h>f&&a>=p&&g;)for(s=t[i](f),g=!1,u=0;c>u;u++)if(o=e[u],s>=o[0]&&s<=o[1]){f++,p++,g=!0;break}return p>=r?p:!1},W=function(){return A[s](S(0,A.length-1))},U=function(e){return!1!==e?I[s](S(0,I.length-1)):(W()+q()+F())[s](S(0,2))},q=function(e){return!1!==e?w[s](S(0,w.length-1)):(W()+U()+F())[s](S(0,2))},F=function(e){return!1!==e?j[s](S(0,j.length-1)):(W()+U()+q())[s](S(0,2))},P=function(e){return!1!==e?(j+w)[s](S(0,j.length+w.length-1)):(W()+U())[s](S(0,1))},T=function(){return z[s](S(0,z.length-1))},H=function(e,t){if(!1!==t)return e.length?e[S(0,e.length-1)]:"";var n=Z.filter(function(t){return 0>e.indexOf(t)});return n.length?n[S(0,n.length-1)]:""},V=function(e){return S(0,1)?e.toLowerCase():e.toUpperCase()},J=function(e,t){return t?(e[s]&&(e=e.split("")),e=e.map(V)):V(e)},Q=function pe(e,t,n){if(!t||!n)return e;var r,a,s,i=t.type;if(c===i||h===i||M===i||g===i||v===i){if(s=n.map(e,t,n),null!=n.ret)e=n.reduce(e,t,n),n.ret=null;else if(null!=s)for(s instanceof Array||(s=[s]),r=0,a=s?s.length:0;a>r;r++)n.node=t,e=pe(e,s[r],n)}else C!==i&&_!==i&&d!==i&&m!==i&&y!==i&&x!==i||(e=n.reduce(e,t,n));return n.node=null,e},X=function(e,t,n){var r=t.type;if(c===r||M===r)return t.val.length?t.val[S(0,t.val.length-1)]:null;if(v===r){var a,s,i,l;if(e.length>=n.maxLength?a=t.flags.MatchZeroOrMore||t.flags.MatchZeroOrOne?0:t.flags.MatchOneOrMore?1:parseInt(t.flags.MatchMinimum,10):t.flags.MatchZeroOrMore?a=S(0,2*n.maxLength):t.flags.MatchZeroOrOne?a=S(0,1):t.flags.MatchOneOrMore?a=S(1,2*n.maxLength+1):(s=parseInt(t.flags.MatchMinimum,10),i=parseInt(t.flags.MatchMaximum,10),a=S(s,isNaN(i)?s+2*n.maxLength:i)),a){l=new Array(a);for(var u=0;a>u;u++)l[u]=t.val;return l}return null}return t.val},Y=function(e,t,n){var r=t.type;if(c===r){var a,s,i=t.val.length,l=i?0:-1,u=i?Q(0,t.val[0],n):0;for(a=1;i>a;a++)s=Q(0,t.val[a],n),u>s&&(u=s,l=a);return i&&(n.ret=u),null}if(M===r)return t.val.length?t.val[0]:null;if(v===r){if(t.flags.MatchMinimum&&"0"!==t.flags.MatchMinimum){var a,o=parseInt(t.flags.MatchMinimum,10),f=new Array(o);for(a=0;o>a;a++)f[a]=t.val;return f}return t.flags.MatchOneOrMore?t.val:null}return t.val},K=function(e,t,n){var r=t.type;if(h===r){var a,s=[],i=0,l=t.val.length;for(i=0;l>i&&(a=t.val[i],s.push(a),!(v!==a.type||a.flags.MatchOneOrMore||null!=a.flags.MatchMinimum&&"0"!==a.flags.MatchMinimum));i++);return s.length?s:null}return t.val},ee=function(e,t,n){if(null!=n.ret)return e+=n.ret;var r=t.type;return C===r||_===r||d===r||m===r||y===r&&!t.flags.MatchStart&&!t.flags.MatchEnd?e+=1:x===r&&(e+=t.val.length),e},te=function(e,t,n){if(null!=n.ret)return e+=n.ret;var r=t.type,a=null;if(C===r)a=t.val;else if(_===r)a=k(t.val);else if(d===r||m===r)a=[t.flags.Char];else if(y!==r||t.flags.MatchStart||t.flags.MatchEnd)x===r&&(a=t.val);else{var s=t.val;a="D"===s?[q(!1)]:"W"===s?[P(!1)]:"S"===s?[U(!1)]:"d"===s?[q()]:"w"===s?[P()]:"s"===s?[U()]:"."===s&&t.flags.MatchAnyChar?[T()]:["\\"+s]}return a&&(e+=x===r?n.isCaseInsensitive?J(a):a:H(n.isCaseInsensitive?J(a,!0):a,!n.node||!n.node.flags.NotMatch)),e},ne=function(e,t,n){if(null!=n.ret)return e.positive=G(e.positive,n.ret.positive),e.negative=G(e.negative,n.ret.negative),e;var r=t.type,a=n.node&&M===n.node.type,i=a&&n.node.flags.NotMatch,l=i?"negative":"positive";if(C===r)e[l]=G(e[l],t.val);else if(_===r)e[l]=G(e[l],k(t.val));else if(d===r||m===r)e[l][t.flags.Char]=1;else if(y!==r||t.flags.MatchStart||t.flags.MatchEnd)x===r&&(e.positive[t.val[s](0)]=1);else{var u=t.val;"D"===u?e[i?"positive":"negative"]["\\d"]=1:"W"===u?e[i?"positive":"negative"]["\\w"]=1:"S"===u?e[i?"positive":"negative"]["\\s"]=1:e[l]["\\"+u]=1}return e},re=function(e){var t=!1;return e.length>2&&"x"===e[s](0)&&D(L,e,1,2,2)?[t=e.slice(0,3),t.slice(1)]:!1},ae=function(e){var t=!1;return e.length>4&&"u"===e[s](0)&&D(L,e,1,4,4)?[t=e.slice(0,5),t.slice(1)]:!1},se=function(e){var t,n=e.length,r=0,a=!1,i=!1;return n>2&&"{"===e[s](r)?(a=["","",null],r++,(t=$(I,e,r))&&(r+=t),(t=B(E,e,r))?(a[1]=e.slice(r,r+t),r+=t,(t=$(I,e,r))&&(r+=t),n>r&&","===e[s](r)&&(r+=1,i=!0),(t=$(I,e,r))&&(r+=t),(t=B(E,e,r))&&(a[2]=e.slice(r,r+t),r+=t),(t=$(I,e,r))&&(r+=t),n>r&&"}"===e[s](r)?(r++,a[0]=e.slice(0,r),i||(a[2]=a[1]),a):!1):!1):!1},ie=function(e){var t,n,r,i,l,f,h,c=[],g=[],v={},d=!1,m=!1;for("^"===e.re[s](e.pos)&&(v.NotMatch=1,e.pos++),r=e.len;e.pos<r;)if(h=!1,i=n,n=e.re[s](e.pos++),m=o==n,m&&(n=e.re[s](e.pos++)),m&&("u"===n?(f=ae(e.re.substr(e.pos-1)),e.pos+=f[0].length-1,n=a(parseInt(f[1],16)),h=!0):"x"===n&&(f=re(e.re.substr(e.pos-1)),e.pos+=f[0].length-1,n=a(parseInt(f[1],16)),h=!0)),d)g.length&&(c.push(N(C,g)),g=[]),l[1]=n,d=!1,c.push(N(_,l));else if(m)!h&&p[u](n)&&"/"!=n?(g.length&&(c.push(N(C,g)),g=[]),t={},t[p[n]]=1,c.push(N(y,n,t))):g.push(n);else{if("]"===n)return g.length&&(c.push(N(C,g)),g=[]),N(M,c,v);"-"===n?(l=[i,""],g.pop(),d=!0):g.push(n)}return g.length&&(c.push(N(C,g)),g=[]),N(M,c,v)},le=function he(e){var t,n,r,i,l,M="",C=0,_=[],O=[],S={},b=!1;for(e.inGroup>0&&(l=e.re.substr(e.pos,2),"?:"===l?(S.NotCaptured=1,e.pos+=2):"?="===l?(S.LookAhead=1,e.pos+=2):"?!"===l&&(S.NegativeLookAhead=1,e.pos+=2),S.GroupIndex=++e.groupIndex),t=e.len;e.pos<t;)if(n=e.re[s](e.pos++),b=o==n,b&&(n=e.re[s](e.pos++)),b)"u"===n?(C&&(O.push(N(x,M)),M="",C=0),r=ae(e.re.substr(e.pos-1)),e.pos+=r[0].length-1,O.push(N(d,r[0],{Char:a(parseInt(r[1],16)),Code:r[1]}))):"x"===n?(C&&(O.push(N(x,M)),M="",C=0),r=re(e.re.substr(e.pos-1)),e.pos+=r[0].length-1,O.push(N(m,r[0],{Char:a(parseInt(r[1],16)),Code:r[1]}))):p[u](n)&&"/"!=n?(C&&(O.push(N(x,M)),M="",C=0),i={},i[p[n]]=1,O.push(N(y,n,i))):(M+=n,C+=1);else{if(e.inGroup>0&&")"===n)return C&&(O.push(N(x,M)),M="",C=0),_.length?(_.push(N(h,O)),O=[],i={},i[f["|"]]=1,N(g,N(c,_,i),S)):N(g,N(h,O),S);if("|"===n)C&&(O.push(N(x,M)),M="",C=0),_.push(N(h,O)),O=[];else if("["===n)C&&(O.push(N(x,M)),M="",C=0),O.push(ie(e));else if("("===n)C&&(O.push(N(x,M)),M="",C=0),e.inGroup+=1,O.push(he(e)),e.inGroup-=1;else if("{"===n){C&&(O.push(N(x,M)),M="",C=0),r=se(e.re.substr(e.pos-1)),e.pos+=r[0].length-1,i={val:r[0],MatchMinimum:r[1],MatchMaximum:r[2]||"unlimited"},i[f[n]]=1,e.pos<t&&"?"==e.re[s](e.pos)?(i.isGreedy=0,e.pos++):i.isGreedy=1;var R=O.pop();x===R.type&&R.val.length>1&&(O.push(N(x,R.val.slice(0,-1))),R.val=R.val.slice(-1)),O.push(N(v,R,i))}else if("*"===n||"+"===n||"?"===n){C&&(O.push(N(x,M)),M="",C=0),i={},i[f[n]]=1,e.pos<t&&"?"==e.re[s](e.pos)?(i.isGreedy=0,e.pos++):i.isGreedy=1;var R=O.pop();x===R.type&&R.val.length>1&&(O.push(N(x,R.val.slice(0,-1))),R.val=R.val.slice(-1)),O.push(N(v,R,i))}else f[u](n)?(C&&(O.push(N(x,M)),M="",C=0),i={},i[f[n]]=1,O.push(N(y,n,i))):(M+=n,C+=1)}return C&&(O.push(N(x,M)),M="",C=0),_.length?(_.push(N(h,O)),O=[],i={},S[f["|"]]=1,N(c,_,i)):N(h,O)},ue=function ce(e,t){return this instanceof ce?void(e&&this.regex(e,t)):new ce(e,t)};return ue.VERSION=t,ue.Node=N,ue.getCharRange=k,ue[n]={constructor:ue,_regex:null,_flags:null,_parts:null,_needsRefresh:!1,dispose:function(){var e=this;return e._regex=null,e._flags=null,e._parts=null,e},regex:function(e,t){var n=this;if(e){t=t||"/";for(var r={},a=e.toString(),i=a.length,l=a[s](i-1);t!==l;)r[l]=1,a=a.slice(0,-1),i=a.length,l=a[s](i-1);t===a[s](0)&&t===a[s](i-1)&&(a=a.slice(1,-1)),n._regex!==a&&(n._needsRefresh=!0),n._regex=a,n._flags=r}return n},getRegex:function(e){return e=e||this._flags||{},new RegExp(this._regex,(e.g||e.G?"g":"")+(e.i||e.I?"i":"")+(e.m||e.M?"m":""))},getParts:function(){var e=this;return e._needsRefresh&&e.analyze(),e._parts},analyze:function(){var e=this;return e._needsRefresh&&(e._parts=le(new O(e._regex)),e._needsRefresh=!1),e},match:function(e){return!1},sample:function(e){var t=this;return t._needsRefresh&&t.analyze(),Q("",t._parts,{map:X,reduce:te,isCaseInsensitive:t._flags&&t._flags.i,maxLength:e||10})},minimum:function(){var e=this;return e._needsRefresh&&e.analyze(),0|Q(0,e._parts,{map:Y,reduce:ee})},peek:function(){var e,t,n,r,a,i,l=this;l._needsRefresh&&l.analyze(),e=l._flags&&l._flags.i,t=Q({positive:{},negative:{}},l._parts,{map:K,reduce:ne});for(n in t){i={},a=t[n];for(r in a)"\\d"===r?(delete a[r],i=G(i,k("0","9"))):"\\s"===r?(delete a[r],i=G(i,["\f","\n","\r","	","\x0B"," ","\u2028","\u2029"])):"\\w"===r?(delete a[r],i=G(i,["_"].concat(k("0","9")).concat(k("a","z")).concat(k("A","Z")))):"\\."===r?(delete a[r],i[f["."]]=1):"\\"!==r[s](0)&&e?(i[r.toLowerCase()]=1,i[r.toUpperCase()]=1):"\\"===r[s](0)&&delete a[r];t[n]=G(a,i)}return t}},ue[n].getPeekChars=ue[n].peek,ue[n].generateSample=ue[n].sample,ue[n].minimumLength=ue[n].minimum,ue});