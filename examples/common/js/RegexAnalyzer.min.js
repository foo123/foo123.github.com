/**
*
*   RegexAnalyzer
*   @version: 0.6.0
*
*   A simple Regular Expression Analyzer for PHP, Python, Node/XPCOM/JS, ActionScript
*   https://github.com/foo123/RegexAnalyzer
*
**/
!function(e,t,n){"use strict";"undefined"!=typeof Components&&"object"==typeof Components.classes&&"object"==typeof Components.classesByID&&Components.utils&&"function"==typeof Components.utils["import"]?(e.$deps=e.$deps||{})&&(e.EXPORTED_SYMBOLS=[t])&&(e[t]=e.$deps[t]=n.call(e)):"object"==typeof module&&module.exports?(module.$deps=module.$deps||{})&&(module.exports=module.$deps[t]=n.call(e)):"undefined"!=typeof System&&"function"==typeof System.register&&"function"==typeof System["import"]?System.register(t,[],function(r){r(t,n.call(e))}):"function"==typeof define&&define.amd&&"function"==typeof require&&"function"==typeof require.specified&&require.specified(t)?define(t,["module"],function(t){return n.moduleUri=t.uri,n.call(e)}):t in e||(e[t]=n.call(e)||1)&&"function"==typeof define&&define.amd&&define(function(){return e[t]})}(this,"RegexAnalyzer",function(e){"use strict";function t(e,t){t=t||{};for(var n in e)e[i](n)&&(t[n]=e[n]);return t}var n="0.6.0",r="prototype",a=Object,l=(Array,a.keys,a[r].toString,String.fromCharCode),s="charAt",u="charCodeAt",o=(JSON.stringify,1/0),i="hasOwnProperty",p="\\",f={".":"MatchAnyChar","|":"MatchEither","?":"MatchZeroOrOne","*":"MatchZeroOrMore","+":"MatchOneOrMore","^":"MatchStart",$:"MatchEnd","{":"StartRepeats","}":"EndRepeats","(":"StartGroup",")":"EndGroup","[":"StartCharGroup","]":"EndCharGroup"},c={"\\":"EscapeChar","/":"/",0:"NULChar",f:"FormFeed",n:"LineFeed",r:"CarriageReturn",t:"HorizontalTab",v:"VerticalTab",b:"MatchWordBoundary",B:"MatchNonWordBoundary",s:"MatchSpaceChar",S:"MatchNonSpaceChar",w:"MatchWordChar",W:"MatchNonWordChar",d:"MatchDigitChar",D:"MatchNonDigitChar"},h=1,g=2,v=3,d=4,y=5,m=6,C=7,M=8,x=9,N=10,b=11,S=/([.*+?^${}()|[\]\/\\\-])/g,G=function(e){var t=this;t.re=e,t.len=e.length,t.pos=0,t._groupIndex=0,t.groupIndex=0,t.inGroup=0},O=function de(e,t,n){var r=this;if(!(r instanceof de))return new de(e,t,n);switch(r.type=e,r.val=t,r.flags=n||{},e){case h:r.typeName="Sequence";break;case g:r.typeName="Alternation";break;case v:r.typeName="Group";break;case M:r.typeName="CharacterGroup";break;case x:r.typeName="Characters";break;case N:r.typeName="CharacterRange";break;case b:r.typeName="String";break;case d:r.typeName="Quantifier";break;case y:r.typeName="UnicodeChar";break;case m:r.typeName="HexChar";break;case C:r.typeName="Special";break;default:r.typeName="unspecified"}};O.toObjectStatic=function ye(e){return e instanceof O?{type:e.typeName,value:ye(e.val),flags:e.flags}:e instanceof Array?e.map(ye):e},O[r]={constructor:O,type:null,typeName:null,val:null,flags:null,dispose:function(){var e=this;return e.val=null,e.flags=null,e.type=null,e.typeName=null,e},toObject:function(){return O.toObjectStatic(this)}};var k=function(e,t){return Math.round((t-e)*Math.random()+e)},I=function(e){return e.replace(S,"\\$1")},E=function(e,t,n){var r=String(e);for(n=n||"0";r.length<t;)r+=n+r;return r},A=function(e){return e[u](0)},w=function(e){return[e[u](0),e[u](e.length-1)]},$=function(e,t){e&&"function"==typeof e.push&&(t=e[1],e=e[0]);var n,r,a=e[u](0),s=t[u](0);if(s===a)return[l(a)];for(r=[],n=a;s>=n;++n)r.push(l(n));return r},L=function(e,t){if(t){var n,r;if("function"==typeof t.push)for(n=0,r=t.length;r>n;n++)e[t[n]]=1;else for(n in t)t[i](n)&&(e[n]=1)}return e},j=" 	\x0B",z="~!@#$%^&*()-+=[]{}\\|;:,./<>?",R="0123456789",B=w(R),D=[B,[A("a"),A("f")],[A("A"),A("F")]],W="_"+$("a","z").join("")+$("A","Z").join(""),Z=j+z+R+W,U=Z.split(""),_=function(e,t,n,r,a){n=n||0,r=r||1,a=a||o;for(var l,u=n,i=0,p=t.length;p>u&&a>=i&&-1<e.indexOf(l=t[s](u));)u++,i++;return i>=r?i:!1},q=function(e,t,n,r,a){n=n||0,r=r||1,a=a||o;for(var l,s=n,i=0,p=t.length;p>s&&a>=i&&(l=t[u](s))>=e[0]&&l<=e[1];)s++,i++;return i>=r?i:!1},F=function(e,t,n,r,a){n=n||0,r=r||1,a=a||o;for(var l,s,i,p=n,f=0,c=t.length,h=e.length,g=!0;c>p&&a>=f&&g;)for(l=t[u](p),g=!1,s=0;h>s;s++)if(i=e[s],l>=i[0]&&l<=i[1]){p++,f++,g=!0;break}return f>=r?f:!1},P=function(){return z[s](k(0,z.length-1))},T=function(e){return!1!==e?j[s](k(0,j.length-1)):(P()+H()+V())[s](k(0,2))},H=function(e){return!1!==e?R[s](k(0,R.length-1)):(P()+T()+V())[s](k(0,2))},V=function(e){return!1!==e?W[s](k(0,W.length-1)):(P()+T()+H())[s](k(0,2))},J=function(e){return!1!==e?(W+R)[s](k(0,W.length+R.length-1)):(P()+T())[s](k(0,1))},Q=function(){return Z[s](k(0,Z.length-1))},X=function(e,t){if(!1!==t)return e.length?e[k(0,e.length-1)]:"";var n=U.filter(function(t){return 0>e.indexOf(t)});return n.length?n[k(0,n.length-1)]:""},Y=function(e){return.5<Math.random()?e.toLowerCase():e.toUpperCase()},K=function(e,t){return t?(e[s]&&(e=e.split("")),e=e.map(Y)):Y(e)},ee=function me(e,t,n){if(!t||!n)return e;var r,a,l,s=t.type||null;if(g===s||h===s||M===s||v===s||d===s){if(l=n.map(e,t,n),null!=n.ret)e=n.reduce(e,t,n),n.ret=null;else if(null!=l)for(l instanceof Array||(l=[l]),r=0,a=l?l.length:0;a>r;r++)if(n.node=t,e=me(e,l[r],n),n.stop)return n.stop=null,e}else x===s||N===s||y===s||m===s||C===s||b===s?e=n.reduce(e,t,n):null!=t&&(e=n.reduce(e,t,n));return n.node=null,e},te=function(e,t,n){var r,a=t.type;if(g===a){r=[];for(var l=0,s=t.val.length-1;s>l;l++)r.push(t.val[l],"|");return r.push(t.val[t.val.length-1]),r}if(M===a)return[].concat("["+(t.flags.NegativeMatch?"^":"")).concat(t.val).concat("]");if(d===a){var u="";return u=t.flags.MatchZeroOrOne?"?"+(t.flags.isGreedy?"":"?"):t.flags.MatchZeroOrMore?"*"+(t.flags.isGreedy?"":"?"):t.flags.MatchOneOrMore?"+"+(t.flags.isGreedy?"":"?"):"{"+t.flags.min+","+(-1===t.flags.max?"":t.flags.max)+"}",[].concat(t.val).concat(u)}return v===a?t.flags.LookBehind?null:(null!=t.flags.GroupIndex&&(e.group[t.flags.GroupIndex]=t.flags.GroupIndex,t.flags.GroupName&&(e.group[t.flags.GroupName]=t.flags.GroupIndex)),t.flags.NotCaptured?[].concat("(?:").concat(t.val).concat(")"):t.flags.LookAhead?[].concat("(?=").concat(t.val).concat(")"):t.flags.NegativeLookAhead?[].concat("(?!").concat(t.val).concat(")"):t.flags.NegativeMatch?[].concat("((?:").concat(t.val).concat(")|[\\s\\S]+)"):[].concat("(").concat(t.val).concat(")")):t.val},ne=function(e,t,n){var r=t.type;if(g===r||M===r)return t.val.length?t.val[k(0,t.val.length-1)]:null;if(d===r){var a,l,s,u;if(e.length>=n.maxLength?a=t.flags.min:(l=t.flags.min,s=-1===t.flags.max?l+1+2*n.maxLength:t.flags.max,a=k(l,s)),a){u=new Array(a);for(var o=0;a>o;o++)u[o]=t.val;return u}return null}return t.val},re=function(e,t,n){var r=t.type;if(g===r){var a,l,s=t.val.length,u=s?ee(0,t.val[0],n):0;for(a=1;s>a;a++)l=ee(0,t.val[a],n),u>l&&(u=l);return s&&(n.ret=u),null}if(M===r)return t.val.length?t.val[0]:null;if(d===r){if(0===t.flags.min)return null;var a,o=t.flags.min,i=new Array(o);for(a=0;o>a;a++)i[a]=t.val;return i}return t.val},ae=function(e,t,n){var r=t.type;if(g===r){var a,l,s=t.val.length,u=s?ee(0,t.val[0],n):0;if(-1!==u)for(a=1;s>a;a++){if(l=ee(0,t.val[a],n),-1===l){u=-1;break}l>u&&(u=l)}return s&&(n.ret=u),null}return M===r?t.val.length?t.val[0]:null:d===r?(u=ee(0,t.val,n),-1===u?n.ret=-1:u>0&&(-1===t.flags.max?n.ret=-1:0<t.flags.max?n.ret=t.flags.max*u:n.ret=u),null):t.val},le=function(e,t,n){var r=t.type;if(h===r){var a,l=[],s=0,u=t.val.length;for(s=0;u>s&&(a=t.val[s],l.push(a),d===a.type&&0===a.flags.min||C===a.type&&(a.flags.MatchStart||a.flags.MatchEnd));s++);return l.length?l:null}return t.val},se=function(e,t,n){if(null!=n.ret)return-1===n.ret?e=-1:e+=n.ret,e;if(-1===e)return e;if(C===t.type&&t.flags.MatchEnd)return n.stop=1,e;var r=t.type;return x===r||N===r||y===r||m===r||C===r&&!t.flags.MatchStart&&!t.flags.MatchEnd?e+=1:b===r&&(e+=t.val.length),e},ue=function(e,t,n){if(null!=n.ret)return e+=n.ret;if(C===t.type&&t.flags.MatchEnd)return n.stop=1,e;var r=t.type,a=null;if(x===r)a=t.val;else if(N===r){var l=[t.val[0],t.val[1]];y!==l[0].type&&m!==l[0].type||(l[0]=l[0].flags.Char),y!==l[1].type&&m!==l[1].type||(l[1]=l[1].flags.Char),a=$(l)}else if(y===r||m===r)a=[t.flags.Char];else if(C!==r||t.flags.MatchStart||t.flags.MatchEnd)b===r&&(a=t.val);else{var s=t.val;a="D"===s?[H(!1)]:"W"===s?[J(!1)]:"S"===s?[T(!1)]:"d"===s?[H()]:"w"===s?[J()]:"s"===s?[T()]:"."===s&&t.flags.MatchAnyChar?[Q()]:["\\"+s]}return a&&(e+=b===r?n.isCaseInsensitive?K(a):a:X(n.isCaseInsensitive?K(a,!0):a,!n.node||!n.node.flags.NegativeMatch)),e},oe=function(e,n,r){if(null!=r.ret)return r.ret.src&&(e.src+=r.ret.src),r.ret.group&&(e.group=t(r.ret.group,e.group)),e;var a=n.type;if(x===a)e.src+=r.escaped?I(n.val.join("")):n.val.join("");else if(N===a){var l=[n.val[0],n.val[1]];r.escaped?(y===l[0].type?l[0]="\\u"+E(l[0].flags.Code,4):m===l[0].type?l[0]="\\x"+E(l[0].flags.Code,2):l[0]=I(l[0]),y===l[1].type?l[1]="\\u"+E(l[1].flags.Code,4):m===l[1].type?l[1]="\\x"+E(l[1].flags.Code,2):l[1]=I(l[1]),e.src+=l[0]+"-"+l[1]):(y!==l[0].type&&m!==l[0].type||(l[0]=l[0].flags.Char),y!==l[1].type&&m!==l[1].type||(l[1]=l[1].flags.Char),e.src+=l[0]+"-"+l[1])}else y===a?e.src+=r.escaped?"\\u"+E(n.flags.Code,4):n.flags.Char:m===a?e.src+=r.escaped?"\\x"+E(n.flags.Code,2):n.flags.Char:C===a?e.src+=n.flags.MatchStart||n.flags.MatchEnd?""+n.val:"\\"+n.val:b===a?e.src+=r.escaped?I(n.val):n.val:("string"==typeof n||n.substr)&&(e.src+=n);return e},ie=function(e,t,n){if(null!=n.ret)return e.positive=L(e.positive,n.ret.positive),e.negative=L(e.negative,n.ret.negative),e;if(C===t.type&&t.flags.MatchEnd)return n.stop=1,e;var r=t.type,a=n.node&&M===n.node.type,l=a&&n.node.flags.NegativeMatch,u=l?"negative":"positive";if(x===r)e[u]=L(e[u],t.val);else if(N===r){var o=[t.val[0],t.val[1]];y!==o[0].type&&m!==o[0].type||(o[0]=o[0].flags.Char),y!==o[1].type&&m!==o[1].type||(o[1]=o[1].flags.Char),e[u]=L(e[u],$(o))}else if(y===r||m===r)e[u][t.flags.Char]=1;else if(C!==r||t.flags.MatchStart||t.flags.MatchEnd)b===r&&(e.positive[t.val[s](0)]=1);else{var i=t.val;"D"===i?e[l?"positive":"negative"]["\\d"]=1:"W"===i?e[l?"positive":"negative"]["\\w"]=1:"S"===i?e[l?"positive":"negative"]["\\s"]=1:e[u]["\\"+i]=1}return e},pe=function(e){var t=!1;return e.length>2&&"x"===e[s](0)&&F(D,e,1,2,2)?[t=e.slice(0,3),t.slice(1)]:!1},fe=function(e){var t=!1;return e.length>4&&"u"===e[s](0)&&F(D,e,1,4,4)?[t=e.slice(0,5),t.slice(1)]:!1},ce=function(e){var t,n=e.length,r=0,a=!1,l=!1;return n>2&&"{"===e[s](r)?(a=["","",null],r++,(t=_(j,e,r))&&(r+=t),(t=q(B,e,r))?(a[1]=e.slice(r,r+t),r+=t,(t=_(j,e,r))&&(r+=t),n>r&&","===e[s](r)&&(r+=1,l=!0),(t=_(j,e,r))&&(r+=t),(t=q(B,e,r))&&(a[2]=e.slice(r,r+t),r+=t),(t=_(j,e,r))&&(r+=t),n>r&&"}"===e[s](r)?(r++,a[0]=e.slice(0,r),l||(a[2]=a[1]),a):!1):!1):!1},he=function(e){var t,n,r,a,u,o,f,h,g=[],v=[],d={},b=!1,S=!1;for("^"===e.re[s](e.pos)&&(d.NegativeMatch=1,e.pos++),r=e.len;e.pos<r;)if(f=!1,h=!1,o=null,a=n,n=e.re[s](e.pos++),S=p===n,S&&(n=e.re[s](e.pos++)),S&&("u"===n?(o=fe(e.re.substr(e.pos-1)),e.pos+=o[0].length-1,n=O(y,o[0],{Char:l(parseInt(o[1],16)),Code:o[1]}),f=!0,h=!1):"x"===n&&(o=pe(e.re.substr(e.pos-1)),e.pos+=o[0].length-1,n=O(m,o[0],{Char:l(parseInt(o[1],16)),Code:o[1]}),f=!0,h=!0)),b)v.length&&(g.push(O(x,v)),v=[]),u[1]=n,b=!1,g.push(O(N,u));else if(S)f?(v.length&&(g.push(O(x,v)),v=[]),g.push(n)):c[i](n)&&"/"!==n?(v.length&&(g.push(O(x,v)),v=[]),t={},t[c[n]]=1,g.push(O(C,n,t))):v.push(n);else{if("]"===n)return v.length&&(g.push(O(x,v)),v=[]),O(M,g,d);"-"===n?(u=[a,""],a instanceof O?g.pop():v.pop(),b=!0):v.push(n)}return v.length&&(g.push(O(x,v)),v=[]),O(M,g,d)},ge=function Ce(e){var t,n,r,a,u,o="",M=0,x=[],N=[],S={},G=!1;if(e.inGroup>0){if(u=e.re.substr(e.pos,2),"?:"===u)S.NotCaptured=1,e.pos+=2;else if("?="===u)S.LookAhead=1,e.pos+=2;else if("?!"===u)S.NegativeLookAhead=1,e.pos+=2;else if("?^"===u)S.NegativeMatch=1,e.pos+=2;else if("?&"===u)S.LookBehind=1,e.pos+=2;else if("?<"===u)for(S.NamedGroup=1,S.GroupName="",e.pos+=2,t=e.len;e.pos<t&&(n=e.re[s](e.pos++),">"!==n);)S.GroupName+=n;++e._groupIndex,S.NotCaptured||(S.GroupIndex=++e.groupIndex)}for(t=e.len;e.pos<t;)if(n=e.re[s](e.pos++),G=p===n,G&&(n=e.re[s](e.pos++)),G)"u"===n?(M&&(N.push(O(b,o)),o="",M=0),r=fe(e.re.substr(e.pos-1)),e.pos+=r[0].length-1,N.push(O(y,r[0],{Char:l(parseInt(r[1],16)),Code:r[1]}))):"x"===n?(M&&(N.push(O(b,o)),o="",M=0),r=pe(e.re.substr(e.pos-1)),e.pos+=r[0].length-1,N.push(O(m,r[0],{Char:l(parseInt(r[1],16)),Code:r[1]}))):c[i](n)&&"/"!==n?(M&&(N.push(O(b,o)),o="",M=0),a={},a[c[n]]=1,N.push(O(C,n,a))):(o+=n,M+=1);else{if(e.inGroup>0&&")"===n)return M&&(N.push(O(b,o)),o="",M=0),x.length?(x.push(O(h,N)),N=[],a={},a[f["|"]]=1,O(v,O(g,x,a),S)):O(v,O(h,N),S);if("|"===n)M&&(N.push(O(b,o)),o="",M=0),x.push(O(h,N)),N=[];else if("["===n)M&&(N.push(O(b,o)),o="",M=0),N.push(he(e));else if("("===n)M&&(N.push(O(b,o)),o="",M=0),e.inGroup+=1,N.push(Ce(e)),e.inGroup-=1;else if("{"===n){M&&(N.push(O(b,o)),o="",M=0),r=ce(e.re.substr(e.pos-1)),e.pos+=r[0].length-1,a={val:r[0],MatchMinimum:r[1],MatchMaximum:r[2]||"unlimited",min:parseInt(r[1],10),max:r[2]?parseInt(r[2],10):-1},a[f[n]]=1,a.isGreedy=1;var k=N.pop();b===k.type&&k.val.length>1&&(N.push(O(b,k.val.slice(0,-1))),k.val=k.val.slice(-1)),N.push(O(d,k,a))}else if("*"===n||"+"===n||"?"===n){M&&(N.push(O(b,o)),o="",M=0),a={},a[f[n]]=1,a.min="+"===n?1:0,a.max="?"===n?1:-1,e.pos<t&&"?"===e.re[s](e.pos)?(a.isGreedy=0,e.pos++):a.isGreedy=1;var k=N.pop();b===k.type&&k.val.length>1&&(N.push(O(b,k.val.slice(0,-1))),k.val=k.val.slice(-1)),N.push(O(d,k,a))}else f[i](n)?(M&&(N.push(O(b,o)),o="",M=0),a={},a[f[n]]=1,N.push(O(C,n,a))):(o+=n,M+=1)}return M&&(N.push(O(b,o)),o="",M=0),x.length?(x.push(O(h,N)),N=[],a={},S[f["|"]]=1,O(g,x,a)):O(h,N)},ve=function Me(e,t){return this instanceof Me?void(e&&this.set(e,t)):new Me(e,t)};return ve.VERSION=n,ve.Node=O,ve.getCharRange=$,ve[r]={constructor:ve,ast:null,re:null,fl:null,src:null,grp:null,min:null,max:null,ch:null,dispose:function(){var e=this;return e.ast=null,e.re=null,e.fl=null,e.src=null,e.grp=null,e.min=null,e.max=null,e.ch=null,e},reset:function(){var e=this;return e.ast=null,e.src=null,e.grp=null,e.min=null,e.max=null,e.ch=null,e},set:function(e,t){var n=this;if(e){t=t||"/",e=e.toString();for(var r,a=e.length,l={};a>0&&(r=e[s](a-1),t!==r);)l[r]=1,a--;e=a>0?t===e[s](0)&&t===e[s](a-1)?e.slice(1,a-1):e.slice(0,a):"",n.re!==e&&n.reset(),n.re=e,n.fl=l}return n},analyze:function(){var e=this;return null!=e.re&&null===e.ast&&(e.ast=ge(new G(e.re))),e},build:function(e){var n,r,a=this;return null==a.re?null:(null===a.ast&&(a.analyze(),a.src=null,a.grp=null),null===a.src&&(n={map:te,reduce:oe,escaped:!1!==e},r=ee({src:"",group:{}},a.ast,n),a.src=r.src,a.grp=r.group),{src:a.src,group:t(a.grp)})},compile:function(e){var t,n,r=this;return null==r.re?null:(e=e||r.fl||{},t=r.build(),n=new RegExp(t.src,(e.g||e.G?"g":"")+(e.i||e.I?"i":"")+(e.m||e.M?"m":"")),n.$group=t.group,n)},tree:function(e){var t=this;return null==t.re?null:(null===t.ast&&t.analyze(),!0===e?t.ast.toObject():t.ast)},sample:function(e,t){var n,r=this;if(null==r.re)return null;if(null===r.ast&&r.analyze(),n={map:ne,reduce:ue,maxLength:0|e||1,isCaseInsensitive:null!=r.fl.i},t=0|t||1,t>1){for(var a=new Array(t),l=0;t>l;l++)a[l]=ee("",r.ast,n);return a}return ee("",r.ast,n)},minimum:function(){var e,t=this;return null==t.re?0:(null===t.ast&&(t.analyze(),t.min=null),null===t.min&&(e={map:re,reduce:se},t.min=0|ee(0,t.ast,e)),t.min)},maximum:function(){var e,t=this;return null==t.re?0:(null===t.ast&&(t.analyze(),t.max=null),null===t.max&&(e={map:ae,reduce:se},t.max=ee(0,t.ast,e)),t.max)},peek:function(){var e,n,r,a,l,u,o,i=this;if(null==i.re)return null;null===i.ast&&(i.analyze(),i.ch=null),null===i.ch&&(e={map:le,reduce:ie},i.ch=ee({positive:{},negative:{}},i.ast,e)),r={positive:t(i.ch.positive),negative:t(i.ch.negative)},n=null!=i.fl.i;for(a in r){o={},u=r[a];for(l in u)"\\d"===l?(delete u[l],o=L(o,$("0","9"))):"\\s"===l?(delete u[l],o=L(o,["\f","\n","\r","	","\x0B"," ","\u2028","\u2029"])):"\\w"===l?(delete u[l],o=L(o,["_"].concat($("0","9")).concat($("a","z")).concat($("A","Z")))):"\\."===l?(delete u[l],o[f["."]]=1):"\\"!==l[s](0)&&n?(o[l.toLowerCase()]=1,o[l.toUpperCase()]=1):"\\"===l[s](0)&&delete u[l];r[a]=L(u,o)}return r}},RegExp.prototype.$group=null,RegExp.prototype.group=function(e){return e=e||0,this.$group&&this.$group.hasOwnProperty(e)?this.$group[e]:e},ve});