/**
*
*   ModelView.js
*   @version: 0.26.1
*   @dependencies: jQuery
*
*   A micro-MV* (MVVM) jQuery-based framework for complex (UI) screens
*   https://github.com/foo123/modelview.js
*
**/!function(e,t,n,r,i){"use strict";n=n?[].concat(n):[];var a,l,o=Array,u=o.prototype,s=n.length,c=new o(s);if("object"==typeof module&&module.exports){if(i===module.exports[t]){for(a=0;s>a;a++)c[a]=module.exports[n[a][0]]||require(n[a][1])[n[a][0]];l=r.apply(e,c),module.exports[t]=l||1}}else if("function"==typeof define&&define.amd)define(["exports"].concat(n.map(function(e){return e[1]})),function(a){if(i===a[t]){var o,s=u.slice.call(arguments,1),f=s.length;for(o=0;f>o;o++)c[o]=a[n[o][0]]||s[o];l=r.apply(e,c),a[t]=l||1}});else if(i===e[t]){for(a=0;s>a;a++)c[a]=e[n[a][0]];l=r.apply(e,c),e[t]=l||1}}(this.self||this,"ModelView",[["jQuery","jquery"]],function(e){var t={};return!function(e,t,n){"use strict";var r=function(e,t){return e.bind(t)},i="prototype",a=Array,l=a[i],o=RegExp,u=Number,s=Object,c=s[i],f=s.create,d=s.keys,h=Function,m=h[i],v=String,p=v[i],$=m.call,g=(r($,c.hasOwnProperty),r($,c.toString)),b=r($,l.slice),y=function(e,t){return e instanceof t},k=1/0,w=(Math.random,parseFloat),x=isNaN,R=isFinite,E=JSON.parse,_=JSON.stringify,A=t.Event,D=t.extend;p.trim||(p.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),p.startsWith||(p.startsWith=function(e,t){return t=t||0,e===this.substr(t,e.length+t)}),p.tR=p.trim,p.sW=p.startsWith;var S="*",C="modelview",N=2,O=3,T=4,V=8,M=9,j=16,I=32,P=64,z=128,F=256,B=512,L=1024,H=j|I,W=j|V,U=function(e){var t,r;return null===e?F:!0===e||!1===e?T:(t=typeof e,r=g(e),n===e||"undefined"===t?B:e instanceof u||"number"===t?x(e)?O:N:e instanceof v||"string"===t?1===e.length?M:V:e instanceof a||"[object Array]"===r?j:e instanceof o||"[object RegExp]"===r?z:e instanceof h||"function"===t&&"[object Function]"===r?P:"[object Object]"===r?I:L)},J=function(e,t){return!!(t&U(e))},Q=function(e){return!x(w(e))&&R(e)},X=function(e){return Q(e)&&(e=+e,0===e%1&&e>=0)?!0:!1},Z=function(){var e,t,n,r,i,a,l,o=b(arguments);for(t=o.shift()||{},e=o.length,a=0;e>a;a++)if(n=o[a],I===U(n))for(i in n)r=n[i],l=U(r),t[i]=N&l?0+r:W&l?r.slice(0):r;return t},q=function(e,t){return new h(e,t)},G=function(e,t){return n!==e.attr(t)},Y=function(e,t){if(!e)return null;var n,r,i=[],a=e.length;for(n=0;a>n;n++)r=e[n],r&&(r[t]&&i.push(r[t].next),r[S]&&i.push(r[S].next));return i.length?i:null},K=function(e,t){if(!e)return null;var n,r,i=e.length;if(t){for(n=0;i>n;n++)if(r=e[n]){if(r[t]&&r[t].value)return r[t].value;if(r[S]&&r[S].value)return r[S].value}}else for(n=0;i>n;n++)if(r=e[n],r&&r.value)return r.value;return null},et=function(e,t,n,r){for(var i,a=n;t.length;)i=t.shift(),i in a||(a[i]={value:null,next:{}}),a=a[i],t.length?a=a.next:r?(S in a.next||(a.next[S]={value:null,next:{}}),a.next[S].value=e):a.value=e;return n},tt=function(e,t,n,r){for(var i,a,l=t,o=n?[n]:null;e.length;){if(i=e.shift(),a=U(l),!e.length)return o&&K(o,i)?!0:a&H&&i in l?!0:I===a&&"length"==i?!0:!1;if(a&H&&i in l){if(l=l[i],l instanceof r)return[r,l,e];o&&(o=Y(o,i))}else if(!o||!(o=Y(o,i)))return!1}return!1},nt=function(e,t,n,r){for(var i,a,l=t,o=n?[n]:null;e.length;){if(i=e.shift(),a=U(l),!e.length)return o&&(o=K(o,i))?[!1,o]:a&H&&i in l?[!0,l[i]]:I===a&&"length"==i?[!0,d(l).length]:!1;if(a&H&&i in l){if(l=l[i],l instanceof r)return[r,l,e];o&&(o=Y(o,i))}else if(!o||!(o=Y(o,i)))return!1}return!1},rt=function(e,t,n,r,i,a,l){var o,u,s=t,c=null,f=null,d=null;for(l=!1!==l,l&&(c=[n],f=[r],d=[i]);e.length;)if(o=e.shift(),u=U(s),e.length){if(!(u&H&&o in s))return[!1,s,o,e,null,null,null];if(s=s[o],s instanceof a)return[a,s,e,0,null,null,null];l&&(c=Y(c,o),f=Y(f,o),d=Y(d,o))}else if(u&H)return s[o]instanceof a?[a,s[o],e,0,null,null,null]:o in s?[!0,s,o,e,c,f,d]:[!1,s,o,e,c,f,d];return[!1,s,o,e,null,null,null]},it=function(){return(new Date).getTime()},at=0,lt=function(e){return[e||"UUID",++at,it()].join("_")},ot=function(e,t){var n=[e||"",C];return t&&(n=n.concat(t)),n.join(".")},ut={$PB:null,namespace:null,initPubSub:function(){var e=this;return e.$PB=t({}),e},disposePubSub:function(){var e=this;return e.$PB.off(ot("")),e.$PB=null,e},trigger:function(e,t,n){var r=this;return r.namespace&&(n=n?[r.namespace].concat(n):[r.namespace]),r.$PB.trigger(ot(e,n),t),r},on:function(e,t,n){var r=this;return J(t,P)&&(r.namespace&&(n=n?[r.namespace].concat(n):[r.namespace]),r.$PB.on(ot(e,n),t)),r},onTo:function(e,t,n,i){var a=this;return J(n,P)&&(n=r(n,a)),e.on(t,n,i),a},off:function(e,t,n){var r=this;return r.namespace&&(n=n?[r.namespace].concat(n):[r.namespace]),J(t,P)?r.$PB.off(ot(e,n),t):r.$PB.off(ot(e,n)),r},offFrom:function(e,t,n,i){var a=this;return J(n,P)&&(n=r(n,a)),e.off(t,n,i),a}};ut.publish=ut.trigger;var st=function(e,t){var n=this,r=arguments.length;n.$store={},n.$size=k,n.$interval=k,r>0&&e>0&&(n.$size=e),r>1&&t>0&&(n.$interval=t)};st[i]={constructor:st,$store:null,$size:null,$interval:null,dispose:function(){var e=this;return e.$store=null,e.$size=null,e.$interval=null,e},reset:function(){return this.$store={},this},size:function(e){return arguments.length?(e>0&&(this.$size=e),this):this.$size},interval:function(e){return arguments.length?(e>0&&(this.$interval=e),this):this.$interval},has:function(e){var t=this,n=e?t.$store[e]:null;return!!(n&&it()-n.time<=t.$interval)},get:function(e){if(e){var t=this,r=t.$store[e];if(r)return it()-r.time>t.$interval?(delete t.$store[e],n):r.data}return n},set:function(e,t){var n,r,i,a=this;if(e){for(n=a.$store,r=a.$size,i=d(n);i.length>=r;)delete n[i.shift()];n[e]={data:t,time:it()}}return a},del:function(e){return e&&this.$store[e]&&delete this.$store[e],this},toString:function(){return"[ModelView.Cache]"}};var ct=function(e){return e.replace(/\[([^\]]*)\]/g,".$1").replace(/^\.+/,"").replace(/\.+$/,"")},ft=function(e){return"["+e.split(".").join("][")+"]"},dt=function(e){var t=new o("^"+e+"([\\.|\\[])");return function(e,n){var r=e.replace(t,"$1");return n?ct(r):r}},ht=function(e){return y(this,ht)?void(this.f=e||null):new ht(e)},mt=function(e){return y(this,mt)?void(this.f=e||null):new mt(e)},vt=function(e,t){var n,i;for(n in t)i=t[n],y(i,mt)?(t[n]=r(i.f,e),t[n].fEach=!0):t[n]=r(i,e);return t},pt=function(e){return e.BEFORE=function(t){return pt(function(n,r){var i=this;return t.call(i,e.call(i,n,r),r)})},e.AFTER=function(t){return pt(function(n,r){var i=this;return e.call(i,t.call(i,n,r),r)})},e},$t=function(e){return e.NOT=function(){return $t(function(t,n){return!e.call(this,t,n)})},e.AND=function(t){return $t(function(n,r){var i=this;return e.call(i,n,r)&&t.call(i,n,r)})},e.OR=function(t){return $t(function(n,r){var i=this;return e.call(i,n,r)||t.call(i,n,r)})},e.XOR=function(t){return $t(function(n,r){var i=this,a=e.call(i,n,r),l=t.call(i,n,r);return a&&!l||l&&!a})},e},gt={TypeCaster:pt,Cast:{EACH:mt,FIELDS:function(e){var t=!0;return e=D({},e||{}),pt(function(n){var r,i,a,l,o;t&&(vt(this,e),t=!1);for(r in e)if(i=e[r],a=n[r],i.fEach&&J(a,j)){for(l=a.length,o=0;l>o;o++)a[o]=i(a[o]);n[r]=a}else n[r]=i(a);return n})},DEFAULT:function(e){return pt(function(t){var n=U(t);return(B&n||V&n&&!t.tR().length)&&(t=e),t})},BOOL:pt(function(e){return!!e}),INT:pt(function(e){return parseInt(e,10)}),FLOAT:pt(function(e){return parseFloat(e,10)}),MIN:function(e){return pt(function(t){return e>t?e:t})},MAX:function(e){return pt(function(t){return t>e?e:t})},CLAMP:function(e,t){if(e>t){var n=t;t=e,e=n}return pt(function(n){return e>n?e:n>t?t:n})},TRIM:pt(function(e){return v(e).tR()}),LCASE:pt(function(e){return v(e).toLowerCase()}),UCASE:pt(function(e){return v(e).toUpperCase()}),STR:pt(function(e){return""+e})},add:function(e,t){return J(e,V)&&J(t,P)&&(gt.Cast[e]=pt(t)),gt},del:function(e){return J(e,V)&&gt.Cast[e]&&delete gt.Cast[e],gt},toString:function(){return"[ModelView.Type]"}},bt={Validator:$t,Validate:{EACH:mt,FIELDS:function(e){var t=!0;return e=D({},e||{}),$t(function(n){var r,i,a,l,o;t&&(vt(this,e),t=!1);for(r in e)if(i=e[r],a=n[r],i.fEach&&J(a,j)){for(l=a.length,o=0;l>o;o++)if(!i(a[o]))return!1}else if(!i(a))return!1;return!0})},NUMERIC:$t(function(e){return Q(e)}),NOT_EMPTY:$t(function(e){return!!(e&&0<v(e).tR().length)}),MAXLEN:function(e){return $t(q("v","return v.length <= "+e+";"))},MINLEN:function(e){return $t(q("v","return v.length >= "+e+";"))},MATCH:function(e){return $t(function(t){return e.test(t)})},NOT_MATCH:function(e){return $t(function(t){return!e.test(t)})},EQUAL:function(e,t){return $t(y(e,ht)?q("v","return this.$data."+e.f+" "+(!1!==t?"===":"==")+" v;"):!1!==t?function(t){return e===t}:function(t){return e==t})},NOT_EQUAL:function(e,t){return $t(y(e,ht)?q("v","return this.$data."+e.f+" "+(!1!==t?"!==":"!=")+" v;"):!1!==t?function(t){return e!==t}:function(t){return e!=t})},GREATER_THAN:function(e,t){return y(e,ht)?e="this.$data."+e.f:J(e,V)&&(e='"'+e+'"'),$t(q("v","return "+e+" "+(!1!==t?"<":"<=")+" v;"))},LESS_THAN:function(e,t){return y(e,ht)?e="this.$data."+e.f:J(e,V)&&(e='"'+e+'"'),$t(q("v","return "+e+" "+(!1!==t?">":">=")+" v;"))},BETWEEN:function(e,t,n){J(e,j)&&(n=t,t=e[1],e=e[0]);var r,i=y(e,ht),a=y(t,ht);return!i&&!a&&e>t&&(r=t,t=e,e=r),e=i?"this.$data."+e.f:J(e,V)?'"'+e+'"':e,t=a?"this.$data."+t.f:J(t,V)?'"'+t+'"':t,$t(!1!==n?q("v","return ( "+e+" < v ) && ( "+t+" > v );"):q("v","return ( "+e+" <= v ) && ( "+t+" >= v );"))},NOT_BETWEEN:function(e,t,n){J(e,j)&&(n=t,t=e[1],e=e[0]);var r,i=y(e,ht),a=y(t,ht);return!i&&!a&&e>t&&(r=t,t=e,e=r),e=i?"this.$data."+e.f:J(e,V)?'"'+e+'"':e,t=a?"this.$data."+t.f:J(t,V)?'"'+t+'"':t,$t(!1!==n?q("v","return ( "+e+" > v ) || ( "+t+" < v );"):q("v","return ( "+e+" >= v ) || ( "+t+" <= v );"))},IN:function(){var e=b(arguments);return J(e[0],j)&&(e=e[0]),$t(function(t){return-1<e.indexOf(t)})},NOT_IN:function(){var e=b(arguments);return J(e[0],j)&&(e=e[0]),$t(function(t){return 0>e.indexOf(t)})}},add:function(e,t){return J(e,V)&&J(t,P)&&(bt.Validate[e]=$t(t)),bt},del:function(e){return J(e,V)&&bt.Validate[e]&&delete bt.Validate[e],bt},toString:function(){return"[ModelView.Validation]"}},yt=function(e,t,n,i){var a,l,o=!1;if(l=U(n),P&l)o=y(n,mt),n=o?r(n.f,e):r(n,e),et(n,-1<t.indexOf(".")?t.split("."):[t],i,o);else if(H&l)for(a in n)yt(e,t+"."+a,n[a],i)},kt=function(e,t,n,i){var a,l;if(l=U(n),P&l)et(r(n,e),-1<t.indexOf(".")?t.split("."):[t],i);else if(H&l)for(a in n)kt(e,t+"."+a,n[a],i)},wt=function(e,t,n){for(var r,i;t instanceof e;)t=t.data();if(i=n||U(t),t=I&i?D({},t):j&i?t.slice(0):t,H&i)for(r in t)t[r]instanceof e?t[r]=wt(e,D({},t[r].data())):H&(i=U(t[r]))&&(t[r]=wt(e,t[r],i));return t},xt=function(e,t,n,r,i,a){var l=this;return l instanceof xt?(l.namespace=l.id=e||lt("Model"),l.key=dt(l.id),l.$view=null,l.atomic=!1,l.$atom=null,l.$types={},l.$validators={},l.$getters={},l.$setters={},void l.data(t||{}).types(n).validators(r).getters(i).setters(a).initPubSub()):new xt(e,t,n,r,i,a)};xt[i]=Z(f(s[i]),ut,{constructor:xt,id:null,$view:null,$data:null,$types:null,$validators:null,$getters:null,$setters:null,atomic:!1,$atom:null,dispose:function(){var e=this;return e.disposePubSub().$view=null,e.$data=null,e.$types=null,e.$validators=null,e.$getters=null,e.$setters=null,e.atomic=!1,e.$atom=null,e.key=null,e},isValid:function(){return!0},view:function(e){var t=this;return arguments.length?(t.$view=e,t):t.$view},data:function(e){var t=this;return arguments.length?(t.$data=e,t):t.$data},types:function(e){var t,n=this;if(J(e,I))for(t in e)yt(n,t,e[t],n.$types);return n},validators:function(e){var t,n=this;if(J(e,I))for(t in e)yt(n,t,e[t],n.$validators);return n},getters:function(e){var t,n=this;if(J(e,I))for(t in e)kt(n,t,e[t],n.$getters);return n},setters:function(e){var t,n=this;if(J(e,I))for(t in e)kt(n,t,e[t],n.$setters);return n},serialize:function(){return wt(xt,this.$data)},toJSON:function(e){var t,n,r,i=this;n=arguments.length?i.get(e):i.data();try{t=_(wt(xt,n))}catch(r){throw r}return t},fromJSON:function(e,t){var n,r,i=this;if(e){try{n=E(e)}catch(r){throw r}t?i.set(t,n):i.data(n)}return i},count:function(e,t){if(!arguments.length)return 0;var n=e?this.get(e):t,r=U(n);return I===r?d(n).length:j===r?n.length:B!==r?1:0},has:function(e,t){var n,r=this;return 0>e.indexOf(".")&&(e in r.$data||!t&&(n=r.$getters[e])&&n.value)?!0:(n=tt(e.split("."),r.$data,t?null:r.$getters,xt))?!0===n?!0:n[1].has(n[2].join(".")):!1},get:function(e,t){var r,i=this;return 0>e.indexOf(".")?!t&&(r=i.$getters[e])&&r.value?r.value(e):i.$data[e]:(r=nt(e.split("."),i.$data,t?null:i.$getters,xt))?xt===r[0]?r[1].get(r[2].join("."),t):!1===r[0]?r[1](e):r[1]:n},set:function(e,t,n,r){var i,a,l,o,u,s,c,f,d,h,m=this,v=!1;if(m.atomic&&e.sW(m.$atom))return m;if(a=m.$data,c=m.$types,f=m.$validators,d=m.$setters,0>e.indexOf("."))l=e,s=(i=d[l])?i.value:null,o=(i=c[l]||c[S])?i.value:null,u=(i=f[l]||f[S])?i.value:null,v=!0;else if(i=rt(e.split("."),a,c,f,d,xt)){if(a=i[1],l=i[2],o=K(i[4],l),u=K(i[5],l),s=K(i[6],l),xt===i[0])return l.length?(l=l.join("."),h=a.get(l),h!==t?a.set(l,t,n,r):n=!1):(h=a.data(),h!==t?a.data(t):n=!1),n&&m.publish("change",{model:m,key:e,value:t,valuePrev:h,$callData:r}),m;if(!s&&!1===i[0]&&i[3].length)return m;v=!0}if(v){if(o&&(t=o(t,e)),u&&!u(t,e))return n&&(r&&(r.error=!0),m.publish("error",{model:m,key:e,value:a[l],$callData:r})),m;if(s)return s(e,t)&&(n&&m.publish("change",{model:m,key:e,value:t,$callData:r}),m.$atom&&e===m.$atom&&(m.atomic=!0)),m;h=a[l],h!==t&&(a[l]=t,n&&m.publish("change",{model:m,key:e,value:t,valuePrev:h,$callData:r}),m.$atom&&e===m.$atom&&(m.atomic=!0))}return m},append:function(e,t,r,i){var a,l,o,u,s,c,f=this,d=!1;if(f.atomic&&e.sW(f.$atom))return f;if(l=f.$data,types=f.$types,validators=f.$validators,setters=f.$setters,0>e.indexOf("."))o=e,c=(a=setters[o])&&a.next[S]?a.next[S].value:null,u=(a=types[o]||types[S])&&a.next[S]?a.next[S].value:null,s=(a=validators[o]||validators[S])&&a.next[S]?a.next[S].value:null,d=!0;else if(a=rt(e.split("."),l,types,validators,setters,xt)){if(l=a[1],o=a[2],u=K(Y(a[4],o),S),s=K(Y(a[5],o),S),c=K(Y(a[6],o),S),xt===a[0])return o.length?(o=o.join("."),l.append(o,t,r,i)):l.data(t),r&&f.publish("change",{model:f,key:e,value:t,$callData:i}),f;if(!c&&!1===a[0]&&a[3].length)return f;d=!0}if(d){if(u&&(t=u(t,e)),s&&!s(t,e))return r&&(i&&(i.error=!0),f.publish("error",{model:f,key:e,value:n,$callData:i})),f;if(c)return c(e,t)&&(r&&f.publish("change",{model:f,key:e,value:t,$callData:i}),f.$atom&&e===f.$atom&&(f.atomic=!0)),f;j===U(l[o])?l[o].push(t):l[o]=t,r&&f.publish("change",{model:f,key:e,value:t,$callData:i}),f.$atom&&e===f.$atom&&(f.atomic=!0)}return f},del:function(e,t,n){var r,i,a,l,o=this,u=!1;if(o.atomic&&e.sW(o.$atom))return o;if(i=o.$data,0>e.indexOf("."))a=e,u=!0;else if(r=rt(e.split("."),i,null,null,null,xt,!1)){if(i=r[1],a=r[2],xt===r[0]&&a.length)return a=a.join("."),l=i.get(a),i.del(a,t,n),t&&o.publish("remove",{model:o,key:e,value:l,$callData:n}),o.$atom&&e===o.$atom&&(o.atomic=!0),o;if(r[3].length)return o;u=!0}return u&&(l=i[a],delete i[a],t&&o.publish("remove",{model:o,key:e,value:l,$callData:n}),o.$atom&&e===o.$atom&&(o.atomic=!0)),o},rem:function(e,t,r){var i,a,l,o,u,s=this,c=!1;if(s.atomic&&e.sW(s.$atom))return s;if(a=s.$data,0>e.indexOf("."))l=e,c=!0;else if(i=rt(e.split("."),a,null,null,null,xt,!1)){if(a=i[1],l=i[2],xt===i[0]&&l.length)return l=l.join("."),o=a.get(l),a.rem(l,t,r),t&&s.publish("remove",{model:s,key:e,value:o,$callData:r}),s.$atom&&e===s.$atom&&(s.atomic=!0),s;if(i[3].length)return s;c=!0}return c&&(o=a[l],a[l]=n,u=U(a),j==u&&X(l)?a.splice(+l,1):I==u&&delete a[l],t&&s.publish("remove",{model:s,key:e,value:o,$callData:r}),s.$atom&&e===s.$atom&&(s.atomic=!0)),s},notify:function(e,t,n){return e&&this.publish(t||"change",{model:this,key:e,$callData:n}),this},atom:function(e){var t=this;return n!==e&&(!1===e?(t.atomic=!1,t.$atom=null):(t.atomic=!1,t.$atom=e)),t},toString:function(){return"[ModelView.Model id: "+this.id+"]"}});var Rt=function(e,t,n){return[e?"["+e+"]":null,t?n?'input[name="'+t+'"],textarea[name="'+t+'"],select[name="'+t+'"]':'input[name^="'+t+'"],textarea[name^="'+t+'"],select[name^="'+t+'"]':null]},Et=function(e,t){return t&&t[e]?(J(t[e],V)&&(t[e]={action:t[e]}),t[e]):void 0},_t=function(e,n,r,i){var a=e.$model,l="sync"==r.type,o=l?"change":r.type;n.each(function(){var n,l,u,s,c=t(this);n=Et(o,e.attr(c,"bind")),n&&n.action&&(l="do_"+n.action,J(e[l],P)&&(u=c.attr("name"),s=n.key||u&&a.key(u,1),i&&(!s||!s.sW(i.key)||a.atomic&&s.sW(a.$atom))||e[l](r,c,n)))})},At=function(e,n,r){{var i=e.$model,a={},l="sync"==r.type;l?"change":r.type}n.each(function(){var n,l=t(this),o=l.attr("name"),u=o?i.key(o,1):0;if(u){if(a[u])n=a[u][0];else{if(!i.has(u))return;a[u]=[n=i.get(u)]}e.do_bind(r,l,{name:o,key:u,value:n})}})},Dt=function(e,t,n,r,i){var a=this;return a instanceof Dt?(a.namespace=a.id=e||lt("View"),a.$atts=n||{bind:"data-bind"},r=r||Dt._CACHE_SIZE,i=i||Dt._REFRESH_INTERVAL,a.$memoize=new st(r,i),a.$selectors=new st(r,i),a.$bind=a.attribute("bind"),void a.model(t||new xt).initPubSub()):new Dt(e,t,n,r,i)};Dt._CACHE_SIZE=600,Dt._REFRESH_INTERVAL=k,Dt[i]=Z(f(s[i]),ut,{constructor:Dt,id:null,$dom:null,$bind:null,$model:null,$bindbubble:!1,$autobind:!1,$template:null,$atts:null,$memoize:null,$selectors:null,dispose:function(){var e=this;return e.unbind().disposePubSub(),e.$model&&e.$model.dispose(),e.$model=null,e.$dom=null,e.$bind=null,e.$template=null,e.$atts=null,e.$memoize.dispose(),e.$memoize=null,e.$selectors.dispose(),e.$selectors=null,e},model:function(e){var t=this;return arguments.length?(t.$model&&t.$model.dispose(),t.$model=e.view(t),t):t.$model},attribute:function(e,t){var r=this;return arguments.length>1?(r.$atts[e]=t,r):e?r.$atts[e]||n:n},template:function(e){var t=this;return arguments.length?(J(e,P)&&(t.$template=e),t):t.$template},event:function(e,t){var r=this,i=e?"on_"+e.split(":").join("_"):null;return i&&n!==t?(r[i]=J(t,P)?t:null,r):i?r[i]:n},action:function(e,t){var n=this,r=e&&"do_"+e;return arguments.length>1?(n[r]=J(t,P)?t:null,n):r&&n[r]},bindbubble:function(e){var t=this;return arguments.length?(t.$bindbubble=!!e,t):t.$bindbubble},autobind:function(e){var t=this;return arguments.length?(t.$autobind=!!e,t):t.$autobind},get:function(e,n,r){var i,a=this,l=a.$selectors;return n=n?t(n):a.$dom,r?n.find(e):(i=l.get(e),i||l.set(e,i=n.find(e)),i)},attr:function(e,t){var r,i,a=this,l=a.$atts[t],o=a.$memoize;return l&&G(e,l)?(l=e.attr(l),r=o.get(l),n===r&&(r=E(l),r.set&&(r.click=r.set,r.click.action="set",r.set=n,delete r.set),r.show&&(r.change={action:"show",key:r.show},r.show=n,delete r.show),r.hide&&(r.change={action:"hide",key:r.hide},r.hide=n,delete r.hide),r.html?(r.change={action:"html",key:r.html},r.html=n,delete r.html,r.text=n,delete r.text):r.text&&(r.change={action:"html",key:r.text,text:1},r.text=n,delete r.text),r.css&&(r.change={action:"css",css:r.css},r.css=n,delete r.css),r.value&&(r.change&&"prop"==r.change.action?r.change.prop.value=r.value:r.change={action:"prop",prop:{value:r.value}},r.value=n,delete r.value),r.checked&&(r.change&&"prop"==r.change.action?r.change.prop.checked=r.checked:r.change={action:"prop",prop:{checked:r.checked}},r.checked=n,delete r.checked),r.disabled&&(r.change&&"prop"==r.change.action?r.change.prop.disabled=r.disabled:r.change={action:"prop",prop:{disabled:r.disabled}},r.disabled=n,delete r.disabled),r.options&&(r.change&&"prop"==r.change.action?r.change.prop.options=r.options:r.change={action:"prop",prop:{options:r.options}},r.options=n,delete r.options),r["class"]&&(r.change&&"prop"==r.change.action?r.change.prop["class"]=r["class"]:r.change={action:"prop",prop:{"class":r["class"]}},r["class"]=n,delete r["class"]),(i=r.change)&&(!i.domRef&&r.domRef&&(i.domRef=r.domRef),!i.key&&r.key&&(i.key=r.key)),o.set(l,r)),r):n},getDomRef:function(e,n){return n&&"$this::"==n.slice(0,7)?t(n.slice(7),e):t(n)},bind:function(e,n){var r,i,a,l=this,o=l.$model,u=Rt(l.$bind,o.id+"["),s=u[0],c=u[1],f=/^on_model_/;e=e||["change","click"],l.$dom=t(n||window.document),l.on_view_change&&e.length&&(a=function(e){return ot(e,l.namespace)},l.$dom.on(e.map(a).join(" "),[c,s].join(","),function(e){var n=this,r=t(n),i=!1,a=!1,o=l.$bindbubble?l.attr(r,"bind"):null;return(e.target===n||o&&o.bubble)&&(a=l.$bindbubble?!!o:r.is(s),i=l.$autobind&&"change"==e.type&&r.is(c),(a||i)&&l.on_view_change(e,{$el:r,isBind:a,isAutoBind:i})),!0}));for(r in l)J(l[r],P)&&f.test(r)&&(i=r.replace(f,""),i.length&&l.onTo(o,i,l[r],l.namespace));return l},unbind:function(e,n){var r,i,a=this,l=a.$model,o=Rt(a.$bind,l.id+"[");return e=e||null,i=n?t(n):a.$dom,a.on_view_change&&(r=function(e){return ot(e,a.namespace)},i.off(e&&e.length?e.map(r).join(" "):ot("",a.namespace),[o[1],o[0]].join(","))),a.offFrom(l,"",null,a.namespace),a},rebind:function(e,t){var n=this;return n.$memoize.reset(),n.$selectors.reset(),n.unbind().bind(e,t)},sync:function(e){var n=this,r=Rt(n.$bind,n.$model.id+"["),i=A("sync");return e=e?t(e):n.$dom,_t(n,n.get(r[0],e,1),i),n.$autobind&&At(n,n.get(r[1],e,1),i),n},reset:function(){var e=this;return e.$memoize.reset(),e.$selectors.reset(),e},on_view_change:function(e,n){var r,i,a,l,o,u=this,s=u.$model,c=n.$el,f={};n.isAutoBind&&c.attr("name")&&(i=s.key(r=c.attr("name"),1),i&&s.has(i)&&(l=c.is(":checkbox"),l?(o=u.get('input[type="checkbox"][name="'+r+'"]'),o.length>1?(a=[],o.each(function(){var e=t(this);a.push(e.is(":checked")?e.val():"")})):a=o.is(":checked")?o.val():""):a=c.val(),f.$trigger=c,s.set(i,a,1,f))),!f.error&&n.isBind&&_t(u,c,e),u.publish("change",n)},on_model_change:function(e,t){var n,r,i=this,a=i.$model,l=Rt(i.$bind,a.id+ft(t.key)),o=i.$autobind;n=i.get(l[0]),o&&(r=i.get(l[1])),t.$callData&&t.$callData.$trigger&&(n=n.not(t.$callData.$trigger),o&&(r=r.not(t.$callData.$trigger)),t.$callData=null),_t(i,n,e,t),o&&r.length&&At(i,r,e,t)},on_model_error:function(e,t){var n=this,r=n.$model,i=Rt(n.$bind,r.id+ft(t.key));_t(n,n.get(i[0]),e,t),n.$autobind&&At(n,n.get(i[1]),e,t)},do_nop:null,do_prop:function(e,t,n){if(J(n.prop,I)){var r,i,a,l,o,u=this,s=u.$model,c=n.prop;if(n.domRef&&(t=u.getDomRef(t,n.domRef)),t.length){r={};for(i in c)if(a=c[i],s.has(a))switch(l=s.get(a),o=U(l),i){case"value":t.val(l);break;case"options":if(t.is("select")&&j===o){var f,d,h=l.length,m="",v=t.find("optgroup");for(f=t.val(),v.length||(v=t),v.find("option").remove(),d=0;h>d;d++)m+=l[d]&&l[d].label?'<option value="'+l[d].value+'">'+l[d].label+"</option>":'<option value="'+l[d]+'">'+l[d]+"</option>";v.append(m),t.val(f)}break;case"class":if(l&&l.length){var p,$=l.charAt(0);"-"==$?t.removeClass(l.slice(1)):"+"==$?t.addClass(l.slice(1)):(p=t.hasClass(l))?t.removeClass(l):p||t.addClass(l)}break;case"checked":T===o?t.prop(i,l):l==t.val()?t.prop(i,!0):t.prop(i,!1);break;case"disabled":T===o?t.prop(i,l):l==t.val()?t.prop(i,!0):t.prop(i,!1);break;default:r[i]=l}t.attr(r)}}},do_html:function(e,t,n){if(n.key){var r,i=this,a=i.$model,l=n.key;n.domRef&&(t=i.getDomRef(t,n.domRef)),t.length&&l&&a.has(l)&&(r=a.get(l),n.text?t.text(r):t.html(r))}},do_css:function(e,t,n){if(J(n.css,I)){var r,i,a,l,o=this,u=o.$model,s=n.css;if(n.domRef&&(t=o.getDomRef(t,n.domRef)),t.length){l={};for(i in s)r=s[i],a=u.get(r),a&&(l[i]=a);t.css(l)}}},do_set:function(e,t,n){var r,i=this,a=i.$model,l=n.key||a.key(t.attr(name),1);l&&("value"in n?r=n.value:(n.domRef&&(t=i.getDomRef(t,n.domRef)),r=t.is("input,select,textarea")?t.val():t.text()),a.set(l,r,1))},do_tpl:function(e,t,n){var r,i,a,l=this,o=n.key,u=n.tpl;l.$template&&o&&u&&(n.domRef&&(t=l.getDomRef(t,n.domRef)),t.length&&(r=l.$model,o&&r.has(o)&&(i=n.mode||"replace","replace"==i&&t.empty(),a=l.$template(u,r.get(o)),a&&t.append(a))))},do_show:function(e,t,n){var r=this,i=r.$model,a=n.key;n.domRef&&(t=r.getDomRef(t,n.domRef)),t.length&&a&&("value"in n?n.value===i.get(a)?t.show():t.hide():i.get(a)?t.show():t.hide())},do_hide:function(e,t,n){var r=this,i=r.$model,a=n.key;n.domRef&&(t=r.getDomRef(t,n.domRef)),t.length&&a&&("value"in n?n.value===i.get(a)?t.hide():t.show():i.get(a)?t.hide():t.show())},do_bind:function(e,n,r){var i,a,l,o=this,u=(o.$model,r.name),s=r.key;if(s)if(i=r.value,a=U(i),l=n.val(),n.is(":radio"))i==l&&(o.get('input[name="'+u+'"]').not(n).prop("checked",!1),n.prop("checked",!0));else if(n.is(":checkbox")){var c=o.get('input[type="checkbox"][name="'+u+'"]');c.length>1&&j===a?c.each(function(){var e=t(this);t.inArray(e.val(),i)>-1?e.prop("checked",!0):e.prop("checked",!1)}):T===a?n.prop("checked",i):i==l?n.prop("checked",!0):n.prop("checked",!1)}else n.val(i)},toString:function(){return"[ModelView.View id: "+this.id+"]"}}),e.ModelView={VERSION:"0.26.1",UUID:lt,Extend:Z,Field:ht,Type:gt,Validation:bt,Cache:st,Model:xt,View:Dt}}(t,e),!function(e,t){"use strict";var n=Function.prototype.call.bind(Array.prototype.slice),r=t.extend,i=e.View,a=e.Model,l={id:"model",data:{},types:{},validators:{},getters:{},setters:{}},o={viewClass:i,modelClass:a,id:"view",autobind:!1,bindbubble:!1,bindAttribute:"data-bind",cacheSize:i._CACHE_SIZE,refreshInterval:i._REFRESH_INTERVAL,model:null,template:null,events:null,actions:{},handlers:{}};t.ModelView=e,t.fn.modelview=function(e){var i=n(arguments),u=i.length?i.shift():null,s=!0,c=!1,f=[];return this.each(function(){var n,d,h,m=t(this);if(m.data("modelview")){if(s=!1,d=m.data("modelview"),n=d.$model,"view"===u)f.push(d);else if("model"===u){if(i.length)return n.apply(d,i),this;f.push(n)}else if("data"===u){if(i.length)return n.data.apply(d.$model,i),this;f.push(n.data())}else"dispose"===u?(m.data("modelview",null),d.dispose()):"sync"===u?d.sync.apply(d,i):"refresh"===u&&d.refresh.apply(d,i);return this}if(c||(e=r({},o,e),!e.model||e.model instanceof a||(e.model=r({},l,e.model)),c=!0),!e.model)return this;if(n=e.model instanceof a?e.model:new e.modelClass(e.model.id,e.model.data,e.model.types,e.model.validators,e.model.getters,e.model.setters),d=new e.viewClass(e.id,n,{bind:e.bindAttribute||"data-bind"},e.cacheSize,e.refreshInterval),e.template&&d.template(e.template),e.handlers)for(var v in e.handlers)h=e.handlers[v],h&&d.event(v,h);if(e.actions)for(var p in e.actions)h=e.actions[p],h&&d.action(p,h);m.data("modelview",d),d.bindbubble(e.bindbubble).autobind(e.autobind).bind(e.events,m)}),!s&&f.length?1==this.length?f[0]:f:this}}(t.ModelView,e),t.ModelView});