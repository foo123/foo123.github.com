/**
*
*   CodeMirrorGrammar
*   @version: 0.11
*
*   Transform a grammar specification in JSON format, into a syntax-highlight parser mode for CodeMirror
*   https://github.com/foo123/codemirror-grammar
*
**/!function(t,e,n){"use strict";var r,l="object"==typeof module&&module.exports,o="function"==typeof define&&define.amd;l?module.exports=(module.$deps=module.$deps||{})[e]=module.$deps[e]||n.call(t,{NODE:module})||1:o&&"function"==typeof require&&"function"==typeof require.specified&&require.specified(e)?define(e,["require","exports","module"],function(e,r,l){return n.call(t,{AMD:l})}):e in t||(t[e]=r=n.call(t,{})||1)&&o&&define(e,[],function(){return r})}(this,"CodeMirrorGrammar",function(t){var e,n,r=1/0,o=2,s=4,u=8,c=16,a=17,p=18,f=20,h=32,g=33,d=34,m=64,k=128,E=256,v=257,_=258,R=259,y=512,C=1024,x=2048,b=4096,w={EITHER:m,ALL:k,ZEROORONE:v,ZEROORMORE:_,ONEORMORE:R,REPEATED:E},M={INDENT:x,DEDENT:b,BLOCK:h,COMMENT:d,ESCAPEDBLOCK:g,SIMPLE:c,GROUP:y,NGRAM:C},S=void 0,T="prototype",B="hasOwnProperty",O="propertyIsEnumerable",P=(Object.keys,Array[T],Object[T]),D=(Function[T],P.toString),A=4,I=5,L=8,N=16,H=17,j=18,Q=32,$=64,q=128,V=256,G=512,K=1024,F=2048,U=N|Q,W=$|Q;TO_STRING={"[object Array]":Q,"[object RegExp]":V,"[object Number]":A,"[object String]":N,"[object Function]":q,"[object Object]":$},get_type=function(t){var e;return null===t?G:!0===t||!1===t?L:S===t?K:(e=D.call(t),e=TO_STRING[e]||F,A===e||t instanceof Number?isNaN(t)?I:A:N===e||t instanceof String?1===t.length?H:N:Q===e||t instanceof Array?Q:V===e||t instanceof RegExp?V:q===e||t instanceof Function?q:$===e?$:F)},Extend=Object.create,Merge=function(){var t,e,n,r,l,o,i,s=arguments;for(e=s[0]||{},t=s.length,o=1;t>o;o++)if(n=s[o],$===get_type(n))for(l in n)n[B](l)&&n[O](l)&&(r=n[l],i=get_type(r),e[l]=A&i?0+r:U&i?r.slice(0):r);return e},make_array=function(t,e){return e||Q!==get_type(t)?[t]:t},make_array_2=function(t,e){return t=make_array(t,e),(e||Q!==get_type(t[0]))&&(t=[t]),t},clone=function(t){var e,n=get_type(t);if(!(W&n))return t;var r,l={};for(r in t)t[B](r)&&t[O](r)&&(e=get_type(t[r]),l[r]=$&e?clone(t[r]):U&e?t[r].slice():t[r]);return l},extend=function(){var t=arguments,e=t.length;if(1>e)return null;if(2>e)return clone(t[0]);var n,r,l,o,i=t[0],s=clone(i);for(e--,r=1;e>r;r++)if(n=t[r])for(l in n)n[B](l)&&n[O](l)&&(i[B](l)&&i[O](l)?(o=get_type(i[l]),$&~N&o&&(s[l]=extend(i[l],n[l]))):s[l]=clone(n[l]));return s},escRegexp=function(t){return t.replace(/([.*+?^${}()|[\]\/\\\-])/g,"\\$1")},groupReplace=function(t,e){var n,r,l,o;for(o=function(t,n){return e[1+parseInt(n,10)]},n=t.split("$$"),l=n.length,r=0;l>r;r++)n[r]=n[r].replace(/\$(\d{1,2})/g,o);return n.join("$")},byLength=function(t,e){return e.length-t.length},hasPrefix=function(t,e){return N&get_type(e)&&N&get_type(t)&&e.length&&e.length<=t.length&&e==t.substr(0,e.length)},getRegexp=function(t,e,n){if(!t||A==get_type(t))return t;var r,l=e?e.length||0:0;if(l&&e==t.substr(0,l)){var o,i,s,u,r,c,a=t.substr(l),p=a[0],f="";for(r=a.length;r--&&(c=a[r],p!=c);)"i"==c.toLowerCase()&&(f="i");return o=a.substring(1,r),i="^("+o+")",n[i]||(s=new RegExp(i,f),u={peek:null,negativepeek:null},n[i]=[s,u]),n[i]}return t},getCombinedRegexp=function(t,e){var n={},r="",l=get_type(e);(N==l||H==l)&&(r=e);var o=t.sort(byLength).map(function(t){return n[t.charAt(0)]=1,escRegexp(t)}).join("|");return[new RegExp("^("+o+")"+r),{peek:n,negativepeek:null},1]},_id_=0,getId=function(){return++_id_},isNode="undefined"!=typeof global&&"[object global]"=={}.toString.call(global)?1:0,isBrowser=isNode||"undefined"==typeof navigator?0:1,isWorker="function"==typeof importScripts&&navigator instanceof WorkerNavigator?1:0,getCurrentPath=function(){var t,e,n=null;return isNode?(n=__filename,{path:__dirname,file:__filename,base:__dirname}):(isWorker?n=self.location.href:isBrowser&&(t=document.location.href.split("#")[0].split("?")[0].split("/").slice(0,-1).join("/"),(e=document.getElementsByTagName("script"))&&e.length&&(n=e[e.length-1].src)),n?{path:n.split("/").slice(0,-1).join("/"),file:n,base:t}:{path:null,file:null,base:null})},thisPath=getCurrentPath();var Z=Math.max,z=/^[\s\u00a0]+/,Y=/[^\s\u00a0]/,J=function(t,e,n,r,l){var o,i;for(null===e&&(e=t.search(Y),-1==e&&(e=t.length)),o=r||0,i=l||0;e>o;++o)i+="	"==t.charAt(o)?n-i%n:1;return i},X=function(t){var e=this;e._=null,e.s=t?""+t:"",e.start=e.pos=0,e.lCP=e.lCV=0,e.lS=0};X[T]={constructor:X,_:null,s:"",start:0,pos:0,lCP:0,lCV:0,lS:0,toString:function(){return this.s},fromStream:function(t){var e=this;return e._=t,e.s=""+t.string,e.start=t.start,e.pos=t.pos,e.lCP=t.lastColumnPos,e.lCV=t.lastColumnValue,e.lS=t.lineStart,e},sol:function(){return 0==this.pos},eol:function(){return this.pos>=this.s.length},chr:function(t,e){var n=this,r=n.s.charAt(n.pos)||null;return r&&t==r?(!1!==e&&(n.pos+=1,n._&&(n._.pos=n.pos)),r):!1},chl:function(t,e){var n=this,r=n.s.charAt(n.pos)||null;return r&&-1<t.indexOf(r)?(!1!==e&&(n.pos+=1,n._&&(n._.pos=n.pos)),r):!1},str:function(t,e,n){var r,l=this,o=l.pos,i=l.s,s=i.charAt(o)||null;return s&&e[s]&&(r=t.length,t==i.substr(o,r))?(!1!==n&&(l.pos+=r,l._&&(l._.pos=l.pos)),t):!1},rex:function(t,e,n,r,l){{var o,i=this,s=i.pos,u=i.s;u.charAt(s)||null}return o=u.slice(s).match(t),!o||o.index>0?!1:(!1!==l&&(i.pos+=o[r||0].length,i._&&(i._.pos=i.pos)),o)},spc:function(t){var e,n=this,r=n.pos,l=n.s.slice(r);return(e=l.match(z))?(!1!==t&&(n.pos+=e[0].length,n._&&(n._.pos=n.pos)),1):0},end:function(){var t=this;return t.pos=t.s.length,t._&&(t._.pos=t.pos),t},nxt:function(){var t,e=this,n=e.s;return e.pos<n.length?(t=n.charAt(e.pos++)||null,e._&&(e._.pos=e.pos),t):void 0},bck:function(t){var e=this;return e.pos=Z(0,e.pos-t),e._&&(e._.pos=e.pos),e},bck2:function(t){var e=this;return e.pos=Z(0,t),e._&&(e._.pos=e.pos),e},col:function(t){var e=this;return t=t||1,e.lCP<e.start&&(e.lCV=J(e.s,e.start,t,e.lCP,e.lCV),e.lCP=e.start,e._&&(e._.start=e.start,e._.lastColumnPos=e.lCP,e._.lastColumnValue=e.lCV,e._.lineStart=e.lS)),e.lCV-(e.lS?J(e.s,e.lS,t):0)},ind:function(t){var e=this;return t=t||1,J(e.s,null,t)-(e.lS?J(e.s,e.lS,t):0)},cur:function(t){var e=this,n=e.s.slice(e.start,e.pos);return t&&(e.start=e.pos),n},sft:function(){return this.start=this.pos,this}};var te=function(t){this._=t||[]};te[T]={constructor:te,_:null,toString:function(){var t=this._.slice();return t.reverse().join("\n")},clone:function(){return new te(this._.slice())},isEmpty:function(){return 0>=this._.length},pos:function(){return this._.length},peek:function(t){var e=this._;if(t="undefined"==typeof t?-1:t,e.length){if(0>t&&0<=e.length+t)return e[e.length+t];if(t>=0&&t<e.length)return e[t]}return null},pop:function(){return this._.pop()},shift:function(){return this._.shift()},push:function(t){return this._.push(t),this},unshift:function(t){return this._.unshift(t),this},pushAt:function(t,e,n,r){var l=this._;return n&&r&&(e[n]=r),t<l.length?l.splice(t,0,e):l.push(e),this},empty:function(t,e){{var n=this._;n.length}if(t&&e)for(;n.length&&n[n.length-1]&&n[n.length-1][t]==e;)n.pop();else n.length=0;return this}};var ee=function(t,e){var n=this;n.id=e?(new Date).getTime():0,n.l=t||0,n.stack=new te,n.data=new te,n.col=0,n.indent=0,n.t=null,n.inBlock=null,n.endBlock=null};ee[T]={constructor:ee,id:0,l:0,col:0,indent:0,stack:null,data:null,t:null,inBlock:null,endBlock:null,clone:function(t){var e=this,n=new ee(e.l,t);return n.t=e.t,n.col=e.col,n.indent=e.indent,n.stack=e.stack.clone(),n.data=e.data.clone(),n.inBlock=e.inBlock,n.endBlock=e.endBlock,n},toString:function(){var t=this;return["",t.id,t.l,t.t,t.inBlock||"0"].join("_")}};var ne=function(t,e){var n,r=this;return(n=t.chr(r.tp,e))?[r.tk,n]:!1},re=function(t,e){var n,r=this;return(n=t.chl(r.tp,e))?[r.tk,n]:!1},le=function(t,e){var n,r=this;return(n=t.str(r.tp,r.p,e))?[r.tk,n]:!1},oe=function(t,e){var n,r=this;return(n=t.rex(r.tp,r.p,r.np,r.tg,e))?[r.tk,n]:!1},ie=function(t,e){var n=this;return!1!==e&&t.end(),[n.tk,""]},se=function Te(t,e,n,r){var l=this;switch(l.$class=Te,l.mt=o,l.tt=t||H,l.tn=e,l.tk=r||0,l.tg=0,l.tp=null,l.p=null,l.np=null,l.tt){case H:case j:l.tp=n,l.get=j===l.tt?re:ne;break;case N:l.tp=n,l.p={},l.p[""+n.charAt(0)]=1,l.get=le;break;case V:l.tp=n[0],l.p=n[1].peek||null,l.np=n[1].negativepeek||null,l.tg=n[2]||0,l.get=oe;break;case G:l.tp=null,l.get=ie}};se[T]={constructor:se,$class:null,mt:null,tt:null,tn:null,tp:null,tg:0,tk:0,p:null,np:null,get:function(){return!1},toString:function(){return["[","Matcher: ",this.tn,", Pattern: ",this.tp?this.tp.toString():null,"]"].join("")}};var ue=function Be(t,e,n){var r=this;r.$class=Be,r.mt=s,r.tn=t,r.ms=e,r.ownKey=!1!==n};ue[T]=Merge(Extend(se[T]),{constructor:ue,ms:null,ownKey:!0,get:function(t,e){var n,r,l=this.ms,o=l.length,i=this.ownKey;for(n=0;o>n;n++)if(r=l[n].get(t,e))return i?[n,r[1]]:r;return!1}});var ce=function Oe(t,e,n){var r=this;r.$class=Oe,r.mt=u,r.tn=t,r.s=new ue(r.tn+"_Start",e,!1),r.e=n};ce[T]=Merge(Extend(se[T]),{constructor:ce,s:null,e:null,get:function(t,e){var n,r=this,l=r.s,o=r.e;if(n=l.get(t,e)){var i,s=o[n[0]],u=get_type(s),c=l.ms[n[0]].tt;return V==c&&(A==u?(i=n[1][s+1],s=new se(i.length>1?N:H,r.tn+"_End",i)):N==u&&(i=groupReplace(s,n[1]),s=new se(i.length>1?N:H,r.tn+"_End",i))),s}return!1}});var ae=function(t,e,n,r){var l=get_type(e);if(A==l)return e;if(!r[t]){n=n||0;var o,i=0;e&&e.isCharList&&(i=1,delete e.isCharList),o=G&l?new se(G,t,e,n):H==l?new se(H,t,e,n):N&l?i?new se(j,t,e,n):new se(N,t,e,n):Q&l?new se(V,t,e,n):e,r[t]=o}return r[t]},pe=function(t,e,n,r,l,o){if(!o[t]){var i,s,u,c,a,p,f,h=0,g=0,d=1;if(i=make_array(e),u=i.length,1==u)f=ae(t,getRegexp(i[0],n,l),0,o);else if(u>1){for(c=(u>>1)+1,s=0;c>=s;s++)a=get_type(i[s]),p=get_type(i[u-1-s]),(H!=a||H!=p)&&(d=0),Q&a||Q&p?h=1:(hasPrefix(i[s],n)||hasPrefix(i[u-1-s],n))&&(g=1);if(!d||r&&N&get_type(r))if(!r||h||g){for(s=0;u>s;s++)i[s]=Q&get_type(i[s])?pe(t+"_"+s,i[s],n,r,l,o):ae(t+"_"+s,getRegexp(i[s],n,l),s,o);f=u>1?new ue(t,i):i[0]}else f=ae(t,getCombinedRegexp(i,r),0,o);else i=i.slice().join(""),i.isCharList=1,f=ae(t,i,0,o)}o[t]=f}return o[t]},fe=function(t,e,n,r,l){if(!l[t]){var o,i,s,u,c,a,p;for(u=[],c=[],o=make_array_2(e),i=0,s=o.length;s>i;i++)a=ae(t+"_0_"+i,getRegexp(o[i][0],n,r),i,l),p=o[i].length>1?V!=a.tt||N!=get_type(o[i][1])||hasPrefix(o[i][1],n)?ae(t+"_1_"+i,getRegexp(o[i][1],n,r),i,l):o[i][1]:a,u.push(a),c.push(p);l[t]=new ce(t,u,c)}return l[t]},he=1,ge=2,de=function Pe(t,e,n){var r=this;r.$class=Pe,r.tt=t||c,r.id=e,r.tk=n,r.REQ=0,r.ERR=0,r.MTCH=0,r.CLONE=["tk"]};de[T]={constructor:de,$class:null,sID:null,id:null,tt:null,tk:null,ta:null,REQ:0,ERR:0,MTCH:0,CLONE:null,act:function(t,e){var n,r,l=this.ta||null,o=e.data;if(l)if(n=l[1],he===l[0]&&n)t&&(r=get_type(n),n=A==r?t[1][n]:groupReplace(n,t[1])),o.push(n);else if(ge===l[0])if(n){if(t&&(r=get_type(n),n=A==r?t[1][n]:groupReplace(n,t[1])),o.isEmpty()||n!=o.peek())return n;o.pop()}else o.length&&o.pop();return 0},get:function(t,e){var n=this,r=n.tm,l=n.tk,o=n.tt,i=n.id,s=null;if(n.MTCH=0,f==o)return n.ERR=0,n.REQ=0,!0;if(a==o){if(t.spc(),t.eol())return i}else if(p==o)n.ERR=n.REQ&&t.spc()&&!t.eol()?1:0,n.REQ=0;else if(s=l.get(t))return r&&(n.MTCH=n.act(s,e)),i;return!1},req:function(t){return this.REQ=t?1:0,this},err:function(){var t=this;return t.REQ?'Token "'+t.id+'" Expected':t.MTCH?'Token "'+t.MTCH+'" No Match':'Syntax Error: "'+t.id+'"'},clone:function(){var t,e,n,r=this,l=r.CLONE;if(t=new r.$class,t.tt=r.tt,t.id=r.id,t.tm=r.tm?r.tm.slice():r.tm,l&&l.length)for(e=0,n=l.length;n>e;e++)t[l[e]]=r[l[e]];return t},toString:function(){return["[","Tokenizer: ",this.id,", Matcher: ",this.tk?this.tk.toString():null,"]"].join("")}};var me=function De(t,e,n,r,l,o){var i=this;i.$class=De,i.tt=t,i.id=e,i.tk=n,i.REQ=0,i.ERR=0,i.MTCH=0,i.mline="undefined"==typeof r?1:r,i.esc=l||"\\",i.inter=o,i.CLONE=["tk","mline","esc","inter"]};me[T]=Merge(Extend(de[T]),{constructor:me,inter:0,mline:0,esc:null,get:function(t,e){var n,r,l,o,i,s,u,c,a,p=this,f=0,h=0,m="",k=p.mline,E=p.tk,v=p.id,_=p.tt,R=p.inter,y=R?v+".inside":v,C=0,x=g==_,b=p.esc;if(d===_&&(p.REQ=0),i=0,e.inBlock===v?(h=1,n=e.endBlock,i=1,s=y):!e.inBlock&&(n=E.get(t))&&(h=1,e.inBlock=v,e.endBlock=n,s=v),h){if(l=e.stack.pos(),o=G===n.tt,R){if(i&&o&&t.sol())return p.REQ=0,e.inBlock=null,e.endBlock=null,!1;if(!i)return e.stack.pushAt(l,p.clone(),"sID",v),s}if(f=n.get(t),r=k,a=0,f)s=o?y:v;else for(c=t.pos;!t.eol();){if(u=t.pos,!(x&&C||!n.get(t))){R&&t.pos>u&&u>c?(s=y,t.bck2(u),a=1):(s=v,f=1);break}m=t.nxt(),C=!C&&m==b}return r=k||x&&C,f||!r&&!a?(e.inBlock=null,e.endBlock=null):e.stack.pushAt(l,p.clone(),"sID",v),s}return!1}});var ke=function Ae(t,e,n,l,o){var i=this;i.$class=Ae,i.tt=t||E,i.id=e||null,i.tk=null,i.ts=null,i.min=l||0,i.max=o||r,i.found=0,i.CLONE=["ts","min","max","found"],n&&i.set(n)};ke[T]=Merge(Extend(de[T]),{constructor:ke,ts:null,min:0,max:1,found:0,set:function(t){return t&&(this.ts=make_array(t)),this},get:function(t,e){var n,r,l,o,i,s,u=this,c=u.ts,a=c.length,p=u.found,f=u.min,h=u.max,g=0;for(u.ERR=0,u.REQ=0,u.MTCH=0,o=t.pos,i=e.stack.pos(),s=u.id+"_"+getId(),n=0;a>n;n++){if(r=c[n].clone().req(1),l=r.get(t,e),!1!==l){if(++p,h>=p)return u.found=p,e.stack.pushAt(i,u.clone(),"sID",s),u.found=0,u.MTCH=r.MTCH,l;break}r.REQ&&g++,r.ERR&&t.bck2(o)}return u.REQ=f>p,u.ERR=p>h||f>p&&g>0,!1}});var Ee=function Ie(t,e,n){ke.call(this,t,e,n,1,1),this.$class=Ie};Ee[T]=Merge(Extend(ke[T]),{constructor:Ee,get:function(t,e){var n,r,l,o,i=this,s=i.ts,u=s.length,c=0,a=0;for(i.REQ=1,i.ERR=0,i.MTCH=0,o=t.pos,l=0;u>l;l++){if(r=s[l].clone().req(1),n=r.get(t,e),c+=r.REQ?1:0,!1!==n)return i.MTCH=r.MTCH,n;r.ERR&&(a++,t.bck2(o))}return i.REQ=c>0,i.ERR=u==a&&c>0,!1}});var ve=function Le(t,e,n){ke.call(this,t,e,n,1,1),this.$class=Le};ve[T]=Merge(Extend(ke[T]),{constructor:ve,get:function(t,e){var n,r,l,o,i,s=this,u=s.ts,c=u.length;if(s.REQ=1,s.ERR=0,s.MTCH=0,l=t.pos,o=e.stack.pos(),n=u[0].clone().req(1),r=n.get(t,e),i=s.id+"_"+getId(),!1!==r){if(!0!==r)for(var a=c-1;a>0;a--)e.stack.pushAt(o+c-a-1,u[a].clone().req(1),"sID",i);return s.MTCH=n.MTCH,r}return n.ERR?(s.ERR=1,t.bck2(l)):n.REQ&&(s.ERR=1),!1}});var _e=function(t,e,n){ke.call(this,t,e,n,1,1),this.$class=_e};_e[T]=Merge(Extend(ke[T]),{constructor:_e,get:function(t,e){var n,r,l,o,i,s,u=this,c=u.ts,a=c.length;if(u.REQ=0,u.ERR=0,u.MTCH=0,l=t.pos,o=e.stack.pos(),n=c[0].clone().req(0),r=n.get(t,e),i=u.id+"_"+getId(),!1!==r){if(!0!==r)for(s=a-1;s>0;s--)e.stack.pushAt(o+a-s-1,c[s].clone().req(1),"sID",i);return u.MTCH=n.MTCH,r}return n.ERR&&t.bck2(l),!1}});var Re=function(t,e,n,l,o,i,s,u,g,x,b){var S,T,B,O,P,D,A,I,L,H,j,$,q,V,G,K=null;if(null===t)return new de(a,"EOL",t);if(""===t)return new de(p,"NONSPACE",t);if(!1===t||0===t)return new de(f,"EMPTY",t);if(t=""+t,!u[t]&&(S=n[t]||l[t]||{type:"simple",tokens:t})){for((N|Q)&get_type(S)&&(S={type:"simple",tokens:S});S.extend;)V=S.extend,G=n[V]||l[V],delete S.extend,G&&((N|Q)&get_type(G)&&(G={type:"simple",tokens:G}),S=extend(G,S));if(T=S.type?M[S.type.toUpperCase().replace(/[\-_]/g,"")]:c,c&T){if(""===S.tokens)return K=new de(p,t,t),u[t]=K,K;if(null===S.tokens)return K=new de(a,t,t),u[t]=K,K;if(!1===S.tokens||0===S.tokens)return K=new de(f,t,t),u[t]=K,K}if(S.tokens=make_array(S.tokens),c&T)S.autocomplete&&Ce(S,t,b),O=null,S.push?O=[he,S.push]:"undefined"!=typeof S.pop&&(O=[ge,S.pop]),B="undefined"==typeof S.combine?"\\b":S.combine,K=new de(c,t,pe(t,S.tokens.slice(),e,B,i,s)),K.ta=O,u[t]=K;else if(h&T)d&T&&ye(S,x),K=new me(T,t,fe(t,S.tokens.slice(),e,i,s),S.multiline,S.escape,o[t+".inside"]?1:0),u[t]=K,S.interleave&&g.push(K.clone());else if(y&T){for(D=S.tokens.slice(),Q&get_type(S.match)?K=new ke(E,t,null,S.match[0],S.match[1]):(P=w[S.match.toUpperCase()],K=v===P?new ke(v,t,null,0,1):_===P?new ke(_,t,null,0,r):R===P?new ke(R,t,null,1,r):m&P?new Ee(m,t,null):new ve(k,t,null)),u[t]=K,A=[],H=0,j=D.length;j>H;H++)A=A.concat(Re(D[H],e,n,l,o,i,s,u,g,x,b));K.set(A)}else if(C&T){for(K=make_array_2(S.tokens.slice()).slice(),I=[],H=0,j=K.length;j>H;H++)I[H]=K[H].slice(),K[H]=new _e(C,t+"_NGRAM_"+H,null);for(u[t]=K,H=0,j=K.length;j>H;H++){for(L=I[H],A=[],$=0,q=L.length;q>$;$++)A=A.concat(Re(L[$],e,n,l,o,i,s,u,g,x,b));K[H].set(A)}}}return u[t]},ye=function(t,e){var n,r,o,s=make_array_2(t.tokens.slice());for(i=0,l=s.length;l>i;i++)n=s[i][0],r=s[i].length>1?s[i][1]:s[i][0],o=s[i].length>2?s[i][2]:"",null===r?(e.line=e.line||[],e.line.push(n)):(e.block=e.block||[],e.block.push([n,r,o]))},Ce=function(t,e,n){var r=[].concat(make_array(t.tokens)).map(function(t){return{word:t,meta:e}});n.autocomplete=(n.autocomplete||[]).concat(r)},xe=function(t){var e,n,r,l,o,i,s,u,c,a,p,f,h,g,d,m;if(t.__parsed)return t;for(p={},f={},h={},d={},m={},g=[],t=clone(t),e=t.RegExpID||null,t.RegExpID=null,delete t.RegExpID,i=t.Lex||{},t.Lex=null,delete t.Lex,s=t.Syntax||{},t.Syntax=null,delete t.Syntax,o=t.Style||{},l=t.Parser||[],r=l.length,n=[],u=0;r>u;u++)c=l[u],a=Re(c,e,i,s,o,p,f,h,g,d,m)||null,a&&(Q&get_type(a)?n=n.concat(a):n.push(a));return t.Parser=n,t.cTokens=g,t.Style=o,t.Comments=d,t.Keywords=m,t.Extra=t.Extra||{},t.__parsed=1,t},be=CodeMirror||{Pass:{toString:function(){return"CodeMirror.Pass"}}},we=function(t,e){var n=this;n.Extra=t.Extra||{},n.LC=t.Comments.line?t.Comments.line[0]:null,n.BCS=t.Comments.block?t.Comments.block[0][0]:null,n.BCE=t.Comments.block?t.Comments.block[0][1]:null,n.BCC=n.BCL=t.Comments.block?t.Comments.block[0][2]:null,n.DEF=e.DEFAULT,n.ERR=t.Style.error||e.ERROR,n.Keywords=t.Keywords.autocomplete||null,n.Tokens=t.Parser||[],n.cTokens=t.cTokens.length?t.cTokens:null,n.Style=t.Style};we[T]={constructor:we,Extra:null,LC:null,BCS:null,BCE:null,BCL:null,BCC:null,ERR:null,DEF:null,Keywords:null,cTokens:null,Tokens:null,Style:null,parse:function(t){t=t||"";var e,n,r,l,o=t.split(/\r\n|\r|\n/g),i=o.length,s=[];for(r=new ee,r.parseAll=1,e=0;i>e;e++){for(l=new X(o[e]),n=[];!l.eol();)n.push(this.getToken(l,r));s.push(n)}return s},getToken:function(t,e){var n,r,l,o,i,s,u=this,c=u.cTokens,f=u.Tokens,h=f.length,g=e.parseAll,d=u.Style,m=u.DEF,k=u.ERR;if(i=g?t:(new X).fromStream(t),s=e.stack,!s.isEmpty()&&a==s.peek().tt&&i.sol()&&s.pop(),(s.isEmpty()||p!=s.peek().tt)&&i.spc())return g?{value:i.cur(1),type:m,error:null}:e.t=m;for(;!s.isEmpty()&&!i.eol();){if(c)for(r=0;r<c.length;)if(l=c[r++],o=l.get(i,e),!1!==o)return o=d[o]||m,g?{value:i.cur(1),type:o,error:null}:e.t=o;if(l=s.pop(),o=l.get(i,e),!1!==o){if(!0!==o)return o=d[o]||m,l.MTCH?(s.empty("sID",l.sID),e.t=o=k,g?{value:i.cur(1),type:k,error:l.err()}:e.t=k):g?{value:i.cur(1),type:o,error:null}:e.t=o}else if(l.ERR||l.REQ)return s.empty("sID",l.sID),i.nxt(),e.t=o=k,g?{value:i.cur(1),type:k,error:l.err()}:e.t=k}for(n=0;h>n;n++)if(l=f[n],o=l.get(i,e),!1!==o){if(!0!==o)return o=d[o]||m,l.MTCH?(s.empty("sID",l.sID),e.t=o=k,g?{value:i.cur(1),type:k,error:l.err()}:e.t=k):g?{value:i.cur(1),type:o,error:null}:e.t=o}else if(l.ERR||l.REQ)return s.empty("sID",l.sID),i.nxt(),e.t=o=k,g?{value:i.cur(1),type:k,error:l.err()}:e.t=k;return i.nxt(),e.t=m,g?{value:i.cur(1),type:m,error:null}:e.t=m},indent:function(t,e,n,r){var l=(r.indentUnit||4,be.Pass);return l}};var Me=function(t){var e=function n(e,r){var l={startState:function(){return new ee},copyState:function(t){return t.clone()},token:function(e,n){return t.getToken(e,n)},indent:function(n,l,o){return t.indent(n,l,o,e,r)},validator:function(e){if(!n.supportGrammarAnnotations)return[];var r,l,o,i,s,u,c,a,p=0,f=e;if(!f||!f.length)return[];for(r=[],l=t.parse(f),u=l.length,c=0;u>c;c++)if(o=l[c],o&&o.length)for(a=0,s=0;s<o.length;s++)i=o[s],t.ERR==i.type&&(r.push({message:i.error||"Syntax Error",severity:"error",from:CodeMirror.Pos(c,a),to:CodeMirror.Pos(c,a+1)}),p=1),a+=i.value.length;return p?r:[]}};return l.lineComment=t.LC,l.blockCommentStart=t.BCS,l.blockCommentEnd=t.BCE,l.blockCommentContinue=t.BCC,l.blockCommentLead=t.BCL,l.electricChars=t.Extra.electricChars||!1,l.fold=t.Extra.fold||!1,l};return e},Se=function(t,r){var l={DEFAULT:r||e,ERROR:n};return t=xe(t),Me(new we(t,l))};e=null,n="error";t.CodeMirrorGrammar={VERSION:"0.11",extend:extend,parse:xe,getMode:Se};return t.CodeMirrorGrammar});