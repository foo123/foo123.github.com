/**
*
*   CodeMirrorGrammar
*   @version: 2.1.0
*
*   Transform a grammar specification in JSON format, into a syntax-highlight parser mode for CodeMirror
*   https://github.com/foo123/codemirror-grammar
*
**/!function(t,e,n){"use strict";var r,o="object"==typeof module&&module.exports,l="function"==typeof define&&define.amd;o?module.exports=(module.$deps=module.$deps||{})[e]=module.$deps[e]||n.call(t,{NODE:module})||1:l&&"function"==typeof require&&"function"==typeof require.specified&&require.specified(e)?define(e,["require","exports","module"],function(e,r,o){return n.call(t,{AMD:o})}):e in t||(t[e]=r=n.call(t,{})||1)&&l&&define(e,[],function(){return r})}(this,"CodeMirrorGrammar",function(t){"use strict";function e(t,e){var n=this,r=n.pattern,o=t.s.charAt(t.pos)||null;return o&&r===o?(!1!==e&&t.mov(1),[n.key,o]):!1}function n(t,e){var n=this,r=n.pattern,o=t.s.charAt(t.pos)||null;return o&&-1<r.indexOf(o)?(!1!==e&&t.mov(1),[n.key,o]):!1}function r(t,e){var n=this,r=n.pattern,o=r.length,l=t.s;return r===l.substr(t.pos,o)?(!1!==e&&t.mov(o),[n.key,r]):!1}function o(t,e){var n,r=this,o=r.pattern,l=t.s;return n=l.slice(t.pos).match(o[0]),!n||n.index>0?!1:(!1!==e&&t.mov(n[0].length),[r.key,n])}function l(t,e){var n=this;return!1!==e&&t.end(),[n.key,""]}function s(t,e,n,r){var o=Se(e);if(ae===o)return e;if(r[t])return r[t];n=n||0;var l,s=0;return e&&e.isCharList&&(s=1,delete e.isCharList),l=xe&o?new tn(t,e,xe,n):ge===o?new tn(t,e,ge,n):me&o?new tn(t,e,s?ke:me,n):(be|de)&o?new tn(t,e,be,n):e,r[t]=l}function u(t,e,n,r,o,l){if(l[t])return l[t];var i,c,a,p,f,h,m,g=0,k=0,d=1;if(i=Re(e),a=i.length,1===a)m=s(t,Ue(i[0],n,o),0,l);else if(a>1){for(p=(a>>1)+1,c=0;p>=c;c++)f=Se(i[c]),h=Se(i[a-1-c]),(ge!==f||ge!==h)&&(d=0),de&f||de&h?g=1:(Ge(i[c],n)||Ge(i[a-1-c],n))&&(k=1);if(!d||r&&me&Se(r))if(!r||g||k){for(c=0;a>c;c++)i[c]=de&Se(i[c])?u(t+"_"+c,i[c],n,r,o,l):s(t+"_"+c,Ue(i[c],n,o),c,l);m=a>1?new nn(t,i):i[0]}else m=s(t,Ke(i,r),0,l);else i=i.slice().join(""),i.isCharList=1,m=s(t,i,0,l)}return l[t]=m}function i(t,e,n,r,o){if(o[t])return o[t];var l,u,i,c,a,p,f;for(c=[],a=[],l=je(e),u=0,i=l.length;i>u;u++)p=s(t+"_0_"+u,Ue(l[u][0],n,r),u,o),f=l[u].length>1?be!==p.ptype||me!==Se(l[u][1])||Ge(l[u][1],n)?s(t+"_1_"+u,Ue(l[u][1],n,r),u,o):l[u][1]:p,c.push(p),a.push(f);return o[t]=new en(t,[c,a])}function c(t,e,n){var r,o,l,s,u,i,c,a,p,f,h,m;if(i=new String(Ne(t)),i.pos=0,1===i.length)f=""+t,e[f]||(e[f]={type:"simple",tokens:t}),t=f;else{for(r=[],o=[],l="",h=[];i.pos<i.length;)if(a=i.charAt(i.pos++),Ie.test(a))if(l.length&&("0"===l?o.push(0):(e[l]||n[l]||(e[l]={type:"simple",tokens:l}),o.push(l)),l=""),'"'===a||"'"===a){for(c=a,s="";i.pos<i.length&&c!==(a=i.charAt(i.pos++));)s+=a;s.length?(f=""+s,e[f]||(e[f]={type:"simple",tokens:s}),o.push(f)):o.push("")}else if("*"===a||"+"===a||"?"===a)p=o.pop(),f=""+p+a,n[f]||(n[f]={type:"group",match:"*"===a?"zeroOrMore":"+"===a?"oneOrMore":"zeroOrOne",tokens:[p]}),o.push(f);else if("{"===a){for(u="";i.pos<i.length&&"}"!==(a=i.charAt(i.pos++));)u+=a;u=u.split(",").map(Ne),u[0]=u[0].length?parseInt(u[0],10)||0:0,0>u[0]&&(u[0]=0),2>u.length?u.push(u[0]):u[1]=u[1].length?parseInt(u[1],10)||E:E,0>u[1]&&(u[1]=0),p=o.pop(),f=""+p+["{",u[0],",",isFinite(u[1])?u[1]:"","}"].join(""),n[f]||(n[f]={type:"group",match:[u[0],u[1]],tokens:[p]}),o.push(f)}else{if("}"===a)continue;if("["===a){for(s="";i.pos<i.length&&"]"!==(a=i.charAt(i.pos++));)s+=a;f="["+s+"]",e[f]||(e[f]={type:"simple",tokens:s.split("")}),o.push(f)}else{if("]"===a)continue;"|"===a?(o.length>1?(f=""+o.join(" "),n[f]||(n[f]={type:"group",match:"sequence",tokens:o}),r.push(f)):o.length&&r.push(o[0]),o=[]):"("===a?(h.push([o,r,l]),o=[],r=[],l=""):")"===a&&(o.length>1?(f=""+o.join(" "),n[f]||(n[f]={type:"group",match:"sequence",tokens:o}),r.push(f)):o.length&&r.push(o[0]),o=[],r.length>1?(f=""+r.join(" | "),n[f]||(n[f]={type:"group",match:"either",tokens:r})):r.length&&(f=r[0]),r=[],m=h.pop(),o=m[0],r=m[1],l=m[2],p=f,f="("+p+")",n[f]||(n[f]=Me(e[p]||n[p])),o.push(f))}}else l+=a;l.length&&(e[l]||n[l]||(e[l]={type:"simple",tokens:l}),o.push(l)),l="",o.length>1?(f=""+o.join(" "),n[f]||(n[f]={type:"group",match:"sequence",tokens:o}),r.push(f)):o.length&&r.push(o[0]),o=[],r.length>1?(f=""+r.join(" | "),n[f]||(n[f]={type:"group",match:"either",tokens:r}),t=f):r.length&&(t=r[0]),r=[]}return t}function a(t,e,n,r,o,l,s,h,m,g,k){var d,y,v,b,_,x,C,P,L,D,I,Z,te,oe,le,ue,ie,ce=null;if(ie=null,null===t)return new rn(N,"EOL",t,ie);if(""===t)return new rn(F,"NONSPACE",t,ie);if(!1===t||0===t)return new rn(V,"EMPTY",t,ie);if(de&Se(t)&&(ue=t,t="NGRAM_"+ue.join("_"),r[t]||(r[t]={type:"ngram",tokens:ue})),t=""+t,h[t])return h[t];for(n[t]?(d=n[t],we&Se(d)&&(d=n[t]={type:"simple",tokens:d})):d=r[t]?r[t]:t,me&Se(d)&&(d=c(d,n,r),d=n[d]||r[d]);d.extend;)oe=d.extend,le=n[oe]||r[oe],delete d.extend,le&&(we&Se(le)&&(le={type:"simple",tokens:le}),d=Te(le,d));if("undefined"==typeof d.type&&(d[se]("error")?(d.type="action",d.action=["error",d.error,!!d["in-context"]],delete d.error):d[se]("context-start")?(d.type="action",d.action=["context-start",d["context-start"],!!d["in-context"]],delete d["context-start"]):d[se]("context-end")?(d.type="action",d.action=["context-end",d["context-end"],!!d["in-context"]],delete d["context-end"]):d[se]("empty")?(d.type="action",d.action=["empty",d.empty,!!d["in-context"]],delete d.empty):d[se]("block-indent")?(d.type="action",d.action=["block-indent",d["block-indent"],!!d["in-context"]],delete d["block-indent"]):d[se]("indent")?(d.type="action",d.action=["indent",d.indent,!!d["in-context"]],delete d.indent):d[se]("outdent")?(d.type="action",d.action=["outdent",d.outdent,!!d["in-context"]],delete d.outdent):d[se]("unique")?(d.type="action",d.action=["unique",me&Se(d.unique)?["_DEFAULT_",d.unique]:d.unique,!!d["in-context"]],delete d.unique):d[se]("push")?(d.type="action",d.action=["push",d.push,!!d["in-context"]],delete d.push):d[se]("pop")?(d.type="action",d.action=["pop",d.pop,!!d["in-context"]],delete d.pop):d.sequence||d.all?(d.type="group",d.match="sequence",d.tokens=d.sequence||d.all,d.all?delete d.all:delete d.sequence):d.either?(d.type="group",d.match="either",d.tokens=d.either,delete d.either):d.zeroOrMore?(d.type="group",d.match="zeroOrMore",d.tokens=d.zeroOrMore,delete d.zeroOrMore):d.oneOrMore?(d.type="group",d.match="oneOrMore",d.tokens=d.oneOrMore,delete d.oneOrMore):d.zeroOrOne?(d.type="group",d.match="zeroOrOne",d.tokens=d.zeroOrOne,delete d.zeroOrOne):d.comment?(d.type="comment",d.tokens=d.comment,delete d.comment):d.block?(d.type="block",d.tokens=d.block,delete d.block):d["escaped-block"]?(d.type="escaped-block",d.tokens=d["escaped-block"],delete d["escaped-block"]):d.simple?(d.type="simple",d.tokens=d.simple,delete d.simple):d.type="simple"),y=d.type?re[d.type.toUpperCase().replace(ze,"")]:B,ie=d.msg||null,B&y){if(""===d.tokens)return ce=new rn(F,t,t,ie),h[t]=ce,ce;if(null===d.tokens)return ce=new rn(N,t,t,ie),h[t]=ce,ce;if(!1===d.tokens||0===d.tokens)return ce=new rn(V,t,t,ie),h[t]=ce,ce}if(ee&y||(d.tokens=Re(d.tokens)),ee&y)d[se]("action")?"error"===d.action[0]?d.action[0]=w:"context-start"===d.action[0]?d.action[0]=M:"context-end"===d.action[0]?d.action[0]=T:"empty"===d.action[0]?d.action[0]=A:"block-indent"===d.action[0]?d.action[0]=j:"indent"===d.action[0]?d.action[0]=q:"outdent"===d.action[0]?d.action[0]=R:"unique"===d.action[0]?d.action[0]=O:"push"===d.action[0]?d.action[0]=S:"pop"===d.action[0]&&(d.action[0]=$):d[se]("error")?d.action=[w,d.error,!!d["in-context"]]:d[se]("context-start")?d.action=[M,d["context-start"],!!d["in-context"]]:d[se]("context-end")?d.action=[T,d["context-end"],!!d["in-context"]]:d[se]("empty")?d.action=[A,d.empty,!!d["in-context"]]:d[se]("block-indent")?d.action=[j,d["block-indent"],!!d["in-context"]]:d[se]("indent")?d.action=[q,d.indent,!!d["in-context"]]:d[se]("outdent")?d.action=[R,d.outdent,!!d["in-context"]]:d[se]("unique")?d.action=[O,me&Se(d.unique)?["_DEFAULT_",d.unique]:d.unique,!!d["in-context"]]:d[se]("push")?d.action=[S,d.push,!!d["in-context"]]:d[se]("pop")&&(d.action=[$,d.pop,!!d["in-context"]]),b=d.action.slice(),ce=new on(ee,t,b,ie),h[t]=ce;else if(B&y)d.autocomplete&&f(d,t,k),v="undefined"==typeof d.combine?"\\b":d.combine,ce=new rn(B,t,u(t,d.tokens.slice(),e,v,l,s),ie),h[t]=ce;else if(z&y)G&y&&p(d,g),ce=new ln(y,t,i(t,d.tokens.slice(),e,l,s),ie,d.multiline,d.escape,o[t+".inside"]?1:0),h[t]=ce,d.interleave&&m.push(ce.clone());else if(W&y){for(x=d.tokens.slice(),de&Se(d.match)?ce=new sn(H,t,null,ie,d.match[0],d.match[1]):(_=ne[d.match.toUpperCase()],ce=Q===_?new sn(Q,t,null,ie,0,1):Y===_?new sn(Y,t,null,ie,0,E):J===_?new sn(J,t,null,ie,1,E):U&_?new sn(U,t,null,ie):new sn(K,t,null,ie)),h[t]=ce,C=[],D=0,I=x.length;I>D;D++)C=C.concat(a(x[D],e,n,r,o,l,s,h,m,g,k));ce.set(C)}else if(X&y){for(ce=je(d.tokens.slice()).slice(),P=[],D=0,I=ce.length;I>D;D++)P[D]=ce[D].slice(),ce[D]=new sn(X,t+"_NGRAM_"+D,null,ie);for(h[t]=ce,D=0,I=ce.length;I>D;D++){for(L=P[D],C=[],Z=0,te=L.length;te>Z;Z++)C=C.concat(a(L[Z],e,n,r,o,l,s,h,m,g,k));ce[D].set(C)}}return h[t]}function p(t,e){var n,r,o,l,s,u=je(t.tokens.slice());for(l=0,s=u.length;s>l;l++)n=u[l][0],r=u[l].length>1?u[l][1]:u[l][0],o=u[l].length>2?u[l][2]:"",null===r?(e.line=e.line||[],e.line.push(n)):(e.block=e.block||[],e.block.push([n,r,o]))}function f(t,e,n){var r=[].concat(Re(t.tokens)).map(function(t){return{word:t,meta:e}});n.autocomplete=(n.autocomplete||[]).concat(r)}function h(t){var e,n,r,o,l,s,u,i,c,p,f,h,m,g,k,d;if(t.__parsed)return t;for(f={},h={},m={},k={},d={},g=[],t=Me(t),e=t.RegExpID||null,t.RegExpID=null,delete t.RegExpID,s=t.Lex||{},t.Lex=null,delete t.Lex,u=t.Syntax||{},t.Syntax=null,delete t.Syntax,l=t.Style||{},o=t.Parser||[],r=o.length,n=[],i=0;r>i;i++)c=o[i],p=a(c,e,s,u,l,f,h,m,g,k,d)||null,p&&(de&Se(p)?n=n.concat(p):n.push(p));return t.Parser=n,t.cTokens=g,t.Style=l,t.Comments=k,t.Keywords=d,t.Extra=t.Extra||{},t.__parsed=1,t}function m(t,e){var n=new pn(h(t),{DEFAULT:e||g,ERROR:k}),r=function(t,e){return{startState:function(){return new cn},copyState:function(t){return t=t.clone(),t.line++,t},token:function(t,e){return n.getToken(t,e)},indent:function(r,o,l){return n.indent(r,o,l,t,e)},lineComment:n.LC,blockCommentStart:n.BCS,blockCommentEnd:n.BCE,blockCommentContinue:n.BCC,blockCommentLead:n.BCL,electricChars:n.Extra.electricChars||!1,fold:n.Extra.fold||!1}};return r.supportGrammarAnnotations=!1,r.validator=function(t){if(!r.supportGrammarAnnotations||!t||!t.length)return[];var e,o,l=[],s=n.parse(t,y);if(!s)return l;for(e in s)s.hasOwnProperty(e)&&(o=s[e],l.push({message:o[4]||"Syntax Error",severity:"error",from:CodeMirror.Pos(o[0],o[1]),to:CodeMirror.Pos(o[2],o[3])}));return l},r}var g,k,d=1,y=2,v=4,b=8,_=~v,x=~b,C=v|b,E=1/0,w=4,O=8,S=16,$=32,A=64,q=128,R=256,j=512,M=1024,T=2048,P=2,L=4,D=8,B=16,N=17,F=18,V=20,z=32,I=33,G=34,U=64,K=128,Z=K,H=256,Q=257,Y=258,J=259,W=512,X=1024,te=K|X,ee=2048,ne={EITHER:U,ALL:Z,SEQUENCE:K,ZEROORONE:Q,ZEROORMORE:Y,ONEORMORE:J,REPEATED:H},re={ACTION:ee,BLOCK:z,COMMENT:G,ESCAPEDBLOCK:I,SIMPLE:B,GROUP:W,NGRAM:X},oe=void 0,le="prototype",se="hasOwnProperty",ue="propertyIsEnumerable",ie=(Object.keys,Array[le],Object[le]),ce=(Function[le],ie.toString),ae=4,pe=5,fe=6,he=8,me=16,ge=17,ke=18,de=32,ye=64,ve=128,be=256,_e=512,xe=1024,Ce=2048,Ee=4096,we=me|de,Oe={"[object Number]":ae,"[object String]":me,"[object Array]":de,"[object RegExp]":be,"[object Date]":_e,"[object Function]":ve,"[object Object]":ye},Se=function(t){if(null===t)return xe;if(!0===t||!1===t||t instanceof Boolean)return he;if(oe===t)return Ce;var e=Oe[ce.call(t)]||Ee;return ae===e||t instanceof Number?isNaN(t)?fe:isFinite(t)?ae:pe:me===e||t instanceof String?1===t.length?ge:me:de===e||t instanceof Array?de:be===e||t instanceof RegExp?be:_e===e||t instanceof Date?_e:ve===e||t instanceof Function?ve:ye===e?ye:Ee},$e=function(){var t,e,n,r,o,l,s=arguments,u=s.length;for(t=s[0]||{},o=1;u>o;o++)if(e=s[o],ye===Se(e))for(r in e)e[se](r)&&e[ue](r)&&(n=e[r],l=Se(n),t[r]=ae&l?0+n:_e&l?new Date(n):we&l?n.slice():n);return t},Ae=Object.create,qe=function(t,e){var n,r=arguments.length,o="constructor";return 0===r?(t=Object,e={}):1===r?(e=t||{},t=Object):(t=t||Object,e=e||{}),e[se](o)||(e[o]=function(){}),n=e[o],delete e[o],n[le]=$e(Ae(t[le]),e),n[le][o]=n,n},Re=function(t,e){return e||de!==Se(t)?[t]:t},je=function(t,e){return t=Re(t),(e||de!==Se(t[0]))&&(t=[t]),t},Me=function(t,e){var n,r,o,l,s=Se(t),u=0;if(ae===Se(e)?e>0?(u=e,e=!0):e=!1:e=!1!==e,ye===s){r={};for(o in t)t[se](o)&&t[ue](o)&&(n=Se(t[o]),r[o]=ye===n?e?Me(t[o],u>0?u-1:e):t[o]:de===n?e?Me(t[o],u>0?u-1:e):t[o].slice():_e&n?new Date(t[o]):me&n?t[o].slice():ae&n?0+t[o]:t[o])}else if(de===s)for(l=t.length,r=new Array(l),o=0;l>o;o++)n=Se(t[o]),r[o]=ye===n?e?Me(t[o],u>0?u-1:e):t[o]:de===n?e?Me(t[o],u>0?u-1:e):t[o].slice():_e&n?new Date(t[o]):me&n?t[o].slice():ae&n?0+t[o]:t[o];else r=_e&s?new Date(t):me&s?t.slice():ae&s?0+t:t;return r},Te=function(){var t,e,n,r,o,l,s,u,i,c,a=arguments,p=a.length;if(1>p)return null;for(e=Me(a[0]),n=1;p>n;n++)if(t=a[n])for(r in t)if(t[se](r)&&t[ue](r))if(e[se](r)&&e[ue](r)){if(i=Se(e[r]),c=Se(t[r]),ye===i&&ye===c)e[r]=Te(e[r],t[r]);else if(de===i&&de===c){if(s=e[r],u=t[r],l=u.length,!l)continue;if(s.length)for(o=0;l>o;o++)0>s.indexOf(u[o])&&s.push(u[o]);else e[r]=u.slice()}}else e[r]=Me(t[r]);return e},Pe=/([.*+?^${}()|[\]\/\\\-])/g,Le=function(t){return t.replace(Pe,"\\$1")},De=function(t,e,n){var r,o,l,s,u,i=!0===n?0:1;for(me&Se(e)&&(e=[e,e],i=0),o=t.length,u="",r=0;o>r;)l=t.charAt(r),o>r+1&&"$"===l?(s=t.charCodeAt(r+1),36===s?(u+="$",r+=2):s>=48&&57>=s?(u+=e[i+s-48]||"",r+=2):(u+=l,r+=1)):(u+=l,r+=1);return u},Be=/^\s+|\s+$/g,Ne=String[le].trim?function(t){return t.trim()}:function(t){return t.replace(Be,"")},Fe=function(t,e){return e.length-t.length},Ve=/\r\n|\r|\n/g,ze=/[\-_]/g,Ie=/^([\[\]{}()*+?|'"]|\s)/,Ge=function(t,e){return me&Se(e)&&me&Se(t)&&e.length&&e.length<=t.length&&e==t.substr(0,e.length)},Ue=function(t,e,n){if(!t||ae===Se(t))return t;var r,o=e?e.length||0:0;if(o&&e===t.substr(0,o)){var l,s,u,r,i,c=t.substr(o),a=c.charAt(0),p="";for(r=c.length;r--&&(i=c.charAt(r),a!==i);)"i"===i.toLowerCase()&&(p="i");return l=c.substring(1,r),s="^("+l+")",n[s]||(u=new RegExp(s,p),n[s]=u),n[s]}return t},Ke=function(t,e){var n,r="";return me&Se(e)&&(r=e),n=t.sort(Fe).map(Le).join("|"),[new RegExp("^("+n+")"+r),1]},Ze=0,He=function(){return++Ze},Qe=function(t){return[t||"uuid",++Ze,(new Date).getTime()].join("_")},Ye=Math.max,Je=/^[\s\u00a0]+/,We=/[^\s\u00a0]/,Xe=qe({constructor:function(t){var e=this;e._=null,e.s=t?""+t:"",e.start=e.pos=0,e.lCP=e.lCV=0,e.lS=0},_:null,s:"",start:0,pos:0,lCP:0,lCV:0,lS:0,dispose:function(){var t=this;return t._=null,t.s=null,t.start=null,t.pos=null,t.lCP=null,t.lCV=null,t.lS=null,t},toString:function(){return this.s},sol:function(){return 0===this.pos},eol:function(){return this.pos>=this.s.length},end:function(){var t=this;return t.pos=t.s.length,t},mov:function(t){var e=this;return 0>t?e.pos=Ye(0,e.pos-t):e.pos+=t,e},bck:function(t){var e=this;return e.pos=Ye(0,t),e},sft:function(){var t=this;return t.start=t.pos,t},nxt:function(){var t,e=this,n=e.s;return e.pos<n.length?t=n.charAt(e.pos++)||null:void 0},cur:function(t){var e=this,n=e.s.slice(e.start,e.pos);return t&&(e.start=e.pos),n},upd:function(){var t=this;return t._&&(t._.pos=t.pos),t},spc:function(t){var e,n=this,r=n.pos,o=n.s.slice(r);return(e=o.match(Je))?(!1!==t&&n.mov(e[0].length),1):0},col:function(t){var e=this;return t=t||1,e.lCP<e.start&&(e.lCV=Xe.col(e.s,e.start,t,e.lCP,e.lCV),e.lCP=e.start,e._&&(e._.start=e.start,e._.lastColumnPos=e.lCP,e._.lastColumnValue=e.lCV,e._.lineStart=e.lS)),e.lCV-(e.lS?Xe.col(e.s,e.lS,t):0)},ind:function(t){var e=this;return t=t||1,Xe.col(e.s,null,t)-(e.lS?Xe.col(e.s,e.lS,t):0)}});Xe.col=function(t,e,n,r,o){var l,s;for(null===e&&(e=t.search(We),-1==e&&(e=t.length)),l=r||0,s=o||0;e>l;++l)s+="	"==t.charAt(l)?n-s%n:1;return s},Xe._=function(t){var e=new Xe;return e._=t,e.s=""+t.string,e.start=t.start,e.pos=t.pos,e.lCP=t.lastColumnPos,e.lCV=t.lastColumnValue,e.lS=t.lineStart,e};var tn,en,nn,rn,on,ln,sn,un=qe({constructor:function(t){this._=t||[]},_:null,dispose:function(){var t=this;return t._=null,t},toString:function(){return this._.slice().reverse().join("\n")},clone:function(){return new un(this._.slice())},isEmpty:function(){return 0>=this._.length},pos:function(){return this._.length},peek:function(t){var e=this,n=e._;if(t=arguments.length?t:-1,n.length){if(0>t&&0<=n.length+t)return n[n.length+t];if(t>=0&&t<n.length)return n[t]}return null},pop:function(){return this._.pop()},shift:function(){return this._.shift()},push:function(t){var e=this;return e._.push(t),e},unshift:function(t){var e=this;return e._.unshift(t),e},pushAt:function(t,e,n,r){var o=this,l=o._;return n&&r&&(e[n]=r),t<l.length?l.splice(t,0,e):l.push(e),o},empty:function(t,e){var n=this,r=n._;if(t&&e)for(;r.length&&r[r.length-1]&&r[r.length-1][t]===e;)r.pop();else r.length=0;return n}}),cn=qe({constructor:function fn(t,e,n){var r=this;r.id=e?Qe("state"):"state",t instanceof fn?(r.line=t.line,r.column=t.column,r.indent=t.indent,r.stack=t.stack.clone(),r.queu=t.queu.slice(),r.symb=Me(t.symb,1),r.ctx=t.ctx.slice(),r.token=t.token,r.block=t.block,r.errors=t.errors,r.err=t.err):(r.line=t||0,r.column=0,r.indent=null,r.token=null,r.block=null,r.stack=new un,r.queu=[],r.symb={},r.ctx=[],r.errors=!!n,r.err=r.errors?{}:null)},id:null,line:0,column:0,indent:0,stack:null,queu:null,symb:null,ctx:null,err:null,errors:!1,token:null,block:null,dispose:function(){var t=this;return t.id=null,t.line=null,t.column=null,t.indent=null,t.token=null,t.block=null,t.symb=null,t.ctx=null,t.errors=null,t.err=null,t.queu=null,t.stack&&t.stack.dispose(),t.stack=null,t},clone:function(t){return new cn(this,t)},toString:function(){var t=this;return["",t.id,t.line,t.token?t.token.name:"0",t.block?t.block.name:"0"].join("_")}});tn=qe({constructor:function(t,s,u,i){var c=this;switch(c.type=P,c.name=t,c.pattern=null,c.ptype=u||me,c.key=i||0,c.ptype){case xe:c.pattern=null,c.match=l;break;case be:c.pattern=be&Se(s)?[s,0]:[s[0],s[1]||0],c.match=o;break;case ge:case ke:c.pattern=s,c.match=ke===c.ptype?n:e;break;case me:default:c.pattern=s,c.match=r}},type:null,name:null,pattern:null,ptype:null,key:0,dispose:function(){var t=this;return t.type=null,t.name=null,t.pattern=null,t.ptype=null,t.key=null,t},match:function(){return!1},toString:function(){var t=this;return["[","Pattern: ",t.name,", ",t.pattern?t.pattern.toString():null,"]"].join("")}}),nn=qe(tn,{constructor:function(t,e,n){var r=this;r.type=L,r.name=t,r.pattern=e,r.key=!1!==n},match:function(t,e){var n,r,o=this,l=o.pattern,s=l.length,u=o.key;for(n=0;s>n;n++)if(r=l[n].match(t,e))return u?[n,r[1]]:r;return!1}}),en=qe(tn,{constructor:function(t,e){var n=this;n.type=D,n.name=t,n.pattern=e,n.pattern[0]=new nn(n.name+"_Start",n.pattern[0],!1)},match:function(t,e){var n,r,o,l,s,u=this,i=u.pattern,c=i[0],a=i[1];return(r=c.match(t,e))?(n=a[r[0]],l=Se(n),s=c.pattern[r[0]].ptype,be===s&&(ae===l?(o=r[1][n+1],n=new tn(u.name+"_End",o,o.length>1?me:ge)):me===l&&(o=De(n,r[1]),n=new tn(u.name+"_End",o,o.length>1?me:ge))),n):!1}}),rn=qe({constructor:function(t,e,n,r){var o=this;o.type=t||B,o.name=e,o.token=n,o.status=0,o.msg=r||null,o.$msg=null,o.$clone=null},name:null,type:null,token:null,status:0,msg:null,$msg:null,$clone:null,$id:null,dispose:function(){var t=this;return t.type=null,t.name=null,t.token=null,t.status=null,t.msg=null,t.$msg=null,t.$clone=null,t.$id=null,t},clone:function(){var t,e,n,r=this,o=r.$clone;if(t=new r.constructor,t.type=r.type,t.name=r.name,t.token=r.token,t.msg=r.msg,o&&o.length)for(e=0,n=o.length;n>e;e++)t[o[e]]=r[o[e]];return t},get:function(t,e){var n=this,r=n.token,o=n.type,l=n.name,s=null;if(n.$msg=null,e.token=null,V===o)return n.status=0,!0;if(N===o){if(t.spc(),t.eol())return l}else if(F===o)n.status&v&&t.spc()&&!t.eol()&&(n.status|=b),n.status&=_;else if(s=r.match(t))return e.token={name:l,value:t.cur(),token:s[1]},l;return!1},req:function(t){var e=this;return t?e.status|=v:e.status&=_,e},err:function(t,e,n,r,o){var l,s=this,u=s.name;return l=s.$msg?s.$msg:s.status&v?'Token "'+u+'" Expected':'Syntax Error: "'+u+'"',t&&t.errors&&(t.err[e+"_"+n+"_"+r+"_"+o+"_"+u]=[e,n,r,o,l]),l},toString:function(){var t=this;return["[","Token: ",t.name,", ",t.token?t.token.toString():null,"]"].join("")}}),on=qe(rn,{constructor:function(t,e,n,r){var o=this;o.type=t||ee,o.name=e,o.token=n,o.status=0,o.msg=r||null,o.$msg=null,o.$clone=null},get:function(t,e){var n,r,o,l,s,u,i,c,a,p,f,h=this,m=h.token||null,g=e.queu,k=e.symb,d=e.ctx,y=e.token,v=e.err,_=e.errors;if(h.status=0,h.$msg=null,m){if(s=h.msg,n=m[0],r=m[1],a=!!m[2],u=e.line,c=t.pos,i=y&&y.value?c-y.value.length:i-1,w===n)return _&&(h.$msg=s?s:"Error",p=u+"_"+i+"_"+u+"_"+c+"_"+h.name,v[p]=[u,i,u,c,h.err()]),h.status|=b,!1;if(A===n)a?d.length&&(d[0].queu.length=0):g.length=0;else if(M===n)d.unshift({symb:{},queu:[]});else if(T===n)d.length&&d.shift();else if(O===n){if(a){if(!d.length)return!0;k=d[0].symb}if(y){if(o=r[1],l=r[0],o=ae===Se(o)?y.token[o]:De(o,y.token,!0),k[se](l)||(k[l]={}),k[l][se](o))return _&&(h.$msg=s?De(s,o,!0):'Duplicate "'+o+'"',f=h.err(),p=k[l][o][0]+"_"+k[l][o][1]+"_"+k[l][o][2]+"_"+k[l][o][3]+"_"+h.name,v[p]=[k[l][o][0],k[l][o][1],k[l][o][2],k[l][o][3],f],p=u+"_"+i+"_"+u+"_"+c+"_"+h.name,v[p]=[u,i,u,c,f]),h.status|=b,!1;k[l][o]=[u,i,u,c]}}else if($===n){if(a){if(!d.length)return!0;g=d[0].queu}if(r){if(y&&(r=ae===Se(r)?y.token[r]:De(r,y.token)),!g.length||r!==g[0][0])return _&&(g.length?(h.$msg=s?De(s,[g[0][0],r],!0):'Tokens do not match "'+g[0][0]+'","'+r+'"',f=h.err(),p=g[0][1]+"_"+g[0][2]+"_"+g[0][3]+"_"+g[0][4]+"_"+h.name,v[p]=[g[0][1],g[0][2],g[0][3],g[0][4],f],p=u+"_"+i+"_"+u+"_"+c+"_"+h.name,v[p]=[u,i,u,c,f]):(h.$msg=s?De(s,["",r],!0):'Token does not match "'+r+'"',f=h.err(),p=u+"_"+i+"_"+u+"_"+c+"_"+h.name,v[p]=[u,i,u,c,f])),g.shift(),h.status|=b,!1;g.shift()}else g.shift()}else if(S===n&&r){if(a){if(!d.length)return!0;g=d[0].queu}y&&(r=ae===Se(r)?y.token[r]:De(r,y.token)),g.unshift([r,u,i,u,c])}}return!0}}),ln=qe(rn,{constructor:function(t,e,n,r,o,l,s){var u=this;u.type=t,u.name=e,u.token=n,u.status=0,u.msg=r||null,u.mline="undefined"==typeof o?1:o,u.esc=l||"\\",u.inter=s,u.$msg=null,u.$clone=["mline","esc","inter"]},inter:0,mline:0,esc:null,get:function(t,e){var n,r,o,l,s,u,i,c,a,p,f,h,m,g,k=this,d=0,y=0,v="",b=k.mline,x=k.token,C=k.name,E=k.type,w=k.inter,O=w?C+".inside":C,S=0,$=I===E,A=k.esc,q="",R="",j="",M="",T=e.stack;if(k.$msg=k.msg||null,m=e.line,g=t.pos,G===E&&(k.status&=_),s=0,e.block&&e.block.name===C?(y=1,n=e.block.end,s=1,u=O,p=e.block.s,h=e.block.i,f=e.block.e,q=e.block._s,R=e.block._i,M=""):!e.block&&(n=x.match(t))&&(y=1,p=[m,g],h=[[m,t.pos],[m,t.pos]],f=[m,t.pos],q=t.cur(),R="",M="",j="",e.block={name:C,end:n,s:p,i:h,e:f,_s:q,_i:R,_e:j},u=C),y){if(o=T.pos(),l=xe===n.type,w){if(s&&l&&t.sol())return k.status&=_,e.current=null,e.block=null,!1;if(!s)return T.pushAt(o,k.clone(),"$id",C),u}if(d=n.match(t),r=b,a=0,d)u=l?O:C,j=t.cur().slice(M.length);else for(c=t.pos;!t.eol();){if(i=t.pos,!($&&S||!n.match(t))){w&&t.pos>i&&i>c?(u=O,t.bck(i),a=1):(u=C,d=1),j=t.cur().slice(M.length);break}v=t.nxt(),M+=v,S=!S&&v===A}return r=b||$&&S,h[1]=[m,i],f=[m,t.pos],d||!r&&!a?e.block=null:(e.block.i=h,e.block.e=f,e.block._i+=M,e.block._e=j,e.stack.pushAt(o,k.clone(),"$id",C)),e.token={name:C,value:t.cur(),token:[q+R+M+j,R+M]},u}return!1}}),sn=qe(rn,{constructor:function(t,e,n,r,o,l){var s=this;s.type=t?t:H,s.name=e||null,s.token=null,s.status=0,s.msg=r||null,s.min=o||0,s.max=l||E,s.found=0,s.$msg=null,s.$clone=["min","max","found"],n&&s.set(n)},min:0,max:1,found:0,set:function(t){return t&&(this.token=Re(t)),this},get:function(t,e){var n,r,o,l,s,u,i,c,a,p,f,h,m,g,k=this,d=k.type,y=k.token,C=y.length;if(k.$msg=k.msg||null,k.status&=x,f=t.pos,l=e.stack,U===d){for(a=0,p=0,k.status|=v,s=[],n=0;C>n;n++){if(r=y[n].clone().req(1),o=r.get(t,e),r.status&v&&(a++,s.push(r.err())),!1!==o)return o;r.status&b&&(p++,t.bck(f))}return a>0?k.status|=v:k.status&=_,C===p&&a>0?k.status|=b:k.status&=x,k.status&&!k.$msg&&s.length&&(k.$msg=s.join(" | ")),!1}if(te&d){if(g=d&K?1:0,g?k.status|=v:k.status&=_,h=l.pos(),r=y[0].clone().req(g),o=r.get(t,e),m=k.name+"_"+He(),!1!==o){if(!0!==o)for(n=C-1;n>0;n--)l.pushAt(h+C-n-1,y[n].clone().req(1),"$id",m);return o}return r.status&b?(g?k.status|=b:k.status&=x,t.bck(f)):g&&r.status&v&&(k.status|=b),k.status&&!k.$msg&&(k.$msg=r.err()),!1}for(a=0,u=k.found,i=k.min,c=k.max,k.status&=_,h=l.pos(),m=k.name+"_"+He(),s=[],n=0;C>n;n++){if(r=y[n].clone().req(1),o=r.get(t,e),!1!==o){if(++u,c>=u)return k.found=u,l.pushAt(h,k.clone(),"$id",m),k.found=0,o;break}r.status&v&&(a++,s.push(r.err())),r.status&b&&t.bck(f)}return i>u?k.status|=v:k.status&=_,u>c||i>u&&a>0?k.status|=b:k.status&=x,k.status&&!k.$msg&&s.length&&(k.$msg=s.join(" | ")),!1}});var an=CodeMirror||{Pass:{toString:function(){return"CodeMirror.Pass"}}};g=null,k="error";{var pn=qe({constructor:function(t,e){var n=this;n.Extra=t.Extra||{},n.LC=t.Comments.line?t.Comments.line[0]:null,n.BCS=t.Comments.block?t.Comments.block[0][0]:null,n.BCE=t.Comments.block?t.Comments.block[0][1]:null,n.BCC=n.BCL=t.Comments.block?t.Comments.block[0][2]:null,n.DEF=e.DEFAULT,n.ERR=t.Style.error||e.ERROR,n.Keywords=t.Keywords.autocomplete||null,n.Tokens=t.Parser||[],n.cTokens=t.cTokens.length?t.cTokens:null,n.Style=t.Style},Extra:null,LC:null,BCS:null,BCE:null,BCL:null,BCC:null,ERR:null,DEF:null,Keywords:null,cTokens:null,Tokens:null,Style:null,dispose:function(){var t=this;return t.Extra=null,t.LC=null,t.BCS=null,t.BCE=null,t.BCL=null,t.BCC=null,t.ERR=null,t.DEF=null,t.Keywords=null,t.cTokens=null,t.Tokens=null,t.Style=null,t},parse:function(t,e){t=t||"";var n,r,o,l,s,u,i,c,a=this,p=t.split(Ve),f=p.length;if(e=e||d,i=!!(e&y),c=!!(e&d),l=new cn(0,0,i),l.parseAll=1,c)for(r=[],n=0;f>n;n++){for(l.line=n,s=new Xe(p[n]),o=[];!s.eol();)o.push(a.getToken(s,l));r.push(o)}else for(n=0;f>n;n++)for(l.line=n,s=new Xe(p[n]);!s.eol();)a.getToken(s,l);return u=c&&i?{tokens:r,errors:l.err}:c?r:l.err,s.dispose(),l.dispose(),u},getToken:function(t,e){var n,r,o,l,s,u,i,c,a=this,p=a.cTokens,f=a.Tokens,h=f.length,m=!!e.parseAll,g=a.Style,k=a.DEF,d=a.ERR;if(t=m?t:Xe._(t),u=e.stack,t.sol()&&!u.isEmpty()&&N===u.peek().type&&u.pop(),(u.isEmpty()||F!==u.peek().type)&&t.spc())return m?{value:t.cur(1),type:k}:t.upd()&&k;for(c=e.line;!u.isEmpty()&&!t.eol();){if(p)for(r=0;r<p.length;)if(l=p[r++],o=l.get(t,e),!1!==o)return o=g[o]||k,m?{value:t.cur(1),type:o}:t.upd()&&o;if(i=t.pos,l=u.pop(),o=l.get(t,e),!1!==o){if(!0!==o){for(o=g[o]||k;!u.isEmpty()&&ee===u.peek().type;)s=u.pop(),s.get(t,e);return m?{value:t.cur(1),type:o}:t.upd()&&o}}else if(l.status&C)return u.empty("$id",l.$id),t.nxt(),o=d,l.err(e,c,i,c,t.pos),m?{value:t.cur(1),type:o}:t.upd()&&o}for(n=0;h>n;n++)if(i=t.pos,l=f[n],o=l.get(t,e),!1!==o){if(!0!==o){for(o=g[o]||k;!u.isEmpty()&&ee===u.peek().type;)s=u.pop(),s.get(t,e);return m?{value:t.cur(1),type:o}:t.upd()&&o}}else if(l.status&C)return u.empty("$id",l.$id),t.nxt(),o=d,l.err(e,c,i,c,t.pos),m?{value:t.cur(1),type:o}:t.upd()&&o;return t.nxt(),m?{value:t.cur(1),type:k}:t.upd()&&k},indent:function(t,e,n,r){var o=(r.indentUnit||4,an.Pass);return o}});t.CodeMirrorGrammar={VERSION:"2.1.0",clone:Me,extend:Te,parse:h,getMode:m}}return t.CodeMirrorGrammar});