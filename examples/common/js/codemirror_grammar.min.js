/**
*
*   CodeMirrorGrammar
*   @version: 2.0.0
*
*   Transform a grammar specification in JSON format, into a syntax-highlight parser mode for CodeMirror
*   https://github.com/foo123/codemirror-grammar
*
**/!function(e,t,n){"use strict";var r,o="object"==typeof module&&module.exports,l="function"==typeof define&&define.amd;o?module.exports=(module.$deps=module.$deps||{})[t]=module.$deps[t]||n.call(e,{NODE:module})||1:l&&"function"==typeof require&&"function"==typeof require.specified&&require.specified(t)?define(t,["require","exports","module"],function(t,r,o){return n.call(e,{AMD:o})}):t in e||(e[t]=r=n.call(e,{})||1)&&l&&define(t,[],function(){return r})}(this,"CodeMirrorGrammar",function(e){"use strict";function t(e,t){var n=this,r=n.pattern,o=e.s.charAt(e.pos)||null;return o&&r===o?(!1!==t&&e.mov(1),[n.key,o]):!1}function n(e,t){var n=this,r=n.pattern,o=e.s.charAt(e.pos)||null;return o&&-1<r.indexOf(o)?(!1!==t&&e.mov(1),[n.key,o]):!1}function r(e,t){var n=this,r=n.pattern,o=r.length,l=e.s;return r===l.substr(e.pos,o)?(!1!==t&&e.mov(o),[n.key,r]):!1}function o(e,t){var n,r=this,o=r.pattern,l=e.s;return n=l.slice(e.pos).match(o[0]),!n||n.index>0?!1:(!1!==t&&e.mov(n[0].length),[r.key,n])}function l(e,t){var n=this;return!1!==t&&e.end(),[n.key,""]}function s(e,t,n,r){var o=$t(t);if(ct===o)return t;if(r[e])return r[e];n=n||0;var l,s=0;return t&&t.isCharList&&(s=1,delete t.isCharList),l=_t&o?new Xt(e,t,_t,n):mt===o?new Xt(e,t,mt,n):ht&o?new Xt(e,t,s?gt:ht,n):(vt|kt)&o?new Xt(e,t,vt,n):t,r[e]=l}function u(e,t,n,r,o,l){if(l[e])return l[e];var i,c,a,p,f,h,m,g=0,k=0,d=1;if(i=Rt(t),a=i.length,1===a)m=s(e,Gt(i[0],n,o),0,l);else if(a>1){for(p=(a>>1)+1,c=0;p>=c;c++)f=$t(i[c]),h=$t(i[a-1-c]),(mt!==f||mt!==h)&&(d=0),kt&f||kt&h?g=1:(It(i[c],n)||It(i[a-1-c],n))&&(k=1);if(!d||r&&ht&$t(r))if(!r||g||k){for(c=0;a>c;c++)i[c]=kt&$t(i[c])?u(e+"_"+c,i[c],n,r,o,l):s(e+"_"+c,Gt(i[c],n,o),c,l);m=a>1?new tn(e,i):i[0]}else m=s(e,Ut(i,r),0,l);else i=i.slice().join(""),i.isCharList=1,m=s(e,i,0,l)}return l[e]=m}function i(e,t,n,r,o){if(o[e])return o[e];var l,u,i,c,a,p,f;for(c=[],a=[],l=qt(t),u=0,i=l.length;i>u;u++)p=s(e+"_0_"+u,Gt(l[u][0],n,r),u,o),f=l[u].length>1?vt!==p.ptype||ht!==$t(l[u][1])||It(l[u][1],n)?s(e+"_1_"+u,Gt(l[u][1],n,r),u,o):l[u][1]:p,c.push(p),a.push(f);return o[e]=new en(e,[c,a])}function c(e,t,n){var r,o,l,s,u,i,c,a,p,f,h,m;if(i=new String(Bt(e)),i.pos=0,1===i.length)f=""+e,t[f]||(t[f]={type:"simple",tokens:e}),e=f;else{for(r=[],o=[],l="",h=[];i.pos<i.length;)if(a=i.charAt(i.pos++),zt.test(a))if(l.length&&(t[l]||n[l]||(t[l]={type:"simple",tokens:l}),o.push(l),l=""),'"'===a||"'"===a){for(c=a,s="";i.pos<i.length&&c!==(a=i.charAt(i.pos++));)s+=a;s.length?(f=""+s,t[f]||(t[f]={type:"simple",tokens:s}),o.push(f)):o.push(0)}else if("*"===a||"+"===a||"?"===a)p=o.pop(),f=""+p+a,n[f]||(n[f]={type:"group",match:"*"===a?"zeroOrMore":"+"===a?"oneOrMore":"zeroOrOne",tokens:[p]}),o.push(f);else if("{"===a){for(u="";i.pos<i.length&&"}"!==(a=i.charAt(i.pos++));)u+=a;u=u.split(",").map(Bt),u[0]=u[0].length?parseInt(u[0],10)||0:0,0>u[0]&&(u[0]=0),2>u.length?u.push(u[0]):u[1]=u[1].length?parseInt(u[1],10)||w:w,0>u[1]&&(u[1]=0),p=o.pop(),f=""+p+["{",u[0],",",isFinite(u[1])?u[1]:"","}"].join(""),n[f]||(n[f]={type:"group",match:[u[0],u[1]],tokens:[p]}),o.push(f)}else{if("}"===a)continue;if("["===a){for(s="";i.pos<i.length&&"]"!==(a=i.charAt(i.pos++));)s+=a;f="["+s+"]",t[f]||(t[f]={type:"simple",tokens:s.split("")}),o.push(f)}else{if("]"===a)continue;"|"===a?(o.length>1?(f=""+o.join(" "),n[f]||(n[f]={type:"group",match:"sequence",tokens:o}),r.push(f)):o.length&&r.push(o[0]),o=[]):"("===a?(h.push([o,r,l]),o=[],r=[],l=""):")"===a&&(o.length>1?(f=""+o.join(" "),n[f]||(n[f]={type:"group",match:"sequence",tokens:o}),r.push(f)):o.length&&r.push(o[0]),o=[],r.length>1?(f=""+r.join(" | "),n[f]||(n[f]={type:"group",match:"either",tokens:r})):r.length&&(f=r[0]),r=[],m=h.pop(),o=m[0],r=m[1],l=m[2],p=f,f="("+p+")",n[f]||(n[f]=jt(t[p]||n[p])),o.push(f))}}else l+=a;l.length&&(t[l]||n[l]||(t[l]={type:"simple",tokens:l}),o.push(l)),l="",o.length>1?(f=""+o.join(" "),n[f]||(n[f]={type:"group",match:"sequence",tokens:o}),r.push(f)):o.length&&r.push(o[0]),o=[],r.length>1?(f=""+r.join(" | "),n[f]||(n[f]={type:"group",match:"either",tokens:r}),e=f):r.length&&(e=r[0]),r=[]}return e}function a(e,t,n,r,o,l,s,h,m,g,k){var d,y,v,b,_,C,E,M,T,P,L,z,K,X,rt,ot,st,ut=null;if(st=null,null===e)return new nn(B,"EOL",e,st);if(""===e)return new nn(N,"NONSPACE",e,st);if(!1===e||0===e)return new nn(F,"EMPTY",e,st);if(kt&$t(e)&&(ot=e,e="NGRAM_"+ot.join("_"),r[e]||(r[e]={type:"ngram",tokens:ot})),e=""+e,h[e])return h[e];for(n[e]?(d=n[e],wt&$t(d)&&(d=n[e]={type:"simple",tokens:d})):d=r[e]?r[e]:e,ht&$t(d)&&(d=c(d,n,r),d=n[d]||r[d]);d.extend;)X=d.extend,rt=n[X]||r[X],delete d.extend,rt&&(wt&$t(rt)&&(rt={type:"simple",tokens:rt}),d=Mt(rt,d));if("undefined"==typeof d.type&&(d[lt]("error")?(d.type="action",d.action=["error",d.error],delete d.error):d[lt]("empty")?(d.type="action",d.action=["empty",d.empty],delete d.empty):d[lt]("block-indent")?(d.type="action",d.action=["block-indent",d["block-indent"]],delete d["block-indent"]):d[lt]("indent")?(d.type="action",d.action=["indent",d.indent],delete d.indent):d[lt]("outdent")?(d.type="action",d.action=["outdent",d.outdent],delete d.outdent):d[lt]("unique")?(d.type="action",d.action=["unique",ht&$t(d.unique)?["_DEFAULT_",d.unique]:d.unique],delete d.unique):d[lt]("push")?(d.type="action",d.action=["push",d.push],delete d.push):d[lt]("pop")?(d.type="action",d.action=["pop",d.pop],delete d.pop):d.sequence||d.all?(d.type="group",d.match="sequence",d.tokens=d.sequence||d.all,d.all?delete d.all:delete d.sequence):d.either?(d.type="group",d.match="either",d.tokens=d.either,delete d.either):d.zeroOrMore?(d.type="group",d.match="zeroOrMore",d.tokens=d.zeroOrMore,delete d.zeroOrMore):d.oneOrMore?(d.type="group",d.match="oneOrMore",d.tokens=d.oneOrMore,delete d.oneOrMore):d.zeroOrOne?(d.type="group",d.match="zeroOrOne",d.tokens=d.zeroOrOne,delete d.zeroOrOne):d.comment?(d.type="comment",d.tokens=d.comment,delete d.comment):d.block?(d.type="block",d.tokens=d.block,delete d.block):d["escaped-block"]?(d.type="escaped-block",d.tokens=d["escaped-block"],delete d["escaped-block"]):d.simple?(d.type="simple",d.tokens=d.simple,delete d.simple):d.type="simple"),y=d.type?nt[d.type.toUpperCase().replace(Vt,"")]:D,st=d.msg||null,D&y){if(""===d.tokens)return ut=new nn(N,e,e,st),h[e]=ut,ut;if(null===d.tokens)return ut=new nn(B,e,e,st),h[e]=ut,ut;if(!1===d.tokens||0===d.tokens)return ut=new nn(F,e,e,st),h[e]=ut,ut}if(et&y||(d.tokens=Rt(d.tokens)),et&y)d[lt]("action")?"error"===d.action[0]?d.action[0]=O:"empty"===d.action[0]?d.action[0]=A:"block-indent"===d.action[0]?d.action[0]=j:"indent"===d.action[0]?d.action[0]=R:"outdent"===d.action[0]?d.action[0]=q:"unique"===d.action[0]?d.action[0]=$:"push"===d.action[0]?d.action[0]=S:"pop"===d.action[0]&&(d.action[0]=x):d[lt]("error")?d.action=[O,d.error]:d[lt]("empty")?d.action=[A,d.empty]:d[lt]("block-indent")?d.action=[j,d["block-indent"]]:d[lt]("indent")?d.action=[R,d.indent]:d[lt]("outdent")?d.action=[q,d.outdent]:d[lt]("unique")?d.action=[$,ht&$t(d.unique)?["_DEFAULT_",d.unique]:d.unique]:d[lt]("push")?d.action=[S,d.push]:d[lt]("pop")&&(d.action=[x,d.pop]),b=d.action.slice(),ut=new rn(et,e,b,st),h[e]=ut;else if(D&y)d.autocomplete&&f(d,e,k),v="undefined"==typeof d.combine?"\\b":d.combine,ut=new nn(D,e,u(e,d.tokens.slice(),t,v,l,s),st),h[e]=ut;else if(V&y)I&y&&p(d,g),ut=new on(y,e,i(e,d.tokens.slice(),t,l,s),st,d.multiline,d.escape,o[e+".inside"]?1:0),h[e]=ut,d.interleave&&m.push(ut.clone());else if(J&y){for(C=d.tokens.slice(),kt&$t(d.match)?ut=new ln(Z,e,null,st,d.match[0],d.match[1]):(_=tt[d.match.toUpperCase()],ut=H===_?new ln(H,e,null,st,0,1):Q===_?new ln(Q,e,null,st,0,w):Y===_?new ln(Y,e,null,st,1,w):G&_?new ln(G,e,null,st):new ln(U,e,null,st)),h[e]=ut,E=[],P=0,L=C.length;L>P;P++)E=E.concat(a(C[P],t,n,r,o,l,s,h,m,g,k));ut.set(E)}else if(W&y){for(ut=qt(d.tokens.slice()).slice(),M=[],P=0,L=ut.length;L>P;P++)M[P]=ut[P].slice(),ut[P]=new ln(W,e+"_NGRAM_"+P,null,st);for(h[e]=ut,P=0,L=ut.length;L>P;P++){for(T=M[P],E=[],z=0,K=T.length;K>z;z++)E=E.concat(a(T[z],t,n,r,o,l,s,h,m,g,k));ut[P].set(E)}}return h[e]}function p(e,t){var n,r,o,l,s,u=qt(e.tokens.slice());for(l=0,s=u.length;s>l;l++)n=u[l][0],r=u[l].length>1?u[l][1]:u[l][0],o=u[l].length>2?u[l][2]:"",null===r?(t.line=t.line||[],t.line.push(n)):(t.block=t.block||[],t.block.push([n,r,o]))}function f(e,t,n){var r=[].concat(Rt(e.tokens)).map(function(e){return{word:e,meta:t}});n.autocomplete=(n.autocomplete||[]).concat(r)}function h(e){var t,n,r,o,l,s,u,i,c,p,f,h,m,g,k,d;if(e.__parsed)return e;for(f={},h={},m={},k={},d={},g=[],e=jt(e),t=e.RegExpID||null,e.RegExpID=null,delete e.RegExpID,s=e.Lex||{},e.Lex=null,delete e.Lex,u=e.Syntax||{},e.Syntax=null,delete e.Syntax,l=e.Style||{},o=e.Parser||[],r=o.length,n=[],i=0;r>i;i++)c=o[i],p=a(c,t,s,u,l,f,h,m,g,k,d)||null,p&&(kt&$t(p)?n=n.concat(p):n.push(p));return e.Parser=n,e.cTokens=g,e.Style=l,e.Comments=k,e.Keywords=d,e.Extra=e.Extra||{},e.__parsed=1,e}function m(e,t){var n=new an(h(e),{DEFAULT:t||g,ERROR:k}),r=function(e,t){return{startState:function(){return new un},copyState:function(e){return e=e.clone(),e.line++,e},token:function(e,t){return n.getToken(e,t)},indent:function(r,o,l){return n.indent(r,o,l,e,t)},lineComment:n.LC,blockCommentStart:n.BCS,blockCommentEnd:n.BCE,blockCommentContinue:n.BCC,blockCommentLead:n.BCL,electricChars:n.Extra.electricChars||!1,fold:n.Extra.fold||!1}};return r.supportGrammarAnnotations=!1,r.validator=function(e){if(!r.supportGrammarAnnotations||!e||!e.length)return[];var t,o,l=[],s=n.parse(e,y);if(!s)return l;for(t in s)s.hasOwnProperty(t)&&(o=s[t],l.push({message:o[4]||"Syntax Error",severity:"error",from:CodeMirror.Pos(o[0],o[1]),to:CodeMirror.Pos(o[2],o[3])}));return l},r}var g,k,d=1,y=2,v=4,b=8,_=~v,C=~b,E=v|b,w=1/0,O=4,$=8,S=16,x=32,A=64,R=128,q=256,j=512,M=2,T=4,P=8,L=0,D=16,B=17,N=18,F=20,V=32,z=33,I=34,G=64,U=128,K=U,Z=256,H=257,Q=258,Y=259,J=512,W=1024,X=U|W,et=2048,tt={EITHER:G,ALL:K,SEQUENCE:U,ZEROORONE:H,ZEROORMORE:Q,ONEORMORE:Y,REPEATED:Z},nt={ACTION:et,BLOCK:V,COMMENT:I,ESCAPEDBLOCK:z,SIMPLE:D,GROUP:J,NGRAM:W},rt=void 0,ot="prototype",lt="hasOwnProperty",st="propertyIsEnumerable",ut=(Object.keys,Array[ot],Object[ot]),it=(Function[ot],ut.toString),ct=4,at=5,pt=6,ft=8,ht=16,mt=17,gt=18,kt=32,dt=64,yt=128,vt=256,bt=512,_t=1024,Ct=2048,Et=4096,wt=ht|kt,Ot={"[object Number]":ct,"[object String]":ht,"[object Array]":kt,"[object RegExp]":vt,"[object Date]":bt,"[object Function]":yt,"[object Object]":dt},$t=function(e){if(null===e)return _t;if(!0===e||!1===e||e instanceof Boolean)return ft;if(rt===e)return Ct;var t=Ot[it.call(e)]||Et;return ct===t||e instanceof Number?isNaN(e)?pt:isFinite(e)?ct:at:ht===t||e instanceof String?1===e.length?mt:ht:kt===t||e instanceof Array?kt:vt===t||e instanceof RegExp?vt:bt===t||e instanceof Date?bt:yt===t||e instanceof Function?yt:dt===t?dt:Et},St=function(){var e,t,n,r,o,l,s=arguments,u=s.length;for(e=s[0]||{},o=1;u>o;o++)if(t=s[o],dt===$t(t))for(r in t)t[lt](r)&&t[st](r)&&(n=t[r],l=$t(n),e[r]=ct&l?0+n:bt&l?new Date(n):wt&l?n.slice():n);return e},xt=Object.create,At=function(e,t){var n,r=arguments.length,o="constructor";return 0===r?(e=Object,t={}):1===r?(t=e||{},e=Object):(e=e||Object,t=t||{}),t[lt](o)||(t[o]=function(){}),n=t[o],delete t[o],n[ot]=St(xt(e[ot]),t),n[ot][o]=n,n},Rt=function(e,t){return t||kt!==$t(e)?[e]:e},qt=function(e,t){return e=Rt(e),(t||kt!==$t(e[0]))&&(e=[e]),e},jt=function(e,t){var n,r,o,l,s=$t(e),u=0;if(ct===$t(t)?t>0?(u=t,t=!0):t=!1:t=!1!==t,dt===s){r={};for(o in e)e[lt](o)&&e[st](o)&&(n=$t(e[o]),r[o]=dt===n?t?jt(e[o],u>0?u-1:t):e[o]:kt===n?t?jt(e[o],u>0?u-1:t):e[o].slice():bt&n?new Date(e[o]):ht&n?e[o].slice():ct&n?0+e[o]:e[o])}else if(kt===s)for(l=e.length,r=new Array(l),o=0;l>o;o++)n=$t(e[o]),r[o]=dt===n?t?jt(e[o],u>0?u-1:t):e[o]:kt===n?t?jt(e[o],u>0?u-1:t):e[o].slice():bt&n?new Date(e[o]):ht&n?e[o].slice():ct&n?0+e[o]:e[o];else r=bt&s?new Date(e):ht&s?e.slice():ct&s?0+e:e;return r},Mt=function(){var e,t,n,r,o,l,s,u,i,c,a=arguments,p=a.length;if(1>p)return null;for(t=jt(a[0]),n=1;p>n;n++)if(e=a[n])for(r in e)if(e[lt](r)&&e[st](r))if(t[lt](r)&&t[st](r)){if(i=$t(t[r]),c=$t(e[r]),dt===i&&dt===c)t[r]=Mt(t[r],e[r]);else if(kt===i&&kt===c){if(s=t[r],u=e[r],l=u.length,!l)continue;if(s.length)for(o=0;l>o;o++)0>s.indexOf(u[o])&&s.push(u[o]);else t[r]=u.slice()}}else t[r]=jt(e[r]);return t},Tt=/([.*+?^${}()|[\]\/\\\-])/g,Pt=function(e){return e.replace(Tt,"\\$1")},Lt=function(e,t,n){var r,o,l,s,u,i=!0===n?0:1;for(ht&$t(t)&&(t=[t,t],i=0),o=e.length,u="",r=0;o>r;)l=e.charAt(r),o>r+1&&"$"===l?(s=e.charCodeAt(r+1),36===s?(u+="$",r+=2):s>=48&&57>=s?(u+=t[i+s-48]||"",r+=2):(u+=l,r+=1)):(u+=l,r+=1);return u},Dt=/^\s+|\s+$/g,Bt=String[ot].trim?function(e){return e.trim()}:function(e){return e.replace(Dt,"")},Nt=function(e,t){return t.length-e.length},Ft=/\r\n|\r|\n/g,Vt=/[\-_]/g,zt=/^([\[\]{}()*+?|'"]|\s)/,It=function(e,t){return ht&$t(t)&&ht&$t(e)&&t.length&&t.length<=e.length&&t==e.substr(0,t.length)},Gt=function(e,t,n){if(!e||ct===$t(e))return e;var r,o=t?t.length||0:0;if(o&&t===e.substr(0,o)){var l,s,u,r,i,c=e.substr(o),a=c.charAt(0),p="";for(r=c.length;r--&&(i=c.charAt(r),a!==i);)"i"===i.toLowerCase()&&(p="i");return l=c.substring(1,r),s="^("+l+")",n[s]||(u=new RegExp(s,p),n[s]=u),n[s]}return e},Ut=function(e,t){var n,r="";return ht&$t(t)&&(r=t),n=e.sort(Nt).map(Pt).join("|"),[new RegExp("^("+n+")"+r),1]},Kt=0,Zt=function(){return++Kt},Ht=function(e){return[e||"uuid",++Kt,(new Date).getTime()].join("_")},Qt=Math.max,Yt=/^[\s\u00a0]+/,Jt=/[^\s\u00a0]/,Wt=At({constructor:function(e){var t=this;t._=null,t.s=e?""+e:"",t.start=t.pos=0,t.lCP=t.lCV=0,t.lS=0},_:null,s:"",start:0,pos:0,lCP:0,lCV:0,lS:0,dispose:function(){var e=this;return e._=null,e.s=null,e.start=null,e.pos=null,e.lCP=null,e.lCV=null,e.lS=null,e},toString:function(){return this.s},sol:function(){return 0===this.pos},eol:function(){return this.pos>=this.s.length},end:function(){var e=this;return e.pos=e.s.length,e},mov:function(e){var t=this;return 0>e?t.pos=Qt(0,t.pos-e):t.pos+=e,t},bck:function(e){var t=this;return t.pos=Qt(0,e),t},sft:function(){var e=this;return e.start=e.pos,e},nxt:function(){var e,t=this,n=t.s;return t.pos<n.length?e=n.charAt(t.pos++)||null:void 0},cur:function(e){var t=this,n=t.s.slice(t.start,t.pos);return e&&(t.start=t.pos),n},upd:function(){var e=this;return e._&&(e._.pos=e.pos),e},spc:function(e){var t,n=this,r=n.pos,o=n.s.slice(r);return(t=o.match(Yt))?(!1!==e&&n.mov(t[0].length),1):0},col:function(e){var t=this;return e=e||1,t.lCP<t.start&&(t.lCV=Wt.col(t.s,t.start,e,t.lCP,t.lCV),t.lCP=t.start,t._&&(t._.start=t.start,t._.lastColumnPos=t.lCP,t._.lastColumnValue=t.lCV,t._.lineStart=t.lS)),t.lCV-(t.lS?Wt.col(t.s,t.lS,e):0)},ind:function(e){var t=this;return e=e||1,Wt.col(t.s,null,e)-(t.lS?Wt.col(t.s,t.lS,e):0)}});Wt.col=function(e,t,n,r,o){var l,s;for(null===t&&(t=e.search(Jt),-1==t&&(t=e.length)),l=r||0,s=o||0;t>l;++l)s+="	"==e.charAt(l)?n-s%n:1;return s},Wt._=function(e){var t=new Wt;return t._=e,t.s=""+e.string,t.start=e.start,t.pos=e.pos,t.lCP=e.lastColumnPos,t.lCV=e.lastColumnValue,t.lS=e.lineStart,t};var Xt,en,tn,nn,rn,on,ln,sn=At({constructor:function(e){this._=e||[]},_:null,dispose:function(){var e=this;return e._=null,e},toString:function(){return this._.slice().reverse().join("\n")},clone:function(){return new sn(this._.slice())},isEmpty:function(){return 0>=this._.length},pos:function(){return this._.length},peek:function(e){var t=this,n=t._;if(e=arguments.length?e:-1,n.length){if(0>e&&0<=n.length+e)return n[n.length+e];if(e>=0&&e<n.length)return n[e]}return null},pop:function(){return this._.pop()},shift:function(){return this._.shift()},push:function(e){var t=this;return t._.push(e),t},unshift:function(e){var t=this;return t._.unshift(e),t},pushAt:function(e,t,n,r){var o=this,l=o._;return n&&r&&(t[n]=r),e<l.length?l.splice(e,0,t):l.push(t),o},empty:function(e,t){var n=this,r=n._;if(e&&t)for(;r.length&&r[r.length-1]&&r[r.length-1][e]===t;)r.pop();else r.length=0;return n}}),un=At({constructor:function pn(e,t,n){var r=this;r.id=t?Ht("state"):"state",e instanceof pn?(r.line=e.line,r.column=e.column,r.indent=e.indent,r.stack=e.stack.clone(),r.queu=e.queu.slice(),r.symb=jt(e.symb,1),r.token=e.token,r.block=e.block,r.errors=e.errors,r.err=e.err):(r.line=e||0,r.column=0,r.indent=null,r.token=null,r.block=null,r.stack=new sn,r.queu=[],r.symb={},r.errors=!!n,r.err=r.errors?{}:null)},id:null,line:0,column:0,indent:0,stack:null,queu:null,symb:null,err:null,errors:!1,token:null,block:null,dispose:function(){var e=this;return e.id=null,e.line=null,e.column=null,e.indent=null,e.token=null,e.block=null,e.symb=null,e.errors=null,e.err=null,e.queu=null,e.stack&&e.stack.dispose(),e.stack=null,e},clone:function(e){return new un(this,e)},toString:function(){var e=this;return["",e.id,e.line,e.token?e.token.name:"0",e.block?e.block.name:"0"].join("_")}});Xt=At({constructor:function(e,s,u,i){var c=this;switch(c.type=M,c.name=e,c.pattern=null,c.ptype=u||ht,c.key=i||0,c.ptype){case _t:c.pattern=null,c.match=l;break;case vt:c.pattern=vt&$t(s)?[s,0]:[s[0],s[1]||0],c.match=o;break;case mt:case gt:c.pattern=s,c.match=gt===c.ptype?n:t;break;case ht:default:c.pattern=s,c.match=r}},type:null,name:null,pattern:null,ptype:null,key:0,dispose:function(){var e=this;return e.type=null,e.name=null,e.pattern=null,e.ptype=null,e.key=null,e},match:function(){return!1},toString:function(){var e=this;return["[","Pattern: ",e.name,", ",e.pattern?e.pattern.toString():null,"]"].join("")}}),tn=At(Xt,{constructor:function(e,t,n){var r=this;r.type=T,r.name=e,r.pattern=t,r.key=!1!==n},match:function(e,t){var n,r,o=this,l=o.pattern,s=l.length,u=o.key;for(n=0;s>n;n++)if(r=l[n].match(e,t))return u?[n,r[1]]:r;return!1}}),en=At(Xt,{constructor:function(e,t){var n=this;n.type=P,n.name=e,n.pattern=t,n.pattern[0]=new tn(n.name+"_Start",n.pattern[0],!1)},match:function(e,t){var n,r,o,l,s,u=this,i=u.pattern,c=i[0],a=i[1];return(r=c.match(e,t))?(n=a[r[0]],l=$t(n),s=c.pattern[r[0]].ptype,vt===s&&(ct===l?(o=r[1][n+1],n=new Xt(u.name+"_End",o,o.length>1?ht:mt)):ht===l&&(o=Lt(n,r[1]),n=new Xt(u.name+"_End",o,o.length>1?ht:mt))),n):!1}}),nn=At({constructor:function(e,t,n,r){var o=this;o.type=e||D,o.name=t,o.token=n,o.status=0,o.msg=r||null,o.$msg=null,o.$clone=null},name:null,type:null,token:null,status:0,msg:null,$msg:null,$clone:null,$id:null,dispose:function(){var e=this;return e.type=null,e.name=null,e.token=null,e.status=null,e.msg=null,e.$msg=null,e.$clone=null,e.$id=null,e},clone:function(){var e,t,n,r=this,o=r.$clone;if(e=new r.constructor,e.type=r.type,e.name=r.name,e.token=r.token,e.msg=r.msg,o&&o.length)for(t=0,n=o.length;n>t;t++)e[o[t]]=r[o[t]];return e},get:function(e,t){var n=this,r=n.token,o=n.type,l=n.name,s=null;if(n.$msg=null,t.token=null,F===o)return n.status=0,!0;if(B===o){if(e.spc(),e.eol())return l}else if(N===o)n.status&v&&e.spc()&&!e.eol()&&(n.status|=b),n.status&=_;else if(s=r.match(e))return t.token={name:l,value:e.cur(),token:s[1]},l;return!1},req:function(e){var t=this;return e?t.status|=v:t.status&=_,t},err:function(e,t,n,r,o){var l,s=this,u=s.name;return l=s.$msg?s.$msg:s.status&v?'Token "'+u+'" Expected':'Syntax Error: "'+u+'"',e&&e.errors&&(e.err[t+"_"+n+"_"+r+"_"+o+"_"+u]=[t,n,r,o,l]),l},toString:function(){var e=this;return["[","Token: ",e.name,", ",e.token?e.tok.toString():null,"]"].join("")}}),rn=At(nn,{constructor:function(e,t,n,r){var o=this;o.type=e||et,o.name=t,o.token=n,o.status=0,o.msg=r||null,o.$msg=null,o.$clone=null},get:function(e,t){var n,r,o,l,s,u,i,c,a,p,f=this,h=f.token||null,m=t.queu,g=t.symb,k=t.token,d=t.err,y=t.errors;if(f.status=0,f.$msg=null,h){if(s=f.msg,n=h[0],r=h[1],u=t.line,c=e.pos,i=k&&k.value?c-k.value.length:i-1,O===n)return y&&(f.$msg=s?s:"Error",a=u+"_"+i+"_"+u+"_"+c+"_"+f.name,d[a]=[u,i,u,c,f.err()]),f.status|=b,!1;if(A===n)m.length=0;else if($===n){if(k){if(o=r[1],l=r[0],o=ct===$t(o)?k.token[o]:Lt(o,k.token,!0),g[lt](l)||(g[l]={}),g[l][lt](o))return y&&(f.$msg=s?Lt(s,o,!0):'Duplicate "'+o+'"',p=f.err(),a=g[l][o][0]+"_"+g[l][o][1]+"_"+g[l][o][2]+"_"+g[l][o][3]+"_"+f.name,d[a]=[g[l][o][0],g[l][o][1],g[l][o][2],g[l][o][3],p],a=u+"_"+i+"_"+u+"_"+c+"_"+f.name,d[a]=[u,i,u,c,p]),f.status|=b,!1;g[l][o]=[u,i,u,c]}}else if(x===n)if(r){if(k&&(r=ct===$t(r)?k.token[r]:Lt(r,k.token)),!m.length||r!==m[0][0])return y&&(m.length?(f.$msg=s?Lt(s,[m[0][0],r],!0):'Tokens do not match "'+m[0][0]+'","'+r+'"',p=f.err(),a=m[0][1]+"_"+m[0][2]+"_"+m[0][3]+"_"+m[0][4]+"_"+f.name,d[a]=[m[0][1],m[0][2],m[0][3],m[0][4],p],a=u+"_"+i+"_"+u+"_"+c+"_"+f.name,d[a]=[u,i,u,c,p]):(f.$msg=s?Lt(s,["",r],!0):'Token does not match "'+r+'"',p=f.err(),a=u+"_"+i+"_"+u+"_"+c+"_"+f.name,d[a]=[u,i,u,c,p])),m.shift(),f.status|=b,!1;m.shift()}else m.shift();else S===n&&r&&(k&&(r=ct===$t(r)?k.token[r]:Lt(r,k.token)),m.unshift([r,u,i,u,c]))}return!0}}),on=At(nn,{constructor:function(e,t,n,r,o,l,s){var u=this;u.type=e,u.name=t,u.token=n,u.status=0,u.msg=r||null,u.mline="undefined"==typeof o?1:o,u.esc=l||"\\",u.inter=s,u.$msg=null,u.$clone=["mline","esc","inter"]},inter:0,mline:0,esc:null,get:function(e,t){var n,r,o,l,s,u,i,c,a,p,f,h,m,g,k=this,d=0,y=0,v="",b=k.mline,C=k.token,E=k.name,w=k.type,O=k.inter,$=O?E+".inside":E,S=0,x=z===w,A=k.esc,R="",q="",j="",M="",T=t.stack;if(k.$msg=k.msg||null,m=t.line,g=e.pos,I===w&&(k.status&=_),s=0,t.block&&t.block.name===E?(y=1,n=t.block.end,s=1,u=$,p=t.block.s,h=t.block.i,f=t.block.e,R=t.block._s,q=t.block._i,M=""):!t.block&&(n=C.match(e))&&(y=1,p=[m,g],h=[[m,e.pos],[m,e.pos]],f=[m,e.pos],R=e.cur(),q="",M="",j="",t.block={name:E,end:n,s:p,i:h,e:f,_s:R,_i:q,_e:j},u=E),y){if(o=T.pos(),l=_t===n.type,O){if(s&&l&&e.sol())return k.status&=_,t.current=null,t.block=null,!1;if(!s)return T.pushAt(o,k.clone(),"$id",E),u}if(d=n.match(e),r=b,a=0,d)u=l?$:E,j=e.cur().slice(M.length);else for(c=e.pos;!e.eol();){if(i=e.pos,!(x&&S||!n.match(e))){O&&e.pos>i&&i>c?(u=$,e.bck(i),a=1):(u=E,d=1),j=e.cur().slice(M.length);break}v=e.nxt(),M+=v,S=!S&&v===A}return r=b||x&&S,h[1]=[m,i],f=[m,e.pos],d||!r&&!a?t.block=null:(t.block.i=h,t.block.e=f,t.block._i+=M,t.block._e=j,t.stack.pushAt(o,k.clone(),"$id",E)),t.token={name:E,value:e.cur(),token:[R+q+M+j,q+M]},u}return!1}}),ln=At(nn,{constructor:function(e,t,n,r,o,l){var s=this;s.type=e?e:Z,s.name=t||null,s.token=null,s.status=0,s.msg=r||null,s.min=o||0,s.max=l||w,s.found=0,s.$msg=null,s.$clone=["min","max","found"],n&&s.set(n)},min:0,max:1,found:0,set:function(e){return e&&(this.token=Rt(e)),this},get:function(e,t){var n,r,o,l,s,u,i,c,a,p,f,h,m,g,k=this,d=k.type,y=k.token,E=y.length;if(k.$msg=k.msg||null,k.status&=C,f=e.pos,l=t.stack,G===d){for(a=0,p=0,k.status|=v,s=[],n=0;E>n;n++){if(r=y[n].clone().req(1),o=r.get(e,t),r.status&v&&(a++,s.push(r.err())),!1!==o)return o;r.status&b&&(p++,e.bck(f))}return a>0?k.status|=v:k.status&=_,E===p&&a>0?k.status|=b:k.status&=C,k.status&&!k.$msg&&s.length&&(k.$msg=s.join(" | ")),!1}if(X&d){if(g=d&U?1:0,g?k.status|=v:k.status&=_,h=l.pos(),r=y[0].clone().req(g),o=r.get(e,t),m=k.name+"_"+Zt(),!1!==o){if(!0!==o)for(n=E-1;n>0;n--)l.pushAt(h+E-n-1,y[n].clone().req(1),"$id",m);return o}return r.status&b?(g?k.status|=b:k.status&=C,e.bck(f)):g&&r.status&v&&(k.status|=b),k.status&&!k.$msg&&(k.$msg=r.err()),!1}for(a=0,u=k.found,i=k.min,c=k.max,k.status&=_,h=l.pos(),m=k.name+"_"+Zt(),s=[],n=0;E>n;n++){if(r=y[n].clone().req(1),o=r.get(e,t),!1!==o){if(++u,c>=u)return k.found=u,l.pushAt(h,k.clone(),"$id",m),k.found=0,o;break}r.status&v&&(a++,s.push(r.err())),r.status&b&&e.bck(f)}return i>u?k.status|=v:k.status&=_,u>c||i>u&&a>0?k.status|=b:k.status&=C,k.status&&!k.$msg&&s.length&&(k.$msg=s.join(" | ")),!1}});var cn=CodeMirror||{Pass:{toString:function(){return"CodeMirror.Pass"}}};g=null,k="error";{var an=At({constructor:function(e,t){var n=this;n.Extra=e.Extra||{},n.LC=e.Comments.line?e.Comments.line[0]:null,n.BCS=e.Comments.block?e.Comments.block[0][0]:null,n.BCE=e.Comments.block?e.Comments.block[0][1]:null,n.BCC=n.BCL=e.Comments.block?e.Comments.block[0][2]:null,n.DEF=t.DEFAULT,n.ERR=e.Style.error||t.ERROR,n.Keywords=e.Keywords.autocomplete||null,n.Tokens=e.Parser||[],n.cTokens=e.cTokens.length?e.cTokens:null,n.Style=e.Style},Extra:null,LC:null,BCS:null,BCE:null,BCL:null,BCC:null,ERR:null,DEF:null,Keywords:null,cTokens:null,Tokens:null,Style:null,dispose:function(){var e=this;return e.Extra=null,e.LC=null,e.BCS=null,e.BCE=null,e.BCL=null,e.BCC=null,e.ERR=null,e.DEF=null,e.Keywords=null,e.cTokens=null,e.Tokens=null,e.Style=null,e},parse:function(e,t){e=e||"";var n,r,o,l,s,u,i,c,a=this,p=e.split(Ft),f=p.length;if(t=t||d,i=!!(t&y),c=!!(t&d),l=new un(0,0,i),l.parseAll=1,c)for(r=[],n=0;f>n;n++){for(l.line=n,s=new Wt(p[n]),o=[];!s.eol();)o.push(a.getToken(s,l));r.push(o)}else for(n=0;f>n;n++)for(l.line=n,s=new Wt(p[n]);!s.eol();)a.getToken(s,l);return u=c&&i?{tokens:r,errors:l.err}:c?r:l.err,s.dispose(),l.dispose(),u},getToken:function(e,t){var n,r,o,l,s,u,i,c,a=this,p=a.cTokens,f=a.Tokens,h=f.length,m=!!t.parseAll,g=a.Style,k=a.DEF,d=a.ERR;if(e=m?e:Wt._(e),u=t.stack,e.sol()&&!u.isEmpty()&&B===u.peek().type&&u.pop(),(u.isEmpty()||N!==u.peek().type)&&e.spc())return m?{value:e.cur(1),type:k}:e.upd()&&k;for(c=t.line;!u.isEmpty()&&!e.eol();){if(p)for(r=0;r<p.length;)if(l=p[r++],o=l.get(e,t),!1!==o)return o=g[o]||k,m?{value:e.cur(1),type:o}:e.upd()&&o;if(i=e.pos,l=u.pop(),o=l.get(e,t),!1!==o){if(!0!==o){for(o=L===o?k:g[o]||k;!u.isEmpty()&&et===u.peek().type;)if(s=u.pop(),s.get(e,t),s.status&b)return u.empty("$id",l.$id),m?{value:e.cur(1),type:o}:e.upd()&&o;return m?{value:e.cur(1),type:o}:e.upd()&&o}}else if(l.status&E)return u.empty("$id",l.$id),e.nxt(),o=d,l.err(t,c,i,c,e.pos),m?{value:e.cur(1),type:o}:e.upd()&&o}for(n=0;h>n;n++)if(i=e.pos,l=f[n],o=l.get(e,t),!1!==o){if(!0!==o){for(o=L===o?k:g[o]||k;!u.isEmpty()&&et===u.peek().type;)if(s=u.pop(),s.get(e,t),s.status&b)return u.empty("$id",l.$id),m?{value:e.cur(1),type:o}:e.upd()&&o;return m?{value:e.cur(1),type:o}:e.upd()&&o}}else if(l.status&E)return u.empty("$id",l.$id),e.nxt(),o=d,l.err(t,c,i,c,e.pos),m?{value:e.cur(1),type:o}:e.upd()&&o;return e.nxt(),m?{value:e.cur(1),type:k}:e.upd()&&k},indent:function(e,t,n,r){var o=(r.indentUnit||4,cn.Pass);return o}});e.CodeMirrorGrammar={VERSION:"2.0.0",clone:jt,extend:Mt,parse:h,getMode:m}}return e.CodeMirrorGrammar});