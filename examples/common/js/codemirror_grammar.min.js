/**
*
*   CodeMirrorGrammar
*   @version: 2.2.0
*
*   Transform a grammar specification in JSON format, into a syntax-highlight parser mode for CodeMirror
*   https://github.com/foo123/codemirror-grammar
*
**/!function(t,e,n){"use strict";var r,o="object"==typeof module&&module.exports,s="function"==typeof define&&define.amd;o?module.exports=(module.$deps=module.$deps||{})[e]=module.$deps[e]||n.call(t,{NODE:module})||1:s&&"function"==typeof require&&"function"==typeof require.specified&&require.specified(e)?define(e,["require","exports","module"],function(e,r,o){return n.call(t,{AMD:o})}):e in t||(t[e]=r=n.call(t,{})||1)&&s&&define(e,[],function(){return r})}(this,"CodeMirrorGrammar",function(t){"use strict";function e(t,e){var n=this,r=n.pattern,o=t.s.charAt(t.pos)||null;return o&&r===o?(!1!==e&&t.mov(1),[n.key,o]):!1}function n(t,e){var n=this,r=n.pattern,o=t.s.charAt(t.pos)||null;return o&&-1<r.indexOf(o)?(!1!==e&&t.mov(1),[n.key,o]):!1}function r(t,e){var n=this,r=n.pattern,o=r.length,s=t.s;return r===s.substr(t.pos,o)?(!1!==e&&t.mov(o),[n.key,r]):!1}function o(t,e){var n,r=this,o=r.pattern,s=t.s;return n=s.slice(t.pos).match(o[0]),!n||n.index>0?!1:(!1!==e&&t.mov(n[o[1]||0].length),[r.key,o[1]>0?n[o[1]]:n])}function s(t,e){var n=this;return!1!==e&&t.end(),[n.key,""]}function l(t,e,n,r){var o=Me(e);if(ge===o)return e;if(r[t])return r[t];n=n||0;var s,l=0;return e&&e.isCharList&&(l=1,delete e.isCharList),s=Oe&o?new ln(t,e,Oe,n):be===o?new ln(t,e,be,n):ve&o?new ln(t,e,l?_e:ve,n):(we|xe)&o?new ln(t,e,we,n):e,r[t]=s}function u(t,e,n,r,o,s){if(s[t])return s[t];var i,a,c,p,f,m,h,g=0,k=0,d=1;if(i=Te(e),c=i.length,1===c)h=l(t,Je(i[0],n,o),0,s);else if(c>1){for(p=(c>>>1)+1,a=0;p>=a;a++)f=Me(i[a]),m=Me(i[c-1-a]),(be!==f||be!==m)&&(d=0),xe&f||xe&m?g=1:(we&f||we&m||Ye(i[a],n)||Ye(i[c-1-a],n))&&(k=1);if(!d||r&&ve&Me(r))if(!r||g||k)if(g||k){for(a=0;c>a;a++)i[a]=xe&Me(i[a])?u(t+"_"+a,i[a],n,r,o,s):l(t+"_"+a,Je(i[a],n,o),a,s);h=c>1?new an(t,i):i[0]}else{for(i=i.sort(He),a=0;c>a;a++)i[a]=l(t+"_"+a,Je(i[a],n,o),a,s);h=c>1?new an(t,i):i[0]}else h=l(t,We(i,r),0,s);else i=i.slice().join(""),i.isCharList=1,h=l(t,i,0,s)}return s[t]=h}function i(t,e,n,r,o){if(o[t])return o[t];var s,u,i,a,c,p,f;for(a=[],c=[],s=Be(e),u=0,i=s.length;i>u;u++)p=l(t+"_0_"+u,Je(s[u][0],n,r),u,o),f=s[u].length>1?we!==p.ptype||ve!==Me(s[u][1])||Ye(s[u][1],n)?l(t+"_1_"+u,Je(s[u][1],n,r),u,o):s[u][1]:p,a.push(p),c.push(f);return o[t]=new un(t,[a,c])}function a(t,e){var n,r,o,s,l,u=Be(t.tokens.slice());for(s=0,l=u.length;l>s;s++)n=u[s][0],r=u[s].length>1?u[s][1]:u[s][0],o=u[s].length>2?u[s][2]:"",null===r?(e.line=e.line||[],e.line.push(n)):(e.block=e.block||[],e.block.push([n,r,o]))}function c(t,e,n){var r=[].concat(Te(t.tokens)).map(function(t){return{word:t,meta:e}});n.autocomplete=(n.autocomplete||[]).concat(r)}function p(t,e,n,r){var o,s,l,u,i=t.pos,a=t.length,c="",p=!!n;if(p){for(r=!!r,s=!1,u=0;a>i&&(o=t.charAt(i++),e!==o||s);)l=n===o,s=!s&&l,r?(l&&u++,(!l||2&u)&&(c+=o,u=0)):c+=o;return 2&u&&(c+=n),t.pos=i,c}for(;a>i&&(o=t.charAt(i++),e!==o);)c+=o;return t.pos=i,c}function f(t,e,n){var r,o,s,l,u,i,a,c,f,m,h,g;if(i=new String(Ue(t)),i.pos=0,1===i.length)m=""+t,e[m]||(e[m]={type:"simple",tokens:t}),t=m;else{for(r=[],o=[],s="",h=[];i.pos<i.length;)if(a=i.charAt(i.pos++),Qe.test(a))if(s.length&&("0"===s?o.push(G):"^^"===s?o.push(N):"^"===s?o.push(V):"$"===s?o.push(z):"$$"===s?o.push(F):(e[s]||n[s]||(e[s]={type:"simple",tokens:s}),o.push(s)),s=""),'"'===a||"'"===a)l=p(i,a,!1),l.length?(m=""+l,e[m]||(e[m]={type:"simple",tokens:l}),o.push(m)):o.push("");else if("/"===a)l=p(i,a,"\\",!0),c="",l.length&&(i.pos<i.length&&"i"===i.charAt(i.pos)&&(i.pos++,c="i"),m="/"+l+"/"+c,e[m]||(e[m]={type:"simple",tokens:new RegExp("^("+l+")",c)}),o.push(m));else if("*"===a||"+"===a||"?"===a)f=o.pop(),m=""+f+a,n[m]||(n[m]={type:"group",match:"*"===a?"zeroOrMore":"+"===a?"oneOrMore":"zeroOrOne",tokens:[f]}),o.push(m);else if("{"===a)u=p(i,"}",!1),u=u.split(",").map(Ue),u[0]=u[0].length?parseInt(u[0],10)||0:0,0>u[0]&&(u[0]=0),2>u.length?u.push(u[0]):u[1]=u[1].length?parseInt(u[1],10)||E:E,0>u[1]&&(u[1]=0),f=o.pop(),m=""+f+["{",u[0],",",isFinite(u[1])?u[1]:"","}"].join(""),n[m]||(n[m]={type:"group",match:[u[0],u[1]],tokens:[f]}),o.push(m);else{if("}"===a)continue;if("["===a)l=p(i,"]",!1),m="["+l+"]",e[m]||(e[m]={type:"simple",tokens:l.split("")}),o.push(m);else{if("]"===a)continue;"|"===a?(o.length>1?(m=""+o.join(" "),n[m]||(n[m]={type:"group",match:"sequence",tokens:o}),r.push(m)):o.length&&r.push(o[0]),o=[]):"("===a?(h.push([o,r,s]),o=[],r=[],s=""):")"===a&&(o.length>1?(m=""+o.join(" "),n[m]||(n[m]={type:"group",match:"sequence",tokens:o}),r.push(m)):o.length&&r.push(o[0]),o=[],r.length>1?(m=""+r.join(" | "),n[m]||(n[m]={type:"group",match:"either",tokens:r})):r.length&&(m=r[0]),r=[],g=h.pop(),o=g[0],r=g[1],s=g[2],f=m,m="("+f+")",n[m]||(n[m]=Ne(e[f]||n[f])),o.push(m))}}else s+=a;s.length&&("0"===s?o.push(G):"^^"===s?o.push(N):"^"===s?o.push(V):"$"===s?o.push(z):"$$"===s?o.push(F):(e[s]||n[s]||(e[s]={type:"simple",tokens:s}),o.push(s))),s="",o.length>1?(m=""+o.join(" "),n[m]||(n[m]={type:"group",match:"sequence",tokens:o}),r.push(m)):o.length&&r.push(o[0]),o=[],r.length>1?(m=""+r.join(" | "),n[m]||(n[m]={type:"group",match:"either",tokens:r}),t=m):r.length&&(t=r[0]),r=[]}return t}function m(t){t.Lex||(t.Lex={}),t.Syntax||(t.Syntax={});var e,n,r,o,s,l,u,i,a,c=t.Lex,p=t.Syntax,f=[c,p],m=f.length;for(a=0;m>a;){i=f[a++];for(r in i)i[pe](r)&&(e=r.split(":"),n=e[1]&&Ue(e[1]).length?Ue(e[1]):null,e=Ue(e[0]),e.length||(e=r,n=null),e!==r&&(i[e]=i[r],delete i[r],n&&(o=i[e],s=Me(o),$e===s?i[e].type||(i[e].type=n):(i[e]={type:n},"action"===n&&ve===s?i[e][o]=!0:i[e].tokens=o))),c===i&&Re&Me(i[e])&&(i[e]={type:"simple",tokens:i[e]}))}i=c;for(e in i)if(i[pe](e))for(o=i[e];o.extend;)l=o.extend,u=c[l],delete o.extend,u&&(Re&Me(u)&&(u=c[l]={type:"simple",tokens:u}),o=Fe(u,o));for(a=0;m>a;){i=f[a++];for(e in i)i[pe](e)&&(o=i[e],$e===Me(o)&&"undefined"==typeof o.type&&(o[pe]("error")?(o.type="action",o.action=["error",o.error,!!o["in-context"]],delete o.error):o[pe]("context-start")?(o.type="action",o.action=["context-start",o["context-start"],!!o["in-context"]],delete o["context-start"]):o[pe]("context-end")?(o.type="action",o.action=["context-end",o["context-end"],!!o["in-context"]],delete o["context-end"]):o[pe]("empty")?(o.type="action",o.action=["empty",o.empty,!!o["in-context"]],delete o.empty):o[pe]("indent")?(o.type="action",o.action=["indent",o.indent,!!o["in-context"]],delete o.indent):o[pe]("outdent")?(o.type="action",o.action=["outdent",o.outdent,!!o["in-context"]],delete o.outdent):o[pe]("unique")?(o.type="action",o.action=["unique",ve&Me(o.unique)?["_DEFAULT_",o.unique]:o.unique,!!o["in-context"]],delete o.unique):o[pe]("push")?(o.type="action",o.action=["push",o.push,!!o["in-context"]],delete o.push):o[pe]("pop")?(o.type="action",o.action=["pop",o.pop,!!o["in-context"]],delete o.pop):o.sequence||o.all?(o.type="group",o.match="sequence",o.tokens=o.sequence||o.all,o.all?delete o.all:delete o.sequence):o.either?(o.type="group",o.match="either",o.tokens=o.either,delete o.either):o.zeroOrMore?(o.type="group",o.match="zeroOrMore",o.tokens=o.zeroOrMore,delete o.zeroOrMore):o.oneOrMore?(o.type="group",o.match="oneOrMore",o.tokens=o.oneOrMore,delete o.oneOrMore):o.zeroOrOne?(o.type="group",o.match="zeroOrOne",o.tokens=o.zeroOrOne,delete o.zeroOrOne):o.comment?(o.type="comment",o.tokens=o.comment,delete o.comment):o.block?(o.type="block",o.tokens=o.block,delete o.block):o["escaped-block"]?(o.type="escaped-block",o.tokens=o["escaped-block"],delete o["escaped-block"]):o.simple?(o.type="simple",o.tokens=o.simple,delete o.simple):o.type="simple"),"simple"===o.type?o.autocomplete=!!o.autocomplete:("block"===o.type||"escaped-block"===o.type||"comment"===o.type)&&(o.multiline=o[pe]("multiline")?!!o.multiline:!0,"escaped-block"===o.type&&(o.escape=o[pe]("escape")?o.escape:"\\")))}return t}function h(t,e,n,r,o,s,l,p,m,g,k){var d,y,v,b,_,x,$,C,w,D,T,B,I,Z,W,se=null;if(W=null,N===t)return new cn(N,N,t,W);if(V===t)return new cn(V,V,t,W);if(z===t||null===t)return new cn(z,z,t,W);if(F===t)return new cn(F,F,t,W);if(""===t)return new cn(U,"NONSPACE",t,W);if(!1===t||0===t)return new cn(G,"EMPTY",t,W);if(xe&Me(t)&&(Z=t,t="NGRAM_"+Z.join("_"),r[t]||(r[t]={type:"ngram",tokens:Z})),t=""+t,p[t])return p[t];if(d=n[t]||r[t]||t,ve&Me(d)&&(d=f(d,n,r),d=n[d]||r[d]||null),!d)return null;if(y=d.type?ie[d.type.toUpperCase().replace(Ze,"")]:H,W=d.msg||null,H&y){if(N===d.tokens)return se=new cn(N,t,t,W),p[t]=se,se;if(V===d.tokens)return se=new cn(V,t,t,W),p[t]=se,se;if(z===d.tokens||null===d.tokens)return se=new cn(z,t,t,W),p[t]=se,se;if(F===d.tokens)return se=new cn(F,t,t,W),p[t]=se,se;if(""===d.tokens)return se=new cn(U,t,t,W),p[t]=se,se;if(!1===d.tokens||0===d.tokens)return se=new cn(G,t,t,W),p[t]=se,se;if(!d.tokens)return null}if(le&y||(d.tokens=Te(d.tokens)),le&y)d[pe]("action")?"error"===d.action[0]?d.action[0]=O:"context-start"===d.action[0]?d.action[0]=L:"context-end"===d.action[0]?d.action[0]=P:"empty"===d.action[0]?d.action[0]=R:"indent"===d.action[0]?d.action[0]=j:"outdent"===d.action[0]?d.action[0]=M:"unique"===d.action[0]?d.action[0]=S:"push"===d.action[0]?d.action[0]=A:"pop"===d.action[0]&&(d.action[0]=q):d[pe]("error")?d.action=[O,d.error,!!d["in-context"]]:d[pe]("context-start")?d.action=[L,d["context-start"],!!d["in-context"]]:d[pe]("context-end")?d.action=[P,d["context-end"],!!d["in-context"]]:d[pe]("empty")?d.action=[R,d.empty,!!d["in-context"]]:d[pe]("indent")?d.action=[j,d.indent,!!d["in-context"]]:d[pe]("outdent")?d.action=[M,d.outdent,!!d["in-context"]]:d[pe]("unique")?d.action=[S,ve&Me(d.unique)?["_DEFAULT_",d.unique]:d.unique,!!d["in-context"]]:d[pe]("push")?d.action=[A,d.push,!!d["in-context"]]:d[pe]("pop")&&(d.action=[q,d.pop,!!d["in-context"]]),b=d.action.slice(),se=new pn(le,t,b,W),p[t]=se;else if(H&y)d.autocomplete&&c(d,t,k),v="undefined"==typeof d.combine?"\\b":d.combine,se=new cn(H,t,u(t,d.tokens.slice(),e,v,s,l),W),p[t]=se;else if(K&y)Q&y&&a(d,g),se=new fn(y,t,i(t,d.tokens.slice(),e,s,l),W,d.multiline,d.escape,o[t+".inside"]?1:0),p[t]=se,d.interleave&&m.push(se.clone());else if(re&y){for(x=d.tokens.slice(),xe&Me(d.match)?se=new mn(X,t,null,W,d.match[0],d.match[1]):(_=ue[d.match.toUpperCase()],se=te===_?new mn(te,t,null,W,0,1):ee===_?new mn(ee,t,null,W,0,E):ne===_?new mn(ne,t,null,W,1,E):Y&_?new mn(Y,t,null,W):new mn(J,t,null,W)),p[t]=se,$=[],D=0,T=x.length;T>D;D++)$=$.concat(h(x[D],e,n,r,o,s,l,p,m,g,k));se.set($)}else if(oe&y){for(se=Be(d.tokens.slice()).slice(),C=[],D=0,T=se.length;T>D;D++)C[D]=se[D].slice(),se[D]=new mn(oe,t+"_NGRAM_"+D,null,W);for(p[t]=se,D=0,T=se.length;T>D;D++){for(w=C[D],$=[],B=0,I=w.length;I>B;B++)$=$.concat(h(w[B],e,n,r,o,s,l,p,m,g,k));se[D].set($)}}return p[t]}function g(t){var e,n,r,o,s,l,u,i,a,c,p,f,g,k,d,y,v;if(t.__parsed)return t;for(f={},g={},k={},y={},v={},d=[],e=t.RegExpID||null,s=Ne(t.Extra||{}),l=Ne(t.Style||{}),u=Ne(t.Lex||{}),i=Ne(t.Syntax||{}),o=Ne(t.Parser||[]),t={Style:l,Lex:u,Syntax:i,$parser:null,$interleaved:null,$comments:null,$autocomplete:null,$extra:s,__parsed:0},m(t),r=o.length,n=[],a=0;r>a;a++)c=o[a],p=h(c,e,u,i,l,f,g,k,d,y,v)||null,p&&(xe&Me(p)?n=n.concat(p):n.push(p));return t.$parser=n,t.$interleaved=d&&d.length?d:null,t.$comments=y,t.$autocomplete=v&&v.autocomplete&&v.autocomplete.length?v.autocomplete:null,t.__parsed=1,t}function k(t,e){var n=new dn(g(t),{DEFAULT:e||d,ERROR:y}),r=function(t,e){return{startState:function(){var t=new gn;return t},copyState:function(t){var e=t.clone();return e},token:function(t,e){return n.getToken(t,e)},indent:function(r,o,s){return n.indent(r,o,s,t,e)},lineComment:n.LC,blockCommentStart:n.BCS,blockCommentEnd:n.BCE,blockCommentContinue:n.BCC,blockCommentLead:n.BCL,electricChars:n.$grammar.$extra.electricChars||!1,fold:n.$grammar.$extra.fold||!1}};return r.supportGrammarAnnotations=!1,r.validator=function(t){if(!r.supportGrammarAnnotations||!t||!t.length)return[];var e,o,s=[],l=n.parse(t,b);if(!l)return s;for(e in l)l.hasOwnProperty(e)&&(o=l[e],s.push({message:o[4]||"Syntax Error",severity:"error",from:CodeMirror.Pos(o[0],o[1]),to:CodeMirror.Pos(o[2],o[3])}));return s},r.autocomplete=function(t,e){var r,o,s,l,u,i,a,c,p,f,m,h,g,k,d,y,v,b,_,x=n.$grammar.$autocomplete,$=kn.Pos,C=t.getCursor(),w=C.ch,E=w,O=0,S=0;if(r=[],x&&x.length){for(e=e||{},a=e.word||yn,y=e[pe]("caseInsensitiveMatch")?!!e.caseInsensitiveMatch:!0,v=!!e.prefixMatch,o=t.getLine(C.line);E<o.length&&a.test(o.charAt(E));)++E;for(;w&&a.test(o.charAt(w-1));)--w;if(E>w){for(c=e.renderer||function(t,e,n){var r=n.text,o=n.meta,s=e.list.maxlen-r.length-o.length+1+2,l=new Array(s).join("&nbsp;"),u=n.start,i=n.end;t.innerHTML=['<span class="cmg-autocomplete-keyword">',r.slice(0,u),'<strong class="cmg-autocomplete-keyword-match">',r.slice(u,i),"</strong>",r.slice(i),"</span>",l,'<strong class="cmg-autocomplete-keyword-meta">',o,"</strong>"].join("")},s=o.slice(w,E),l=s.toLowerCase(),i=s.length,p=0,f=x.length;f>p;p++)u=x[p],m=u.word,h=u.meta,g=m.length,i>g||(y?(b=m.toLowerCase(),_=l):(b=m,_=s),(d=b.indexOf(_))<0||v&&d>0||(y&&(k=m.indexOf(s)),g>O&&(O=g),h.length>S&&(S=h.length),r.push({text:m,name:m,meta:h,start:0>k?d:k,end:(0>k?d:k)+s.length,match:s,displayText:m+"		["+h+"]",render:c,score:1e3-10*(g-i)-5*(0>k?d+3:k)})));r.length&&(r=r.sort(vn)),r.maxlen=O+S}}return{list:r,from:$(C.line,w),to:$(C.line,E)}},r}var d,y,v=1,b=2,_=4,x=8,$=~_,C=~x,w=_|x,E=1/0,O=4,S=8,A=16,q=32,R=64,j=128,M=256,L=512,P=1024,D=2,T=4,B=8,N=4,F=8,V=16,z=32,I=N|V,G=64,U=128,H=256,K=512,Z=513,Q=514,Y=1024,J=2048,W=J,X=4096,te=4097,ee=4098,ne=4099,re=8192,oe=16384,se=J|oe,le=32768,ue={EITHER:Y,ALL:W,SEQUENCE:J,ZEROORONE:te,ZEROORMORE:ee,ONEORMORE:ne,REPEATED:X},ie={ACTION:le,BLOCK:K,COMMENT:Q,ESCAPEDBLOCK:Z,SIMPLE:H,GROUP:re,NGRAM:oe},ae=void 0,ce="prototype",pe="hasOwnProperty",fe="propertyIsEnumerable",me=(Object.keys,Array[ce],Object[ce]),he=(Function[ce],me.toString),ge=4,ke=5,de=6,ye=8,ve=16,be=17,_e=18,xe=32,$e=64,Ce=128,we=256,Ee=512,Oe=1024,Se=2048,Ae=4096,qe=ve|xe,Re=ve|xe|we,je={"[object Number]":ge,"[object String]":ve,"[object Array]":xe,"[object RegExp]":we,"[object Date]":Ee,"[object Function]":Ce,"[object Object]":$e},Me=function(t){if(null===t)return Oe;if(!0===t||!1===t||t instanceof Boolean)return ye;if(ae===t)return Se;var e=je[he.call(t)]||Ae;return ge===e||t instanceof Number?isNaN(t)?de:isFinite(t)?ge:ke:ve===e||t instanceof String?1===t.length?be:ve:xe===e||t instanceof Array?xe:we===e||t instanceof RegExp?we:Ee===e||t instanceof Date?Ee:Ce===e||t instanceof Function?Ce:$e===e?$e:Ae},Le=function(){var t,e,n,r,o,s,l=arguments,u=l.length;for(t=l[0]||{},o=1;u>o;o++)if(e=l[o],$e===Me(e))for(r in e)e[pe](r)&&e[fe](r)&&(n=e[r],s=Me(n),t[r]=ge&s?0+n:Ee&s?new Date(n):qe&s?n.slice():n);return t},Pe=Object.create,De=function(t,e){var n,r=arguments.length,o="constructor";return 0===r?(t=Object,e={}):1===r?(e=t||{},t=Object):(t=t||Object,e=e||{}),e[pe](o)||(e[o]=function(){}),n=e[o],delete e[o],n[ce]=Le(Pe(t[ce]),e),n[ce][o]=n,n},Te=function(t,e){return e||xe!==Me(t)?[t]:t},Be=function(t,e){return t=Te(t),(e||xe!==Me(t[0]))&&(t=[t]),t},Ne=function(t,e){var n,r,o,s,l=Me(t),u=0;if(ge===Me(e)?e>0?(u=e,e=!0):e=!1:e=!1!==e,$e===l){r={};for(o in t)t[pe](o)&&t[fe](o)&&(n=Me(t[o]),r[o]=$e===n?e?Ne(t[o],u>0?u-1:e):t[o]:xe===n?e?Ne(t[o],u>0?u-1:e):t[o].slice():Ee&n?new Date(t[o]):ve&n?t[o].slice():ge&n?0+t[o]:t[o])}else if(xe===l)for(s=t.length,r=new Array(s),o=0;s>o;o++)n=Me(t[o]),r[o]=$e===n?e?Ne(t[o],u>0?u-1:e):t[o]:xe===n?e?Ne(t[o],u>0?u-1:e):t[o].slice():Ee&n?new Date(t[o]):ve&n?t[o].slice():ge&n?0+t[o]:t[o];else r=Ee&l?new Date(t):ve&l?t.slice():ge&l?0+t:t;return r},Fe=function(){var t,e,n,r,o,s,l,u,i,a,c=arguments,p=c.length;if(1>p)return null;for(e=Ne(c[0]),n=1;p>n;n++)if(t=c[n])for(r in t)if(t[pe](r)&&t[fe](r))if(e[pe](r)&&e[fe](r)){if(i=Me(e[r]),a=Me(t[r]),$e===i&&$e===a)e[r]=Fe(e[r],t[r]);else if(xe===i&&xe===a){if(l=e[r],u=t[r],s=u.length,!s)continue;if(l.length)for(o=0;s>o;o++)0>l.indexOf(u[o])&&l.push(u[o]);else e[r]=u.slice()}}else e[r]=Ne(t[r]);return e},Ve=/([.*+?^${}()|[\]\/\\\-])/g,ze=function(t){return t.replace(Ve,"\\$1")},Ie=function(t,e,n){var r,o,s,l,u,i=!0===n?0:1;for(ve&Me(e)&&(e=[e,e],i=0),o=t.length,u="",r=0;o>r;)s=t.charAt(r),o>r+1&&"$"===s?(l=t.charCodeAt(r+1),36===l?(u+="$",r+=2):l>=48&&57>=l?(u+=e[i+l-48]||"",r+=2):(u+=s,r+=1)):(u+=s,r+=1);return u},Ge=/^\s+|\s+$/g,Ue=String[ce].trim?function(t){return t.trim()}:function(t){return t.replace(Ge,"")},He=function(t,e){return e.length-t.length},Ke=/\r\n|\r|\n/g,Ze=/[\-_]/g,Qe=/^([\[\]{}()*+?\/|'"]|\s)/,Ye=function(t,e){return ve&Me(e)&&ve&Me(t)&&e.length&&e.length<=t.length&&e==t.substr(0,e.length)},Je=function(t,e,n){if(!t||(ge|we)&Me(t))return t;var r,o=e?e.length||0:0;if(o&&e===t.substr(0,o)){var s,l,u,r,i,a=t.substr(o),c=a.charAt(0),p="";for(r=a.length;r--&&(i=a.charAt(r),c!==i);)"i"===i.toLowerCase()&&(p="i");return s=a.substring(1,r),l="^("+s+")",n[l]||(u=new RegExp(l,p),n[l]=u),n[l]}return t},We=function(t,e){var n,r="";return ve&Me(e)&&(r=e),n=t.sort(He).map(ze).join("|"),[new RegExp("^("+n+")"+r),1]},Xe=0,tn=function(){return++Xe},en=function(t){return[t||"uuid",++Xe,(new Date).getTime()].join("_")},nn=Math.max,rn=/^[\s\u00a0]+/,on=/[^\s\u00a0]/,sn=De({constructor:function(t){var e=this;e._=null,e.s=t?""+t:"",e.start=e.pos=0,e.lCP=e.lCV=0,e.lS=0},_:null,s:"",start:0,pos:0,lCP:0,lCV:0,lS:0,dispose:function(){var t=this;return t._=null,t.s=null,t.start=null,t.pos=null,t.lCP=null,t.lCV=null,t.lS=null,t},toString:function(){return this.s},sol:function(){return 0===this.pos},eol:function(){return this.pos>=this.s.length},end:function(){var t=this;return t.pos=t.s.length,t},mov:function(t){var e=this;return 0>t?e.pos=nn(0,e.pos-t):e.pos+=t,e},bck:function(t){var e=this;return e.pos=nn(0,t),e},sft:function(){var t=this;return t.start=t.pos,t},nxt:function(){var t,e=this,n=e.s;return e.pos<n.length?t=n.charAt(e.pos++)||null:void 0},cur:function(t){var e=this,n=e.s.slice(e.start,e.pos);return t&&(e.start=e.pos),n},upd:function(){var t=this;return t._&&(t._.pos=t.pos),t},spc:function(t){var e,n=this,r=n.pos,o=n.s.slice(r);return(e=o.match(rn))?(!1!==t&&n.mov(e[0].length),1):0},col:function(t){var e=this;return t=t||1,e.lCP<e.start&&(e.lCV=sn.col(e.s,e.start,t,e.lCP,e.lCV),e.lCP=e.start,e._&&(e._.start=e.start,e._.lastColumnPos=e.lCP,e._.lastColumnValue=e.lCV,e._.lineStart=e.lS)),e.lCV-(e.lS?sn.col(e.s,e.lS,t):0)},ind:function(t){var e=this;return t=t||1,sn.col(e.s,null,t)-(e.lS?sn.col(e.s,e.lS,t):0)}});sn.col=function(t,e,n,r,o){var s,l;for(null===e&&(e=t.search(on),-1==e&&(e=t.length)),s=r||0,l=o||0;e>s;++s)l+="	"==t.charAt(s)?n-l%n:1;return l},sn._=function(t){var e=new sn;return e._=t,e.s=""+t.string,e.start=t.start,e.pos=t.pos,e.lCP=t.lastColumnPos,e.lCV=t.lastColumnValue,e.lS=t.lineStart,e};var ln,un,an,cn,pn,fn,mn,hn=De({constructor:function(t){this._=t||[]},_:null,dispose:function(){var t=this;return t._=null,t},toString:function(){return this._.slice().reverse().join("\n")},clone:function(){return new hn(this._.slice())},isEmpty:function(){return 0>=this._.length},pos:function(){return this._.length},peek:function(t){var e=this,n=e._;if(t=arguments.length?t:-1,n.length){if(0>t&&0<=n.length+t)return n[n.length+t];if(t>=0&&t<n.length)return n[t]}return null},pop:function(){return this._.pop()},shift:function(){return this._.shift()},push:function(t){var e=this;return e._.push(t),e},unshift:function(t){var e=this;return e._.unshift(t),e},pushAt:function(t,e,n,r){var o=this,s=o._;return n&&r&&(e[n]=r),t<s.length?s.splice(t,0,e):s.push(e),o},empty:function(t,e){var n=this,r=n._;if(t&&e)for(;r.length&&r[r.length-1]&&r[r.length-1][t]===e;)r.pop();else r.length=0;return n}}),gn=De({constructor:function bn(t,e,n){var r=this;r.id=e?en("state"):"state",t instanceof bn?(r.line=t.line,r.status=t.status,r.stack=t.stack.clone(),r.token=t.token,r.block=t.block,r.status&b?(r.queu=t.queu,r.symb=t.symb,r.ctx=t.ctx,r.err=t.err):(r.queu=null,r.symb=null,r.ctx=null,r.err=null)):(r.line=t||0,r.status=n||0,r.stack=new hn,r.token=null,r.block=null,r.status&b?(r.queu=[],r.symb={},r.ctx=[],r.err={}):(r.queu=null,r.symb=null,r.ctx=null,r.err=null))},id:null,line:0,status:0,token:null,block:null,stack:null,queu:null,symb:null,ctx:null,err:null,dispose:function(){var t=this;return t.id=null,t.line=null,t.status=null,t.stack&&t.stack.dispose(),t.stack=null,t.token=null,t.block=null,t.queu=null,t.symb=null,t.ctx=null,t.err=null,t},clone:function(t){return new gn(this,t)},toString:function(){var t=this;return[t.id,t.line,t.token?t.token.name:"0",t.block?t.block.name:"0"].join("_")}});ln=De({constructor:function(t,l,u,i){var a=this;switch(a.type=D,a.name=t,a.pattern=null,a.ptype=u||ve,a.key=i||0,a.ptype){case Oe:a.pattern=null,a.match=s;break;case we:a.pattern=we&Me(l)?[l,0]:[l[0],l[1]||0],a.match=o;break;case be:case _e:a.pattern=l,a.match=_e===a.ptype?n:e;break;case ve:default:a.pattern=l,a.match=r}},type:null,name:null,pattern:null,ptype:null,key:0,dispose:function(){var t=this;return t.type=null,t.name=null,t.pattern=null,t.ptype=null,t.key=null,t},match:function(){return!1},toString:function(){var t=this;return["[","Pattern: ",t.name,", ",t.pattern?t.pattern.toString():null,"]"].join("")}}),an=De(ln,{constructor:function(t,e,n){var r=this;r.type=T,r.name=t,r.pattern=e,r.key=!1!==n},match:function(t,e){var n,r,o=this,s=o.pattern,l=s.length,u=o.key;for(n=0;l>n;n++)if(r=s[n].match(t,e))return u?[n,r[1]]:r;return!1}}),un=De(ln,{constructor:function(t,e){var n=this;n.type=B,n.name=t,n.pattern=e,n.pattern[0]=new an(n.name+"_Start",n.pattern[0],!1)},match:function(t,e){var n,r,o,s,l,u=this,i=u.pattern,a=i[0],c=i[1];return(r=a.match(t,e))?(n=c[r[0]],s=Me(n),l=a.pattern[r[0]].ptype,we===l&&(ge===s?(o=r[1][n+1],n=new ln(u.name+"_End",o,o.length>1?ve:be)):ve===s&&(o=Ie(n,r[1]),n=new ln(u.name+"_End",o,o.length>1?ve:be))),n):!1}}),cn=De({constructor:function(t,e,n,r){var o=this;o.type=t||H,o.name=e,o.token=n,o.status=0,o.msg=r||null,o.$msg=null,o.$clone=null,N===o.name?o.name="<start-of-file>":V===o.name?o.name="<start-of-line>":z===o.name?o.name="<end-of-line>":F===o.name?o.name="<end-of-file>":G===o.name?o.name="<empty>":U===o.name&&(o.name="<nonspace>")},name:null,type:null,token:null,status:0,msg:null,$msg:null,$clone:null,$id:null,dispose:function(){var t=this;return t.type=null,t.name=null,t.token=null,t.status=null,t.msg=null,t.$msg=null,t.$clone=null,t.$id=null,t},clone:function(){var t,e,n,r=this,o=r.$clone;if(t=new r.constructor,t.type=r.type,t.name=r.name,t.token=r.token,t.msg=r.msg,o&&o.length)for(e=0,n=o.length;n>e;e++)t[o[e]]=r[o[e]];return t},get:function(t,e){var n=this,r=n.token,o=n.type,s=n.name,l=null;if(n.$msg=n.msg||null,e.token=null,N===o){if(N&e.status&&t.sol())return!0}else if(V===o){if(t.sol())return!0}else if(z===o){if(t.spc(),t.eol())return s}else if(F===o){if(t.spc(),t.eol())return!0}else{if(G===o)return n.status=0,!0;if(U===o)n.status&_&&t.spc()&&!t.eol()&&(n.status|=x),n.status&=$;else if(l=r.match(t))return e.token={name:s,value:t.cur(),token:l[1]},s}return n.status&&n.$msg&&(n.$msg=Ie(n.$msg,s,!0)),!1},req:function(t){var e=this;return t?e.status|=_:e.status&=$,e},err:function(t,e,n,r,o){var s,l=this,u=l.name;return s=l.$msg?l.$msg:l.status&_?'Token "'+u+'" Expected':'Syntax Error: "'+u+'"',t&&t.status&b&&(t.err[e+"_"+n+"_"+r+"_"+o+"_"+u]=[e,n,r,o,s]),s},toString:function(){var t=this;return["[","Token: ",t.name,", ",t.token?t.token.toString():null,"]"].join("")}}),pn=De(cn,{constructor:function(t,e,n,r){var o=this;o.type=t||le,o.name=e,o.token=n,o.status=0,o.msg=r||null,o.$msg=null,o.$clone=null},get:function(t,e){var n,r,o,s,l,u,i,a,c,p,f,m=this,h=m.token||null,g=e.queu,k=e.symb,d=e.ctx,y=e.token,v=e.err,_=!!(e.status&b);if(m.status=0,m.$msg=null,!h||!_)return!0;if(l=m.msg,n=h[0],r=h[1],c=!!h[2],u=e.line,a=t.pos,i=y&&y.value?a-y.value.length:i-1,O===n)return m.$msg=l?l:"Error",p=u+"_"+i+"_"+u+"_"+a+"_"+m.name,v[p]=[u,i,u,a,m.err()],m.status|=x,!1;if(L===n)d.unshift({symb:{},queu:[]});else if(P===n)d.length&&d.shift();else if(R===n)c?d.length&&(d[0].queu.length=0):g.length=0;else if(S===n){if(c){if(!d.length)return!0;k=d[0].symb}if(y){if(o=r[1],s=r[0],o=ge===Me(o)?y.token[o]:Ie(o,y.token,!0),k[pe](s)||(k[s]={}),k[s][pe](o))return m.$msg=l?Ie(l,o,!0):'Duplicate "'+o+'"',f=m.err(),p=k[s][o][0]+"_"+k[s][o][1]+"_"+k[s][o][2]+"_"+k[s][o][3]+"_"+m.name,v[p]=[k[s][o][0],k[s][o][1],k[s][o][2],k[s][o][3],f],p=u+"_"+i+"_"+u+"_"+a+"_"+m.name,v[p]=[u,i,u,a,f],m.status|=x,!1;k[s][o]=[u,i,u,a]}}else if(q===n){if(c){if(!d.length)return!0;g=d[0].queu}if(r){if(y&&(r=ge===Me(r)?y.token[r]:Ie(r,y.token)),!g.length||r!==g[0][0])return g.length?(m.$msg=l?Ie(l,[g[0][0],r],!0):'Tokens do not match "'+g[0][0]+'","'+r+'"',f=m.err(),p=g[0][1]+"_"+g[0][2]+"_"+g[0][3]+"_"+g[0][4]+"_"+m.name,v[p]=[g[0][1],g[0][2],g[0][3],g[0][4],f],p=u+"_"+i+"_"+u+"_"+a+"_"+m.name,v[p]=[u,i,u,a,f]):(m.$msg=l?Ie(l,["",r],!0):'Token does not match "'+r+'"',f=m.err(),p=u+"_"+i+"_"+u+"_"+a+"_"+m.name,v[p]=[u,i,u,a,f]),g.shift(),m.status|=x,!1;g.shift()}else g.shift()}else if(A===n&&r){if(c){if(!d.length)return!0;g=d[0].queu}y&&(r=ge===Me(r)?y.token[r]:Ie(r,y.token)),g.unshift([r,u,i,u,a])}return!0}}),fn=De(cn,{constructor:function(t,e,n,r,o,s,l){var u=this;u.type=t,u.name=e,u.token=n,u.status=0,u.msg=r||null,u.mline="undefined"==typeof o?1:o,u.esc=s||"\\",u.inter=l,u.$msg=null,u.$clone=["mline","esc","inter"]},inter:0,mline:0,esc:null,get:function(t,e){var n,r,o,s,l,u,i,a,c,p,f,m,h,g,k=this,d=0,y=0,v="",b=k.mline,_=k.token,x=k.name,C=k.type,w=k.inter,E=w?x+".inside":x,O=0,S=Z===C,A=k.esc,q="",R="",j="",M="",L=e.stack;if(k.$msg=k.msg||null,h=e.line,g=t.pos,Q===C&&(k.status&=$),l=0,e.block&&e.block.name===x?(y=1,n=e.block.end,l=1,u=E,p=e.block.s,m=e.block.i,f=e.block.e,q=e.block._s,R=e.block._i,M=""):!e.block&&(n=_.match(t))&&(y=1,p=[h,g],m=[[h,t.pos],[h,t.pos]],f=[h,t.pos],q=t.cur(),R="",M="",j="",e.block={name:x,end:n,s:p,i:m,e:f,_s:q,_i:R,_e:j},u=x),y){if(o=L.pos(),s=Oe===n.type,w){if(l&&s&&t.sol())return k.status&=$,e.current=null,e.block=null,!1;if(!l)return L.pushAt(o,k.clone(),"$id",x),u}if(d=n.match(t),r=b,c=0,d)u=s?E:x,j=t.cur().slice(M.length);else for(a=t.pos;!t.eol();){if(i=t.pos,!(S&&O||!n.match(t))){w&&t.pos>i&&i>a?(u=E,t.bck(i),c=1):(u=x,d=1),j=t.cur().slice(M.length);break}v=t.nxt(),M+=v,O=!O&&v===A}return r=b||S&&O,m[1]=[h,i],f=[h,t.pos],d||!r&&!c?e.block=null:(e.block.i=m,e.block.e=f,e.block._i+=M,e.block._e=j,e.stack.pushAt(o,k.clone(),"$id",x)),e.token={name:x,value:t.cur(),token:[q+R+M+j,R+M,q,j]},u}return k.status&&k.$msg&&(k.$msg=Ie(k.$msg,x,!0)),!1}}),mn=De(cn,{constructor:function(t,e,n,r,o,s){var l=this;l.type=t?t:X,l.name=e||null,l.token=null,l.status=0,l.msg=r||null,l.min=o||0,l.max=s||E,l.found=0,l.$msg=null,l.$clone=["min","max","found"],n&&l.set(n)},min:0,max:1,found:0,set:function(t){return t&&(this.token=Te(t)),this},get:function(t,e){var n,r,o,s,l,u,i,a,c,p,f,m,h,g,k,d=this,y=d.type,v=d.token,b=v.length;if(d.$msg=d.msg||null,d.status&=C,m=t.pos,l=e.stack,Y===y){for(p=0,f=0,d.status|=_,u=[],n=0;b>n;n++){if(o=v[n].clone().req(1),s=o.get(t,e),o.status&_&&(p++,u.push(o.err())),!1!==s)return s;o.status&x&&(f++,t.bck(m))}return p>0?d.status|=_:d.status&=$,b===f&&p>0?d.status|=x:d.status&=C,d.status&&!d.$msg&&u.length&&(d.$msg=u.join(" | ")),!1}if(se&y){k=y&J?1:0,k?d.status|=_:d.status&=$,h=l.pos(),g=d.name+"_"+tn(),r=0;do o=v[r].clone().req(k),s=o.get(t,e),r++;while(b>r&&!0===s&&I&o.type);if(r>=b)return o.status&x?(k?d.status|=x:d.status&=C,t.bck(m)):k&&o.status&_&&(d.status|=x),d.status&&!d.$msg&&(d.$msg=o.err()),s;if(!1!==s){if(!0!==s)for(n=b-1;n>=r;n--)l.pushAt(h+b-n-1,v[n].clone().req(1),"$id",g);return s}return o.status&x?(k?d.status|=x:d.status&=C,t.bck(m)):k&&o.status&_&&(d.status|=x),d.status&&!d.$msg&&(d.$msg=o.err()),!1}for(p=0,i=d.found,a=d.min,c=d.max,d.status&=$,h=l.pos(),g=d.name+"_"+tn(),u=[],n=0;b>n;n++){if(o=v[n].clone().req(1),s=o.get(t,e),!1!==s){if(++i,c>=i)return d.found=i,l.pushAt(h,d.clone(),"$id",g),d.found=0,s;break}o.status&_&&(p++,u.push(o.err())),o.status&x&&t.bck(m)}return a>i?d.status|=_:d.status&=$,i>c||a>i&&p>0?d.status|=x:d.status&=C,d.status&&!d.$msg&&u.length&&(d.$msg=u.join(" | ")),!1}});var kn=CodeMirror||{Pass:{toString:function(){return"CodeMirror.Pass"}}};d=null,y="error";{var dn=De({constructor:function(t,e){var n=this;n.$grammar=t,n.DEF=e.DEFAULT,n.ERR=t.Style.error||e.ERROR,n.LC=t.$comments.line?t.$comments.line[0]:null,n.BCS=t.$comments.block?t.$comments.block[0][0]:null,n.BCE=t.$comments.block?t.$comments.block[0][1]:null,n.BCC=n.BCL=t.$comments.block?t.$comments.block[0][2]:null},$grammar:null,DEF:null,ERR:null,LC:null,BCS:null,BCE:null,BCL:null,BCC:null,dispose:function(){var t=this;return t.$grammar=null,t.DEF=null,t.ERR=null,t.LC=null,t.BCS=null,t.BCE=null,t.BCL=null,t.BCC=null,t},parse:function(t,e){t=t||"";var n,r,o,s,l,u,i,a,c=this,p=t.split(Ke),f=p.length;if(e=e||v,i=!!(e&b),a=!!(e&v),s=new gn(0,0,e),s.parseAll=1,a)for(r=[],n=0;f>n;n++){for(s.line=n,l=new sn(p[n]),o=[];!l.eol();)o.push(c.getToken(l,s));r.push(o)}else for(n=0;f>n;n++)for(s.line=n,l=new sn(p[n]);!l.eol();)c.getToken(l,s);return u=a&&i?{tokens:r,errors:s.err}:a?r:s.err,l.dispose(),s.dispose(),u},getToken:function(t,e){var n,r,o,s,l,u,i,a,c=this,p=c.$grammar,f=p.Style,m=c.DEF,h=c.ERR,g=p.$interleaved,k=p.$parser,d=k.length,y=!!e.parseAll;if(t=y?t:sn._(t),y?0===e.line?e.status|=N:e.status&=~N:t.sol()?e.status|=N:e.status&=~N,n=e.stack,t.sol()&&!n.isEmpty()&&z===n.peek().type&&n.pop(),(n.isEmpty()||U!==n.peek().type)&&t.spc())return y?{value:t.cur(1),type:m}:t.upd()&&m;for(o=e.line;!n.isEmpty()&&!t.eol();){if(g)for(l=0;l<g.length;)if(i=g[l++],u=i.get(t,e),!1!==u)return u=f[u]||m,y?{value:t.cur(1),type:u}:t.upd()&&u;if(r=t.pos,i=n.pop(),u=i.get(t,e),!1!==u){if(!0!==u){for(u=f[u]||m;!n.isEmpty()&&le===n.peek().type;)a=n.pop(),a.get(t,e);return y?{value:t.cur(1),type:u}:t.upd()&&u}}else if(i.status&w)return n.empty("$id",i.$id),t.nxt(),u=h,i.err(e,o,r,o,t.pos),y?{value:t.cur(1),type:u}:t.upd()&&u}for(s=0;d>s;s++)if(r=t.pos,i=k[s],u=i.get(t,e),!1!==u){if(!0!==u){for(u=f[u]||m;!n.isEmpty()&&le===n.peek().type;)a=n.pop(),a.get(t,e);return y?{value:t.cur(1),type:u}:t.upd()&&u}}else if(i.status&w)return n.empty("$id",i.$id),t.nxt(),u=h,i.err(e,o,r,o,t.pos),y?{value:t.cur(1),type:u}:t.upd()&&u;return t.nxt(),y?{value:t.cur(1),type:m}:t.upd()&&m},indent:function(t,e,n,r){var o=(r.indentUnit||4,kn.Pass);return o}}),yn=/[\w$]/,vn=function(t,e){return e.score-t.score};t.CodeMirrorGrammar={VERSION:"2.2.0",clone:Ne,extend:Fe,pre_process:m,parse:g,getMode:k}}return t.CodeMirrorGrammar});