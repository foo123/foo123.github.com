/**
* https://github.com/foo123/SelectorListener
* @VERSION: 1.2.0
* adapted from https://github.com/csuwildcat/SelectorListener
**/
!function(){"use strict";function e(e,t,r,o){var _=e.length,n=arguments.length;if(4>n&&(o=_-1),0>o&&(o+=_),3>n&&(r=0),r>o)return e;var i,s,l,c,d=o-r+1;for(l=15&d,c=1&l,c&&t(e[r],r,e),i=c;l>i;i+=2)s=r+i,t(e[s],s,e),t(e[++s],s,e);for(i=l;d>i;i+=16)s=r+i,t(e[s],s,e),t(e[++s],s,e),t(e[++s],s,e),t(e[++s],s,e),t(e[++s],s,e),t(e[++s],s,e),t(e[++s],s,e),t(e[++s],s,e),t(e[++s],s,e),t(e[++s],s,e),t(e[++s],s,e),t(e[++s],s,e),t(e[++s],s,e),t(e[++s],s,e),t(e[++s],s,e),t(e[++s],s,e);return e}function t(t){var _=t.target,i=t.animationName,s=n[i]||{};t.selector=s.selector,e((this.selectorListeners||{})[i]||[],function(e){e.call(_,t)}),_._decorateDom(s.attributeModified?o:r),s.removedMutation&&(_.sl__recycled__=0,_.removeAttribute("sl__exist__"),C===_.parentNode&&C.removeChild(_))}function r(e){return e.hasAttribute("sl__exist__")?!1:(e.hasAttribute("sl__removed__")&&e.removeAttribute("sl__removed__"),e.setAttribute("sl__exist__",1),e.setAttribute("sl__class__"," "+e.className+" "),e.sl__removeChild||(e.sl__removeChild=e.removeChild,e.removeChild=function(t){return 1===t.nodeType?(C.appendChild(t),t.sl__recycled__=new Date,t.setAttribute("sl__removed__",1)):e.sl__removeChild(t),t}),e.sl__replaceChild||(e.sl__replaceChild=e.replaceChild,e.replaceChild=function(t,r){return e.sl__replaceChild(t,r),1===r.nodeType&&(C.appendChild(r),r.sl__recycled__=new Date,r.setAttribute("sl__removed__",1)),r}),!0)}function o(e){return e.hasAttribute("sl__exist__")?(e.hasAttribute("sl__removed__")&&e.removeAttribute("sl__removed__"),e.setAttribute("sl__class__"," "+e.className+" "),!1):(e.hasAttribute("sl__removed__")&&e.removeAttribute("sl__removed__"),e.setAttribute("sl__exist__",1),e.setAttribute("sl__class__"," "+e.className+" "),e.sl__removeChild||(e.sl__removeChild=e.removeChild,e.removeChild=function(t){return 1===t.nodeType?(C.appendChild(t),t.sl__recycled__=new Date,t.setAttribute("sl__removed__",1)):e.sl__removeChild(t),t}),e.sl__replaceChild||(e.sl__replaceChild=e.replaceChild,e.replaceChild=function(t,r){return e.sl__replaceChild(t,r),1===r.nodeType&&(C.appendChild(r),r.sl__recycled__=new Date,r.setAttribute("sl__removed__",1)),r}),!0)}function _(){for(var e=new Date,t=2*A,r=C.childNodes.length-1;r>=0;r--){var o=C.childNodes[r];(!o.sl__recycled__||e>t+o.sl__recycled__)&&C.removeChild(o)}}if("object"!=typeof window.SelectorListener){var n={},i={},s=0,l="{from {outline-color:#fff;} to {outline-color:#000;}}",c="0.001s",d=/SelectorListener/g,a=/(:not\s*\(\s*)?::?exists(\s*\))?\b/gi,u=/::?added\b/gi,m=/([^, ]+?)(::?removed)\b/gi,h=/::?class\-added\(([^\(\)]+)\)/gi,p=/::?class\-removed\(([^\(\)]+)\)/gi,f=document.createElement("style"),v=document.createElement("style"),y=document.createElement("style"),b=document.getElementsByTagName("head")[0],C=document.createElement("div"),x=!1,A=1e3,w=["animationstart","oAnimationStart","MSAnimationStart","webkitAnimationStart"],L=function(){var e="animation-duration: "+c+";",t="animation-name: SelectorListener !important;",r=window.getComputedStyle(document.documentElement,""),o=(Array.prototype.slice.call(r).join("").match(/moz|webkit|ms/)||""===r.OLink&&["o"])[0];return{css:"-"+o+"-",properties:"{"+e+t+"-"+o+"-"+e+"-"+o+"-"+t+"}",keyframes:!(!window.CSSKeyframesRule&&!window["WebKit|Moz|MS|O".match(new RegExp("("+o+")","i"))[1]+"CSSKeyframesRule"])}}();f.type=v.type=y.type="text/css",f.setAttribute("sl__exist__",1),v.setAttribute("sl__exist__",1),y.setAttribute("sl__exist__",1),f.appendChild(document.createTextNode("#sl__recycle_bin__{position:absolute;max-height:0 !important;max-width:0 !important;overflow:hidden !important;}#sl__recycle_bin__>*{max-height:0 !important;max-width:0 !important;overflow:hidden !important;}")),b.appendChild(f),b.appendChild(v),b.appendChild(y),C.setAttribute("sl__exist__",1),C.setAttribute("style","position:absolute;max-height:0 !important;max-width:0 !important;overflow:hidden !important;"),C.id="sl__recycle_bin__",HTMLDocument.prototype._decorateDom=function(e){var t,r,o,_=this;if(_=_.getElementsByTagName("body")[0],1!==_.nodeType)return _;if(e(_))for(t=_.childNodes,o=0,r=t.length;r>o;o++)1===t[o].nodeType&&t[o]._decorateDom(e);return _},HTMLElement.prototype._decorateDom=function(e){var t,r,o,_=this;if(1!==_.nodeType)return _;if(e(_))for(t=_.childNodes,o=0,r=t.length;r>o;o++)1===t[o].nodeType&&t[o]._decorateDom(e);return _},HTMLDocument.prototype.addSelectorListener=HTMLElement.prototype.addSelectorListener=function(e,o){if(e&&"function"==typeof o){x?C.parentNode||(document.body.childNodes.length?document.body.insertBefore(C,document.body.firstChild):document.body.appendChild(C)):(document.body.childNodes.length?document.body.insertBefore(C,document.body.firstChild):document.body.appendChild(C),x=!0,setTimeout(function E(){_(),setTimeout(E,A)},A));var c=!1,f=!1,b=e.replace(h,function(e,t){return c=!0,t="."===t.charAt(0)?t.slice(1):t,"[sl__exist__]:not([sl__removed__])."+t+":not([sl__class__~="+t+"])"}).replace(p,function(e,t){return c=!0,t="."===t.charAt(0)?t.slice(1):t,"[sl__exist__]:not([sl__removed__])[sl__class__~="+t+"]:not(."+t+")"}).replace(a,function(e,t){return t?":not([sl__exist__]):not([sl__removed__])":"[sl__exist__]:not([sl__removed__])"}).replace(m,function(e,t){return f=!0,"#sl__recycle_bin__>"+t+"[sl__exist__][sl__removed__]"}).replace(u,":not([sl__exist__]):not([sl__removed__])"),S=i[b],g=this.selectorListeners=this.selectorListeners||{};if(S)n[S].count++;else{S=i[b]="SelectorListener-"+ ++s;var T=document.createTextNode("@"+(L.keyframes?L.css:"")+"keyframes "+S+" "+l);y.appendChild(T),v.sheet.insertRule(b+L.properties.replace(d,S),0),n[S]={count:1,selector:e,removedMutation:f,attributeModified:c,keyframe:T,rule:v.sheet.cssRules[0]}}g.count?g.count++:(this._decorateDom(r),g.count=1,w.forEach(function(e){this.addEventListener(e,t,!1)},this)),(g[S]=g[S]||[]).push(o)}},HTMLDocument.prototype.removeSelectorListener=HTMLElement.prototype.removeSelectorListener=function(e,r){if(e){var o=e.replace(h,function(e,t){return t="."===t.charAt(0)?t.slice(1):t,"[sl__exist__]:not([sl__removed__])."+t+":not([sl__class__~="+t+"])"}).replace(p,function(e,t){return t="."===t.charAt(0)?t.slice(1):t,"[sl__exist__]:not([sl__removed__])[sl__class__~="+t+"]:not(."+t+")"}).replace(a,function(e,t){return t?":not([sl__exist__]):not([sl__removed__])":"[sl__exist__]:not([sl__removed__])"}).replace(m,function(e,t){return"#sl__recycle_bin__>"+t+"[sl__exist__][sl__removed__]"}).replace(u,":not([sl__exist__]):not([sl__removed__])");if(i.hasOwnProperty(o)){var _=this.selectorListeners||{},s=i[o],l=_[s]||[],c=n[s];if("function"==typeof r){var d=l.indexOf(r);d>-1&&(c.count--,c.count||(v.sheet.deleteRule(v.sheet.cssRules.item(c.rule)),y.removeChild(c.keyframe),delete n[s],delete i[o],delete _[s]),_.count--,l.splice(d,1),_.count||w.forEach(function(e){this.removeEventListener(e,t,!1)},this))}else arguments.length<2&&(v.sheet.deleteRule(v.sheet.cssRules.item(c.rule)),y.removeChild(c.keyframe),delete n[s],delete i[o],_.hasOwnProperty(s)&&delete _[s],_.count--,_.count||w.forEach(function(e){this.removeEventListener(e,t,!1)},this))}}},window.SelectorListener={VERSION:"1.2.0",jquery:function(e){"function"!=typeof e.fn.onSelector&&(e.fn.onSelector=function(e,t){return e&&"function"==typeof t&&this.each(function(){this.addSelectorListener(e,t)}),this},e.fn.offSelector=function(e,t){return this.each("function"==typeof t?function(){this.removeSelectorListener(e,t)}:function(){this.removeSelectorListener(e)}),this})}},"undefined"!=typeof jQuery&&window.SelectorListener.jquery(jQuery)}}();