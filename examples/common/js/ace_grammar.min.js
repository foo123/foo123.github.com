/**
*
*   AceGrammar
*   @version: 4.1.0
*
*   Transform a grammar specification in JSON format, into an ACE syntax-highlight parser mode
*   https://github.com/foo123/ace-grammar
*   https://github.com/foo123/editor-grammar
*
**/!function(e,t,n){"use strict";"object"==typeof module&&module.exports?(module.$deps=module.$deps||{})&&(module.exports=module.$deps[t]=n.call(e)):"function"==typeof define&&define.amd&&"function"==typeof require&&"function"==typeof require.specified&&require.specified(t)?define(t,["module"],function(t){return n.moduleUri=t.uri,n.call(e)}):t in e||(e[t]=n.call(e)||1)&&"function"==typeof define&&define.amd&&define(function(){return e[t]})}(this,"AceGrammar",function(){"use strict";function e(e){var t=0;return null===e?t=Dt:!0===e||!1===e||e instanceof Boolean?t=Ct:kt===e?t=Lt:(t=Kt[bt.call(e)]||Et,t=Tt===t||e instanceof Number?isNaN(e)?Rt:isFinite(e)?Tt:jt:Ft===t||e instanceof String?1===e.length?At:Ft:It===t||e instanceof Array?It:Ut===t||e instanceof RegExp?Ut:Bt===t||e instanceof Date?Bt:zt===t||e instanceof Function?zt:Pt===t?Pt:Et),t}function t(e,t,n,r){var o,i,l,a,s,c,u=e.length;if(arguments.length<4&&(r=u-1),0>r&&(r+=u),arguments.length<3&&(n=0),n>r)return[];if(n===r)return[t(e[n],n,n,r)];for(l=r-n+1,a=15&l,s=1&a,c=new Array(l),s&&(c[0]=t(e[n],n,n,r)),o=s;a>o;o+=2)i=n+o,c[o]=t(e[i],i,n,r),c[o+1]=t(e[i+1],i+1,n,r);for(o=a;l>o;o+=16)i=n+o,c[o]=t(e[i],i,n,r),c[o+1]=t(e[i+1],i+1,n,r),c[o+2]=t(e[i+2],i+2,n,r),c[o+3]=t(e[i+3],i+3,n,r),c[o+4]=t(e[i+4],i+4,n,r),c[o+5]=t(e[i+5],i+5,n,r),c[o+6]=t(e[i+6],i+6,n,r),c[o+7]=t(e[i+7],i+7,n,r),c[o+8]=t(e[i+8],i+8,n,r),c[o+9]=t(e[i+9],i+9,n,r),c[o+10]=t(e[i+10],i+10,n,r),c[o+11]=t(e[i+11],i+11,n,r),c[o+12]=t(e[i+12],i+12,n,r),c[o+13]=t(e[i+13],i+13,n,r),c[o+14]=t(e[i+14],i+14,n,r),c[o+15]=t(e[i+15],i+15,n,r);return c}function n(e,t,n,r,o){var i,l,a,s,c,u=e.length,p=n;if(arguments.length<5&&(o=u-1),0>o&&(o+=u),arguments.length<4&&(r=0),r>o)return p;if(r===o)return t(p,e[r],r);for(a=o-r+1,s=15&a,c=1&s,c&&(p=t(p,e[r],r)),i=c;s>i;i+=2)l=r+i,p=t(t(p,e[l],l),e[l+1],l+1);for(i=s;a>i;i+=16)l=r+i,p=t(t(t(t(t(t(t(t(t(t(t(t(t(t(t(t(p,e[l],l),e[l+1],l+1),e[l+2],l+2),e[l+3],l+3),e[l+4],l+4),e[l+5],l+5),e[l+6],l+6),e[l+7],l+7),e[l+8],l+8),e[l+9],l+9),e[l+10],l+10),e[l+11],l+11),e[l+12],l+12),e[l+13],l+13),e[l+14],l+14),e[l+15],l+15);return p}function r(e,t,n,r){if(t>n)return r;if(t===n)return e(t,r,t,n),r;var o,i,l=n-t+1,a=15&l,s=1&a;for(s&&e(t,r,t,n),o=s;a>o;o+=2)i=t+o,e(i,r,t,n),e(++i,r,t,n);for(o=a;l>o;o+=16)i=t+o,e(i,r,t,n),e(++i,r,t,n),e(++i,r,t,n),e(++i,r,t,n),e(++i,r,t,n),e(++i,r,t,n),e(++i,r,t,n),e(++i,r,t,n),e(++i,r,t,n),e(++i,r,t,n),e(++i,r,t,n),e(++i,r,t,n),e(++i,r,t,n),e(++i,r,t,n),e(++i,r,t,n),e(++i,r,t,n);return r}function o(t,n){var r,i,l,a,s=e(t),c=0;if(Tt===e(n)?n>0?(c=n,n=!0):n=!1:n=!1!==n,Pt===s){i={};for(l in t)t[yt](l)&&t[xt](l)&&(r=e(t[l]),Pt===r?i[l]=n?o(t[l],c>0?c-1:n):t[l]:It===r?i[l]=n?o(t[l],c>0?c-1:n):t[l].slice():Bt===r?i[l]=new Date(t[l]):Ft&r?i[l]=t[l].slice():Tt&r?i[l]=0+t[l]:i[l]=t[l])}else if(It===s)for(a=t.length,i=new Array(a),l=0;a>l;l++)r=e(t[l]),Pt===r?i[l]=n?o(t[l],c>0?c-1:n):t[l]:It===r?i[l]=n?o(t[l],c>0?c-1:n):t[l].slice():Bt===r?i[l]=new Date(t[l]):Ft&r?i[l]=t[l].slice():Tt&r?i[l]=0+t[l]:i[l]=t[l];else i=Bt===s?new Date(t):Ft&s?t.slice():Tt&s?0+t:t;return i}function i(){var t,n,r,l,a,s,c,u,p,f,m=arguments,h=m.length;if(1>h)return null;for(n=o(m[0]),r=1;h>r;r++)if(t=m[r])for(l in t)if(t[yt](l)&&t[xt](l))if(n[yt](l)&&n[xt](l)){if(p=e(n[l]),f=e(t[l]),Pt===p&&Pt===f)n[l]=i(n[l],t[l]);else if(It===p&&It===f){if(c=n[l],u=t[l],s=u.length,!s)continue;if(c.length)for(a=0;s>a;a++)0>c.indexOf(u[a])&&c.push(u[a]);else n[l]=u.slice()}}else n[l]=o(t[l]);return n}function l(){return!0}function a(t,n){return n||It!==e(t)?[t]:t}function s(t,n){return t=a(t),(n||It!==e(t[0]))&&(t=[t]),t}function c(t,n){return Ft&e(n)&&Ft&e(t)&&n.length&&n.length<=t.length&&n===t.substr(0,n.length)}function u(e,t,n){return n?e[t]=kt:delete e[t],e}function p(e){return(e||"id_")+ ++en}function f(e){return(e||"uuid")+"_"+ ++en+"_"+(new Date).getTime()}function m(){var t,n,r,o,i,l,a=arguments,s=a.length;for(t=a[0]||{},i=1;s>i;i++)if(n=a[i],Pt===e(n))for(o in n)n[yt](o)&&n[xt](o)&&(r=n[o],l=e(r),Tt&l?t[o]=0+r:Bt&l?t[o]=new Date(r):Gt&l?t[o]=r.slice():t[o]=r);return t}function h(e,t){var n,r=arguments.length,o="constructor";return 0===r?(e=Object,t={}):1===r?(t=e||{},e=Object):(e=e||Object,t=t||{}),t[yt](o)||(t[o]=function(){}),n=t[o],delete t[o],n[$t]=m(wt(e[$t]),t),n[$t][o]=n,n}function d(e){return e.replace(tn,"\\$1")}function g(e,t){t=t||{l:0,x:0,i:0,g:0};var e=new RegExp(e,(t.g?"g":"")+(t.i?"i":""));return e.xflags=t,e}function k(e,t,n,r){var o,i,l,a,s=e.pos,c=e.length,u="",p=!!n;if(p){for(r=!!r,i=!1,a=0;c>s&&(o=e[Ot](s++),t!==o||i);)l=n===o,i=!i&&l,r?(l&&a++,(!l||2&a)&&(u+=o,a=0)):u+=o;2&a&&(u+=n)}else for(;c>s&&(o=e[Ot](s++),t!==o);)u+=o;return e.pos=s,u}function $(t,n,r,o){var i,l,a,s,c,u=!0===r?0:1,p=o?"\\":"$",f=o?92:36;for(Ft&e(n)&&(o&&(n=d(n)),n=[n,n,n],u=0),l=t.length,c="",i=0;l>i;)a=t[Ot](i),l>i+1&&p===a?(s=t.charCodeAt(i+1),f===s?(c+=p,i+=2):s>=48&&57>=s?(c+=n[u+s-48]||"",i+=2):(c+=a,i+=1)):(c+=a,i+=1);return c}function y(t,n,r,o){if(!t||(Tt|Ut)&e(t))return t;var i,l=n?n.length||0:0,a="",s={g:0,i:0,x:0,l:0};if(Ft&e(o)?a=o:o&&(a=rn),l&&t.substr(0,l)===n){var c,u,p,i,f,m=t.substr(l),h=m[Ot](0);for(i=m.length;i--&&(f=m[Ot](i),h!==f);)"i"===f.toLowerCase()?s.i=1:"x"===f.toLowerCase()?s.x=1:"l"===f.toLowerCase()&&(s.l=1);return c=m.substring(1,i),"^"===c.charAt(0)?(s.l=1,u="^("+c.slice(1)+")"):u="^("+c+")",p=u,(s.x||s.l||s.i)&&(u=(s.l?"l":"")+(s.x?"x":"")+(s.i?"i":"")+"::"+u),r[u]||(p=g(p,s),r[u]=p),r[u]}return a?(p=u="^("+d(t)+")"+a,r[u]||(p=g(p,s),r[u]=p),r[u]):t}function x(n,r,o){var i,l="";return Ft&e(r)?l=r:r&&(l=rn),i=t(n.sort(Zt),d).join("|"),[g("^("+i+")"+l,{l:0,x:0,i:o?1:0}),1]}function v(t,n,r,o){var i=e(n);if(Tt===i)return n;if(o[t])return o[t];r=r||0;var l,a=0;return n&&n.isCharList&&(a=1,u(n,"isCharList")),l=Dt===i?new C(Ae,t,n,Dt,r):At===i?new C(Ae,t,n,At,r):Yt&i?new C(Ae,t,n,Ut,r):Ft&i?new C(Ae,t,n,a?Nt:Ft,r):n,o[t]=l}function b(t,n,r,o,i,l,s,u){if(s[t])return s[t];var p,f,m,h,d,g,k,$=0,w=0,_=1,M=Ft&e(o)?!0:!!o;if(p=a(n),m=p.length,1===m)k=v(t,y(p[0],r,l,o),0,s);else if(m>1){for(h=(m>>>1)+1,f=0;h>=f;f++)d=e(p[f]),g=e(p[m-1-f]),At===d&&At===g||(_=0),It&d||It&g?$=1:(Ut&d||Ut&g||c(p[f],r)||c(p[m-1-f],r))&&(w=1);if(_&&!M)p=p.slice().join(""),p.isCharList=1,k=v(t,p,0,s);else if(!M||$||w)if($||w){for(f=0;m>f;f++)It&e(p[f])?p[f]=b(t+"_"+f,p[f],r,o,i,l,s):p[f]=v(t+"_"+f,y(p[f],r,l),f,s);k=m>1?new C(Ne,t,p):p[0]}else{for(u&&(u.keywords=a(n).slice()),p=p.sort(Zt),f=0;m>f;f++)p[f]=v(t+"_"+f,y(p[f],r,l),f,s);k=m>1?new C(Ne,t,p):p[0]}else u&&(u.keywords=a(n).slice()),k=v(t,x(p,o,i),0,s)}return s[t]=k}function w(t,n,o,i,l){if(l[t])return l[t];var a=s(n),u=[],p=[];return r(function(n){var r,s,f,m;r=v(t+"_0_"+n,y(a[n][0],o,i),n,l),a[n].length>1?(f=c(a[n][1],o),m=f&&on.test(a[n][1]),Ut!==r.ptype||Ft!==e(a[n][1])||!m&&f?s=v(t+"_1_"+n,y(a[n][1],o,i),n,l):m?(s=new String(a[n][1]),s.regex_pattern=o):s=a[n][1]):s=r,u.push(r),p.push(s)},0,a.length-1),l[t]=new C(Ie,t,[u,p])}function _(e,t){var n=s(e.tokens.slice());r(function(e){var r=n[e][0],o=n[e].length>1?n[e][1]:n[e][0],i=n[e].length>2?n[e][2]:"";null===o?(t.line=t.line||[],t.line.push(r)):(t.block=t.block||[],t.block.push([r,o,i]))},0,n.length-1)}function M(e,n,r,o){var i=e.meta||r,l=!(!e.caseInsesitive&&!e.ci),a=t(n,function(e){return{word:e,meta:i,ci:l}});return o.autocomplete=(o.autocomplete||[]).concat(a),a}function q(t){t.Lex||(t.Lex={}),t.Syntax||(t.Syntax={});var n,r,o,l,a,s,c,p,f,m,h,d=t.Lex,g=t.Syntax,k=[d,g],$=k.length;for(h=0;$>h;){m=k[h++];for(o in m)m[yt](o)&&(n=o.split(":"),r=n[1]&&Vt(n[1]).length?Vt(n[1]):null,n=Vt(n[0]),n.length||(n=o,r=null),n!==o&&(m[n]=m[o],u(m,o),r&&(r=r[qt](),l=m[n],a=e(l),Pt===a?m[n].type||(m[n].type=r):(m[n]={type:r},"error"===r?(m[n].type="action",m[n].error=l):"nop"===r?(m[n].type="action",m[n].nop=!0):"group"===r?(m[n].type="sequence",m[n].tokens=l):"action"===r&&Ft===a?m[n][l]=!0:m[n].tokens=l))),d===m&&(Ht&e(m[n])&&(m[n]={type:"simple",tokens:m[n]}),l=m[n],l.type&&(p=l.type=l.type[qt](),"line-block"===p?(l.type="block",l.multiline=!1,l.escape=!1):"escaped-line-block"===p?(l.type="block",l.multiline=!1,l.escape="\\"):"escaped-block"===p&&(l.type="block",l.multiline=!0,l.escape="\\"))))}m=d;for(n in m)if(m[yt](n))for(l=m[n];l.extend;)s=l.extend,u(l,"extend"),c=d[s],c&&(Ht&e(c)&&(c=d[s]={type:"simple",tokens:c}),l=i(c,l));m=d;for(n in m)m[yt](n)&&(l=m[n],l.type?(p=l.type=l.type[qt](),"line-block"===p?(l.type="block",l.multiline=!1,l.escape=!1):"escaped-line-block"===p?(l.type="block",l.multiline=!1,l.escape="\\"):"escaped-block"===p&&(l.type="block",l.multiline=!0,l.escape="\\")):l["escaped-line-block"]?(l.type="block",l.multiline=!1,l.escape||(l.escape="\\"),l.tokens=l["escaped-line-block"],u(l,"escaped-line-block")):l["escaped-block"]?(l.type="block",l.multiline=!0,l.escape||(l.escape="\\"),l.tokens=l["escaped-block"],u(l,"escaped-block")):l["line-block"]?(l.type="block",l.multiline=!1,l.escape=!1,l.tokens=l["line-block"],u(l,"line-block")):l.comment?(l.type="comment",l.escape=!1,l.tokens=l.comment,u(l,"comment")):l.block?(l.type="block",l.tokens=l.block,u(l,"block")):l.simple?(l.type="simple",l.tokens=l.simple,u(l,"simple")):l.nop?(l.type="action",l.action=["nop",l.nop,!1],l.nop=!0):l.error?(l.type="action",l.action=["error",l.error,!!l["in-context"],!!l["in-hypercontext"]],u(l,"error")):l[yt]("hypercontext")?(l.type="action",l.action=[l.hypercontext?"hypercontext-start":"hypercontext-end",l.hypercontext,!!l["in-context"],!!l["in-hypercontext"]],u(l,"hypercontext")):l[yt]("context")?(l.type="action",l.action=[l.context?"context-start":"context-end",l.context,!!l["in-context"],!!l["in-hypercontext"]],u(l,"context")):l.indent?(l.type="action",l.action=["indent",l.indent,!!l["in-context"],!!l["in-hypercontext"]],u(l,"indent")):l.outdent?(l.type="action",l.action=["outdent",l.outdent,!!l["in-context"],!!l["in-hypercontext"]],u(l,"outdent")):l.define?(l.type="action",l.action=["define",Ft&e(l.define)?["*",l.define]:l.define,!!l["in-context"],!!l["in-hypercontext"]],u(l,"define")):l.undefine?(l.type="action",l.action=["undefine",Ft&e(l.undefine)?["*",l.undefine]:l.undefine,!!l["in-context"],!!l["in-hypercontext"]],u(l,"undefine")):l.defined?(l.type="action",l.action=["defined",Ft&e(l.defined)?["*",l.defined]:l.defined,!!l["in-context"],!!l["in-hypercontext"]],u(l,"defined")):l.notdefined?(l.type="action",l.action=["notdefined",Ft&e(l.notdefined)?["*",l.notdefined]:l.notdefined,!!l["in-context"],!!l["in-hypercontext"]],u(l,"notdefined")):l.unique?(l.type="action",l.action=["unique",Ft&e(l.unique)?["*",l.unique]:l.unique,!!l["in-context"],!!l["in-hypercontext"]],u(l,"unique")):l.push?(l.type="action",l.action=["push",l.push,!!l["in-context"],!!l["in-hypercontext"]],u(l,"push")):l[yt]("pop")?(l.type="action",l.action=["pop",l.pop,!!l["in-context"],!!l["in-hypercontext"]],u(l,"pop")):l.type="simple","action"===l.type?l.ci=!(!l.caseInsesitive&&!l.ci):"block"===l.type||"comment"===l.type?(l.multiline=l[yt]("multiline")?!!l.multiline:!0,Ft&e(l.escape)||(l.escape=!1)):"simple"===l.type&&(l.meta=l.autocomplete&&Ft&e(l.meta)?l.meta:null,l.ci=!(!l.caseInsesitive&&!l.ci)));m=g;for(n in m)m[yt](n)&&(l=m[n],Pt!==e(l)||l.type?l.type&&(p=l.type=l.type[qt](),"group"===p&&l.match?(a=e(l.match),Ft&a?(f=l.match[qt](),"alternation"===f||"either"===f?(l.type="alternation",u(l,"match")):"sequence"===f||"all"===f?(l.type="sequence",u(l,"match")):"zeroorone"===f?(l.type="zeroOrOne",u(l,"match")):"zeroormore"===f?(l.type="zeroOrMore",u(l,"match")):"oneormore"===f?(l.type="oneOrMore",u(l,"match")):(l.type="sequence",u(l,"match"))):It&a&&(l.type="repeat",l.repeat=l.match,u(l,"match"))):"either"===p?l.type="alternation":"all"===p?l.type="sequence":"lookahead"===p?l.type="positiveLookahead":"grammar"===p&&(l.type="subgrammar"),"subgrammar"!==l.type||l.tokens||(l.tokens=n)):l.ngram||l["n-gram"]?(l.type="ngram",l.tokens=l.ngram||l["n-gram"],l["n-gram"]?u(l,"n-gram"):u(l,"ngram")):l.sequence||l.all?(l.type="sequence",l.tokens=l.sequence||l.all,l.all?u(l,"all"):u(l,"sequence")):l.alternation||l.either?(l.type="alternation",l.tokens=l.alternation||l.either,l.either?u(l,"either"):u(l,"alternation")):l.zeroOrOne?(l.type="zeroOrOne",l.tokens=l.zeroOrOne,u(l,"zeroOrOne")):l.zeroOrMore?(l.type="zeroOrMore",l.tokens=l.zeroOrMore,u(l,"zeroOrMore")):l.oneOrMore?(l.type="oneOrMore",l.tokens=l.oneOrMore,u(l,"oneOrMore")):l.positiveLookahead||l.lookahead?(l.type="positiveLookahead",l.tokens=l.positiveLookahead||l.lookahead,l.lookahead?u(l,"lookahead"):u(l,"positiveLookahead")):l.negativeLookahead?(l.type="negativeLookahead",l.tokens=l.negativeLookahead,u(l,"negativeLookahead")):(l.subgrammar||l.grammar)&&(l.type="subgrammar",l.tokens=l.subgrammar||l.grammar,l.subgrammar?u(l,"subgrammar"):u(l,"grammar")));return t}function O(t,n,r){if(r=r||{},n=n||[],!t||!t.length)return n;var o,i,l,a,s,c,u;for(o=0,i=t.length;i>o;o++)if(s=t[o])if(He===s.type)if(s.autocompletions)for(l=0,a=s.autocompletions.length;a>l;l++)u=s.autocompletions[l],r[yt]("w_"+u.word)||(n.push(u),r["w_"+u.word]=1);else Ft===s.token.ptype&&Ft&e(s.token.pattern)&&s.token.pattern.length>1&&(r[yt]("w_"+s.token.pattern)||(n.push({word:""+s.token.pattern,meta:s.name,ci:!!s.ci}),r["w_"+s.token.pattern]=1));else if(Ve===s.type)O(s.token,n,r);else if(at&s.type){l=0,a=s.token.length;do O([c=s.token[l++]],n,r);while(a>l&&(Je&c.type&&1>c.min||Pe===c.type))}else Je&s.type&&O([s.token[0]],n,r);return n}function S(t,n,r,o){for(var i;Ft&e(i=n[t]||r[t]);)t=i;return o?t:n[t]||r[t]||t}function E(e,t){return e.length>1?r(t?function(t,n){var r=n[n.length-1],o=e[t];r===o||n.push(o)}:function(t,n){var r=n[n.length-1],o=e[t];ln.test(o)&&ln.test(r)&&r===o||n.push(o)},1,e.length-1,[e[0]]):e}function L(n,r,i){var l,a,s,c,u,p,f,m,h,$,y,x,v,b,w,_=!1;if(w=n.modifier?n.modifier:null,m=new String(Vt(n)),m.pos=0,1===m.length)x=""+n,r[x]||i[x]||(r[x]={type:"simple",tokens:n}),n=x;else{for(l=[],a=[],s="",v=[];m.pos<m.length;)if(h=m[Ot](m.pos++),nn.test(h))if(s.length&&(_?(a.length&&(y=a[a.length-1],x=y+"."+s,p=r[x]||i[x],p||(f=S(y,r,i),i[x]=Ft&e(f)?new String(f):o(f),i[x].modifier=s),a[a.length-1]=x),_=!1):"0"===s?(r[dt]||(r[dt]={type:"simple",tokens:0}),a.push(dt)):"^^"===s?(r[ut]||(r[ut]={type:"simple",tokens:ze}),a.push(ut)):"^^1"===s?(r[pt]||(r[pt]={type:"simple",tokens:Ue}),a.push(pt)):"^"===s?(r[ft]||(r[ft]={type:"simple",tokens:We}),a.push(ft)):"$"===s?(r[mt]||(r[mt]={type:"simple",tokens:Be}),a.push(mt)):(r[s]||i[s]||(r[s]={type:"simple",tokens:s}),a.push(s)),s=""),"."===h)a.length&&m.pos<m.length&&!nn.test(m[Ot](m.pos))?_=!0:s+=h;else if('"'===h||"'"===h)c=k(m,h,"\\",!0),c.length?(x=""+c,r[x]||(r[x]={type:"simple",tokens:c}),a.push(x)):(r[gt]||(r[gt]={type:"simple",tokens:""}),a.push(gt));else if("["===h)c=k(m,"]","\\",!0),x="["+c+"]",r[x]||(r[x]={type:"simple",tokens:g("^(["+("^"===c[Ot](0)?"^"+d(c.slice(1)):d(c))+"])")}),a.push(x);else{if("]"===h){s+=h;continue}if("/"===h)c=k(m,h,"\\",!1),$="",c.length&&(m.pos<m.length&&"i"===m[Ot](m.pos)&&(m.pos++,$="i"),x="/"+c+"/"+$,r[x]||(r[x]={type:"simple",tokens:g("^("+c+")",{l:0,x:0,i:"i"===$})}),a.push(x));else if("*"===h||"+"===h||"?"===h)a.length?(y=a[a.length-1],x=""+y+h,i[x]||(i[x]={type:"*"===h?"zeroOrMore":"+"===h?"oneOrMore":"zeroOrOne",tokens:[y]}),a[a.length-1]=x):s+=h;else if("{"===h)a.length?(u=k(m,"}",!1),u=t(u.split(","),Vt),u[0].length?u[0]=parseInt(u[0],10)||0:u[0]=0,0>u[0]&&(u[0]=0),2>u.length?u.push(u[0]):u[1].length?u[1]=parseInt(u[1],10)||St:u[1]=St,0>u[1]&&(u[1]=0),y=a[a.length-1],x=""+y+["{",u[0],",",isFinite(u[1])?u[1]:"","}"].join(""),i[x]||(i[x]={type:"repeat",repeat:[u[0],u[1]],tokens:[y]}),a[a.length-1]=x):s+=h;else{if("}"===h){s+=h;continue}"&"===h||"!"===h?a.length?(y=a[a.length-1],x=""+y+h,i[x]||(i[x]={type:"!"===h?"negativeLookahead":"positiveLookahead",tokens:[y]}),a[a.length-1]=x):s+=h:"|"===h?(_=!1,a=E(a),a.length>1?(x=""+a.join(" "),i[x]||(i[x]={type:"sequence",tokens:a}),l.push(x)):a.length?l.push(a[0]):s+=h,a=[]):"("===h?(v.push([a,l,s]),a=[],l=[],s=""):")"===h&&(a=E(a),a.length>1?(x=""+a.join(" "),i[x]||(i[x]={type:"sequence",tokens:a}),l.push(x)):a.length&&l.push(a[0]),a=[],l=E(l,1),l.length>1?(x=""+l.join(" | "),i[x]||(i[x]={type:"alternation",tokens:l})):l.length&&(x=l[0]),l=[],b=v.pop(),a=b[0],l=b[1],s=b[2],y=x,x="("+y+")",i[x]||(i[x]=o(S(y,r,i))),a.push(x))}}else s+=h;s.length&&(_?(a.length&&(y=a[a.length-1],x=y+"."+s,p=r[x]||i[x],p||(f=S(y,r,i),i[x]=Ft&e(f)?new String(f):o(f),i[x].modifier=s),a[a.length-1]=x),_=!1):"0"===s?(r[dt]||(r[dt]={type:"simple",tokens:0}),a.push(dt)):"^^"===s?(r[ut]||(r[ut]={type:"simple",tokens:ze}),a.push(ut)):"^^1"===s?(r[pt]||(r[pt]={type:"simple",tokens:Ue}),a.push(pt)):"^"===s?(r[ft]||(r[ft]={type:"simple",tokens:We}),a.push(ft)):"$"===s?(r[mt]||(r[mt]={type:"simple",tokens:Be}),a.push(mt)):(r[s]||i[s]||(r[s]={type:"simple",tokens:s}),a.push(s))),s="",a=E(a),a.length>1?(x=""+a.join(" "),i[x]||(i[x]={type:"sequence",tokens:a}),l.push(x)):a.length&&l.push(a[0]),a=[],l=E(l,1),l.length>1?(x=""+l.join(" | "),i[x]||(i[x]={type:"alternation",tokens:l}),n=x):l.length&&(n=l[0]),l=[]}return w&&(r[n]||i[n])&&((r[n]||i[n]).modifier=w),n}function D(o,i,l,c,u,p,f,m,h,d,g){var k,$,y,x,v,q,O,E=null,T=null,j=null;if(ze===o||Ue===o||We===o||Be===o)return new N(o,ze===o?ut:Ue===o?$T_FBNL$:We===o?ft:mt,o,T);if(!1===o||0===o)return new N(Ge,dt,0,T);if(""===o)return new N(Ye,gt,"",T);if(null===o)return new N(He,ht,Dt,T,j);if(It&e(o)&&(y=o,o="NGRAM_"+y.join("_"),c[o]||(c[o]={type:"ngram",tokens:y})),o=""+o,m[o])return m[o];if(v=S(o,l,c),Ft&e(v)&&(v=L(v,l,c),v=l[v]||c[v]||null),!v)return null;if(k=v.type?ct[v.type[qt]().replace(Xt,"")]||He:He,T=v.msg||null,j=v.modifier||null,$=v.tokens,He&k){if(ze===$||Ue===$||We===$||Be===$||!1===$||0===$)return E=new N($||Ge,o,$||0,T),m[o]=E,E;if(""===$)return E=new N(Ye,o,"",T),m[o]=E,E;if(null===$)return E=new N(He,o,Dt,T,j),m[o]=E,E;if(!$)return null}if(Pe&k)v[yt]("action")?"nop"===v.action[0]?v.action[0]=be:"error"===v.action[0]?v.action[0]=we:"context-start"===v.action[0]?v.action[0]=Ee:"context-end"===v.action[0]?v.action[0]=Le:"hypercontext-start"===v.action[0]?v.action[0]=De:"hypercontext-end"===v.action[0]?v.action[0]=Te:"push"===v.action[0]?v.action[0]=je:"pop"===v.action[0]?v.action[0]=Re:"define"===v.action[0]?v.action[0]=_e:"undefine"===v.action[0]?v.action[0]=Me:"defined"===v.action[0]?v.action[0]=qe:"notdefined"===v.action[0]?v.action[0]=Oe:"unique"===v.action[0]?v.action[0]=Se:"indent"===v.action[0]?v.action[0]=Ce:"outdent"===v.action[0]&&(v.action[0]=Fe):v[yt]("nop")?v.action=[be,v.nop,!!v["in-context"]]:v[yt]("error")?v.action=[we,v.error,!!v["in-context"]]:v[yt]("context")?v.action=[v.context?Ee:Le,v.context,!!v["in-context"],!!v["in-hypercontext"]]:v[yt]("hypercontext")?v.action=[v.hypercontext?De:Te,v.context,!!v["in-context"],!!v["in-hypercontext"]]:v[yt]("context-start")?v.action=[Ee,v["context-start"],!!v["in-context"],!!v["in-hypercontext"]]:v[yt]("context-end")?v.action=[Le,v["context-end"],!!v["in-context"],!!v["in-hypercontext"]]:v[yt]("hypercontext-start")?v.action=[De,v["hypcontext-start"],!!v["in-context"],!!v["in-hypercontext"]]:v[yt]("hypercontext-end")?v.action=[Te,v["hypcontext-end"],!!v["in-context"],!!v["in-hypercontext"]]:v[yt]("push")?v.action=[je,v.push,!!v["in-context"],!!v["in-hypercontext"]]:v[yt]("pop")?v.action=[Re,v.pop,!!v["in-context"],!!v["in-hypercontext"]]:v[yt]("define")?v.action=[_e,Ft&e(v.define)?["*",v.define]:v.define,!!v["in-context"],!!v["in-hypercontext"]]:v[yt]("undefine")?v.action=[Me,Ft&e(v.undefine)?["*",v.undefine]:v.undefine,!!v["in-context"],!!v["in-hypercontext"]]:v[yt]("defined")?v.action=[qe,Ft&e(v.defined)?["*",v.defined]:v.defined,!!v["in-context"],!!v["in-hypercontext"]]:v[yt]("notdefined")?v.action=[Oe,Ft&e(v.notdefined)?["*",v.notdefined]:v.notdefined,!!v["in-context"],!!v["in-hypercontext"]]:v[yt]("unique")?v.action=[Se,Ft&e(v.unique)?["*",v.unique]:v.unique,!!v["in-context"],!!v["in-hypercontext"]]:v[yt]("indent")?v.action=[Ce,v.indent,!!v["in-context"],!!v["in-hypercontext"]]:v[yt]("outdent")&&(v.action=[Fe,v.outdent,!!v["in-context"],!!v["in-hypercontext"]]),!1===v.msg&&(T=!1),v.nop&&(v.action[0]=be),E=new N(Pe,o,v.action.slice(),T,j),E.ci=!!v.caseInsensitive||v.ci,m[o]=E;else if($=a($),He&k){O=v.autocomplete?M(v,Gt&e(v.autocomplete)?a(v.autocomplete):$,o,g):null;var R={};if(q="undefined"!=typeof v.combine?v.combine:!!(It&e(v.tokens)),E=new N(He,o,b(o,$.slice(),i,q,!(!v.caseInsensitive&&!v.ci),p,f,R),T,j,null,O),R.keywords&&(E.keywords=R.keywords.join("|")),m[o]=E,null!=v.except){var C,F,A=a(v.except),I=A.length,z=[];for(C=0;I>C;C++)A[C]&&(F=D(A[C],i,l,c,u,p,f,m,h,d,g),F&&z.push(F));z.length&&(E.except=z)}}else Ke&k?(Qe===k&&_(v,d),E=new N(k,o,w(o,$.slice(),i,p,f),T),E.empty=v[yt]("empty")?!!v.empty:!0,E.mline=v[yt]("multiline")?!!v.multiline:!0,E.esc=v[yt]("escape")?v.escape:!1,E.inter=!!u[o+".inside"],Qe===k&&v.interleave&&h.push(P(E)),j&&(E.modifier=j),m[o]=E):st&k&&(lt===k?m[o]=new N(lt,o,$,T,j):it===k?(x=s($),E=t(x,function(e,t){return new N(it,o+"_NGRAM_"+t,null,T,j)}),m[o]=E,r(function(e){E[e].token=a(n(x[e],function(e,t){return e.concat(D(t,i,l,c,u,p,f,m,h,d,g))},[]))},0,x.length-1)):(rt===k||ot===k?E=new N(k,o,null,T,j):Je&k&&It&e(v.repeat)?(E=new N(Je,o,null,T,j),E.min=v.repeat[0],E.max=v.repeat[1]):Xe===k?(E=new N(Xe,o,null,T,j),E.min=0,E.max=1):et===k?(E=new N(et,o,null,T,j),E.min=0,E.max=St):tt===k?(E=new N(tt,o,null,T,j),E.min=1,E.max=St):E=Ve===k?new N(Ve,o,null,T,j):new N(Ze,o,null,T,j),m[o]=E,E.token=a(n($,function(e,t){return e.concat(D(t,i,l,c,u,p,f,m,h,d,g))},[]))));return m[o]}function T(e,t){var n,r,o=e.Style,i=e.Lex,l=e.Syntax,a=[],s={};for(n in o)o[yt](n)&&(r=i[n]||l[n],!r||"block"!=r.type&&"comment"!==r.type||(t&&(o[n+".inside"]||o[n])?(n=o[n+".inside"]||o[n],s[yt](n)||(a.push(n),s[n]=1)):t||s[yt](n)||(a.push(n),s[n]=1)));return a}function j(t){var n={};return t.Lex=t.Lex||{},t.Syntax=t.Syntax||{},t=q(t),t.Parser&&t.Parser.length&&r(function o(i,l){var a,s,c,u=l[i];n[u]||(It&e(u)&&(a=u,u="NGRAM_"+a.join("_"),t.Syntax[u]||(t.Syntax[u]={type:"ngram",tokens:a})),s=S(u,t.Lex,t.Syntax),Ft&e(s)&&(s=L(s,t.Lex,t.Syntax),s=t.Lex[s]||t.Syntax[s]||null),s&&(n[u]=s,c=s.type?ct[s.type[qt]().replace(Xt,"")]||He:He,st&c&&r(o,0,s.tokens.length-1,s.tokens)))},0,t.Parser.length-1,t.Parser),t}function R(t){var r,i,l,a,s,c,u,p,f,m,h,d,g,k;return t.__parsed?t:(r=t.RegExpID||null,l=t.Extra?o(t.Extra):{},a=t.Style?o(t.Style):{},s=null,c=null,u=t.Lex?o(t.Lex):{},p=t.Syntax?o(t.Syntax):{},f={},m={},h={},g={},k={},d=[],i=t.Parser?o(t.Parser):[],t=q({Style:a,Fold:s,Match:c,Lex:u,Syntax:p,$parser:null,$interleaved:null,$comments:null,$autocomplete:null,$extra:l,__parsed:0}),t.$parser=n(i,function(t,n){var o=D(n,r,u,p,a,f,m,h,d,g,k)||null;return o&&(It&e(o)?t=t.concat(o):t.push(o)),t},[]),t.$interleaved=d&&d.length?d:null,t.$comments=g,t.$autocomplete=k&&k.autocomplete&&k.autocomplete.length?k.autocomplete:null,t.__parsed=1,t)}function C(t,n,r,o,i){var l,a,s=this;l=s.type=t,s.name=n,s.pattern=r,a=s.ptype=o||Ft,s.key=i||0,Ne===l?s.key=!1!==i:Ie===l?s.pattern[0]=new C(Ne,n+"_Start",r[0],null,!1):Dt===a?s.pattern=null:Ut===a&&(s.pattern=Ut&e(r)?[r,0]:[r[0],r[1]||0])}function F(t,n,r,o){var i,l,a,s,c,u,p,f,m,h,d,g=t,k=g.type,x=g.pattern,v=g.key;if(Ie===k){if(i=g.name,a=x[0],s=x[1],u=F(a,n,r,o))return c=s[u[0]],f=e(c),m=a.pattern[u[0]].ptype,Ut===m&&Wt&f&&(c.regex_pattern?(p=$(c,u[1]),c=new C(Ae,i+"_End",y(p,c.regex_pattern,{}),Ut)):(p=Tt&f?u[1][c+1]:$(c,u[1]),c=new C(Ae,i+"_End",p,p.length>1?Ft:At))),c}else if(Ne===k){for(h=0,d=x.length;d>h;h++)if(p=F(x[h],n,r,o))return v?[h,p[1]]:p}else{if(l=g.ptype,Dt===l)return!1!==r&&n.end(),[v,""];if(Ut===l){if(p=x[0].xflags.l?n.match(x[0]):n.slice(n.pos).match(x[0]),p&&0===p.index)return!1!==r&&n.mov(p[x[1]||0].length),[v,x[1]>0?p[x[1]]:p]}else if(Nt===l){if(!0===o){p=-1;var b,w;for(d=x.length-1;d>=0;d--)b=n.indexOf(x[Ot](d),n.pos),b>-1&&(-1===p||p>b)&&(p=b,w=x[Ot](d));if(p>-1)return!1!==r&&(n.pos=p+1),[v,w]}else if(p=n[Ot](n.pos)||null,p&&-1<x.indexOf(p))return!1!==r&&n.mov(1),[v,p]}else if(At===l){if(!0===o){if(p=n.indexOf(x,n.pos),p>-1)return!1!==r&&(n.pos=p+1),[v,x]}else if(p=n[Ot](n.pos)||null,x===p)return!1!==r&&n.mov(1),[v,p]}else if(Ft===l)if(d=x.length,!0===o){if(p=n.indexOf(x,n.pos),p>-1)return!1!==r&&(n.pos=p+d),[v,x]}else if(x===n.substr(n.pos,d))return!1!==r&&n.mov(d),[v,x]}return!1}function A(e,t){this.val=e||null,t?this.prev=t:this.prev=null}function N(e,t,n,r,o,i,l,a){var s=this;s.type=e,s.name=t,s.token=n,s.modifier=o||null,s.except=i||null,s.autocompletions=l||null,s.keywords=a||null,s.pos=null,s.msg=!1===r?!1:r||null,s.$msg=null,s.status=0,s.empty=!1,s.ci=!1,s.mline=!0,s.esc=!1,s.inter=!1,s.found=0,s.min=0,s.max=1,s.i0=0,s.$id=null}function I(){var e=this;e.T=0,e.id=null,e.type=null,e.match=null,e.str="",e.pos=null,e.block=null,e.space=null}function P(e,t,n,r){var o=new N(e.type,e.name,e.token,e.msg,e.modifier,e.except,e.autocompletions,e.keywords);return o.empty=e.empty,o.ci=e.ci,o.mline=e.mline,o.esc=e.esc,o.inter=e.inter,o.found=e.found,o.min=e.min,o.max=e.max,o.i0=e.i0,t&&(o.status|=ke),n&&(o.modifier=n),r&&(o.$id=r),o}function z(e){var t=e.name;return e.$msg?e.$msg:e.status&ke?'Token "'+t+'"'+(e.keywords?": "+e.keywords:"")+" Expected":'Syntax Error: "'+t+'"'}function U(e,t,n,r,o,i,l){e.status&de&&e.err&&(e.err[""+t+"_"+n+"_"+r+"_"+o+"_"+(i?i.name:"ERROR")]=[t,n,r,o,l||z(i)])}function B(e,t){for(var n=null,r=null;e;){if(t===e.val[0])return r={node:e,nodePrev:e.prev,nodeNext:n,val:e.val[1]};n=e,e=e.prev}return r}function W(e,t,n){return new A([t,n],e)}function G(e,t,n){if(e.stack===t)t=e.stack=new A(n,e.stack);else{for(var r=e.stack;r&&r.prev!==t;)r=r.prev;t=new A(n,t),r&&(r.prev=t)}return t}function Y(e,t){if(null==e)return null;if(t){for(var n=new A(e.val),r=n,o=e;o.prev;)r.prev=new A(o.prev.val),o=o.prev,r=r.prev;return n}return e}function H(e,t,n,r){var o,i,l,a,s,c=1/0,u=null,p=1/0;if(i=t.pos,t.spc(),l=t.pos,o=e.stack,t.pos<t.length){for(s=0;o&&(a=o.val,a.$id===r.$id);){for(;!(Pe===a.type||K(a,t,e,n)||(t.pos=a.pos>t.pos?a.pos:t.pos+1,e.stack=o,t.pos>=t.length)););e.stack=o,t.pos<t.length&&c>t.pos?(c=t.pos,u=o,p=s):c===t.pos&&p>s&&(c=t.pos,u=o,p=s),t.pos=l,o=o.prev,s++}c<t.length?(t.pos=c,e.stack=u):(t.end(),e.stack=null)}return l>=i&&t.pos===l}function K(e,t,n,r){if(!e)return!1;var o=e.type,i=st&o?J:Ke&o?Z:Pe&o?Q:V;return i(e,t,n,r)}function Q(t,n,r,o){var i,l,a,s,c,u,p,f,m,h,d,g,k,y,x,v,b,w=t,_=w.token||null,M=w.ci,q=w.name,O=!(r.status&de);if(w.status=0,w.$msg=null,!_||!o||!o.pos)return!0;if(b=!!(Ke&o.T),be===_[0]||b&&!o.block)return!0;if(i=_[0],l=_[1],k=_[2],y=_[3],c=w.msg,b?(v=o.block.match||o.block.str,m=o.block.pos[0][0],h=o.block.pos[0][1],d=o.block.pos[0][2],g=o.block.pos[0][3]):(v=o.match||o.str,m=o.pos[0],h=o.pos[1],d=o.pos[2],g=o.pos[3]),Le===i)r.ctx=r.ctx?r.ctx.prev:null;else if(Ee===i)r.ctx=new A({symb:null,queu:null},r.ctx);else if(Te===i)r.hctx=r.hctx?r.hctx.prev:null;else if(De===i)r.hctx=new A({symb:null,queu:null},r.hctx);else if(_e===i)a=l[1],s=l[0],a=$(a,v,!0),M&&(a=a[qt]()),s+="::"+a,f=y&&r.hctx?B(r.hctx.val.symb,s):k&&r.ctx?B(r.ctx.val.symb,s):r.symb?B(r.symb,s):null,f||(y&&r.hctx?r.hctx.val.symb=W(r.hctx.val.symb,s,[m,h,d,g]):k&&r.ctx?r.ctx.val.symb=W(r.ctx.val.symb,s,[m,h,d,g]):r.symb=W(r.symb,s,[m,h,d,g]));else if(Me===i){if(a=l[1],s=l[0],a=$(a,v,!0),M&&(a=a[qt]()),s+="::"+a,y&&r.hctx)f=B(r.hctx.val.symb,s);else if(k&&r.ctx)f=B(r.ctx.val.symb,s);else{if(!r.symb)return!0;f=B(r.symb,s)}f&&(f.nodeNext?f.nodeNext.prev=f.nodePrev:y&&r.hctx?r.hctx.val.symb=r.hctx.val.symb.prev:k&&r.ctx?r.ctx.val.symb=r.ctx.val.symb.prev:r.symb=r.symb.prev)}else if(qe===i){if(a=l[1],s=l[0],a=$(a,v,!0),M&&(a=a[qt]()),s+="::"+a,f=y&&r.hctx?B(r.hctx.val.symb,s):k&&r.ctx?B(r.ctx.val.symb,s):r.symb?B(r.symb,s):null,!f)return!1!==c&&(w.$msg=c?$(c,a,!0):'Undefined "'+a+'"',x=z(w),U(r,m,h,d,g,w,x),w.status|=$e),!1}else if(Oe===i){if(a=l[1],s=l[0],a=$(a,v,!0),M&&(a=a[qt]()),s+="::"+a,y&&r.hctx)f=B(r.hctx.val.symb,s);else if(k&&r.ctx)f=B(r.ctx.val.symb,s);else{if(!r.symb)return!0;f=B(r.symb,s)}if(f)return!1!==c&&(w.$msg=c?$(c,a,!0):'Defined "'+a+'"',x=z(w),U(r,f.val[0],f.val[1],f.val[2],f.val[3],w,x),U(r,m,h,d,g,w,x),w.status|=$e),!1}if(O)return!0;if(we===i)return!c&&Ft&e(l)&&(c=l),w.$msg=c?$(c,v,!0):'Error "'+q+'"',U(r,m,h,d,g,w,z(w)),w.status|=$e,!1;if(Se===i){if(y){if(!r.hctx)return!0;p=r.hctx.val.symb}else if(k){if(!r.ctx)return!0;p=r.ctx.val.symb}else p=r.symb;if(a=l[1],s=l[0],a=$(a,v,!0),M&&(a=a[qt]()),s+="::"+a,f=B(p,s))return!1!==c&&(w.$msg=c?$(c,a,!0):'Duplicate "'+a+'"',x=z(w),U(r,f.val[0],f.val[1],f.val[2],f.val[3],w,x),U(r,m,h,d,g,w,x),w.status|=$e),!1;y?r.hctx.val.symb=W(r.hctx.val.symb,s,[m,h,d,g]):k?r.ctx.val.symb=W(r.ctx.val.symb,s,[m,h,d,g]):r.symb=W(r.symb,s,[m,h,d,g])}else if(Re===i){if(y){if(!r.hctx)return!0;u=r.hctx.val.queu}else if(k){if(!r.ctx)return!0;u=r.ctx.val.queu}else u=r.queu;if(l){if(l=$(l,v),M&&(l=l[qt]()),!u||l!==u.val[0])return!1!==c&&(u?(w.$msg=c?$(c,[u.val[0],l],!0):'Mismatched "'+u.val[0]+'","'+l+'"',x=z(w),U(r,u.val[1],u.val[2],u.val[3],u.val[4],w,x),U(r,m,h,d,g,w,x),u=u.prev):(w.$msg=c?$(c,["",l],!0):'Missing matching "'+l+'"',x=z(w),U(r,m,h,d,g,w,x)),w.status|=$e),y?r.hctx&&(r.hctx.val.queu=u):k?r.ctx&&(r.ctx.val.queu=u):r.queu=u,!1;u=u?u.prev:null}else u=u?u.prev:null;y?r.hctx&&(r.hctx.val.queu=u):k?r.ctx&&(r.ctx.val.queu=u):r.queu=u}else if(je===i&&l){if(y){if(!r.hctx)return!0;u=r.hctx.val.queu}else if(k){if(!r.ctx)return!0;u=r.ctx.val.queu}else u=r.queu;l=$(l,v),M&&(l=l[qt]()),w.$msg=c?$(c,l,!0):'Missing matching "'+l+'"',u=new A([l,m,h,d,g,z(w)],u),y?r.hctx&&(r.hctx.val.queu=u):k?r.ctx&&(r.ctx.val.queu=u):r.queu=u}return!0}function V(e,t,n,r,o){var i,l,a=e,s=a.token,c=a.modifier,u=a.type,p=a.name,f=a.except,m=n.line,h=t.pos,d=null,g=!1;if(a.status&=xe,a.$msg=o?null:a.msg||null,a.pos=t.pos,f&&!o){l=ee(n,t);for(var k=0,y=f.length;y>k;k++)if(i=f[k],a!==i&&He===i.type&&V(i,t,n,r,1))return a.pos=i.pos,ee(n,t,l),!1}if(ze===u)g=0===n.line;else if(Ue===u)g=n.bline+1===n.line;else if(We===u)g=t.sol();else if(Be===u)t.spc(),t.eol()?g=p:(a.pos=t.pos,t.bck(h));else if(Ge===u)a.status=0,g=!0;else if(Ye===u){if(null==r.space||t.eol()?t.spc()&&!t.eol()?(a.pos=t.pos,t.bck(h),a.status&ke&&(a.status|=$e)):g=!0:a.status&ke&&(a.status|=$e),a.status&=ye,!0===g)return g}else Dt===s?(t.end(),g=c||p):(d=F(s,t))&&(d=d[1],g=c||p);return o?g:(!1!==g&&(r.T=u,r.id=p,r.type=g,r.str=t.sel(h,t.pos),r.match=d,r.pos=[m,h,m,t.pos]),!g&&a.status&&a.$msg&&(a.$msg=$(a.$msg,p,!0)),g)}function Z(e,t,n,r){var o,i,l,a,s,c,u,p,f,m,h,d,g,k,y,x,v,b,w,_,M,q,O=e,S=O.name,E=O.type,L=O.modifier,D=O.token,T=O.mline,j=O.inter,R=j?S+".inside":S,C=O.esc,A=!!C,N="",I="",z="",U="",B=O.$id||S,W=n.outer,Y=W&&W[2],H=W&&W[1];if(O.status&=xe,O.$msg=O.msg||null,O.pos=t.pos,_=n.line,M=t.pos,Qe===E&&(O.status&=ye),y=O.status&ke,l=0,a=0,n.block&&n.block.name===S?(a=1,l=1,k=R,o=n.block.end,p=n.block.sp,m=n.block.ip,f=n.block.ep,N=n.block.s,I=n.block.i):!n.block&&(o=F(D,t))&&(a=1,k=S,v=t.pos,p=[_,M],m=[[_,v],[_,v]],f=[_,v],N=t.sel(M,v),I="",U="",n.block={name:S,end:o,sp:p,ip:m,ep:f,s:N,i:I,e:U}),a){if(w=n.stack,i=Dt===o.ptype,x=i||O.empty,j){if(i&&l&&t.sol())return O.status&=ye,n.block=null,!1;if(!l)return v=t.pos,r.T=E,r.id=S,r.type=L||k,r.str=t.sel(M,v),r.match=null,r.pos=[_,M,_,v],G(n,w,P(O,y,0,B)),L||k}if(v=t.pos,s=H?i&&t.eol():F(o,t),u=T,c=0,s)k=i?R:S,U=t.sel(v,t.pos);else if(b=t.pos,d=!1,H||A||Nt!==o.ptype&&At!==o.ptype&&Ft!==o.ptype){for(;!t.eol();){if(H){if(K(H,t,Y,r)){if(t.pos>b){i&&(s=1);break}return!0}if(i){g=t.nxt(1),z+=g;continue}}if(v=t.pos,!d&&F(o,t)){j&&t.pos>v&&v>b?(k=R,t.bck(v),c=1):(k=S,s=1),U=t.sel(v,t.pos);break}g=t.nxt(1),z+=g,d=A&&!d&&C===g,v=t.pos}i&&t.eol()&&(s=1)}else(q=F(o,t,!0,!0))?j&&t.pos>v+q[1].length?(k=R,t.mov(-q[1].length),c=1,z=t.sel(v,t.pos)):(k=S,s=1,z=t.sel(v,t.pos-q[1].length),U=q[1]):(t.end(),k=R,c=1,z=t.sel(v,t.pos));return u=T||A&&d,I+=z,m[1]=[_,v],f=[_,t.pos],s&&!x&&m[0][0]===m[1][0]&&m[0][1]===m[1][1]?(n.block=null,!1):(s||!u&&!c?n.block=null:(n.block.ip=m,n.block.ep=f,n.block.i=I,n.block.e=U,G(n,w,P(O,y,0,B))),
r.T=E,r.id=S,r.type=L||k,r.str=t.sel(M,t.pos),r.match=null,r.pos=[_,M,f[0],f[1]],O.pos=t.pos,n.block||(h=N+I+U,r.block={str:h,match:[h,I,N,U],part:[h,N,I,U],pos:[[p[0],p[1],f[0],f[1]],[p[0],p[1],m[0][0],m[0][1]],[m[0][0],m[0][1],m[1][0],m[1][1]],[m[1][0],m[1][1],f[0],f[1]]]}),L||k)}return O.status&&O.$msg&&(O.$msg=$(O.$msg,S,!0)),!1}function J(e,t,n,r){var o,i,l,a,s,c,u,f,m,h,d,g,k,$,y,x=e,v=x.type,b=(x.name,x.token),w=b.length,_=x.modifier;if(x.status&=xe,x.$msg=x.msg||null,f=t.pos,m=n.stack,x.pos=t.pos,c=0,u=0,lt===v){x.status&=xe;var M=new String(b[0]),q=n.stack?n.stack.val:null;return M.subgrammar=1,M.next=q?new N(rt,q.name,[q]):null,M.required=q?q.status&ke:0,M}if(Ve===v){for(k=p(),x.status|=ke,g=[],y=ee(n,t),d=0,h=d;w>h;h++){if(o=P(b[h],1,_,k),i=K(o,t,n,r),x.pos=o.pos,o.status&ke&&(c++,g.push(z(o))),!1!==i)return i;o.status&$e&&(u++,ee(n,t,y))}return c>0?x.status|=ke:x.status&=ye,w===u&&c>0?x.status|=$e:x.status&=xe,x.status&&!x.$msg&&g.length&&(x.$msg=g.join(" | ")),!1}if(at&v){$=!!(v&Ze),k=x.$id||p(),$?x.status|=ke:x.status&=ye,y=ee(n,t),d=0;do o=P(b[d++],$,_,k),i=K(o,t,n,r);while(w>d&&(!0===i&&nt&o.type||!1===i&&!(o.status&ke)));if(x.pos=o.pos,!1!==i){if(!0!==i||Ge!==o.type)for(h=w-1;h>=d;h--)m=G(n,m,P(b[h],1,_,k));return i.subgrammar&&w>d&&(i.next=new N(rt,b[d].name,[b[d]]),i.required=b[d].status&ke),i}return o.status&$e?($?x.status|=$e:x.status&=xe,ee(n,t,y)):$&&o.status&ke&&(x.status|=$e),x.status&&!x.$msg&&(x.$msg=z(o)),!1}if(nt&v)return lt&b[0].type?!0:(y=ee(n,t,null,!1),i=K(P(b[0],0),t,n,r),ee(n,t,y),ot===v?!1===i:!1!==i);for(k=x.$id||p(),l=x.found,a=x.min,s=x.max,x.status=0,g=[],y=ee(n,t),h=0;w>h;h++){if(o=P(b[h],1,_,k),i=K(o,t,n,r),x.pos=o.pos,!1!==i){if(++l,s>=l)return x.found=l,G(n,m,P(x,0,0,p())),x.found=0,i;break}o.status&ke&&(c++,g.push(z(o))),o.status&$e&&ee(n,t,y)}return a>l&&(x.status|=ke),(l>s||a>l&&c>0)&&(x.status|=$e),x.status&&!x.$msg&&g.length&&(x.$msg=g.join(" | ")),!1}function X(e,t){var n=this;n.id=e?f("state"):"state",t instanceof X?(n.line=t.line,n.bline=t.bline,n.status=t.status,n.stack=Y(t.stack,!1),n.token=t.token,n.token2=t.token2,n.block=t.block,n.outer=t.outer?[t.outer[0],t.outer[1],new X(e,t.outer[2])]:null,n.queu=t.queu||null,n.symb=t.symb||null,n.ctx=t.ctx?new A({symb:t.ctx.val.symb,queu:t.ctx.val.queu},t.ctx.prev):null,n.hctx=t.hctx?new A({symb:t.hctx.val.symb,queu:t.hctx.val.queu},t.hctx.prev):null,n.err=t.err||null,n.$eol$=t.$eol$,n.$blank$=t.$blank$):(n.line=-1,n.bline=-1,n.status=t||0,n.stack=null,n.token=null,n.token2=null,n.block=null,n.outer=null,n.queu=null,n.symb=null,n.ctx=null,n.hctx=null,n.err=n.status&de?{}:null,n.$eol$=!0,n.$blank$=!0)}function ee(e,t,n,r){return n?(e.status=n[0],e.block=n[1],e.outer=n[2],e.stack=n[3],t&&t.pos>n[4]&&t.bck(n[4]),void 0):(n=[e.status,e.block,e.outer,e.stack,t?t.pos:1/0],!1===r&&(e.status=0),n)}function te(e){e.id=null,e.line=null,e.bline=null,e.status=null,e.stack=null,e.token=null,e.token2=null,e.block=null,e.outer=null,e.queu=null,e.symb=null,e.ctx=null,e.hctx=null,e.err=null}function ne(e,t,n){var r=new String(e);return r.start=t||0,r.pos=n||0,r.sol=function(){return 0===r.pos},r.eol=function(){return r.pos>=r.length},r.end=function(){return r.pos=r.length,r},r.mov=function(e){return r.pos=0>e?_t(0,r.pos+e):Mt(r.length,r.pos+e),r},r.bck=function(e){return r.pos=_t(0,e),r},r.sft=function(){return r.start=r.pos,r},r.nxt=function(e,t){var n,o,i="";if(!0===e){for(t=t||ne.$NONSPC$;r.pos<r.length&&t.test(n=r[Ot](r.pos++));)i+=n;return i.length?i:null}for(e=e||1,o=0;o++<e&&r.pos<r.length;)i+=r[Ot](r.pos++);return i},r.cur=function(e){var t=r.slice(r.start,r.pos);return e&&(r.start=r.pos),t},r.sel=function(e,t){return r.slice(e,t)},r.spc=function(e,t){var n;return(n=r.slice(r.pos).match(t||ne.$SPC$))?(!1!==e&&r.mov(n[0].length),n[0]):void 0},r}function re(e,t,n,r,o){var i,l,a;for(null==t&&(t=e.search(ne.$NONSPC$),-1==t&&(t=e.length)),i=r||0,l=o||0;;){if(a=e.indexOf("	",i),0>a||a>=t)return l+(t-i);l+=a-i,l+=n-l%n,i=a+1}}function oe(n,r){return Gt&e(n)&&(n=g("\\b("+t(a(n).sort(Zt),d).join("|")+")\\b")),!1===r?function(e){return!e||!n.test(e)}:function(e){return!!e&&n.test(e)}}function ie(e,t,n,r,o,i){for(;;){n.lastIndex=e.col;var l=n.exec(e.text);if(!l){if(e.next()){e.text=e.line(e.row);continue}return}{if(t(e.token(e.row,l.index+1)))return e.col=l.index+l[0].length,l;e.col=l.index+1}}}function le(e,t,n,r,o,i){for(var l,a,s;;){if(l=e.text.indexOf(o,e.col),-1===l){if(e.next()){e.text=e.line(e.row);continue}return}if(t(e.token(e.row,l+1)))return a=e.text.lastIndexOf(i,l),s=a>-1&&!ne.$NOTEMPTY$.test(e.text.slice(a+1,l)),e.col=l+1,s?"autoclosed":"regular";e.col=l+1}}function ae(e,t,n,r,o,i,l,a,s,c){if(-1===e){var u,p,f,m,h,d,g,k,$=1,y=t.first(),x=(i.length,l.length,!1===o);e:for(u=n;u>=y;--u)for(p=t.line(u),f=p.length,m=u===n?r-1:f;;){if(0>m)break;if(h=p.lastIndexOf(i,m),d=p.lastIndexOf(l,m),0>h&&0>d)break;if(m=_t(h,d),x||c||t.token(u,m+1)==o)if(m===d)++$;else if(0===--$){g=u,k=m;break e}--m}return null==g||s&&g===n&&k===r?!1:[g,k,n,r]}var u,p,f,m,h,d,v,b,$=1,w=t.last(),x=(i.length,l.length,!1===o);e:for(u=n;w>=u;++u)for(p=t.line(u),f=p.length,m=u===n?r:0;;){if(m>=f)break;if(h=p.indexOf(i,m),d=p.indexOf(l,m),0>h&&0>d)break;if(0>h&&(h=f),0>d&&(d=f),m=Mt(h,d),x||c||t.token(u,m+1)==o)if(m===h)++$;else if(0===--$){v=u,b=m;break e}++m}return null==v||s&&n===v&&b===r?!1:[n,r,v,b]}function se(e){var t=e?e.data:null;t&&t.load&&t.ace_worker_base&&(importScripts(t.ace_worker_base),ace.define("ace/grammar_worker",["require","exports","module","ace/worker/mirror"],function(e,t,n){var r=e("./worker/mirror").Mirror;t.AceGrammarWorker=h(r,{constructor:function(e){var t=this;r.call(t,e),t.setTimeout(300)},$parser:null,init_parser:function(e,t){var n=this,r=Object.keys(e.subgrammars);if(n.$parser=new kn(R(e.grammar),null,!1),r&&r.length)for(var o=0,i=r.length;i>o;o++)n.$parser.subparser(r[o],new kn(R(e.subgrammars[r[o]]),null,!1));n.sender.callback(1,t)},onUpdate:function(){var e,t,n,r,o,i=this,l=i.sender,a=i.$parser;if(!a)return void l.emit("ace_grammar_worker_ok",null);if(e=i.doc.getValue(),!e||!e.length)return void l.emit("ace_grammar_worker_ok",null);if(t=a.parse(e,de),!t)return void l.emit("ace_grammar_worker_ok",null);o=[];for(n in t)t[yt](n)&&(r=t[n],o.push({row:r[0],column:r[1],text:r[4]||"Syntax Error",type:"error",raw:r[4]||"Syntax Error",range:[r[0],r[1],r[2],r[3]]}));o.length?l.emit("ace_grammar_worker_error",o):l.emit("ace_grammar_worker_ok",null)}})}))}function ce(e,t){e[t]||(e[t]=[]);var n,r=e[t];if(r&&r.length)for(n=0;n<r.length;n++)e.removeMarker(r[n]);r.length=0}function ue(e,t,n,r){var o,i,l,a=t.length;for(ce(e,n),l=e[n],o=0;a>o;o++)i=t[o],i.range&&(l.push(e.addMarker(new r(i.range[0],i.range[1],i.range[2],i.range[3]),"ace_error-marker","text",0)),u(i,"range"))}function pe(e,t){ce(e,t),e.clearAnnotations()}function fe(e,t,n,r){ue(e,t,n,r),e.setAnnotations(t)}function me(e,t,n){n=n||gn;var r=n.require("ace/range").Range,o=n.require("ace/worker/worker_client").WorkerClient,i=h(o,{constructor:function(e,t,r,o){var i=this,l=n.require,a=n.config;if(i.$sendDeltaQueue=i.$sendDeltaQueue.bind(i),i.changeListener=i.changeListener.bind(i),i.onMessage=i.onMessage.bind(i),l.nameToUrl&&!l.toUrl&&(l.toUrl=l.nameToUrl),!o)if(a.get("packaged")||!l.toUrl)o=o||a.moduleUrl(t,"worker");else{var s=i.$normalizePath;o=o||s(l.toUrl("ace/worker/worker.js",null,"_"));var c={};e.forEach(function(e){c[e]=s(l.toUrl(e,null,"_").replace(/(\.js)?(\?.*)?$/,""))})}try{i.$worker=new Worker(o)}catch(u){if(!(u instanceof window.DOMException))throw u;var p=i.$workerBlob(o),f=window.URL||window.webkitURL,m=f.createObjectURL(p);i.$worker=new Worker(m),f.revokeObjectURL(m)}i.$worker.postMessage({load:!0,ace_worker_base:mn.base+"/"+a.moduleUrl("ace/worker/json")+hn}),i.$worker.postMessage({init:!0,tlns:c,module:t,classname:r}),i.callbackId=1,i.callbacks={},i.$worker.onmessage=i.onMessage}}),l=n.require("ace/mode/folding/fold_mode").FoldMode,a=h(l,{constructor:function(e){var t=this;l.call(t),t.$mode=e,t.$folds={}},getFoldWidget:function(e,t,n){var r,o,i,l,a=this;return a.$mode.supportCodeFolding?(r=a.$folds,(o=a.$mode.folder(e,t,n))?r[o[0]]=r[o[2]]=o:(o=r[n])&&(n===o[0]?(delete r[n],o===r[o[2]]&&delete r[o[2]]):n===o[2]&&(i=o[0],(l=a.$mode.folder(e,t,i))?(r[l[0]]=r[l[2]]=l,o===r[i]&&delete r[i],o===r[n]&&delete r[n]):(o===r[i]&&delete r[i],o===r[n]&&delete r[n]))),o=r[n]?"markbeginend"===t?n===o[2]&&o[0]!==o[2]?"end":"start":n===o[0]?"start":"":""):""},getFoldWidgetRange:function(e,t,n,o){if(this.$mode.supportCodeFolding){var i=this.$folds[n];return i?new r(i[0],i[1],i[2],i[3]):void 0}}}),s=n.require("ace/mode/text").Mode,c=h(s,{constructor:function(e){var n=this;s.call(n),n.$id=f("ace_grammar_mode"),n.$grammar=e,n.$parser=new $n.Parser(R(e),t),n.$parser.Mode=n,n.$tokenizer=n.$parser,n.lineCommentStart=n.$parser.LC,n.blockComment=n.$parser.BC,n.$markers$=n.$id+"$markers$",n.foldType="fold_"+n.$id,n.foldingRules=new a(n),n.matchType="match_"+n.$id,n.matcher.clear=function(e){e.$bracketHighlight&&(e.removeMarker(e.$bracketHighlight),e.$bracketHighlight=null);var t=e[n.matchType];if(e[n.matchType]=null,t&&t.length)for(var r=0,o=t.length;o>r;r++)e.removeMarker(t[r])}},supportGrammarAnnotations:!1,createWorker:function(e){var t=this,n=t.$markers$;if(!t.supportGrammarAnnotations)return pe(e,n),null;var o=new i(["ace"],"ace/grammar_worker","AceGrammarWorker",mn.file+hn);return o.attachToDocument(e.getDocument()),o.call("init_parser",[{grammar:t.$grammar,subgrammars:t.getSubgrammars()}],function(){o.on("ace_grammar_worker_error",function(t){var o=t.data;fe(e,o,n,r)}),o.on("ace_grammar_worker_ok",function(){pe(e,n)})}),o.on("terminate",function(){pe(e,n)}),o},supportAutoCompletion:!0,autocompleter:function u(e,t,r,o){var i=this;return i.supportAutoCompletion?e.parser.autocomplete(e.state,t,r,o,u.options||{},n):[]},getKeywords:function(e){return[]},supportCodeFolding:!0,folder:function(e,t,r){var o=this,i=e.getState(r),l=i&&i.parser||o.$parser,a=l.fold(e,r,n);return a?(a.start=!0,a.end=!1,a):void 0},supportCodeMatching:!0,matcher:function p(e,t){var o=this;return!1===t?(e.$highlightBrackets$&&(e.$highlightBrackets=e.$highlightBrackets$,e.$highlightBrackets$=null),o):(e.$highlightBrackets$||(e.$highlightBrackets$=e.$highlightBrackets),e.$highlightBrackets=function(){if(o.supportCodeMatching){var e=this;p.clear(e.session),e.$highlightPending||(e.$highlightPending=!0,setTimeout(function(){e.$highlightPending=!1;var t,i,l=e.getSelection();l.isBackwards()?(t=l.lead,i=l.anchor):(t=l.anchor,i=l.lead);var a=e.session.getTokenAt(i.row,i.column-1),s=a&&a.mode?a.mode.parser:o.$parser,c=s.match(e.session,i.row,i.column,n);null!=c&&(!1===c?l.isEmpty()?e.session[o.matchType]=[e.session.addMarker(new r(i.row,i.column-1,i.row,i.column),"ace_error-marker","text")]:e.session[o.matchType]=[e.session.addMarker(new r(t.row,t.column,i.row,i.column),"ace_error-marker","text")]:!1===c.match?e.session[o.matchType]=[e.session.addMarker(new r(c[0],c[1],c[2],c[3]),"ace_error-marker","text")]:e.session[o.matchType]=[e.session.addMarker(new r(c[0],c[1],c[2],c[3]),"ace_selection","text"),e.session.addMarker(new r(c[4],c[5],c[6],c[7]),"ace_selection","text")])},50))}},o)},getSubgrammars:function(){for(var e=this,t=e.$parser,n=Object.keys(t.$subgrammars),r={},o=0,i=n.length;i>o;o++)r[n[o]]=t.$subgrammars[n[o]].Mode.$grammar;return r},submode:function(e,t){var n=this;return n.$parser.subparser(e,t.$parser),n},dispose:function(){var e=this;e.$parser&&e.$parser.dispose(),e.$tokenizer=e.$parser=e.$grammar=e.autocompleter=e.getCompletions=e.foldingRules=e.folder=e.matcher=null}});return c.prototype.getCompletions=c.prototype.autocompleter,new c(e)}var he=1,de=2,ge=32,ke=4,$e=8,ye=~ke,xe=~$e,ve=ke|$e,be=0,we=4,_e=8,Me=9,qe=10,Oe=11,Se=12,Ee=16,Le=17,De=18,Te=19,je=32,Re=33,Ce=128,Fe=129,Ae=2,Ne=4,Ie=8,Pe=4,ze=8,Ue=9,Be=16,We=32,Ge=128,Ye=256,He=512,Ke=1024,Qe=1025,Ve=2048,Ze=4096,Je=8192,Xe=8193,et=8194,tt=8195,nt=16384,rt=nt,ot=16385,it=32768,lt=65536,at=Ze|it,st=Ve|Ze|Je|nt|it|lt,ct={action:Pe,simple:He,block:Ke,comment:Qe,subgrammar:lt,alternation:Ve,sequence:Ze,repeat:Je,zeroorone:Xe,zeroormore:et,oneormore:tt,positivelookahead:rt,negativelookahead:ot,ngram:it},ut="$|SOF|$",pt="$|NONBLANK|$",ft="$|SOL|$",mt="$|EOL|$",ht="$|ENDLINE|$",dt="$|EMPTY|$",gt="$|NONSPACE|$",kt=void 0,$t="prototype",yt="hasOwnProperty",xt="propertyIsEnumerable",vt=Object[$t],bt=vt.toString,wt=Object.create,_t=Math.max,Mt=Math.min,qt="toLowerCase",Ot="charAt",St=1/0,Et=4,Lt=8,Dt=16,Tt=32,jt=33,Rt=34,Ct=64,Ft=128,At=129,Nt=130,It=256,Pt=512,zt=1024,Ut=2048,Bt=4096,Wt=Ft|Tt,Gt=Ft|It,Yt=Ut|It,Ht=Ft|It|Ut,Kt={"[object Number]":Tt,"[object String]":Ft,"[object Array]":It,"[object RegExp]":Ut,"[object Date]":Bt,"[object Function]":zt,"[object Object]":Pt},Qt=/^\s+|\s+$/g,Vt=String[$t].trim?function(e){return e.trim()}:function(e){return e.replace(Qt,"")},Zt=function(e,t){return t.length-e.length},Jt=/\r\n|\r|\n/g,Xt=/[\-_]/g,en=0,tn=/([.*+?^${}()|[\]\/\\\-])/g,nn=/^([.!&\[\]{}()*+?\/|'"]|\s)/,rn="(\\s|\\W|$)",on=/(l?i?l?)x(l?i?l?)$/,ln=/[*+]$/;X.prototype.toString=function(){var e=this;return e.id+"_"+e.line+"_"+e.bline+"_"+(e.block?e.block.name:"0")},ne.$SPC$=/^[\s\u00a0]+/,ne.$NONSPC$=/[^\s\u00a0]/,ne.$NOTEMPTY$=/\S/,ne.$SPACE$=/^\s*/;var an=h({constructor:function(e,t,n){var r=this;r.$grammar=e,r.$DEF=t||null,r.$ERR=n||null,r.DEF=r.$DEF,r.ERR=r.$ERR,r.$folders=[],r.$matchers=[],r.$subgrammars={}},$grammar:null,$subgrammars:null,$folders:null,$matchers:null,$n$:"name",$t$:"type",$v$:"token",$DEF:null,$ERR:null,DEF:null,ERR:null,dispose:function(){var e=this;return e.$grammar=e.$subgrammars=null,e.$folders=e.$matchers=null,e.$n$=e.$t$=e.$v$=null,e.$DEF=e.$ERR=e.DEF=e.ERR=null,e},token:function(e,t,n){if(t.token2){var r=t.token2[0];return e.pos=t.token2[1],e.sft(),t.token=t.token2[3],t.$eol$=e.eol(),t.$blank$=t.$blank$&&(t.token2[2]||t.$eol$),t.token2=null,r}var o,i,l,a,s,c,u,p,f,m,h,d,g,k,$,y,x,v,b=this,w=b.$grammar,_=w.Style,M=b.DEF,q=b.ERR,r={},O=b.$n$,S=b.$t$,E=b.$v$,L=w.$interleaved,D=w.$parser,T=D.length,j=L?L.length:0,R=t.outer,C=R&&R[2],F=R&&R[1];if(e.sol()&&(t.$eol$&&(t.$blank$&&(t.bline=t.line),t.$eol$=!1,t.line++),t.$blank$=t.bline+1===t.line),t.$actionerr$=!1,t.token=null,a=t.line,s=e.pos,m=!1,d=!0,h=!1,g=!1,R&&b===R[0]){if(r[O]=null,r[S]=M,r[E]=null,F){if(l=new I,K(F,e,C,l))return t.outer=null,{parser:b,state:C};for(e.nxt(1);!e.eol();){if(K(F,e,C,l)){if(e.pos>s)break;return t.outer=null,{parser:b,state:C}}e.nxt(1)}}else e.spc(),e.eol()?g=!0:e.end();return r[E]=e.cur(1),t.$eol$=e.eol(),t.$blank$=t.$blank$&&(g||t.$eol$),r}if(t.stack&&Be===t.stack.val.type&&e.sol()&&(t.stack=t.stack.prev),(!t.stack||null==t.block)&&e.spc()){if(t.stack&&lt===t.stack.val.type)return e.bck(s),o=t.stack.val,t.stack=t.stack.prev,m=K(o,e,t,l),k=""+m,b.$subgrammars[k]?($=b.$subgrammars[k],y=new X(1,n[k]?n[k]:t.status),C=t):($=b,y=new X,C=t),y.outer=[b,m.next,C],{parser:$,state:y,toInner:k};d=!0,g=!0}if(r[O]=null,r[S]=M,r[E]=null,d)for(l=new I,g&&(l.space=[s,e.pos],e.sft()),c=0;d&&(t.stack||T>c)&&!e.eol();){if(p=e.pos,f=t.stack,F){if(e.spc(),K(F,e,C,l))return l.space||e.pos>p?(l.space&&(e.start=l.space[0],e.pos=l.space[1]),r[E]=e.cur(1),t.$eol$=e.eol(),t.$blank$=t.$blank$&&!0,r):(t.outer=null,{parser:R[0],state:C,fromInner:t});e.bck(p)}if(x=!1,j&&!t.block)for(u=0;j>u;u++)if(o=L[u],m=K(o,e,t,l),!1!==m){x=!0;break}if(d&&!x){if(!t.stack&&c>=T)break;t.stack?(o=t.stack.val,t.stack=t.stack.prev):o=D[c++],m=K(o,e,t,l)}if(!1===m){if(o.status&ve){t.token=o,g=H(t,e,l,o)||g,h=!0,d=!1;break}}else{if(m.subgrammar)return k=""+m,b.$subgrammars[k]?($=b.$subgrammars[k],y=new X(1,n[k]?n[k]:t.status),C=t):($=b,y=new X,C=t),y.outer=[b,m.next,C],l.space?(t.token2=[{parser:$,state:y,toInner:k},e.pos,g,t.token],t.token=null,e.start=l.space[0],e.pos=l.space[1],r[E]=e.cur(1),t.$eol$=e.eol(),t.$blank$=t.$blank$&&!0,r):{parser:$,state:y,toInner:k};if(t.stack&&t.stack.prev&&e.eol()&&Ke&t.stack.val.type&&t.block&&t.block.name===t.stack.val.name)for(u=t.stack.prev;u&&Pe===u.val.type;)i=u,u=u.prev,v=Q(i,e,t,l),i.status&$e?t.$actionerr$=!0:v&&!0!==m&&i.modifier&&(m=i.modifier);else if(t.stack&&Pe===t.stack.val.type)for(;t.stack&&Pe===t.stack.val.type;)i=t.stack.val,t.stack=t.stack.prev,v=Q(i,e,t,l),i.status&$e?t.$actionerr$=!0:v&&!0!==m&&i.modifier&&(m=i.modifier);if(!0!==m){d=!1;break}}}return d&&(l.space?(e.start=l.space[0],e.pos=l.space[1],m=!1,l.space=null):e.nxt(1)),r[E]=e.cur(1),!1!==m?(m=m?_[m]||M:M,r[O]=o?o.name:null):h?(m=q,t.status&de&&U(t,a,s,a,e.pos,o)):m=M,r[S]=m,l.space&&(t.token2=[r,e.pos,g,t.token],t.token=null,e.start=l.space[0],e.pos=l.space[1],r={},r[O]=null,r[S]=M,r[E]=e.cur(1),g=!0),t.$eol$=e.eol(),t.$blank$=t.$blank$&&(g||t.$eol$),r},get:function(e,t){for(var n=t.parser.token(e,t.state,t.inner);n&&n.parser;)n.fromInner&&t.parser!==n.parser&&(t.state.err=n.fromInner.err,t.name&&(t.inner[t.name]=n.fromInner)),n.state.err=t.state.err,n.state.line=t.state.line,n.state.bline=t.state.bline,n.state.$blank$=t.state.$blank$,n.state.$eol$=t.state.$eol$,n.state.$full_parse$=t.state.$full_parse$,t.state=n.state,t.parser=n.parser,t.name=n.toInner,n=t.parser.get(e,t);return n},tokenize:function(e,t,n,r){if(r=r||[],e.eol())t.state.line++,t.state.$blank$&&t.state.bline++;else for(;!e.eol();)r.push(t.parser.get(e,t));return r},parse:function(e,t){var n,o,i,l,a,s,c=(e||"").split(Jt),u=c.length,p=null;if(t=t||he,i=!!(t&de),l=!!(t&he),o={parser:this,state:new X(0,t),inner:{}},o.state.$full_parse$=!0,r(function(e){c[e]+="\n"},0,u-2),l?p=r(t&ge?function(e,t){o.parser.tokenize(ne(c[e]),o,e,t)}:function(e,t){t.push(o.parser.tokenize(ne(c[e]),o,e))},0,u-1,[]):r(function(e){var t=ne(c[e]);if(t.eol())o.state.line++,o.state.$blank$&&o.state.bline++;else for(;!t.eol();)o.parser.get(t,o)},0,u-1),n=o.state,i&&n.queu)for(;n.queu;)a=n.queu.val,n.queu=n.queu.prev,U(n,a[1],a[2],a[3],a[4],null,a[5]);return s=l&&i?{tokens:p,errors:n.err}:l?p:n.err,te(n),o=n=null,s},autocompletion:function(e,t){var n,r,o=e.stack,i={},l=O([e.token],[],i);for(t=t||0;o;){if(n=o.val,r=n.type,Je&r){if(l=O([n],l,i),0<n.min&&t<l.length)break}else if((He===r||Ve===r||at&r)&&(l=O([n],l,i),t<l.length))break;o=o.prev}return l},subparser:function(e,t){var n=this;return!1===t?n.$subgrammars[yt](e)&&delete n.$subgrammars[e]:t&&(n.$subgrammars[e]=t),n},iterator:function(){},validate:function(){},autocomplete:function(){},indent:function(){},fold:function(){},match:function(){}}),sn={Pattern:function(e,t,n){return function(){}},Indented:function(e){return e=e||ne.$NOTEMPTY$,function(t){var n,r,o,i,l,a,s,c,u,p=t.row;if(n=t.line(p),e.test(n)){for(r=t.indentation(n),a=null,l=n.length,c=p+1,u=t.last();u>=c;++c)if(o=t.line(c),i=t.indentation(o),i>r)a=c,s=o.length;else if(e.test(o))break;return a?[p,l,a,s]:void 0}}},Delimited:function(e,t,n,r){return e&&t&&e.length&&t.length?(n=n||l,function(o){var i,l,a,s,c,u,p=o.row,f=o.col;for(i=o.line(p),a=f,s=0;;){var c=0>=a?-1:i.lastIndexOf(e,a-1);if(-1!==c){if(1===s&&f>c)return;if(n(u=o.token(p,c+1))){l=c+e.length;break}a=c-1}else{if(1===s)return;s=1,a=i.length}}return ae(1,o,p,l,u,e,t,n,!0,r)}):function(){}},MarkedUp:function(e,t,n,r,o){return e=e||l,t=t||"<",n=n||">",r=r||"/",o=o||g(d(t)+"("+d(r)+"?)([a-zA-Z_\\-][a-zA-Z0-9_\\-:]*)",{g:1}),function(i){i.col=0,i.min=i.first(),i.max=i.last(),i.text=i.line(i.row);for(var l,a,s,c,u,p,f,m,h,d=i.row;;){if(l=ie(i,e,o,t,n,r),!l||i.row!==d||!(a=le(i,e,o,t,n,r)))return;if(!l[1]&&"autoclosed"!==a)for(s=[i.row,i.col],u=l[2],c=null,p=[];;){if(f=ie(i,e,o,t,n,r),d=i.row,m=i.col-(f?f[0].length:0),!f||!(a=le(i,e,o,t,n,r)))return!1;if("autoclosed"!==a)if(f[1]){for(h=p.length-1;h>=0;--h)if(p[h]===f[2]){p.length=h;break}if(0>h&&(!u||u===f[2]))return[s[0],s[1],d,m]}else p.push(f[2])}}}}},cn={Pattern:function(e,t,n){return function(){}},Delimited:function(e,t,n,r){return e&&t&&e.length&&t.length?(n=n||l,function(o){var i,l=o.col,a=o.row,s=o.line(a),c=!1,u=e.length,p=t.length;return l>=u&&(1===u&&e===s.charAt(l-1)||e===s.slice(l-u,l))?(i=ae(1,o,a,l,c,e,t,n,!1,r),i?(i=[i[0],i[1]-u,i[0],i[1],i[2],i[3],i[2],i[3]+p],i.match="end"):(i=[a,l-u,a,l],i.match=!1),i):l>=p&&(1===p&&t===s.charAt(l-1)||t===s.slice(l-p,l))?(i=ae(-1,o,a,l-p,c,e,t,n,!1,r),i?(i=[i[0],i[1],i[0],i[1]+u,i[2],i[3],i[2],i[3]+p],i.match="start"):(i=[a,l-p,a,l],i.match=!1),i):void 0}):function(){}},MarkedUp:function(e,t,n,r,o){return function(){}}},un=!("undefined"==typeof global||"[object global]"!==bt.call(global)),pn=!(un||"undefined"==typeof navigator),fn=!!(pn&&"function"==typeof importScripts&&navigator instanceof WorkerNavigator),mn=function(e,t,n){var r,o=null,i=null,l=null;return e?(o=__filename,i=__dirname,l=__dirname):n?(o=self.location.href,i=o.split("/").slice(0,-1).join("/")):t&&(l=document.location.href.split("#")[0].split("?")[0].split("/").slice(0,-1).join("/"),(r=document.getElementsByTagName("script"))&&r.length&&(o=r[r.length-1].src,i=o.split("/").slice(0,-1).join("/"))),{path:i,file:o,base:l}}(un,pn,fn),hn="?nocache="+f("nonce")+"_"+~~(1e3*Math.random()),dn=function(){return(this.name||"")+"==>"+this.state.toString()},gn="undefined"!=typeof ace?ace:{require:function(){return{}},config:{}},kn=h(an,{constructor:function yn(t,n,o){var i,a=this,s=null,c=null;if(an.call(a,t,"text","invalid"),a.$v$="value",a.DEF=n||a.$DEF,a.ERR=t.Style.error||a.$ERR,a.LC=t.$comments.line||null,a.BC=t.$comments.block?{start:t.$comments.block[0][0],end:t.$comments.block[0][1]}:null,!1!==o){if(t.$comments.block&&t.$comments.block.length){i=yn.Type("comment");for(var u=0,p=t.$comments.block.length;p>u;u++)a.$folders.push(yn.Fold.Delimited(t.$comments.block[u][0],t.$comments.block[u][1],i,"comment"))}t.Fold&&Ft&e(t.Fold)?s=t.Fold[qt]():t.$extra.fold&&(s=t.$extra.fold[qt]()),c=t.Match&&Ft&e(t.Match)?t.Match[qt]():t.$extra.match?t.$extra.match[qt]():s;var f=T(t,1);i=f.length?yn.Type(f,!1):l,s&&(s=s.split("+"),r(function(e,t){var n,r=Vt(t[e]);"braces"===r?a.$folders.push(yn.Fold.Delimited("{","}",i)):"brackets"===r?a.$folders.push(yn.Fold.Delimited("[","]",i)):"parens"===r||"parentheses"===r?a.$folders.push(yn.Fold.Delimited("(",")",i)):"brace"===r||"cstyle"===r||"c"===r?(a.$folders.push(yn.Fold.Delimited("{","}",i)),a.$folders.push(yn.Fold.Delimited("[","]",i))):"indent"===r||"indentation"===r?a.$folders.push(yn.Fold.Indented()):"tags"===r||"markup"===r||"html"===r||"xml"===r?(a.$folders.push(yn.Fold.Delimited("<![CDATA[","]]>",yn.Type(["comment","tag"],!1))),a.$folders.push(yn.Fold.MarkedUp(yn.Type("tag"),"<",">","/"))):-1<(n=r.indexOf(","))&&a.$folders.push(yn.Fold.Delimited(r.slice(0,n),r.slice(n+1),i))},0,s.length-1,s)),c&&(c=c.split("+"),r(function(e,t){var n,r=Vt(t[e]);"braces"===r?a.$matchers.push(yn.Match.Delimited("{","}")):"brackets"===r?a.$matchers.push(yn.Match.Delimited("[","]")):"parens"===r||"parentheses"===r?a.$matchers.push(yn.Match.Delimited("(",")")):"brace"===r||"cstyle"===r||"c"===r?(a.$matchers.push(yn.Match.Delimited("{","}")),a.$matchers.push(yn.Match.Delimited("[","]")),a.$matchers.push(yn.Match.Delimited("(",")"))):"tags"===r||"markup"===r||"html"===r||"xml"===r?a.$matchers.push(yn.Match.MarkedUp(yn.Type("tag"),"<",">","/")):-1<(n=r.indexOf(","))&&a.$matchers.push(yn.Match.Delimited(r.slice(0,n),r.slice(n+1)))},0,c.length-1,c))}},LC:null,BC:null,dispose:function(){var e=this;return e.LC=e.BC=null,an[$t].dispose.call(e)},tokenize:function(e,t,n,r){var o;if(r=r||[],e.eol())t.state.line++,t.state.$blank$&&t.state.bline++;else for(;!e.eol();)o=t.parser.get(e,t),o.mode=t,r.push(o);return r},getLineTokens:function(e,t,n){var r,o=this;return r=t?{parser:t.parser,state:new X(1,t.state),inner:t.inner,name:t.name,toString:dn}:{parser:o,state:new X(1),inner:{},name:null,toString:dn},{tokens:r.parser.tokenize(ne(e),r,n),state:r}},autocomplete:function(e,t,r,o,i,l){var a=this,s=[];if(a.$grammar.$autocomplete){i=i||{};var c=i[yt]("caseInsesitiveMatch")?!!i.caseInsesitiveMatch:!1,u=i[yt]("prefixMatch")?!!i.prefixMatch:!0,p=i[yt]("inContext")?!!i.inContext:!1,f=o,m=f[qt](),h=f.length,d=!1,g=1e3,k=function(e,t){var n,r,o,i,l,a,s,p=t.word,k=p.length;return h?k>=h&&(n=t.meta,r=!!p.ci,s=c||r,s?(l=p[qt](),a=m):(l=p,a=f),(i=l.indexOf(a))>=0&&(!u||0===i)&&(o=s?p.indexOf(f):i,e.push({name:p,value:p,meta:n,score:1e3-10*(k-h)-5*(0>o?i+3:o)}))):e.push({name:p,value:p,meta:t.meta,score:d?1e3-10*k:g--}),e};p?(d=!1,s=n(a.autocompletion(e),k,s),s.length||(d=!0,s=n(a.$grammar.$autocomplete,k,s))):(d=!0,s=n(a.$grammar.$autocomplete,k,s))}return s},iterator:function(e,t){var n=e.getTabSize();return{row:0,col:0,min:0,max:0,line:function(t){return e.getLine(t)},first:function(){return 0},last:function(){return e.getLength()-1},next:function(){var e=this;if(!(e.row>=e.max))return e.col=0,e.row++,!0},prev:function(){var e=this;if(!(e.row<=e.min))return e.col=0,e.row--,!0},indentation:function(e){return re(e,null,n)},state:function(t,n){var r=e.getState(t);return r.state||r},token:function(t,n){return e.getTokenAt(t,n).type},tokens:function(t){return e.getTokens(t)}}},fold:function(e,t,n){var r,o,i,l=this,a=l.$folders,s=a.length;if(s)for(o=l.iterator(e,n),o.row=t,o.col=0,r=0;s>r;r++)if((i=a[r](o))||!1===i)return i},match:function(e,t,n,r){var o,i,l,a=this,s=a.$matchers,c=s.length;if(c)for(i=a.iterator(e,r),i.row=t,i.col=n||0,o=0;c>o;o++)if((l=s[o](i))||!1===l)return l}});kn.Type=oe,kn.Fold=sn,kn.Match=cn,fn&&(onmessage=se);var $n={VERSION:"4.1.0",clone:o,extend:i,pre_process:j,parse:R,getMode:me,Parser:kn};return $n});