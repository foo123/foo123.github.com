/**
*
*   AceGrammar
*   @version: 4.1.0
*
*   Transform a grammar specification in JSON format, into an ACE syntax-highlight parser mode
*   https://github.com/foo123/ace-grammar
*   https://github.com/foo123/editor-grammar
*
**/!function(e,t,n){"use strict";"object"==typeof module&&module.exports?(module.$deps=module.$deps||{})&&(module.exports=module.$deps[t]=n.call(e)):"function"==typeof define&&define.amd&&"function"==typeof require&&"function"==typeof require.specified&&require.specified(t)?define(t,["module"],function(t){return n.moduleUri=t.uri,n.call(e)}):t in e||(e[t]=n.call(e)||1)&&"function"==typeof define&&define.amd&&define(function(){return e[t]})}(this,"AceGrammar",function(){"use strict";function e(e){var t=0;return null===e?t=Dt:!0===e||!1===e||e instanceof Boolean?t=Ct:kt===e?t=Lt:(t=Kt[bt.call(e)]||Et,t=Tt===t||e instanceof Number?isNaN(e)?Rt:isFinite(e)?Tt:jt:Ft===t||e instanceof String?1===e.length?At:Ft:zt===t||e instanceof Array?zt:Ut===t||e instanceof RegExp?Ut:Bt===t||e instanceof Date?Bt:Pt===t||e instanceof Function?Pt:Nt===t?Nt:Et),t}function t(e,t,n,r){var o,i,a,l,s,c,u=e.length;if(arguments.length<4&&(r=u-1),0>r&&(r+=u),arguments.length<3&&(n=0),n>r)return[];if(n===r)return[t(e[n],n,n,r)];for(a=r-n+1,l=15&a,s=1&l,c=new Array(a),s&&(c[0]=t(e[n],n,n,r)),o=s;l>o;o+=2)i=n+o,c[o]=t(e[i],i,n,r),c[o+1]=t(e[i+1],i+1,n,r);for(o=l;a>o;o+=16)i=n+o,c[o]=t(e[i],i,n,r),c[o+1]=t(e[i+1],i+1,n,r),c[o+2]=t(e[i+2],i+2,n,r),c[o+3]=t(e[i+3],i+3,n,r),c[o+4]=t(e[i+4],i+4,n,r),c[o+5]=t(e[i+5],i+5,n,r),c[o+6]=t(e[i+6],i+6,n,r),c[o+7]=t(e[i+7],i+7,n,r),c[o+8]=t(e[i+8],i+8,n,r),c[o+9]=t(e[i+9],i+9,n,r),c[o+10]=t(e[i+10],i+10,n,r),c[o+11]=t(e[i+11],i+11,n,r),c[o+12]=t(e[i+12],i+12,n,r),c[o+13]=t(e[i+13],i+13,n,r),c[o+14]=t(e[i+14],i+14,n,r),c[o+15]=t(e[i+15],i+15,n,r);return c}function n(e,t,n,r,o){var i,a,l,s,c,u=e.length,p=n;if(arguments.length<5&&(o=u-1),0>o&&(o+=u),arguments.length<4&&(r=0),r>o)return p;if(r===o)return t(p,e[r],r);for(l=o-r+1,s=15&l,c=1&s,c&&(p=t(p,e[r],r)),i=c;s>i;i+=2)a=r+i,p=t(t(p,e[a],a),e[a+1],a+1);for(i=s;l>i;i+=16)a=r+i,p=t(t(t(t(t(t(t(t(t(t(t(t(t(t(t(t(p,e[a],a),e[a+1],a+1),e[a+2],a+2),e[a+3],a+3),e[a+4],a+4),e[a+5],a+5),e[a+6],a+6),e[a+7],a+7),e[a+8],a+8),e[a+9],a+9),e[a+10],a+10),e[a+11],a+11),e[a+12],a+12),e[a+13],a+13),e[a+14],a+14),e[a+15],a+15);return p}function r(e,t,n,r){if(t>n)return r;if(t===n)return e(t,r,t,n),r;var o,i,a=n-t+1,l=15&a,s=1&l;for(s&&e(t,r,t,n),o=s;l>o;o+=2)i=t+o,e(i,r,t,n),e(++i,r,t,n);for(o=l;a>o;o+=16)i=t+o,e(i,r,t,n),e(++i,r,t,n),e(++i,r,t,n),e(++i,r,t,n),e(++i,r,t,n),e(++i,r,t,n),e(++i,r,t,n),e(++i,r,t,n),e(++i,r,t,n),e(++i,r,t,n),e(++i,r,t,n),e(++i,r,t,n),e(++i,r,t,n),e(++i,r,t,n),e(++i,r,t,n),e(++i,r,t,n);return r}function o(t,n){var r,i,a,l,s=e(t),c=0;if(Tt===e(n)?n>0?(c=n,n=!0):n=!1:n=!1!==n,Nt===s){i={};for(a in t)t[vt](a)&&t[yt](a)&&(r=e(t[a]),Nt===r?i[a]=n?o(t[a],c>0?c-1:n):t[a]:zt===r?i[a]=n?o(t[a],c>0?c-1:n):t[a].slice():Bt===r?i[a]=new Date(t[a]):Ft&r?i[a]=t[a].slice():Tt&r?i[a]=0+t[a]:i[a]=t[a])}else if(zt===s)for(l=t.length,i=new Array(l),a=0;l>a;a++)r=e(t[a]),Nt===r?i[a]=n?o(t[a],c>0?c-1:n):t[a]:zt===r?i[a]=n?o(t[a],c>0?c-1:n):t[a].slice():Bt===r?i[a]=new Date(t[a]):Ft&r?i[a]=t[a].slice():Tt&r?i[a]=0+t[a]:i[a]=t[a];else i=Bt===s?new Date(t):Ft&s?t.slice():Tt&s?0+t:t;return i}function i(){var t,n,r,a,l,s,c,u,p,f,m=arguments,h=m.length;if(1>h)return null;for(n=o(m[0]),r=1;h>r;r++)if(t=m[r])for(a in t)if(t[vt](a)&&t[yt](a))if(n[vt](a)&&n[yt](a)){if(p=e(n[a]),f=e(t[a]),Nt===p&&Nt===f)n[a]=i(n[a],t[a]);else if(zt===p&&zt===f){if(c=n[a],u=t[a],s=u.length,!s)continue;if(c.length)for(l=0;s>l;l++)0>c.indexOf(u[l])&&c.push(u[l]);else n[a]=u.slice()}}else n[a]=o(t[a]);return n}function a(){return!0}function l(t,n){return n||zt!==e(t)?[t]:t}function s(t,n){return t=l(t),(n||zt!==e(t[0]))&&(t=[t]),t}function c(t,n){return Ft&e(n)&&Ft&e(t)&&n.length&&n.length<=t.length&&n===t.substr(0,n.length)}function u(e,t,n){return n?e[t]=kt:delete e[t],e}function p(e){return(e||"id_")+ ++en}function f(e){return(e||"uuid")+"_"+ ++en+"_"+(new Date).getTime()}function m(){var t,n,r,o,i,a,l=arguments,s=l.length;for(t=l[0]||{},i=1;s>i;i++)if(n=l[i],Nt===e(n))for(o in n)n[vt](o)&&n[yt](o)&&(r=n[o],a=e(r),Tt&a?t[o]=0+r:Bt&a?t[o]=new Date(r):Gt&a?t[o]=r.slice():t[o]=r);return t}function h(e,t){var n,r=arguments.length,o="constructor";return 0===r?(e=Object,t={}):1===r?(t=e||{},e=Object):(e=e||Object,t=t||{}),t[vt](o)||(t[o]=function(){}),n=t[o],delete t[o],n[$t]=m(wt(e[$t]),t),n[$t][o]=n,n}function d(e){return e.replace(tn,"\\$1")}function g(e,t){t=t||{l:0,x:0,i:0,g:0};var e=new RegExp(e,(t.g?"g":"")+(t.i?"i":""));return e.xflags=t,e}function k(e,t,n,r){var o,i,a,l,s=e.pos,c=e.length,u="",p=!!n;if(p){for(r=!!r,i=!1,l=0;c>s&&(o=e[qt](s++),t!==o||i);)a=n===o,i=!i&&a,r?(a&&l++,(!a||2&l)&&(u+=o,l=0)):u+=o;2&l&&(u+=n)}else for(;c>s&&(o=e[qt](s++),t!==o);)u+=o;return e.pos=s,u}function $(t,n,r,o){var i,a,l,s,c,u=!0===r?0:1,p=o?"\\":"$",f=o?92:36;for(Ft&e(n)&&(o&&(n=d(n)),n=[n,n,n],u=0),a=t.length,c="",i=0;a>i;)l=t[qt](i),a>i+1&&p===l?(s=t.charCodeAt(i+1),f===s?(c+=p,i+=2):s>=48&&57>=s?(c+=n[u+s-48]||"",i+=2):(c+=l,i+=1)):(c+=l,i+=1);return c}function v(t,n,r,o){if(!t||(Tt|Ut)&e(t))return t;var i,a=n?n.length||0:0,l="",s={g:0,i:0,x:0,l:0};if(Ft&e(o)?l=o:o&&(l=rn),a&&t.substr(0,a)===n){var c,u,p,i,f,m=t.substr(a),h=m[qt](0);for(i=m.length;i--&&(f=m[qt](i),h!==f);)"i"===f.toLowerCase()?s.i=1:"x"===f.toLowerCase()?s.x=1:"l"===f.toLowerCase()&&(s.l=1);return c=m.substring(1,i),"^"===c.charAt(0)?(s.l=1,u="^("+c.slice(1)+")"):u="^("+c+")",p=u,(s.x||s.l||s.i)&&(u=(s.l?"l":"")+(s.x?"x":"")+(s.i?"i":"")+"::"+u),r[u]||(p=g(p,s),r[u]=p),r[u]}return l?(p=u="^("+d(t)+")"+l,r[u]||(p=g(p,s),r[u]=p),r[u]):t}function y(n,r,o){var i,a="";return Ft&e(r)?a=r:r&&(a=rn),i=t(n.sort(Zt),d).join("|"),[g("^("+i+")"+a,{l:0,x:0,i:o?1:0}),1]}function x(t,n,r,o){var i=e(n);if(Tt===i)return n;if(o[t])return o[t];r=r||0;var a,l=0;return n&&n.isCharList&&(l=1,u(n,"isCharList")),a=Dt===i?new C(Ae,t,n,Dt,r):At===i?new C(Ae,t,n,At,r):Yt&i?new C(Ae,t,n,Ut,r):Ft&i?new C(Ae,t,n,l?It:Ft,r):n,o[t]=a}function b(t,n,r,o,i,a,s,u){if(s[t])return s[t];var p,f,m,h,d,g,k,$=0,w=0,_=1,M=Ft&e(o)?!0:!!o;if(p=l(n),m=p.length,1===m)k=x(t,v(p[0],r,a,o),0,s);else if(m>1){for(h=(m>>>1)+1,f=0;h>=f;f++)d=e(p[f]),g=e(p[m-1-f]),At===d&&At===g||(_=0),zt&d||zt&g?$=1:(Ut&d||Ut&g||c(p[f],r)||c(p[m-1-f],r))&&(w=1);if(_&&!M)p=p.slice().join(""),p.isCharList=1,k=x(t,p,0,s);else if(!M||$||w)if($||w){for(f=0;m>f;f++)zt&e(p[f])?p[f]=b(t+"_"+f,p[f],r,o,i,a,s):p[f]=x(t+"_"+f,v(p[f],r,a),f,s);k=m>1?new C(Ie,t,p):p[0]}else{for(u&&(u.keywords=l(n).slice()),p=p.sort(Zt),f=0;m>f;f++)p[f]=x(t+"_"+f,v(p[f],r,a),f,s);k=m>1?new C(Ie,t,p):p[0]}else u&&(u.keywords=l(n).slice()),k=x(t,y(p,o,i),0,s)}return s[t]=k}function w(t,n,o,i,a){if(a[t])return a[t];var l=s(n),u=[],p=[];return r(function(n){var r,s,f,m;r=x(t+"_0_"+n,v(l[n][0],o,i),n,a),l[n].length>1?(f=c(l[n][1],o),m=f&&on.test(l[n][1]),Ut!==r.ptype||Ft!==e(l[n][1])||!m&&f?s=x(t+"_1_"+n,v(l[n][1],o,i),n,a):m?(s=new String(l[n][1]),s.regex_pattern=o):s=l[n][1]):s=r,u.push(r),p.push(s)},0,l.length-1),a[t]=new C(ze,t,[u,p])}function _(e,t){var n=s(e.tokens.slice());r(function(e){var r=n[e][0],o=n[e].length>1?n[e][1]:n[e][0],i=n[e].length>2?n[e][2]:"";null===o?(t.line=t.line||[],t.line.push(r)):(t.block=t.block||[],t.block.push([r,o,i]))},0,n.length-1)}function M(e,n,r,o){var i=e.meta||r,a=!(!e.caseInsesitive&&!e.ci),l=t(n,function(e){return{word:e,meta:i,ci:a}});return o.autocomplete=(o.autocomplete||[]).concat(l),l}function O(t){t.Lex||(t.Lex={}),t.Syntax||(t.Syntax={});var n,r,o,a,l,s,c,p,f,m,h,d=t.Lex,g=t.Syntax,k=[d,g],$=k.length;for(h=0;$>h;){m=k[h++];for(o in m)m[vt](o)&&(n=o.split(":"),r=n[1]&&Vt(n[1]).length?Vt(n[1]):null,n=Vt(n[0]),n.length||(n=o,r=null),n!==o&&(m[n]=m[o],u(m,o),r&&(r=r[Ot](),a=m[n],l=e(a),Nt===l?m[n].type||(m[n].type=r):(m[n]={type:r},"error"===r?(m[n].type="action",m[n].error=a):"nop"===r?(m[n].type="action",m[n].nop=!0):"group"===r?(m[n].type="sequence",m[n].tokens=a):"action"===r&&Ft===l?m[n][a]=!0:m[n].tokens=a))),d===m&&(Ht&e(m[n])&&(m[n]={type:"simple",tokens:m[n]}),a=m[n],a.type&&(p=a.type=a.type[Ot](),"line-block"===p?(a.type="block",a.multiline=!1,a.escape=!1):"escaped-line-block"===p?(a.type="block",a.multiline=!1,a.escape="\\"):"escaped-block"===p&&(a.type="block",a.multiline=!0,a.escape="\\"))))}m=d;for(n in m)if(m[vt](n))for(a=m[n];a.extend;)s=a.extend,u(a,"extend"),c=d[s],c&&(Ht&e(c)&&(c=d[s]={type:"simple",tokens:c}),a=i(c,a));m=d;for(n in m)m[vt](n)&&(a=m[n],a.type?(p=a.type=a.type[Ot](),"line-block"===p?(a.type="block",a.multiline=!1,a.escape=!1):"escaped-line-block"===p?(a.type="block",a.multiline=!1,a.escape="\\"):"escaped-block"===p&&(a.type="block",a.multiline=!0,a.escape="\\")):a["escaped-line-block"]?(a.type="block",a.multiline=!1,a.escape||(a.escape="\\"),a.tokens=a["escaped-line-block"],u(a,"escaped-line-block")):a["escaped-block"]?(a.type="block",a.multiline=!0,a.escape||(a.escape="\\"),a.tokens=a["escaped-block"],u(a,"escaped-block")):a["line-block"]?(a.type="block",a.multiline=!1,a.escape=!1,a.tokens=a["line-block"],u(a,"line-block")):a.comment?(a.type="comment",a.escape=!1,a.tokens=a.comment,u(a,"comment")):a.block?(a.type="block",a.tokens=a.block,u(a,"block")):a.simple?(a.type="simple",a.tokens=a.simple,u(a,"simple")):a.nop?(a.type="action",a.action=["nop",a.nop,!1],a.nop=!0):a.error?(a.type="action",a.action=["error",a.error,!!a["in-context"],!!a["in-hypercontext"]],u(a,"error")):a[vt]("hypercontext")?(a.type="action",a.action=[a.hypercontext?"hypercontext-start":"hypercontext-end",a.hypercontext,!!a["in-context"],!!a["in-hypercontext"]],u(a,"hypercontext")):a[vt]("context")?(a.type="action",a.action=[a.context?"context-start":"context-end",a.context,!!a["in-context"],!!a["in-hypercontext"]],u(a,"context")):a.indent?(a.type="action",a.action=["indent",a.indent,!!a["in-context"],!!a["in-hypercontext"]],u(a,"indent")):a.outdent?(a.type="action",a.action=["outdent",a.outdent,!!a["in-context"],!!a["in-hypercontext"]],u(a,"outdent")):a.define?(a.type="action",a.action=["define",Ft&e(a.define)?["*",a.define]:a.define,!!a["in-context"],!!a["in-hypercontext"]],u(a,"define")):a.undefine?(a.type="action",a.action=["undefine",Ft&e(a.undefine)?["*",a.undefine]:a.undefine,!!a["in-context"],!!a["in-hypercontext"]],u(a,"undefine")):a.defined?(a.type="action",a.action=["defined",Ft&e(a.defined)?["*",a.defined]:a.defined,!!a["in-context"],!!a["in-hypercontext"]],u(a,"defined")):a.notdefined?(a.type="action",a.action=["notdefined",Ft&e(a.notdefined)?["*",a.notdefined]:a.notdefined,!!a["in-context"],!!a["in-hypercontext"]],u(a,"notdefined")):a.unique?(a.type="action",a.action=["unique",Ft&e(a.unique)?["*",a.unique]:a.unique,!!a["in-context"],!!a["in-hypercontext"]],u(a,"unique")):a.push?(a.type="action",a.action=["push",a.push,!!a["in-context"],!!a["in-hypercontext"]],u(a,"push")):a[vt]("pop")?(a.type="action",a.action=["pop",a.pop,!!a["in-context"],!!a["in-hypercontext"]],u(a,"pop")):a.type="simple","action"===a.type?a.ci=!(!a.caseInsesitive&&!a.ci):"block"===a.type||"comment"===a.type?(a.multiline=a[vt]("multiline")?!!a.multiline:!0,Ft&e(a.escape)||(a.escape=!1)):"simple"===a.type&&(a.meta=a.autocomplete&&Ft&e(a.meta)?a.meta:null,a.ci=!(!a.caseInsesitive&&!a.ci)));m=g;for(n in m)m[vt](n)&&(a=m[n],Nt!==e(a)||a.type?a.type&&(p=a.type=a.type[Ot](),"group"===p&&a.match?(l=e(a.match),Ft&l?(f=a.match[Ot](),"alternation"===f||"either"===f?(a.type="alternation",u(a,"match")):"sequence"===f||"all"===f?(a.type="sequence",u(a,"match")):"zeroorone"===f?(a.type="zeroOrOne",u(a,"match")):"zeroormore"===f?(a.type="zeroOrMore",u(a,"match")):"oneormore"===f?(a.type="oneOrMore",u(a,"match")):(a.type="sequence",u(a,"match"))):zt&l&&(a.type="repeat",a.repeat=a.match,u(a,"match"))):"either"===p?a.type="alternation":"all"===p?a.type="sequence":"lookahead"===p?a.type="positiveLookahead":"grammar"===p&&(a.type="subgrammar"),"subgrammar"!==a.type||a.tokens||(a.tokens=n)):a.ngram||a["n-gram"]?(a.type="ngram",a.tokens=a.ngram||a["n-gram"],a["n-gram"]?u(a,"n-gram"):u(a,"ngram")):a.sequence||a.all?(a.type="sequence",a.tokens=a.sequence||a.all,a.all?u(a,"all"):u(a,"sequence")):a.alternation||a.either?(a.type="alternation",a.tokens=a.alternation||a.either,a.either?u(a,"either"):u(a,"alternation")):a.zeroOrOne?(a.type="zeroOrOne",a.tokens=a.zeroOrOne,u(a,"zeroOrOne")):a.zeroOrMore?(a.type="zeroOrMore",a.tokens=a.zeroOrMore,u(a,"zeroOrMore")):a.oneOrMore?(a.type="oneOrMore",a.tokens=a.oneOrMore,u(a,"oneOrMore")):a.positiveLookahead||a.lookahead?(a.type="positiveLookahead",a.tokens=a.positiveLookahead||a.lookahead,a.lookahead?u(a,"lookahead"):u(a,"positiveLookahead")):a.negativeLookahead?(a.type="negativeLookahead",a.tokens=a.negativeLookahead,u(a,"negativeLookahead")):(a.subgrammar||a.grammar)&&(a.type="subgrammar",a.tokens=a.subgrammar||a.grammar,a.subgrammar?u(a,"subgrammar"):u(a,"grammar")));return t}function q(t,n,r){if(r=r||{},n=n||[],!t||!t.length)return n;var o,i,a,l,s,c,u;for(o=0,i=t.length;i>o;o++)if(s=t[o])if(He===s.type)if(s.autocompletions)for(a=0,l=s.autocompletions.length;l>a;a++)u=s.autocompletions[a],r[vt]("w_"+u.word)||(n.push(u),r["w_"+u.word]=1);else Ft===s.token.ptype&&Ft&e(s.token.pattern)&&s.token.pattern.length>1&&(r[vt]("w_"+s.token.pattern)||(n.push({word:""+s.token.pattern,meta:s.name,ci:!!s.ci}),r["w_"+s.token.pattern]=1));else if(Ve===s.type)q(s.token,n,r);else if(lt&s.type){a=0,l=s.token.length;do q([c=s.token[a++]],n,r);while(l>a&&(Je&c.type&&1>c.min||Ne===c.type))}else Je&s.type&&q([s.token[0]],n,r);return n}function S(t,n,r,o){for(var i;Ft&e(i=n[t]||r[t]);)t=i;return o?t:n[t]||r[t]||t}function E(e,t){return e.length>1?r(t?function(t,n){var r=n[n.length-1],o=e[t];r===o||n.push(o)}:function(t,n){var r=n[n.length-1],o=e[t];an.test(o)&&an.test(r)&&r===o||n.push(o)},1,e.length-1,[e[0]]):e}function L(n,r,i){var a,l,s,c,u,p,f,m,h,$,v,y,x,b,w,_=!1;if(w=n.modifier?n.modifier:null,m=new String(Vt(n)),m.pos=0,1===m.length)y=""+n,r[y]||i[y]||(r[y]={type:"simple",tokens:n}),n=y;else{for(a=[],l=[],s="",x=[];m.pos<m.length;)if(h=m[qt](m.pos++),nn.test(h))if(s.length&&(_?(l.length&&(v=l[l.length-1],y=v+"."+s,p=r[y]||i[y],p||(f=S(v,r,i),i[y]=Ft&e(f)?new String(f):o(f),i[y].modifier=s),l[l.length-1]=y),_=!1):"0"===s?(r[dt]||(r[dt]={type:"simple",tokens:0}),l.push(dt)):"^^"===s?(r[ut]||(r[ut]={type:"simple",tokens:Pe}),l.push(ut)):"^^1"===s?(r[pt]||(r[pt]={type:"simple",tokens:Ue}),l.push(pt)):"^"===s?(r[ft]||(r[ft]={type:"simple",tokens:We}),l.push(ft)):"$"===s?(r[mt]||(r[mt]={type:"simple",tokens:Be}),l.push(mt)):(r[s]||i[s]||(r[s]={type:"simple",tokens:s}),l.push(s)),s=""),"."===h)l.length&&m.pos<m.length&&!nn.test(m[qt](m.pos))?_=!0:s+=h;else if('"'===h||"'"===h)c=k(m,h,"\\",!0),c.length?(y=""+c,r[y]||(r[y]={type:"simple",tokens:c}),l.push(y)):(r[gt]||(r[gt]={type:"simple",tokens:""}),l.push(gt));else if("["===h)c=k(m,"]","\\",!0),y="["+c+"]",r[y]||(r[y]={type:"simple",tokens:g("^(["+("^"===c[qt](0)?"^"+d(c.slice(1)):d(c))+"])")}),l.push(y);else{if("]"===h){s+=h;continue}if("/"===h)c=k(m,h,"\\",!1),$="",c.length&&(m.pos<m.length&&"i"===m[qt](m.pos)&&(m.pos++,$="i"),y="/"+c+"/"+$,r[y]||(r[y]={type:"simple",tokens:g("^("+c+")",{l:0,x:0,i:"i"===$})}),l.push(y));else if("*"===h||"+"===h||"?"===h)l.length?(v=l[l.length-1],y=""+v+h,i[y]||(i[y]={type:"*"===h?"zeroOrMore":"+"===h?"oneOrMore":"zeroOrOne",tokens:[v]}),l[l.length-1]=y):s+=h;else if("{"===h)l.length?(u=k(m,"}",!1),u=t(u.split(","),Vt),u[0].length?u[0]=parseInt(u[0],10)||0:u[0]=0,0>u[0]&&(u[0]=0),2>u.length?u.push(u[0]):u[1].length?u[1]=parseInt(u[1],10)||St:u[1]=St,0>u[1]&&(u[1]=0),v=l[l.length-1],y=""+v+["{",u[0],",",isFinite(u[1])?u[1]:"","}"].join(""),i[y]||(i[y]={type:"repeat",repeat:[u[0],u[1]],tokens:[v]}),l[l.length-1]=y):s+=h;else{if("}"===h){s+=h;continue}"&"===h||"!"===h?l.length?(v=l[l.length-1],y=""+v+h,i[y]||(i[y]={type:"!"===h?"negativeLookahead":"positiveLookahead",tokens:[v]}),l[l.length-1]=y):s+=h:"|"===h?(_=!1,l=E(l),l.length>1?(y=""+l.join(" "),i[y]||(i[y]={type:"sequence",tokens:l}),a.push(y)):l.length?a.push(l[0]):s+=h,l=[]):"("===h?(x.push([l,a,s]),l=[],a=[],s=""):")"===h&&(l=E(l),l.length>1?(y=""+l.join(" "),i[y]||(i[y]={type:"sequence",tokens:l}),a.push(y)):l.length&&a.push(l[0]),l=[],a=E(a,1),a.length>1?(y=""+a.join(" | "),i[y]||(i[y]={type:"alternation",tokens:a})):a.length&&(y=a[0]),a=[],b=x.pop(),l=b[0],a=b[1],s=b[2],v=y,y="("+v+")",i[y]||(i[y]=o(S(v,r,i))),l.push(y))}}else s+=h;s.length&&(_?(l.length&&(v=l[l.length-1],y=v+"."+s,p=r[y]||i[y],p||(f=S(v,r,i),i[y]=Ft&e(f)?new String(f):o(f),i[y].modifier=s),l[l.length-1]=y),_=!1):"0"===s?(r[dt]||(r[dt]={type:"simple",tokens:0}),l.push(dt)):"^^"===s?(r[ut]||(r[ut]={type:"simple",tokens:Pe}),l.push(ut)):"^^1"===s?(r[pt]||(r[pt]={type:"simple",tokens:Ue}),l.push(pt)):"^"===s?(r[ft]||(r[ft]={type:"simple",tokens:We}),l.push(ft)):"$"===s?(r[mt]||(r[mt]={type:"simple",tokens:Be}),l.push(mt)):(r[s]||i[s]||(r[s]={type:"simple",tokens:s}),l.push(s))),s="",l=E(l),l.length>1?(y=""+l.join(" "),i[y]||(i[y]={type:"sequence",tokens:l}),a.push(y)):l.length&&a.push(l[0]),l=[],a=E(a,1),a.length>1?(y=""+a.join(" | "),i[y]||(i[y]={type:"alternation",tokens:a}),n=y):a.length&&(n=a[0]),a=[]}return w&&(r[n]||i[n])&&((r[n]||i[n]).modifier=w),n}function D(o,i,a,c,u,p,f,m,h,d,g){var k,$,v,y,x,O,q,E=null,T=null,j=null;if(Pe===o||Ue===o||We===o||Be===o)return new I(o,Pe===o?ut:Ue===o?$T_FBNL$:We===o?ft:mt,o,T);if(!1===o||0===o)return new I(Ge,dt,0,T);if(""===o)return new I(Ye,gt,"",T);if(null===o)return new I(He,ht,Dt,T,j);if(zt&e(o)&&(v=o,o="NGRAM_"+v.join("_"),c[o]||(c[o]={type:"ngram",tokens:v})),o=""+o,m[o])return m[o];if(x=S(o,a,c),Ft&e(x)&&(x=L(x,a,c),x=a[x]||c[x]||null),!x)return null;if(k=x.type?ct[x.type[Ot]().replace(Xt,"")]||He:He,T=x.msg||null,j=x.modifier||null,$=x.tokens,He&k){if(Pe===$||Ue===$||We===$||Be===$||!1===$||0===$)return E=new I($||Ge,o,$||0,T),m[o]=E,E;if(""===$)return E=new I(Ye,o,"",T),m[o]=E,E;if(null===$)return E=new I(He,o,Dt,T,j),m[o]=E,E;if(!$)return null}if(Ne&k)x[vt]("action")?"nop"===x.action[0]?x.action[0]=be:"error"===x.action[0]?x.action[0]=we:"context-start"===x.action[0]?x.action[0]=Ee:"context-end"===x.action[0]?x.action[0]=Le:"hypercontext-start"===x.action[0]?x.action[0]=De:"hypercontext-end"===x.action[0]?x.action[0]=Te:"push"===x.action[0]?x.action[0]=je:"pop"===x.action[0]?x.action[0]=Re:"define"===x.action[0]?x.action[0]=_e:"undefine"===x.action[0]?x.action[0]=Me:"defined"===x.action[0]?x.action[0]=Oe:"notdefined"===x.action[0]?x.action[0]=qe:"unique"===x.action[0]?x.action[0]=Se:"indent"===x.action[0]?x.action[0]=Ce:"outdent"===x.action[0]&&(x.action[0]=Fe):x[vt]("nop")?x.action=[be,x.nop,!!x["in-context"]]:x[vt]("error")?x.action=[we,x.error,!!x["in-context"]]:x[vt]("context")?x.action=[x.context?Ee:Le,x.context,!!x["in-context"],!!x["in-hypercontext"]]:x[vt]("hypercontext")?x.action=[x.hypercontext?De:Te,x.context,!!x["in-context"],!!x["in-hypercontext"]]:x[vt]("context-start")?x.action=[Ee,x["context-start"],!!x["in-context"],!!x["in-hypercontext"]]:x[vt]("context-end")?x.action=[Le,x["context-end"],!!x["in-context"],!!x["in-hypercontext"]]:x[vt]("hypercontext-start")?x.action=[De,x["hypcontext-start"],!!x["in-context"],!!x["in-hypercontext"]]:x[vt]("hypercontext-end")?x.action=[Te,x["hypcontext-end"],!!x["in-context"],!!x["in-hypercontext"]]:x[vt]("push")?x.action=[je,x.push,!!x["in-context"],!!x["in-hypercontext"]]:x[vt]("pop")?x.action=[Re,x.pop,!!x["in-context"],!!x["in-hypercontext"]]:x[vt]("define")?x.action=[_e,Ft&e(x.define)?["*",x.define]:x.define,!!x["in-context"],!!x["in-hypercontext"]]:x[vt]("undefine")?x.action=[Me,Ft&e(x.undefine)?["*",x.undefine]:x.undefine,!!x["in-context"],!!x["in-hypercontext"]]:x[vt]("defined")?x.action=[Oe,Ft&e(x.defined)?["*",x.defined]:x.defined,!!x["in-context"],!!x["in-hypercontext"]]:x[vt]("notdefined")?x.action=[qe,Ft&e(x.notdefined)?["*",x.notdefined]:x.notdefined,!!x["in-context"],!!x["in-hypercontext"]]:x[vt]("unique")?x.action=[Se,Ft&e(x.unique)?["*",x.unique]:x.unique,!!x["in-context"],!!x["in-hypercontext"]]:x[vt]("indent")?x.action=[Ce,x.indent,!!x["in-context"],!!x["in-hypercontext"]]:x[vt]("outdent")&&(x.action=[Fe,x.outdent,!!x["in-context"],!!x["in-hypercontext"]]),!1===x.msg&&(T=!1),x.nop&&(x.action[0]=be),E=new I(Ne,o,x.action.slice(),T,j),E.ci=!!x.caseInsensitive||x.ci,m[o]=E;else if($=l($),He&k){q=x.autocomplete?M(x,Gt&e(x.autocomplete)?l(x.autocomplete):$,o,g):null;var R={};if(O="undefined"!=typeof x.combine?x.combine:!!(zt&e(x.tokens)),E=new I(He,o,b(o,$.slice(),i,O,!(!x.caseInsensitive&&!x.ci),p,f,R),T,j,null,q),R.keywords&&(E.keywords=R.keywords.join("|")),m[o]=E,null!=x.except){var C,F,A=l(x.except),z=A.length,P=[];for(C=0;z>C;C++)A[C]&&(F=D(A[C],i,a,c,u,p,f,m,h,d,g),F&&P.push(F));P.length&&(E.except=P)}}else Ke&k?(Qe===k&&_(x,d),E=new I(k,o,w(o,$.slice(),i,p,f),T),E.empty=x[vt]("empty")?!!x.empty:!0,E.mline=x[vt]("multiline")?!!x.multiline:!0,E.esc=x[vt]("escape")?x.escape:!1,E.inter=!!u[o+".inside"],Qe===k&&x.interleave&&h.push(N(E)),j&&(E.modifier=j),m[o]=E):st&k&&(at===k?m[o]=new I(at,o,$,T,j):it===k?(y=s($),E=t(y,function(e,t){return new I(it,o+"_NGRAM_"+t,null,T,j)}),m[o]=E,r(function(e){E[e].token=l(n(y[e],function(e,t){return e.concat(D(t,i,a,c,u,p,f,m,h,d,g))},[]))},0,y.length-1)):(rt===k||ot===k?E=new I(k,o,null,T,j):Je&k&&zt&e(x.repeat)?(E=new I(Je,o,null,T,j),E.min=x.repeat[0],E.max=x.repeat[1]):Xe===k?(E=new I(Xe,o,null,T,j),E.min=0,E.max=1):et===k?(E=new I(et,o,null,T,j),E.min=0,E.max=St):tt===k?(E=new I(tt,o,null,T,j),E.min=1,E.max=St):E=Ve===k?new I(Ve,o,null,T,j):new I(Ze,o,null,T,j),m[o]=E,E.token=l(n($,function(e,t){return e.concat(D(t,i,a,c,u,p,f,m,h,d,g))},[]))));return m[o]}function T(e,t){var n,r,o=e.Style,i=e.Lex,a=e.Syntax,l=[],s={};for(n in o)o[vt](n)&&(r=i[n]||a[n],!r||"block"!=r.type&&"comment"!==r.type||(t&&(o[n+".inside"]||o[n])?(n=o[n+".inside"]||o[n],s[vt](n)||(l.push(n),s[n]=1)):t||s[vt](n)||(l.push(n),s[n]=1)));return l}function j(t){var n={};return t.Lex=t.Lex||{},t.Syntax=t.Syntax||{},t=O(t),t.Parser&&t.Parser.length&&r(function o(i,a){var l,s,c,u=a[i];n[u]||(zt&e(u)&&(l=u,u="NGRAM_"+l.join("_"),t.Syntax[u]||(t.Syntax[u]={type:"ngram",tokens:l})),s=S(u,t.Lex,t.Syntax),Ft&e(s)&&(s=L(s,t.Lex,t.Syntax),s=t.Lex[s]||t.Syntax[s]||null),s&&(n[u]=s,c=s.type?ct[s.type[Ot]().replace(Xt,"")]||He:He,st&c&&r(o,0,s.tokens.length-1,s.tokens)))},0,t.Parser.length-1,t.Parser),t}function R(t){var r,i,a,l,s,c,u,p,f,m,h,d,g,k;return t.__parsed?t:(r=t.RegExpID||null,a=t.Extra?o(t.Extra):{},l=t.Style?o(t.Style):{},s=null,c=null,u=t.Lex?o(t.Lex):{},p=t.Syntax?o(t.Syntax):{},f={},m={},h={},g={},k={},d=[],i=t.Parser?o(t.Parser):[],t=O({Style:l,Fold:s,Match:c,Lex:u,Syntax:p,$parser:null,$interleaved:null,$comments:null,$autocomplete:null,$extra:a,__parsed:0}),t.$parser=n(i,function(t,n){var o=D(n,r,u,p,l,f,m,h,d,g,k)||null;return o&&(zt&e(o)?t=t.concat(o):t.push(o)),t},[]),t.$interleaved=d&&d.length?d:null,t.$comments=g,t.$autocomplete=k&&k.autocomplete&&k.autocomplete.length?k.autocomplete:null,t.__parsed=1,t)}function C(t,n,r,o,i){var a,l,s=this;a=s.type=t,s.name=n,s.pattern=r,l=s.ptype=o||Ft,s.key=i||0,Ie===a?s.key=!1!==i:ze===a?s.pattern[0]=new C(Ie,n+"_Start",r[0],null,!1):Dt===l?s.pattern=null:Ut===l&&(s.pattern=Ut&e(r)?[r,0]:[r[0],r[1]||0])}function F(t,n,r,o){var i,a,l,s,c,u,p,f,m,h,d,g=t,k=g.type,y=g.pattern,x=g.key;if(ze===k){if(i=g.name,l=y[0],s=y[1],u=F(l,n,r,o))return c=s[u[0]],f=e(c),m=l.pattern[u[0]].ptype,Ut===m&&Wt&f&&(c.regex_pattern?(p=$(c,u[1]),c=new C(Ae,i+"_End",v(p,c.regex_pattern,{}),Ut)):(p=Tt&f?u[1][c+1]:$(c,u[1]),c=new C(Ae,i+"_End",p,p.length>1?Ft:At))),c}else if(Ie===k){for(h=0,d=y.length;d>h;h++)if(p=F(y[h],n,r,o))return x?[h,p[1]]:p}else{if(a=g.ptype,Dt===a)return!1!==r&&n.end(),[x,""];if(Ut===a){if(p=y[0].xflags.l?n.match(y[0]):n.slice(n.pos).match(y[0]),p&&0===p.index)return!1!==r&&n.mov(p[y[1]||0].length),[x,y[1]>0?p[y[1]]:p]}else if(It===a){if(!0===o){p=-1;var b,w;for(d=y.length-1;d>=0;d--)b=n.indexOf(y[qt](d),n.pos),b>-1&&(-1===p||p>b)&&(p=b,w=y[qt](d));if(p>-1)return!1!==r&&(n.pos=p+1),[x,w]}else if(p=n[qt](n.pos)||null,p&&-1<y.indexOf(p))return!1!==r&&n.mov(1),[x,p]}else if(At===a){if(!0===o){if(p=n.indexOf(y,n.pos),p>-1)return!1!==r&&(n.pos=p+1),[x,y]}else if(p=n[qt](n.pos)||null,y===p)return!1!==r&&n.mov(1),[x,p]}else if(Ft===a)if(d=y.length,!0===o){if(p=n.indexOf(y,n.pos),p>-1)return!1!==r&&(n.pos=p+d),[x,y]}else if(y===n.substr(n.pos,d))return!1!==r&&n.mov(d),[x,y]}return!1}function A(e,t){this.val=e||null,t?this.prev=t:this.prev=null}function I(e,t,n,r,o,i,a,l){var s=this;s.type=e,s.name=t,s.token=n,s.modifier=o||null,s.except=i||null,s.autocompletions=a||null,s.keywords=l||null,s.pos=null,s.msg=!1===r?!1:r||null,s.$msg=null,s.status=0,s.empty=!1,s.ci=!1,s.mline=!0,s.esc=!1,s.inter=!1,s.found=0,s.min=0,s.max=1,s.i0=0,s.$id=null}function z(){var e=this;e.T=0,e.id=null,e.type=null,e.match=null,e.str="",e.pos=null,e.block=null,e.space=null}function N(e,t,n,r){var o=new I(e.type,e.name,e.token,e.msg,e.modifier,e.except,e.autocompletions,e.keywords);return o.empty=e.empty,o.ci=e.ci,o.mline=e.mline,o.esc=e.esc,o.inter=e.inter,o.found=e.found,o.min=e.min,o.max=e.max,o.i0=e.i0,t&&(o.status|=ke),n&&(o.modifier=n),r&&(o.$id=r),o}function P(e){var t=e.name;return e.$msg?e.$msg:e.status&ke?'Token "'+t+'"'+(e.keywords?": "+e.keywords:"")+" Expected":'Syntax Error: "'+t+'"'}function U(e,t,n,r,o,i,a){e.status&de&&e.err&&(e.err[""+t+"_"+n+"_"+r+"_"+o+"_"+(i?i.name:"ERROR")]=[t,n,r,o,a||P(i)])}function B(e,t,n,r){if(r)return e&&e[vt](t)?e[t]:null;for(var o=null,i=null;e;){if(t===e.val[0]&&(i={prev:e.prev,next:o,node:e,val:e.val[1]},!n))return i;o=e,e=e.prev}return i}function W(e,t,n,r){return r?(e[t]=n,e):new A([t,n],e)}function G(e,t,n){if(e.stack===t)t=e.stack=new A(n,e.stack);else{for(var r=e.stack;r&&r.prev!==t;)r=r.prev;t=new A(n,t),r&&(r.prev=t)}return t}function Y(e,t){if(null==e)return null;if(t){for(var n=new A(e.val),r=n,o=e;o.prev;)r.prev=new A(o.prev.val),o=o.prev,r=r.prev;return n}return e}function H(e,t,n,r){var o,i,a,l,s,c=1/0,u=null,p=1/0;if(i=t.pos,t.spc(),a=t.pos,o=e.stack,t.pos<t.length){for(s=0;o&&(l=o.val,l.$id===r.$id);){for(;!(Ne===l.type||K(l,t,e,n)||(t.pos=l.pos>t.pos?l.pos:t.pos+1,e.stack=o,t.pos>=t.length)););e.stack=o,t.pos<t.length&&c>t.pos?(c=t.pos,u=o,p=s):c===t.pos&&p>s&&(c=t.pos,u=o,p=s),t.pos=a,o=o.prev,s++}c<t.length?(t.pos=c,e.stack=u):(t.end(),e.stack=null)}return a>=i&&t.pos===a}function K(e,t,n,r){if(!e)return!1;var o=e.type,i=st&o?J:Ke&o?Z:Ne&o?Q:V;return i(e,t,n,r)}function Q(t,n,r,o){var i,a,l,s,c,u,p,f,m,h,d,g,k,v,y,x,b,w=t,_=w.token||null,M=w.ci,O=w.name,q=!(r.status&de);if(w.status=0,w.$msg=null,!_||!o||!o.pos)return!0;if(b=!!(Ke&o.T),be===_[0]||b&&!o.block)return!0;if(i=_[0],a=_[1],k=_[2],v=_[3],c=w.msg,b?(x=o.block.match||o.block.str,m=o.block.pos[0][0],h=o.block.pos[0][1],d=o.block.pos[0][2],g=o.block.pos[0][3]):(x=o.match||o.str,m=o.pos[0],h=o.pos[1],d=o.pos[2],g=o.pos[3]),Le===i)r.ctx=r.ctx?r.ctx.prev:null;else if(Ee===i)r.ctx=new A({symb:null,queu:null},r.ctx);else if(Te===i)r.hctx=r.hctx?r.hctx.prev:null;else if(De===i)r.hctx=new A({symb:null,queu:null},r.hctx);else if(_e===i)p=v&&r.hctx?r.hctx.val.symb:k&&r.ctx?r.ctx.val.symb:r.symb,l=a[1],s=a[0],l=$(l,x,!0),M&&(l=l[Ot]()),s+="::"+l,f=B(p,s),(!f||f.val[0]>m||f.val[0]===m&&f.val[1]>h||f.val[0]===m&&f.val[1]===h&&(f.val[2]>d||f.val[3]>g))&&(f?(f.val[0]=m,f.val[1]=h,f.val[2]=d,f.val[3]=g):v&&r.hctx?r.hctx.val.symb=W(r.hctx.val.symb,s,[m,h,d,g]):k&&r.ctx?r.ctx.val.symb=W(r.ctx.val.symb,s,[m,h,d,g]):r.symb=W(r.symb,s,[m,h,d,g]));else if(Me===i){if(p=v&&r.hctx?r.hctx.val.symb:k&&r.ctx?r.ctx.val.symb:r.symb,!p)return!0;l=a[1],s=a[0],l=$(l,x,!0),M&&(l=l[Ot]()),s+="::"+l,f=B(p,s),f&&(f.val[0]<m||f.val[0]===m&&f.val[1]<=h)&&(f.next?f.next.prev=f.prev:v&&r.hctx?r.hctx.val.symb=r.hctx.val.symb.prev:k&&r.ctx?r.ctx.val.symb=r.ctx.val.symb.prev:r.symb=r.symb.prev)}else if(Oe===i){if(p=v&&r.hctx?r.hctx.val.symb:k&&r.ctx?r.ctx.val.symb:r.symb,l=a[1],s=a[0],l=$(l,x,!0),M&&(l=l[Ot]()),s+="::"+l,f=B(p,s),!f||f.val[0]>m||f.val[0]===m&&f.val[1]>h||f.val[0]===m&&f.val[1]===h&&(f.val[2]>d||f.val[3]>g))return!1!==c&&(w.$msg=c?$(c,l,!0):'Undefined "'+l+'"',y=P(w),U(r,m,h,d,g,w,y),w.status|=$e),f&&(f.next?f.next.prev=f.prev:v&&r.hctx?r.hctx.val.symb=r.hctx.val.symb.prev:k&&r.ctx?r.ctx.val.symb=r.ctx.val.symb.prev:r.symb=r.symb.prev),!1}else if(qe===i){if(p=v&&r.hctx?r.hctx.val.symb:k&&r.ctx?r.ctx.val.symb:r.symb,!p)return!0;if(l=a[1],s=a[0],l=$(l,x,!0),M&&(l=l[Ot]()),s+="::"+l,f=B(p,s,1),f&&(f.val[0]<m||f.val[0]===m&&f.val[1]<=h||f.val[0]===m&&f.val[1]===h&&f.val[2]<=d&&f.val[3]<=g))return!1!==c&&(w.$msg=c?$(c,l,!0):'Defined "'+l+'"',y=P(w),U(r,f.val[0],f.val[1],f.val[2],f.val[3],w,y),U(r,m,h,d,g,w,y),w.status|=$e),!1}if(q)return!0;if(we===i)return!c&&Ft&e(a)&&(c=a),w.$msg=c?$(c,x,!0):'Error "'+O+'"',U(r,m,h,d,g,w,P(w)),w.status|=$e,!1;if(Se===i){if(v){if(!r.hctx)return!0;p=r.hctx.val.symb}else if(k){if(!r.ctx)return!0;p=r.ctx.val.symb}else p=r.symb;if(l=a[1],s=a[0],l=$(l,x,!0),M&&(l=l[Ot]()),s+="::"+l,f=B(p,s))return!1!==c&&(w.$msg=c?$(c,l,!0):'Duplicate "'+l+'"',y=P(w),U(r,f.val[0],f.val[1],f.val[2],f.val[3],w,y),U(r,m,h,d,g,w,y),w.status|=$e),!1;v?r.hctx.val.symb=W(r.hctx.val.symb,s,[m,h,d,g]):k?r.ctx.val.symb=W(r.ctx.val.symb,s,[m,h,d,g]):r.symb=W(r.symb,s,[m,h,d,g])}else if(Re===i){if(v){if(!r.hctx)return!0;u=r.hctx.val.queu}else if(k){if(!r.ctx)return!0;u=r.ctx.val.queu}else u=r.queu;if(a){if(a=$(a,x),M&&(a=a[Ot]()),!u||a!==u.val[0])return!1!==c&&(u?(w.$msg=c?$(c,[u.val[0],a],!0):'Mismatched "'+u.val[0]+'","'+a+'"',y=P(w),U(r,u.val[1],u.val[2],u.val[3],u.val[4],w,y),U(r,m,h,d,g,w,y),u=u.prev):(w.$msg=c?$(c,["",a],!0):'Missing matching "'+a+'"',y=P(w),U(r,m,h,d,g,w,y)),w.status|=$e),v?r.hctx&&(r.hctx.val.queu=u):k?r.ctx&&(r.ctx.val.queu=u):r.queu=u,!1;u=u?u.prev:null}else u=u?u.prev:null;v?r.hctx&&(r.hctx.val.queu=u):k?r.ctx&&(r.ctx.val.queu=u):r.queu=u}else if(je===i&&a){if(v){if(!r.hctx)return!0;u=r.hctx.val.queu}else if(k){if(!r.ctx)return!0;u=r.ctx.val.queu}else u=r.queu;a=$(a,x),M&&(a=a[Ot]()),w.$msg=c?$(c,a,!0):'Missing matching "'+a+'"',u=new A([a,m,h,d,g,P(w)],u),v?r.hctx&&(r.hctx.val.queu=u):k?r.ctx&&(r.ctx.val.queu=u):r.queu=u}return!0}function V(e,t,n,r,o){var i,a,l=e,s=l.token,c=l.modifier,u=l.type,p=l.name,f=l.except,m=n.line,h=t.pos,d=null,g=!1;if(l.status&=ye,l.$msg=o?null:l.msg||null,l.pos=t.pos,f&&!o){a=ee(n,t);for(var k=0,v=f.length;v>k;k++)if(i=f[k],l!==i&&He===i.type&&V(i,t,n,r,1))return l.pos=i.pos,ee(n,t,a),!1}if(Pe===u)g=0===n.line;else if(Ue===u)g=n.bline+1===n.line;else if(We===u)g=t.sol();else if(Be===u)t.spc(),t.eol()?g=p:(l.pos=t.pos,t.bck(h));else if(Ge===u)l.status=0,g=!0;else if(Ye===u){if(null==r.space||t.eol()?t.spc()&&!t.eol()?(l.pos=t.pos,t.bck(h),l.status&ke&&(l.status|=$e)):g=!0:l.status&ke&&(l.status|=$e),l.status&=ve,!0===g)return g}else Dt===s?(t.end(),g=c||p):(d=F(s,t))&&(d=d[1],g=c||p);return o?g:(!1!==g&&(r.T=u,r.id=p,r.type=g,r.str=t.sel(h,t.pos),r.match=d,r.pos=[m,h,m,t.pos]),!g&&l.status&&l.$msg&&(l.$msg=$(l.$msg,p,!0)),g)}function Z(e,t,n,r){var o,i,a,l,s,c,u,p,f,m,h,d,g,k,v,y,x,b,w,_,M,O,q=e,S=q.name,E=q.type,L=q.modifier,D=q.token,T=q.mline,j=q.inter,R=j?S+".inside":S,C=q.esc,A=!!C,I="",z="",P="",U="",B=q.$id||S,W=n.outer,Y=W&&W[2],H=W&&W[1];if(q.status&=ye,q.$msg=q.msg||null,q.pos=t.pos,_=n.line,M=t.pos,Qe===E&&(q.status&=ve),v=q.status&ke,a=0,l=0,n.block&&n.block.name===S?(l=1,a=1,k=R,o=n.block.end,p=n.block.sp,m=n.block.ip,f=n.block.ep,I=n.block.s,z=n.block.i):!n.block&&(o=F(D,t))&&(l=1,k=S,x=t.pos,p=[_,M],m=[[_,x],[_,x]],f=[_,x],I=t.sel(M,x),z="",U="",n.block={name:S,end:o,sp:p,ip:m,ep:f,s:I,i:z,e:U}),l){if(w=n.stack,i=Dt===o.ptype,y=i||q.empty,j){if(i&&a&&t.sol())return q.status&=ve,n.block=null,!1;if(!a)return x=t.pos,r.T=E,r.id=S,r.type=L||k,r.str=t.sel(M,x),r.match=null,r.pos=[_,M,_,x],G(n,w,N(q,v,0,B)),L||k}if(x=t.pos,s=H?i&&t.eol():F(o,t),u=T,c=0,s)k=i?R:S,U=t.sel(x,t.pos);else if(b=t.pos,d=!1,H||A||It!==o.ptype&&At!==o.ptype&&Ft!==o.ptype){for(;!t.eol();){if(H){if(K(H,t,Y,r)){if(t.pos>b){i&&(s=1);break}return!0}if(i){g=t.nxt(1),P+=g;continue}}if(x=t.pos,!d&&F(o,t)){j&&t.pos>x&&x>b?(k=R,t.bck(x),
c=1):(k=S,s=1),U=t.sel(x,t.pos);break}g=t.nxt(1),P+=g,d=A&&!d&&C===g,x=t.pos}i&&t.eol()&&(s=1)}else(O=F(o,t,!0,!0))?j&&t.pos>x+O[1].length?(k=R,t.mov(-O[1].length),c=1,P=t.sel(x,t.pos)):(k=S,s=1,P=t.sel(x,t.pos-O[1].length),U=O[1]):(t.end(),k=R,c=1,P=t.sel(x,t.pos));return u=T||A&&d,z+=P,m[1]=[_,x],f=[_,t.pos],s&&!y&&m[0][0]===m[1][0]&&m[0][1]===m[1][1]?(n.block=null,!1):(s||!u&&!c?n.block=null:(n.block.ip=m,n.block.ep=f,n.block.i=z,n.block.e=U,G(n,w,N(q,v,0,B))),r.T=E,r.id=S,r.type=L||k,r.str=t.sel(M,t.pos),r.match=null,r.pos=[_,M,f[0],f[1]],q.pos=t.pos,n.block||(h=I+z+U,r.block={str:h,match:[h,z,I,U],part:[h,I,z,U],pos:[[p[0],p[1],f[0],f[1]],[p[0],p[1],m[0][0],m[0][1]],[m[0][0],m[0][1],m[1][0],m[1][1]],[m[1][0],m[1][1],f[0],f[1]]]}),L||k)}return q.status&&q.$msg&&(q.$msg=$(q.$msg,S,!0)),!1}function J(e,t,n,r){var o,i,a,l,s,c,u,f,m,h,d,g,k,$,v,y=e,x=y.type,b=(y.name,y.token),w=b.length,_=y.modifier;if(y.status&=ye,y.$msg=y.msg||null,f=t.pos,m=n.stack,y.pos=t.pos,c=0,u=0,at===x){y.status&=ye;var M=new String(b[0]),O=n.stack?n.stack.val:null;return M.subgrammar=1,M.next=O?new I(rt,O.name,[O]):null,M.required=O?O.status&ke:0,M}if(Ve===x){for(k=p(),y.status|=ke,g=[],v=ee(n,t),d=0,h=d;w>h;h++){if(o=N(b[h],1,_,k),i=K(o,t,n,r),y.pos=o.pos,o.status&ke&&(c++,g.push(P(o))),!1!==i)return i;o.status&$e&&(u++,ee(n,t,v))}return c>0?y.status|=ke:y.status&=ve,w===u&&c>0?y.status|=$e:y.status&=ye,y.status&&!y.$msg&&g.length&&(y.$msg=g.join(" | ")),!1}if(lt&x){$=!!(x&Ze),k=y.$id||p(),$?y.status|=ke:y.status&=ve,v=ee(n,t),d=0;do o=N(b[d++],$,_,k),i=K(o,t,n,r);while(w>d&&(!0===i&&nt&o.type||!1===i&&!(o.status&ke)));if(y.pos=o.pos,!1!==i){if(!0!==i||Ge!==o.type)for(h=w-1;h>=d;h--)m=G(n,m,N(b[h],1,_,k));return i.subgrammar&&w>d&&(i.next=new I(rt,b[d].name,[b[d]]),i.required=b[d].status&ke),i}return o.status&$e?($?y.status|=$e:y.status&=ye,ee(n,t,v)):$&&o.status&ke&&(y.status|=$e),y.status&&!y.$msg&&(y.$msg=P(o)),!1}if(nt&x)return at&b[0].type?!0:(v=ee(n,t,null,!1),i=K(N(b[0],0),t,n,r),ee(n,t,v),ot===x?!1===i:!1!==i);for(k=y.$id||p(),a=y.found,l=y.min,s=y.max,y.status=0,g=[],v=ee(n,t),h=0;w>h;h++){if(o=N(b[h],1,_,k),i=K(o,t,n,r),y.pos=o.pos,!1!==i){if(++a,s>=a)return y.found=a,G(n,m,N(y,0,0,p())),y.found=0,i;break}o.status&ke&&(c++,g.push(P(o))),o.status&$e&&ee(n,t,v)}return l>a&&(y.status|=ke),(a>s||l>a&&c>0)&&(y.status|=$e),y.status&&!y.$msg&&g.length&&(y.$msg=g.join(" | ")),!1}function X(e,t){var n=this;n.id=e?f("state"):"state",t instanceof X?(n.line=t.line,n.bline=t.bline,n.status=t.status,n.stack=Y(t.stack,!1),n.token=t.token,n.token2=t.token2,n.block=t.block,n.outer=t.outer?[t.outer[0],t.outer[1],new X(e,t.outer[2])]:null,n.queu=t.queu||null,n.symb=t.symb||null,n.ctx=t.ctx||null,n.hctx=t.hctx||null,n.err=t.err||null,n.$eol$=t.$eol$,n.$blank$=t.$blank$):(n.line=-1,n.bline=-1,n.status=t||0,n.stack=null,n.token=null,n.token2=null,n.block=null,n.outer=null,n.queu=null,n.symb=null,n.ctx=null,n.hctx=null,n.err=n.status&de?{}:null,n.$eol$=!0,n.$blank$=!0)}function ee(e,t,n,r){return n?(e.status=n[0],e.block=n[1],e.outer=n[2],e.stack=n[3],t&&t.pos>n[4]&&t.bck(n[4]),void 0):(n=[e.status,e.block,e.outer,e.stack,t?t.pos:1/0],!1===r&&(e.status=0),n)}function te(e){e.id=null,e.line=null,e.bline=null,e.status=null,e.stack=null,e.token=null,e.token2=null,e.block=null,e.outer=null,e.queu=null,e.symb=null,e.ctx=null,e.hctx=null,e.err=null}function ne(e,t,n){var r=new String(e);return r.start=t||0,r.pos=n||0,r.sol=function(){return 0===r.pos},r.eol=function(){return r.pos>=r.length},r.end=function(){return r.pos=r.length,r},r.mov=function(e){return r.pos=0>e?_t(0,r.pos+e):Mt(r.length,r.pos+e),r},r.bck=function(e){return r.pos=_t(0,e),r},r.sft=function(){return r.start=r.pos,r},r.nxt=function(e,t){var n,o,i="";if(!0===e){for(t=t||ne.$NONSPC$;r.pos<r.length&&t.test(n=r[qt](r.pos++));)i+=n;return i.length?i:null}for(e=e||1,o=0;o++<e&&r.pos<r.length;)i+=r[qt](r.pos++);return i},r.cur=function(e){var t=r.slice(r.start,r.pos);return e&&(r.start=r.pos),t},r.sel=function(e,t){return r.slice(e,t)},r.spc=function(e,t){var n;return(n=r.slice(r.pos).match(t||ne.$SPC$))?(!1!==e&&r.mov(n[0].length),n[0]):void 0},r}function re(e,t,n,r,o){var i,a,l;for(null==t&&(t=e.search(ne.$NONSPC$),-1==t&&(t=e.length)),i=r||0,a=o||0;;){if(l=e.indexOf("	",i),0>l||l>=t)return a+(t-i);a+=l-i,a+=n-a%n,i=l+1}}function oe(n,r){return Gt&e(n)&&(n=g("\\b("+t(l(n).sort(Zt),d).join("|")+")\\b")),!1===r?function(e){return!e||!n.test(e)}:function(e){return!!e&&n.test(e)}}function ie(e,t,n,r,o,i){for(;;){n.lastIndex=e.col;var a=n.exec(e.text);if(!a){if(e.next()){e.text=e.line(e.row);continue}return}{if(t(e.token(e.row,a.index+1)))return e.col=a.index+a[0].length,a;e.col=a.index+1}}}function ae(e,t,n,r,o,i){for(var a,l,s;;){if(a=e.text.indexOf(o,e.col),-1===a){if(e.next()){e.text=e.line(e.row);continue}return}if(t(e.token(e.row,a+1)))return l=e.text.lastIndexOf(i,a),s=l>-1&&!ne.$NOTEMPTY$.test(e.text.slice(l+1,a)),e.col=a+1,s?"autoclosed":"regular";e.col=a+1}}function le(e,t,n,r,o,i,a,l,s,c){if(-1===e){var u,p,f,m,h,d,g,k,$=1,v=t.first(),y=(i.length,a.length,!1===o);e:for(u=n;u>=v;--u)for(p=t.line(u),f=p.length,m=u===n?r-1:f;;){if(0>m)break;if(h=p.lastIndexOf(i,m),d=p.lastIndexOf(a,m),0>h&&0>d)break;if(m=_t(h,d),y||c||t.token(u,m+1)==o)if(m===d)++$;else if(0===--$){g=u,k=m;break e}--m}return null==g||s&&g===n&&k===r?!1:[g,k,n,r]}var u,p,f,m,h,d,x,b,$=1,w=t.last(),y=(i.length,a.length,!1===o);e:for(u=n;w>=u;++u)for(p=t.line(u),f=p.length,m=u===n?r:0;;){if(m>=f)break;if(h=p.indexOf(i,m),d=p.indexOf(a,m),0>h&&0>d)break;if(0>h&&(h=f),0>d&&(d=f),m=Mt(h,d),y||c||t.token(u,m+1)==o)if(m===h)++$;else if(0===--$){x=u,b=m;break e}++m}return null==x||s&&n===x&&b===r?!1:[n,r,x,b]}function se(e){var t=e?e.data:null;t&&t.load&&t.ace_worker_base&&(importScripts(t.ace_worker_base),ace.define("ace/grammar_worker",["require","exports","module","ace/worker/mirror"],function(e,t,n){var r=e("./worker/mirror").Mirror;t.AceGrammarWorker=h(r,{constructor:function(e){var t=this;r.call(t,e),t.setTimeout(300)},$parser:null,init_parser:function(e,t){var n=this,r=Object.keys(e.subgrammars);if(n.$parser=new kn(R(e.grammar),null,!1),r&&r.length)for(var o=0,i=r.length;i>o;o++)n.$parser.subparser(r[o],new kn(R(e.subgrammars[r[o]]),null,!1));n.sender.callback(1,t)},onUpdate:function(){var e,t,n,r,o,i=this,a=i.sender,l=i.$parser;if(!l)return void a.emit("ace_grammar_worker_ok",null);if(e=i.doc.getValue(),!e||!e.length)return void a.emit("ace_grammar_worker_ok",null);if(t=l.parse(e,de),!t)return void a.emit("ace_grammar_worker_ok",null);o=[];for(n in t)t[vt](n)&&(r=t[n],o.push({row:r[0],column:r[1],text:r[4]||"Syntax Error",type:"error",raw:r[4]||"Syntax Error",range:[r[0],r[1],r[2],r[3]]}));o.length?a.emit("ace_grammar_worker_error",o):a.emit("ace_grammar_worker_ok",null)}})}))}function ce(e,t){e[t]||(e[t]=[]);var n,r=e[t];if(r&&r.length)for(n=0;n<r.length;n++)e.removeMarker(r[n]);r.length=0}function ue(e,t,n,r){var o,i,a,l=t.length;for(ce(e,n),a=e[n],o=0;l>o;o++)i=t[o],i.range&&(a.push(e.addMarker(new r(i.range[0],i.range[1],i.range[2],i.range[3]),"ace_error-marker","text",0)),u(i,"range"))}function pe(e,t){ce(e,t),e.clearAnnotations()}function fe(e,t,n,r){ue(e,t,n,r),e.setAnnotations(t)}function me(e,t,n){n=n||gn;var r=n.require("ace/range").Range,o=n.require("ace/worker/worker_client").WorkerClient,i=h(o,{constructor:function(e,t,r,o){var i=this,a=n.require,l=n.config;if(i.$sendDeltaQueue=i.$sendDeltaQueue.bind(i),i.changeListener=i.changeListener.bind(i),i.onMessage=i.onMessage.bind(i),a.nameToUrl&&!a.toUrl&&(a.toUrl=a.nameToUrl),!o)if(l.get("packaged")||!a.toUrl)o=o||l.moduleUrl(t,"worker");else{var s=i.$normalizePath;o=o||s(a.toUrl("ace/worker/worker.js",null,"_"));var c={};e.forEach(function(e){c[e]=s(a.toUrl(e,null,"_").replace(/(\.js)?(\?.*)?$/,""))})}try{i.$worker=new Worker(o)}catch(u){if(!(u instanceof window.DOMException))throw u;var p=i.$workerBlob(o),f=window.URL||window.webkitURL,m=f.createObjectURL(p);i.$worker=new Worker(m),f.revokeObjectURL(m)}i.$worker.postMessage({load:!0,ace_worker_base:mn.base+"/"+l.moduleUrl("ace/worker/json")+hn}),i.$worker.postMessage({init:!0,tlns:c,module:t,classname:r}),i.callbackId=1,i.callbacks={},i.$worker.onmessage=i.onMessage}}),a=n.require("ace/mode/folding/fold_mode").FoldMode,l=h(a,{constructor:function(e){var t=this;a.call(t),t.$mode=e,t.$folds={}},getFoldWidget:function(e,t,n){var r,o,i,a,l=this;return l.$mode.supportCodeFolding?(r=l.$folds,(o=l.$mode.folder(e,t,n))?r[o[0]]=r[o[2]]=o:(o=r[n])&&(n===o[0]?(delete r[n],o===r[o[2]]&&delete r[o[2]]):n===o[2]&&(i=o[0],(a=l.$mode.folder(e,t,i))?(r[a[0]]=r[a[2]]=a,o===r[i]&&delete r[i],o===r[n]&&delete r[n]):(o===r[i]&&delete r[i],o===r[n]&&delete r[n]))),o=r[n]?"markbeginend"===t?n===o[2]&&o[0]!==o[2]?"end":"start":n===o[0]?"start":"":""):""},getFoldWidgetRange:function(e,t,n,o){if(this.$mode.supportCodeFolding){var i=this.$folds[n];return i?new r(i[0],i[1],i[2],i[3]):void 0}}}),s=n.require("ace/mode/text").Mode,c=h(s,{constructor:function(e){var n=this;s.call(n),n.$id=f("ace_grammar_mode"),n.$grammar=e,n.$parser=new $n.Parser(R(e),t),n.$parser.Mode=n,n.$tokenizer=n.$parser,n.lineCommentStart=n.$parser.LC,n.blockComment=n.$parser.BC,n.$markers$=n.$id+"$markers$",n.foldType="fold_"+n.$id,n.foldingRules=new l(n),n.matchType="match_"+n.$id,n.matcher.clear=function(e){e.$bracketHighlight&&(e.removeMarker(e.$bracketHighlight),e.$bracketHighlight=null);var t=e[n.matchType];if(e[n.matchType]=null,t&&t.length)for(var r=0,o=t.length;o>r;r++)e.removeMarker(t[r])}},supportGrammarAnnotations:!1,createWorker:function(e){var t=this,n=t.$markers$;if(!t.supportGrammarAnnotations)return pe(e,n),null;var o=new i(["ace"],"ace/grammar_worker","AceGrammarWorker",mn.file+hn);return o.attachToDocument(e.getDocument()),o.call("init_parser",[{grammar:t.$grammar,subgrammars:t.getSubgrammars()}],function(){o.on("ace_grammar_worker_error",function(t){var o=t.data;fe(e,o,n,r)}),o.on("ace_grammar_worker_ok",function(){pe(e,n)})}),o.on("terminate",function(){pe(e,n)}),o},supportAutoCompletion:!0,autocompleter:function u(e,t,r,o){var i=this;return i.supportAutoCompletion?e.parser.autocomplete(e.state,t,r,o,u.options||{},n):[]},getKeywords:function(e){return[]},supportCodeFolding:!0,folder:function(e,t,r){var o=this,i=e.getState(r),a=i&&i.parser||o.$parser,l=a.fold(e,r,n);return l?(l.start=!0,l.end=!1,l):void 0},supportCodeMatching:!0,matcher:function p(e,t){var o=this;return!1===t?(e.$highlightBrackets$&&(e.$highlightBrackets=e.$highlightBrackets$,e.$highlightBrackets$=null),o):(e.$highlightBrackets$||(e.$highlightBrackets$=e.$highlightBrackets),e.$highlightBrackets=function(){if(o.supportCodeMatching){var e=this;p.clear(e.session),e.$highlightPending||(e.$highlightPending=!0,setTimeout(function(){e.$highlightPending=!1;var t,i,a=e.getSelection();a.isBackwards()?(t=a.lead,i=a.anchor):(t=a.anchor,i=a.lead);var l=e.session.getTokenAt(i.row,i.column-1),s=l&&l.mode?l.mode.parser:o.$parser,c=s.match(e.session,i.row,i.column,n);null!=c&&(!1===c?a.isEmpty()?e.session[o.matchType]=[e.session.addMarker(new r(i.row,i.column-1,i.row,i.column),"ace_error-marker","text")]:e.session[o.matchType]=[e.session.addMarker(new r(t.row,t.column,i.row,i.column),"ace_error-marker","text")]:!1===c.match?e.session[o.matchType]=[e.session.addMarker(new r(c[0],c[1],c[2],c[3]),"ace_error-marker","text")]:e.session[o.matchType]=[e.session.addMarker(new r(c[0],c[1],c[2],c[3]),"ace_selection","text"),e.session.addMarker(new r(c[4],c[5],c[6],c[7]),"ace_selection","text")])},50))}},o)},getSubgrammars:function(){for(var e=this,t=e.$parser,n=Object.keys(t.$subgrammars),r={},o=0,i=n.length;i>o;o++)r[n[o]]=t.$subgrammars[n[o]].Mode.$grammar;return r},submode:function(e,t){var n=this;return n.$parser.subparser(e,t.$parser),n},dispose:function(){var e=this;e.$parser&&e.$parser.dispose(),e.$tokenizer=e.$parser=e.$grammar=e.autocompleter=e.getCompletions=e.foldingRules=e.folder=e.matcher=null}});return c.prototype.getCompletions=c.prototype.autocompleter,new c(e)}var he=1,de=2,ge=32,ke=4,$e=8,ve=~ke,ye=~$e,xe=ke|$e,be=0,we=4,_e=8,Me=9,Oe=10,qe=11,Se=12,Ee=16,Le=17,De=18,Te=19,je=32,Re=33,Ce=128,Fe=129,Ae=2,Ie=4,ze=8,Ne=4,Pe=8,Ue=9,Be=16,We=32,Ge=128,Ye=256,He=512,Ke=1024,Qe=1025,Ve=2048,Ze=4096,Je=8192,Xe=8193,et=8194,tt=8195,nt=16384,rt=nt,ot=16385,it=32768,at=65536,lt=Ze|it,st=Ve|Ze|Je|nt|it|at,ct={action:Ne,simple:He,block:Ke,comment:Qe,subgrammar:at,alternation:Ve,sequence:Ze,repeat:Je,zeroorone:Xe,zeroormore:et,oneormore:tt,positivelookahead:rt,negativelookahead:ot,ngram:it},ut="$|SOF|$",pt="$|NONBLANK|$",ft="$|SOL|$",mt="$|EOL|$",ht="$|ENDLINE|$",dt="$|EMPTY|$",gt="$|NONSPACE|$",kt=void 0,$t="prototype",vt="hasOwnProperty",yt="propertyIsEnumerable",xt=Object[$t],bt=xt.toString,wt=Object.create,_t=Math.max,Mt=Math.min,Ot="toLowerCase",qt="charAt",St=1/0,Et=4,Lt=8,Dt=16,Tt=32,jt=33,Rt=34,Ct=64,Ft=128,At=129,It=130,zt=256,Nt=512,Pt=1024,Ut=2048,Bt=4096,Wt=Ft|Tt,Gt=Ft|zt,Yt=Ut|zt,Ht=Ft|zt|Ut,Kt={"[object Number]":Tt,"[object String]":Ft,"[object Array]":zt,"[object RegExp]":Ut,"[object Date]":Bt,"[object Function]":Pt,"[object Object]":Nt},Qt=/^\s+|\s+$/g,Vt=String[$t].trim?function(e){return e.trim()}:function(e){return e.replace(Qt,"")},Zt=function(e,t){return t.length-e.length},Jt=/\r\n|\r|\n/g,Xt=/[\-_]/g,en=0,tn=/([.*+?^${}()|[\]\/\\\-])/g,nn=/^([.!&\[\]{}()*+?\/|'"]|\s)/,rn="(\\s|\\W|$)",on=/(l?i?l?)x(l?i?l?)$/,an=/[*+]$/;X.prototype.toString=function(){var e=this;return e.id+"_"+e.line+"_"+e.bline+"_"+(e.block?e.block.name:"0")},ne.$SPC$=/^[\s\u00a0]+/,ne.$NONSPC$=/[^\s\u00a0]/,ne.$NOTEMPTY$=/\S/,ne.$SPACE$=/^\s*/;var ln=h({constructor:function(e,t,n){var r=this;r.$grammar=e,r.$DEF=t||null,r.$ERR=n||null,r.DEF=r.$DEF,r.ERR=r.$ERR,r.$folders=[],r.$matchers=[],r.$subgrammars={}},$grammar:null,$subgrammars:null,$folders:null,$matchers:null,$n$:"name",$t$:"type",$v$:"token",$DEF:null,$ERR:null,DEF:null,ERR:null,dispose:function(){var e=this;return e.$grammar=e.$subgrammars=null,e.$folders=e.$matchers=null,e.$n$=e.$t$=e.$v$=null,e.$DEF=e.$ERR=e.DEF=e.ERR=null,e},token:function(e,t,n){if(t.token2){var r=t.token2[0];return e.pos=t.token2[1],e.sft(),t.token=t.token2[3],t.$eol$=e.eol(),t.$blank$=t.$blank$&&(t.token2[2]||t.$eol$),t.token2=null,r}var o,i,a,l,s,c,u,p,f,m,h,d,g,k,$,v,y,x,b=this,w=b.$grammar,_=w.Style,M=b.DEF,O=b.ERR,r={},q=b.$n$,S=b.$t$,E=b.$v$,L=w.$interleaved,D=w.$parser,T=D.length,j=L?L.length:0,R=t.outer,C=R&&R[2],F=R&&R[1];if(e.sol()&&(t.$eol$&&(t.$blank$&&(t.bline=t.line),t.$eol$=!1,t.line++),t.$blank$=t.bline+1===t.line),t.$actionerr$=!1,t.token=null,l=t.line,s=e.pos,m=!1,d=!0,h=!1,g=!1,R&&b===R[0]){if(r[q]=null,r[S]=M,r[E]=null,F){if(a=new z,K(F,e,C,a))return t.outer=null,{parser:b,state:C};for(e.nxt(1);!e.eol();){if(K(F,e,C,a)){if(e.pos>s)break;return t.outer=null,{parser:b,state:C}}e.nxt(1)}}else e.spc(),e.eol()?g=!0:e.end();return r[E]=e.cur(1),t.$eol$=e.eol(),t.$blank$=t.$blank$&&(g||t.$eol$),r}if(t.stack&&Be===t.stack.val.type&&e.sol()&&(t.stack=t.stack.prev),(!t.stack||null==t.block)&&e.spc()){if(t.stack&&at===t.stack.val.type)return e.bck(s),o=t.stack.val,t.stack=t.stack.prev,m=K(o,e,t,a),k=""+m,b.$subgrammars[k]?($=b.$subgrammars[k],v=new X(1,n[k]?n[k]:t.status),C=t):($=b,v=new X,C=t),v.outer=[b,m.next,C],{parser:$,state:v,toInner:k};d=!0,g=!0}if(r[q]=null,r[S]=M,r[E]=null,d)for(a=new z,g&&(a.space=[s,e.pos],e.sft()),c=0;d&&(t.stack||T>c)&&!e.eol();){if(p=e.pos,f=t.stack,F){if(e.spc(),K(F,e,C,a))return a.space||e.pos>p?(a.space&&(e.start=a.space[0],e.pos=a.space[1]),r[E]=e.cur(1),t.$eol$=e.eol(),t.$blank$=t.$blank$&&!0,r):(t.outer=null,{parser:R[0],state:C,fromInner:t});e.bck(p)}if(y=!1,j&&!t.block)for(u=0;j>u;u++)if(o=L[u],m=K(o,e,t,a),!1!==m){y=!0;break}if(d&&!y){if(!t.stack&&c>=T)break;t.stack?(o=t.stack.val,t.stack=t.stack.prev):o=D[c++],m=K(o,e,t,a)}if(!1===m){if(o.status&xe){t.token=o,g=H(t,e,a,o)||g,h=!0,d=!1;break}}else{if(m.subgrammar)return k=""+m,b.$subgrammars[k]?($=b.$subgrammars[k],v=new X(1,n[k]?n[k]:t.status),C=t):($=b,v=new X,C=t),v.outer=[b,m.next,C],a.space?(t.token2=[{parser:$,state:v,toInner:k},e.pos,g,t.token],t.token=null,e.start=a.space[0],e.pos=a.space[1],r[E]=e.cur(1),t.$eol$=e.eol(),t.$blank$=t.$blank$&&!0,r):{parser:$,state:v,toInner:k};if(t.stack&&t.stack.prev&&e.eol()&&Ke&t.stack.val.type&&t.block&&t.block.name===t.stack.val.name)for(u=t.stack.prev;u&&Ne===u.val.type;)i=u,u=u.prev,x=Q(i,e,t,a),i.status&$e?t.$actionerr$=!0:x&&!0!==m&&i.modifier&&(m=i.modifier);else if(t.stack&&Ne===t.stack.val.type)for(;t.stack&&Ne===t.stack.val.type;)i=t.stack.val,t.stack=t.stack.prev,x=Q(i,e,t,a),i.status&$e?t.$actionerr$=!0:x&&!0!==m&&i.modifier&&(m=i.modifier);if(!0!==m){d=!1;break}}}return d&&(a.space?(e.start=a.space[0],e.pos=a.space[1],a.space=null):e.nxt(1)),r[E]=e.cur(1),!1!==m?(m=_[m]||M,r[q]=o.name):h?(m=O,t.status&de&&U(t,l,s,l,e.pos,o)):m=M,r[S]=m,a.space&&(t.token2=[r,e.pos,g,t.token],t.token=null,e.start=a.space[0],e.pos=a.space[1],r={},r[q]=null,r[S]=M,r[E]=e.cur(1),g=!0),t.$eol$=e.eol(),t.$blank$=t.$blank$&&(g||t.$eol$),r},get:function(e,t){for(var n=t.parser.token(e,t.state,t.inner);n&&n.parser;)n.fromInner&&t.parser!==n.parser&&(t.state.err=n.fromInner.err,t.name&&(t.inner[t.name]=n.fromInner)),n.state.err=t.state.err,n.state.line=t.state.line,n.state.bline=t.state.bline,n.state.$blank$=t.state.$blank$,n.state.$eol$=t.state.$eol$,n.state.$full_parse$=t.state.$full_parse$,t.state=n.state,t.parser=n.parser,t.name=n.toInner,n=t.parser.get(e,t);return n},tokenize:function(e,t,n,r){if(r=r||[],e.eol())t.state.line++,t.state.$blank$&&t.state.bline++;else for(;!e.eol();)r.push(t.parser.get(e,t));return r},parse:function(e,t){var n,o,i,a,l,s,c=(e||"").split(Jt),u=c.length,p=null;if(t=t||he,i=!!(t&de),a=!!(t&he),o={parser:this,state:new X(0,t),inner:{}},o.state.$full_parse$=!0,r(function(e){c[e]+="\n"},0,u-2),a?p=r(t&ge?function(e,t){o.parser.tokenize(ne(c[e]),o,e,t)}:function(e,t){t.push(o.parser.tokenize(ne(c[e]),o,e))},0,u-1,[]):r(function(e){var t=ne(c[e]);if(t.eol())o.state.line++,o.state.$blank$&&o.state.bline++;else for(;!t.eol();)o.parser.get(t,o)},0,u-1),n=o.state,i&&n.queu)for(;n.queu;)l=n.queu.val,n.queu=n.queu.prev,U(n,l[1],l[2],l[3],l[4],null,l[5]);return s=a&&i?{tokens:p,errors:n.err}:a?p:n.err,te(n),o=n=null,s},autocompletion:function(e,t){var n,r,o=e.stack,i={},a=q([e.token],[],i);for(t=t||0;o;){if(n=o.val,r=n.type,Je&r){if(a=q([n],a,i),0<n.min&&t<a.length)break}else if((He===r||Ve===r||lt&r)&&(a=q([n],a,i),t<a.length))break;o=o.prev}return a},subparser:function(e,t){var n=this;return!1===t?n.$subgrammars[vt](e)&&delete n.$subgrammars[e]:t&&(n.$subgrammars[e]=t),n},iterator:function(){},validate:function(){},autocomplete:function(){},indent:function(){},fold:function(){},match:function(){}}),sn={Pattern:function(e,t,n){return function(){}},Indented:function(e){return e=e||ne.$NOTEMPTY$,function(t){var n,r,o,i,a,l,s,c,u,p=t.row;if(n=t.line(p),e.test(n)){for(r=t.indentation(n),l=null,a=n.length,c=p+1,u=t.last();u>=c;++c)if(o=t.line(c),i=t.indentation(o),i>r)l=c,s=o.length;else if(e.test(o))break;return l?[p,a,l,s]:void 0}}},Delimited:function(e,t,n,r){return e&&t&&e.length&&t.length?(n=n||a,function(o){var i,a,l,s,c,u,p=o.row,f=o.col;for(i=o.line(p),l=f,s=0;;){var c=0>=l?-1:i.lastIndexOf(e,l-1);if(-1!==c){if(1===s&&f>c)return;if(n(u=o.token(p,c+1))){a=c+e.length;break}l=c-1}else{if(1===s)return;s=1,l=i.length}}return le(1,o,p,a,u,e,t,n,!0,r)}):function(){}},MarkedUp:function(e,t,n,r,o){return e=e||a,t=t||"<",n=n||">",r=r||"/",o=o||g(d(t)+"("+d(r)+"?)([a-zA-Z_\\-][a-zA-Z0-9_\\-:]*)",{g:1}),function(i){i.col=0,i.min=i.first(),i.max=i.last(),i.text=i.line(i.row);for(var a,l,s,c,u,p,f,m,h,d=i.row;;){if(a=ie(i,e,o,t,n,r),!a||i.row!==d||!(l=ae(i,e,o,t,n,r)))return;if(!a[1]&&"autoclosed"!==l)for(s=[i.row,i.col],u=a[2],c=null,p=[];;){if(f=ie(i,e,o,t,n,r),d=i.row,m=i.col-(f?f[0].length:0),!f||!(l=ae(i,e,o,t,n,r)))return!1;if("autoclosed"!==l)if(f[1]){for(h=p.length-1;h>=0;--h)if(p[h]===f[2]){p.length=h;break}if(0>h&&(!u||u===f[2]))return[s[0],s[1],d,m]}else p.push(f[2])}}}}},cn={Pattern:function(e,t,n){return function(){}},Delimited:function(e,t,n,r){return e&&t&&e.length&&t.length?(n=n||a,function(o){var i,a=o.col,l=o.row,s=o.line(l),c=!1,u=e.length,p=t.length;return a>=u&&(1===u&&e===s.charAt(a-1)||e===s.slice(a-u,a))?(i=le(1,o,l,a,c,e,t,n,!1,r),i?(i=[i[0],i[1]-u,i[0],i[1],i[2],i[3],i[2],i[3]+p],i.match="end"):(i=[l,a-u,l,a],i.match=!1),i):a>=p&&(1===p&&t===s.charAt(a-1)||t===s.slice(a-p,a))?(i=le(-1,o,l,a-p,c,e,t,n,!1,r),i?(i=[i[0],i[1],i[0],i[1]+u,i[2],i[3],i[2],i[3]+p],i.match="start"):(i=[l,a-p,l,a],i.match=!1),i):void 0}):function(){}},MarkedUp:function(e,t,n,r,o){return function(){}}},un=!("undefined"==typeof global||"[object global]"!==bt.call(global)),pn=!(un||"undefined"==typeof navigator),fn=!!(pn&&"function"==typeof importScripts&&navigator instanceof WorkerNavigator),mn=function(e,t,n){var r,o=null,i=null,a=null;return e?(o=__filename,i=__dirname,a=__dirname):n?(o=self.location.href,i=o.split("/").slice(0,-1).join("/")):t&&(a=document.location.href.split("#")[0].split("?")[0].split("/").slice(0,-1).join("/"),(r=document.getElementsByTagName("script"))&&r.length&&(o=r[r.length-1].src,i=o.split("/").slice(0,-1).join("/"))),{path:i,file:o,base:a}}(un,pn,fn),hn="?nocache="+f("nonce")+"_"+~~(1e3*Math.random()),dn=function(){return(this.name||"")+"==>"+this.state.toString()},gn="undefined"!=typeof ace?ace:{require:function(){return{}},config:{}},kn=h(ln,{constructor:function vn(t,n,o){var i,l=this,s=null,c=null;if(ln.call(l,t,"text","invalid"),l.$v$="value",l.DEF=n||l.$DEF,l.ERR=t.Style.error||l.$ERR,l.LC=t.$comments.line||null,l.BC=t.$comments.block?{start:t.$comments.block[0][0],end:t.$comments.block[0][1]}:null,!1!==o){if(t.$comments.block&&t.$comments.block.length){i=vn.Type("comment");for(var u=0,p=t.$comments.block.length;p>u;u++)l.$folders.push(vn.Fold.Delimited(t.$comments.block[u][0],t.$comments.block[u][1],i,"comment"))}t.Fold&&Ft&e(t.Fold)?s=t.Fold[Ot]():t.$extra.fold&&(s=t.$extra.fold[Ot]()),c=t.Match&&Ft&e(t.Match)?t.Match[Ot]():t.$extra.match?t.$extra.match[Ot]():s;var f=T(t,1);i=f.length?vn.Type(f,!1):a,s&&(s=s.split("+"),r(function(e,t){var n,r=Vt(t[e]);"braces"===r?l.$folders.push(vn.Fold.Delimited("{","}",i)):"brackets"===r?l.$folders.push(vn.Fold.Delimited("[","]",i)):"parens"===r||"parentheses"===r?l.$folders.push(vn.Fold.Delimited("(",")",i)):"brace"===r||"cstyle"===r||"c"===r?(l.$folders.push(vn.Fold.Delimited("{","}",i)),l.$folders.push(vn.Fold.Delimited("[","]",i))):"indent"===r||"indentation"===r?l.$folders.push(vn.Fold.Indented()):"tags"===r||"markup"===r||"html"===r||"xml"===r?(l.$folders.push(vn.Fold.Delimited("<![CDATA[","]]>",vn.Type(["comment","tag"],!1))),l.$folders.push(vn.Fold.MarkedUp(vn.Type("tag"),"<",">","/"))):-1<(n=r.indexOf(","))&&l.$folders.push(vn.Fold.Delimited(r.slice(0,n),r.slice(n+1),i))},0,s.length-1,s)),c&&(c=c.split("+"),r(function(e,t){var n,r=Vt(t[e]);"braces"===r?l.$matchers.push(vn.Match.Delimited("{","}")):"brackets"===r?l.$matchers.push(vn.Match.Delimited("[","]")):"parens"===r||"parentheses"===r?l.$matchers.push(vn.Match.Delimited("(",")")):"brace"===r||"cstyle"===r||"c"===r?(l.$matchers.push(vn.Match.Delimited("{","}")),l.$matchers.push(vn.Match.Delimited("[","]")),l.$matchers.push(vn.Match.Delimited("(",")"))):"tags"===r||"markup"===r||"html"===r||"xml"===r?l.$matchers.push(vn.Match.MarkedUp(vn.Type("tag"),"<",">","/")):-1<(n=r.indexOf(","))&&l.$matchers.push(vn.Match.Delimited(r.slice(0,n),r.slice(n+1)))},0,c.length-1,c))}},LC:null,BC:null,dispose:function(){var e=this;return e.LC=e.BC=null,ln[$t].dispose.call(e)},tokenize:function(e,t,n,r){var o;if(r=r||[],e.eol())t.state.line++,t.state.$blank$&&t.state.bline++;else for(;!e.eol();)o=t.parser.get(e,t),o.mode=t,r.push(o);return r},getLineTokens:function(e,t,n){var r,o=this;return r=t?{parser:t.parser,state:new X(1,t.state),inner:t.inner,name:t.name,toString:dn}:{parser:o,state:new X(1),inner:{},name:null,toString:dn},{tokens:r.parser.tokenize(ne(e),r,n),state:r}},autocomplete:function(e,t,r,o,i,a){var l=this,s=[];if(l.$grammar.$autocomplete){i=i||{};var c=i[vt]("caseInsesitiveMatch")?!!i.caseInsesitiveMatch:!1,u=i[vt]("prefixMatch")?!!i.prefixMatch:!0,p=i[vt]("inContext")?!!i.inContext:!1,f=o,m=f[Ot](),h=f.length,d=!1,g=1e3,k=function(e,t){var n,r,o,i,a,l,s,p=t.word,k=p.length;return h?k>=h&&(n=t.meta,r=!!p.ci,s=c||r,s?(a=p[Ot](),l=m):(a=p,l=f),(i=a.indexOf(l))>=0&&(!u||0===i)&&(o=s?p.indexOf(f):i,e.push({name:p,value:p,meta:n,score:1e3-10*(k-h)-5*(0>o?i+3:o)}))):e.push({name:p,value:p,meta:t.meta,score:d?1e3-10*k:g--}),e};p?(d=!1,s=n(l.autocompletion(e),k,s),s.length||(d=!0,s=n(l.$grammar.$autocomplete,k,s))):(d=!0,s=n(l.$grammar.$autocomplete,k,s))}return s},iterator:function(e,t){var n=e.getTabSize();return{row:0,col:0,min:0,max:0,line:function(t){return e.getLine(t)},first:function(){return 0},last:function(){return e.getLength()-1},next:function(){var e=this;if(!(e.row>=e.max))return e.col=0,e.row++,!0},prev:function(){var e=this;if(!(e.row<=e.min))return e.col=0,e.row--,!0},indentation:function(e){return re(e,null,n)},state:function(t,n){var r=e.getState(t);return r.state||r},token:function(t,n){return e.getTokenAt(t,n).type},tokens:function(t){return e.getTokens(t)}}},fold:function(e,t,n){var r,o,i,a=this,l=a.$folders,s=l.length;if(s)for(o=a.iterator(e,n),o.row=t,o.col=0,r=0;s>r;r++)if((i=l[r](o))||!1===i)return i},match:function(e,t,n,r){var o,i,a,l=this,s=l.$matchers,c=s.length;if(c)for(i=l.iterator(e,r),i.row=t,i.col=n||0,o=0;c>o;o++)if((a=s[o](i))||!1===a)return a}});kn.Type=oe,kn.Fold=sn,kn.Match=cn,fn&&(onmessage=se);var $n={VERSION:"4.1.0",clone:o,extend:i,pre_process:j,parse:R,getMode:me,Parser:kn};return $n});