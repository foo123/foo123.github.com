/**
*
*   AceGrammar
*   @version: 0.9
*
*   Transform a grammar specification in JSON format, into an ACE syntax-highlight parser mode
*   https://github.com/foo123/ace-grammar
*
**/!function(e,t,n,r){"use strict";function o(e,t,n,r,o){var i;return e?{file:__filename,path:__dirname}:t?{file:i=self.location.href,path:i.split("/").slice(0,-1).join("/")}:n&&o&&o.uri?{file:i=o.uri,path:i.split("/").slice(0,-1).join("/")}:r&&(i=document.getElementsByTagName("script"))&&i.length?{file:i=i[i.length-1].src,path:i.split("/").slice(0,-1).join("/")}:{file:null,path:null}}function i(e,t,n,r,o){var i,l=e.length,s=new Array(l);for(i=0;l>i;i++)s[i]=1===r?n[e[i]]||o(t[i]):2===r?o(e[i]):n[e[i]];return s}function l(e,t,n,r,o,i){var l,s,a,u,c,f,p,g=n.length;if(i){for(l=0;g>l;l++)n[l]in e||importScripts(t+r[l]);return o()}f=document.getElementsByTagName("head")[0],p=document.createElement("a"),s=/^\./,a=0,l=0,u=function(e,n){var r=0,o=document.createElement("script");o.type="text/javascript",o.language="javascript",o.onload=o.onreadystatechange=function(){r||o.readyState&&"loaded"!=o.readyState&&"complete"!=o.readyState||(r=1,o.onload=o.onreadystatechange=null,n(),f.removeChild(o),o=null)},s.test(e)&&(p.href=t+e,e=p.protocol+"//"+p.host+p.pathname+p.search+p.hash),o.src=e,f.appendChild(o)},c=function(){n[l]in e?++l>=g?o():n[l]in e?c():u(r[l],c):++a<30?setTimeout(c,30):(a=0,l++,c())};for(;g>l&&n[l]in e;)l++;g>l?u(r[l],c):o()}n=n||[[],[]];var s,a,u,c="undefined"!=typeof global&&"[object global]"==={}.toString.call(global),f=!c&&"undefined"!=typeof navigator,p=!c&&"function"==typeof importScripts&&navigator instanceof WorkerNavigator,g="function"==typeof define&&define.amd,h=c&&"object"==typeof module&&module.exports,d=p?self:e,m=o(c,p,g,f),k=[].concat(n[0]),v=[].concat(n[1]),_=k.length,y=/\.js$/i;if(h)module.$deps=module.$deps||{},module.exports=module.$deps[t]=r.apply(e,[{NODE:module}].concat(i(k,v,module.$deps,1,require)))||1;else if(g&&"function"==typeof require&&"function"==typeof require.specified&&require.specified(t)){if(!require.defined(t)){for(u={},a=0;_>a;a++)require.specified(k[a])||(u[k[a]]=v[a].replace(y,""));require.config({paths:u}),define(t,["require","exports","module"].concat(k),function(t,n,o){return r.apply(e,[{AMD:o}].concat(i(k,v,arguments,2,t)))})}}else t in d||l(d,m.path+"/",k,v,function(){d[t]=s=r.apply(e,[{}].concat(i(k,v,d)))||1,g&&define(t,["require"],function(){return s})},p)}(this,"AceGrammar",[["RegexAnalyzer"],["./RegexAnalyzer.js"]],function(e,t,n){function r(){ace.define("ace/grammar_worker",["require","exports","module","ace/worker/mirror"],function(e,t){var n,r=e("./worker/mirror").Mirror;n=t.AceGrammarWorker=function(e){var t=this;r.call(t,e),t.setTimeout(500)},n[I]=Merge(Extend(r[I]),{constructor:n,parser:null,Init:function(e,t){var n=this;n.parser=new At(Tt(e),{DEFAULT:o,ERROR:s}),n.sender.callback(1,t)},onUpdate:function(){var e,t,n,r,o,i,l,s,a,u=this,c=u.sender,f=u.parser,p=0;if(!f)return void c.emit("ok",null);if(e=u.doc.getValue(),!e||!e.length)return void c.emit("ok",null);for(r=[],t=f.parse(e),i=t.length,o=0;i>o;o++)if(n=t[o],n&&n.length)for(a=0,l=0;l<n.length;l++)s=n[l],f.ERR==s.type&&(r.push({row:o,column:a,text:s.error||"Syntax Error",type:"error",raw:s.error||"Syntax Error"}),p=1),a+=s.value.length;p?c.emit("error",r):c.emit("ok",null)}})})}var o,s,a=1/0,u=2,c=4,f=8,p=16,g=17,h=18,d=20,m=32,k=33,v=34,_=64,y=128,E=256,R=257,w=258,C=259,x=512,b=1024,T=2048,S=4096,L={EITHER:_,ALL:y,ZEROORONE:R,ZEROORMORE:w,ONEORMORE:C,REPEATED:E},M={INDENT:T,DEDENT:S,BLOCK:m,COMMENT:v,ESCAPEDBLOCK:k,SIMPLE:p,GROUP:x,NGRAM:b},I="prototype",A="hasOwnProperty",O="propertyIsEnumerable",B=Object.keys,D=(Array[I],Object[I]),N=(Function[I],D.toString),j=4,$=5,P=8,Q=16,H=17,q=18,U=32,G=64,K=128,V=256,F=512,W=1024,z=2048,Z=Q|U,Y=G|U;TO_STRING={"[object Array]":U,"[object RegExp]":V,"[object Number]":j,"[object String]":Q,"[object Function]":K,"[object Object]":G},get_type=function(e){var t;return null===e?F:!0===e||!1===e?P:n===e?W:(t=N.call(e),t=TO_STRING[t]||z,j===t||e instanceof Number?isNaN(e)?$:j:Q===t||e instanceof String?1===e.length?H:Q:U===t||e instanceof Array?U:V===t||e instanceof RegExp?V:K===t||e instanceof Function?K:G===t?G:z)},Extend=Object.create,Merge=function(){var e,t,n,r,o,i,l,s=arguments;for(t=s[0]||{},e=s.length,i=1;e>i;i++)if(n=s[i],G===get_type(n))for(o in n)n[A](o)&&n[O](o)&&(r=n[o],l=get_type(r),t[o]=j&l?0+r:Z&l?r.slice(0):r);return t},make_array=function(e,t){return t||U!==get_type(e)?[e]:e},make_array_2=function(e,t){return e=make_array(e,t),(t||U!==get_type(e[0]))&&(e=[e]),e},clone=function(e){var t,n=get_type(e);if(!(Y&n))return e;var r,o={};for(r in e)e[A](r)&&e[O](r)&&(t=get_type(e[r]),o[r]=G&t?clone(e[r]):Z&t?e[r].slice():e[r]);return o},extend=function(){var e=arguments,t=e.length;if(1>t)return null;if(2>t)return clone(e[0]);var n,r,o,i,l=e[0],s=clone(l);for(t--,r=1;t>r;r++)if(n=e[r])for(o in n)n[A](o)&&n[O](o)&&(l[A](o)&&l[O](o)?(i=get_type(l[o]),G&~Q&i&&(s[o]=extend(l[o],n[o]))):s[o]=clone(n[o]));return s},escRegexp=function(e){return e.replace(/([.*+?^${}()|[\]\/\\\-])/g,"\\$1")},groupReplace=function(e,t){var n,r,o,i;for(i=function(e,n){return t[1+parseInt(n,10)]},n=e.split("$$"),o=n.length,r=0;o>r;r++)n[r]=n[r].replace(/\$(\d{1,2})/g,i);return n.join("$")},byLength=function(e,t){return t.length-e.length},hasPrefix=function(e,t){return Q&get_type(t)&&Q&get_type(e)&&t.length&&t.length<=e.length&&t==e.substr(0,t.length)},getRegexp=function(e,n,r){if(!e||j==get_type(e))return e;var o,i=n?n.length||0:0;if(i&&n==e.substr(0,i)){var l,s,a,u,o,c,f=e.substr(i),p=f[0],g="";for(o=f.length;o--&&(c=f[o],p!=c);)"i"==c.toLowerCase()&&(g="i");return l=f.substring(1,o),s="^("+l+")",r[s]||(a=new RegExp(s,g),u=new t(a).peek(),null===u.peek||B(u.peek).length||(u.peek=null),null===u.negativepeek||B(u.negativepeek).length||(u.negativepeek=null),r[s]=[a,u]),r[s]}return e},getCombinedRegexp=function(e,t){var n={},r="",o=get_type(t);(Q==o||H==o)&&(r=t);var i=e.sort(byLength).map(function(e){return n[e.charAt(0)]=1,escRegexp(e)}).join("|");return[new RegExp("^("+i+")"+r),{peek:n,negativepeek:null},1]},_id_=0,getId=function(){return++_id_},isNode="undefined"!=typeof global&&"[object global]"=={}.toString.call(global)?1:0,isBrowser=isNode||"undefined"==typeof navigator?0:1,isWorker="function"==typeof importScripts&&navigator instanceof WorkerNavigator?1:0,getCurrentPath=function(){var e,t,n=null;return isNode?(n=__filename,{path:__dirname,file:__filename,base:__dirname}):(isWorker?n=self.location.href:isBrowser&&(e=document.location.href.split("#")[0].split("?")[0].split("/").slice(0,-1).join("/"),(t=document.getElementsByTagName("script"))&&t.length&&(n=t[t.length-1].src)),n?{path:n.split("/").slice(0,-1).join("/"),file:n,base:e}:{path:null,file:null,base:null})},thisPath=getCurrentPath();var J=Math.max,X=/^[\s\u00a0]+/,et=/[^\s\u00a0]/,tt=function(e,t,n,r,o){var i,l;for(null===t&&(t=e.search(et),-1==t&&(t=e.length)),i=r||0,l=o||0;t>i;++i)l+="	"==e.charAt(i)?n-l%n:1;return l},nt=function(e){var t=this;t._=null,t.s=e?""+e:"",t.start=t.pos=0,t.lCP=t.lCV=0,t.lS=0};nt[I]={constructor:nt,_:null,s:"",start:0,pos:0,lCP:0,lCV:0,lS:0,toString:function(){return this.s},fromStream:function(e){var t=this;return t._=e,t.s=""+e.string,t.start=e.start,t.pos=e.pos,t.lCP=e.lastColumnPos,t.lCV=e.lastColumnValue,t.lS=e.lineStart,t},sol:function(){return 0==this.pos},eol:function(){return this.pos>=this.s.length},chr:function(e,t){var n=this,r=n.s.charAt(n.pos)||null;return r&&e==r?(!1!==t&&(n.pos+=1,n._&&(n._.pos=n.pos)),r):!1},chl:function(e,t){var n=this,r=n.s.charAt(n.pos)||null;return r&&-1<e.indexOf(r)?(!1!==t&&(n.pos+=1,n._&&(n._.pos=n.pos)),r):!1},str:function(e,t,n){var r,o=this,i=o.pos,l=o.s,s=l.charAt(i)||null;return s&&t[s]&&(r=e.length,e==l.substr(i,r))?(!1!==n&&(o.pos+=r,o._&&(o._.pos=o.pos)),e):!1},rex:function(e,t,n,r,o){var i,l=this,s=l.pos,a=l.s,u=a.charAt(s)||null;return u&&t&&t[u]||n&&!n[u]?(i=a.slice(s).match(e),!i||i.index>0?!1:(!1!==o&&(l.pos+=i[r||0].length,l._&&(l._.pos=l.pos)),i)):!1},spc:function(e){var t,n=this,r=n.pos,o=n.s.slice(r);return(t=o.match(X))?(!1!==e&&(n.pos+=t[0].length,n._&&(n._.pos=n.pos)),1):0},end:function(){var e=this;return e.pos=e.s.length,e._&&(e._.pos=e.pos),e},nxt:function(){var e,t=this,n=t.s;return t.pos<n.length?(e=n.charAt(t.pos++)||null,t._&&(t._.pos=t.pos),e):void 0},bck:function(e){var t=this;return t.pos=J(0,t.pos-e),t._&&(t._.pos=t.pos),t},bck2:function(e){var t=this;return t.pos=J(0,e),t._&&(t._.pos=t.pos),t},col:function(e){var t=this;return e=e||1,t.lCP<t.start&&(t.lCV=tt(t.s,t.start,e,t.lCP,t.lCV),t.lCP=t.start,t._&&(t._.start=t.start,t._.lastColumnPos=t.lCP,t._.lastColumnValue=t.lCV,t._.lineStart=t.lS)),t.lCV-(t.lS?tt(t.s,t.lS,e):0)},ind:function(e){var t=this;return e=e||1,tt(t.s,null,e)-(t.lS?tt(t.s,t.lS,e):0)},cur:function(e){var t=this,n=t.s.slice(t.start,t.pos);return e&&(t.start=t.pos),n},sft:function(){return this.start=this.pos,this}};var rt=function(e){this._=e||[]};rt[I]={constructor:rt,_:null,toString:function(){var e=this._.slice();return e.reverse().join("\n")},clone:function(){return new rt(this._.slice())},isEmpty:function(){return 0>=this._.length},pos:function(){return this._.length},peek:function(e){var t=this._;if(e="undefined"==typeof e?-1:e,t.length){if(0>e&&0<=t.length+e)return t[t.length+e];if(e>=0&&e<t.length)return t[e]}return null},pop:function(){return this._.pop()},shift:function(){return this._.shift()},push:function(e){return this._.push(e),this},unshift:function(e){return this._.unshift(e),this},pushAt:function(e,t,n,r){var o=this._;return n&&r&&(t[n]=r),e<o.length?o.splice(e,0,t):o.push(t),this},empty:function(e,t){{var n=this._;n.length}if(e&&t)for(;n.length&&n[n.length-1]&&n[n.length-1][e]==t;)n.pop();else n.length=0;return this}};var ot=function(e,t){var n=this;n.id=t?(new Date).getTime():0,n.l=e||0,n.stack=new rt,n.data=new rt,n.col=0,n.indent=0,n.t=null,n.inBlock=null,n.endBlock=null};ot[I]={constructor:ot,id:0,l:0,col:0,indent:0,stack:null,data:null,t:null,inBlock:null,endBlock:null,clone:function(e){var t=this,n=new ot(t.l,e);return n.t=t.t,n.col=t.col,n.indent=t.indent,n.stack=t.stack.clone(),n.data=t.data.clone(),n.inBlock=t.inBlock,n.endBlock=t.endBlock,n},toString:function(){var e=this;return["",e.id,e.l,e.t,e.inBlock||"0"].join("_")}};var it=function(e,t){var n,r=this;return(n=e.chr(r.tp,t))?[r.tk,n]:!1},lt=function(e,t){var n,r=this;return(n=e.chl(r.tp,t))?[r.tk,n]:!1},st=function(e,t){var n,r=this;return(n=e.str(r.tp,r.p,t))?[r.tk,n]:!1},at=function(e,t){var n,r=this;return(n=e.rex(r.tp,r.p,r.np,r.tg,t))?[r.tk,n]:!1},ut=function(e,t){var n=this;return!1!==t&&e.end(),[n.tk,""]},ct=function Nt(e,t,n,r){var o=this;switch(o.$class=Nt,o.mt=u,o.tt=e||H,o.tn=t,o.tk=r||0,o.tg=0,o.tp=null,o.p=null,o.np=null,o.tt){case H:case q:o.tp=n,o.get=q===o.tt?lt:it;break;case Q:o.tp=n,o.p={},o.p[""+n.charAt(0)]=1,o.get=st;break;case V:o.tp=n[0],o.p=n[1].peek||null,o.np=n[1].negativepeek||null,o.tg=n[2]||0,o.get=at;break;case F:o.tp=null,o.get=ut}};ct[I]={constructor:ct,$class:null,mt:null,tt:null,tn:null,tp:null,tg:0,tk:0,p:null,np:null,get:function(){return!1},toString:function(){return["[","Matcher: ",this.tn,", Pattern: ",this.tp?this.tp.toString():null,"]"].join("")}};var ft=function jt(e,t,n){var r=this;r.$class=jt,r.mt=c,r.tn=e,r.ms=t,r.ownKey=!1!==n};ft[I]=Merge(Extend(ct[I]),{constructor:ft,ms:null,ownKey:!0,get:function(e,t){var n,r,o=this.ms,i=o.length,l=this.ownKey;for(n=0;i>n;n++)if(r=o[n].get(e,t))return l?[n,r[1]]:r;return!1}});var pt=function $t(e,t,n){var r=this;r.$class=$t,r.mt=f,r.tn=e,r.s=new ft(r.tn+"_Start",t,!1),r.e=n};pt[I]=Merge(Extend(ct[I]),{constructor:pt,s:null,e:null,get:function(e,t){var n,r=this,o=r.s,i=r.e;if(n=o.get(e,t)){var l,s=i[n[0]],a=get_type(s),u=o.ms[n[0]].tt;return V==u&&(j==a?(l=n[1][s+1],s=new ct(l.length>1?Q:H,r.tn+"_End",l)):Q==a&&(l=groupReplace(s,n[1]),s=new ct(l.length>1?Q:H,r.tn+"_End",l))),s}return!1}});var gt=function(e,t,n,r){var o=get_type(t);if(j==o)return t;if(!r[e]){n=n||0;var i,l=0;t&&t.isCharList&&(l=1,delete t.isCharList),i=F&o?new ct(F,e,t,n):H==o?new ct(H,e,t,n):Q&o?l?new ct(q,e,t,n):new ct(Q,e,t,n):U&o?new ct(V,e,t,n):t,r[e]=i}return r[e]},ht=function(e,t,n,r,o,i){if(!i[e]){var l,s,a,u,c,f,p,g=0,h=0,d=1;if(l=make_array(t),a=l.length,1==a)p=gt(e,getRegexp(l[0],n,o),0,i);else if(a>1){for(u=(a>>1)+1,s=0;u>=s;s++)c=get_type(l[s]),f=get_type(l[a-1-s]),(H!=c||H!=f)&&(d=0),U&c||U&f?g=1:(hasPrefix(l[s],n)||hasPrefix(l[a-1-s],n))&&(h=1);if(!d||r&&Q&get_type(r))if(!r||g||h){for(s=0;a>s;s++)l[s]=U&get_type(l[s])?ht(e+"_"+s,l[s],n,r,o,i):gt(e+"_"+s,getRegexp(l[s],n,o),s,i);p=a>1?new ft(e,l):l[0]}else p=gt(e,getCombinedRegexp(l,r),0,i);else l=l.slice().join(""),l.isCharList=1,p=gt(e,l,0,i)}i[e]=p}return i[e]},dt=function(e,t,n,r,o){if(!o[e]){var i,l,s,a,u,c,f;for(a=[],u=[],i=make_array_2(t),l=0,s=i.length;s>l;l++)c=gt(e+"_0_"+l,getRegexp(i[l][0],n,r),l,o),f=i[l].length>1?V!=c.tt||Q!=get_type(i[l][1])||hasPrefix(i[l][1],n)?gt(e+"_1_"+l,getRegexp(i[l][1],n,r),l,o):i[l][1]:c,a.push(c),u.push(f);o[e]=new pt(e,a,u)}return o[e]},mt=1,kt=2,vt=function Pt(e,t,n){var r=this;r.$class=Pt,r.tt=e||p,r.id=t,r.tk=n,r.REQ=0,r.ERR=0,r.MTCH=0,r.CLONE=["tk"]};vt[I]={constructor:vt,$class:null,sID:null,id:null,tt:null,tk:null,ta:null,REQ:0,ERR:0,MTCH:0,CLONE:null,act:function(e,t){var n,r,o=this.ta||null,i=t.data;if(o)if(n=o[1],mt===o[0]&&n)e&&(r=get_type(n),n=j==r?e[1][n]:groupReplace(n,e[1])),i.push(n);else if(kt===o[0])if(n){if(e&&(r=get_type(n),n=j==r?e[1][n]:groupReplace(n,e[1])),i.isEmpty()||n!=i.peek())return n;i.pop()}else i.length&&i.pop();return 0},get:function(e,t){var n=this,r=n.tm,o=n.tk,i=n.tt,l=n.id,s=null;if(n.MTCH=0,d==i)return n.ERR=0,n.REQ=0,!0;if(g==i){if(e.spc(),e.eol())return l}else if(h==i)n.ERR=n.REQ&&e.spc()&&!e.eol()?1:0,n.REQ=0;else if(s=o.get(e))return r&&(n.MTCH=n.act(s,t)),l;return!1},req:function(e){return this.REQ=e?1:0,this},err:function(){var e=this;return e.REQ?'Token "'+e.id+'" Expected':e.MTCH?'Token "'+e.MTCH+'" No Match':'Syntax Error: "'+e.id+'"'},clone:function(){var e,t,n,r=this,o=r.CLONE;if(e=new r.$class,e.tt=r.tt,e.id=r.id,e.tm=r.tm?r.tm.slice():r.tm,o&&o.length)for(t=0,n=o.length;n>t;t++)e[o[t]]=r[o[t]];return e},toString:function(){return["[","Tokenizer: ",this.id,", Matcher: ",this.tk?this.tk.toString():null,"]"].join("")}};var _t=function Qt(e,t,n,r,o,i){var l=this;l.$class=Qt,l.tt=e,l.id=t,l.tk=n,l.REQ=0,l.ERR=0,l.MTCH=0,l.mline="undefined"==typeof r?1:r,l.esc=o||"\\",l.inter=i,l.CLONE=["tk","mline","esc","inter"]};_t[I]=Merge(Extend(vt[I]),{constructor:_t,inter:0,mline:0,esc:null,get:function(e,t){var n,r,o,i,l,s,a,u,c,f=this,p=0,g=0,h="",d=f.mline,m=f.tk,_=f.id,y=f.tt,E=f.inter,R=E?_+".inside":_,w=0,C=k==y,x=f.esc;if(v===y&&(f.REQ=0),l=0,t.inBlock===_?(g=1,n=t.endBlock,l=1,s=R):!t.inBlock&&(n=m.get(e))&&(g=1,t.inBlock=_,t.endBlock=n,s=_),g){if(o=t.stack.pos(),i=F===n.tt,E){if(l&&i&&e.sol())return f.REQ=0,t.inBlock=null,t.endBlock=null,!1;if(!l)return t.stack.pushAt(o,f.clone(),"sID",_),s}if(p=n.get(e),r=d,c=0,p)s=i?R:_;else for(u=e.pos;!e.eol();){if(a=e.pos,!(C&&w||!n.get(e))){E&&e.pos>a&&a>u?(s=R,e.bck2(a),c=1):(s=_,p=1);break}h=e.nxt(),w=!w&&h==x}return r=d||C&&w,p||!r&&!c?(t.inBlock=null,t.endBlock=null):t.stack.pushAt(o,f.clone(),"sID",_),s}return!1}});var yt=function Ht(e,t,n,r,o){var i=this;i.$class=Ht,i.tt=e||E,i.id=t||null,i.tk=null,i.ts=null,i.min=r||0,i.max=o||a,i.found=0,i.CLONE=["ts","min","max","found"],n&&i.set(n)};yt[I]=Merge(Extend(vt[I]),{constructor:yt,ts:null,min:0,max:1,found:0,set:function(e){return e&&(this.ts=make_array(e)),this},get:function(e,t){var n,r,o,i,l,s,a=this,u=a.ts,c=u.length,f=a.found,p=a.min,g=a.max,h=0;for(a.ERR=0,a.REQ=0,a.MTCH=0,i=e.pos,l=t.stack.pos(),s=a.id+"_"+getId(),n=0;c>n;n++){if(r=u[n].clone().req(1),o=r.get(e,t),!1!==o){if(++f,g>=f)return a.found=f,t.stack.pushAt(l,a.clone(),"sID",s),a.found=0,a.MTCH=r.MTCH,o;break}r.REQ&&h++,r.ERR&&e.bck2(i)}return a.REQ=p>f,a.ERR=f>g||p>f&&h>0,!1}});var Et=function qt(e,t,n){yt.call(this,e,t,n,1,1),this.$class=qt};Et[I]=Merge(Extend(yt[I]),{constructor:Et,get:function(e,t){var n,r,o,i,l=this,s=l.ts,a=s.length,u=0,c=0;for(l.REQ=1,l.ERR=0,l.MTCH=0,i=e.pos,o=0;a>o;o++){if(r=s[o].clone().req(1),n=r.get(e,t),u+=r.REQ?1:0,!1!==n)return l.MTCH=r.MTCH,n;r.ERR&&(c++,e.bck2(i))}return l.REQ=u>0,l.ERR=a==c&&u>0,!1}});var Rt=function Ut(e,t,n){yt.call(this,e,t,n,1,1),this.$class=Ut};Rt[I]=Merge(Extend(yt[I]),{constructor:Rt,get:function(e,t){var n,r,o,i,l,s=this,a=s.ts,u=a.length;if(s.REQ=1,s.ERR=0,s.MTCH=0,o=e.pos,i=t.stack.pos(),n=a[0].clone().req(1),r=n.get(e,t),l=s.id+"_"+getId(),!1!==r){if(!0!==r)for(var c=u-1;c>0;c--)t.stack.pushAt(i+u-c-1,a[c].clone().req(1),"sID",l);return s.MTCH=n.MTCH,r}return n.ERR?(s.ERR=1,e.bck2(o)):n.REQ&&(s.ERR=1),!1}});var wt=function(e,t,n){yt.call(this,e,t,n,1,1),this.$class=wt};wt[I]=Merge(Extend(yt[I]),{constructor:wt,get:function(e,t){var n,r,o,i,l,s,a=this,u=a.ts,c=u.length;if(a.REQ=0,a.ERR=0,a.MTCH=0,o=e.pos,i=t.stack.pos(),n=u[0].clone().req(0),r=n.get(e,t),l=a.id+"_"+getId(),!1!==r){if(!0!==r)for(s=c-1;s>0;s--)t.stack.pushAt(i+c-s-1,u[s].clone().req(1),"sID",l);return a.MTCH=n.MTCH,r}return n.ERR&&e.bck2(o),!1}});var Ct=function(e,t,n,r,o,i,l,s,u,c,f){var k,T,S,I,A,O,B,D,N,j,$,P,H,q,G,K=null;if(null===e)return new vt(g,"EOL",e);if(""===e)return new vt(h,"NONSPACE",e);if(!1===e||0===e)return new vt(d,"EMPTY",e);if(e=""+e,!s[e]&&(k=n[e]||r[e]||{type:"simple",tokens:e})){for((Q|U)&get_type(k)&&(k={type:"simple",tokens:k});k.extend;)q=k.extend,G=n[q]||r[q],delete k.extend,G&&((Q|U)&get_type(G)&&(G={type:"simple",tokens:G}),k=extend(G,k));if(T=k.type?M[k.type.toUpperCase().replace(/[\-_]/g,"")]:p,p&T){if(""===k.tokens)return K=new vt(h,e,e),s[e]=K,K;if(null===k.tokens)return K=new vt(g,e,e),s[e]=K,K;if(!1===k.tokens||0===k.tokens)return K=new vt(d,e,e),s[e]=K,K}if(k.tokens=make_array(k.tokens),p&T)k.autocomplete&&bt(k,e,f),I=null,k.push?I=[mt,k.push]:"undefined"!=typeof k.pop&&(I=[kt,k.pop]),S="undefined"==typeof k.combine?"\\b":k.combine,K=new vt(p,e,ht(e,k.tokens.slice(),t,S,i,l)),K.ta=I,s[e]=K;else if(m&T)v&T&&xt(k,c),K=new _t(T,e,dt(e,k.tokens.slice(),t,i,l),k.multiline,k.escape,o[e+".inside"]?1:0),s[e]=K,k.interleave&&u.push(K.clone());else if(x&T){for(O=k.tokens.slice(),U&get_type(k.match)?K=new yt(E,e,null,k.match[0],k.match[1]):(A=L[k.match.toUpperCase()],K=R===A?new yt(R,e,null,0,1):w===A?new yt(w,e,null,0,a):C===A?new yt(C,e,null,1,a):_&A?new Et(_,e,null):new Rt(y,e,null)),s[e]=K,B=[],j=0,$=O.length;$>j;j++)B=B.concat(Ct(O[j],t,n,r,o,i,l,s,u,c,f));K.set(B)}else if(b&T){for(K=make_array_2(k.tokens.slice()).slice(),D=[],j=0,$=K.length;$>j;j++)D[j]=K[j].slice(),K[j]=new wt(b,e+"_NGRAM_"+j,null);for(s[e]=K,j=0,$=K.length;$>j;j++){for(N=D[j],B=[],P=0,H=N.length;H>P;P++)B=B.concat(Ct(N[P],t,n,r,o,i,l,s,u,c,f));K[j].set(B)}}}return s[e]},xt=function(e,t){var n,r,o,s=make_array_2(e.tokens.slice());for(i=0,l=s.length;l>i;i++)n=s[i][0],r=s[i].length>1?s[i][1]:s[i][0],o=s[i].length>2?s[i][2]:"",null===r?(t.line=t.line||[],t.line.push(n)):(t.block=t.block||[],t.block.push([n,r,o]))},bt=function(e,t,n){var r=[].concat(make_array(e.tokens)).map(function(e){return{word:e,meta:t}});n.autocomplete=(n.autocomplete||[]).concat(r)},Tt=function(e){var t,n,r,o,i,l,s,a,u,c,f,p,g,h,d,m;if(e.__parsed)return e;for(f={},p={},g={},d={},m={},h=[],e=clone(e),t=e.RegExpID||null,e.RegExpID=null,delete e.RegExpID,l=e.Lex||{},e.Lex=null,delete e.Lex,s=e.Syntax||{},e.Syntax=null,delete e.Syntax,i=e.Style||{},o=e.Parser||[],r=o.length,n=[],a=0;r>a;a++)u=o[a],c=Ct(u,t,l,s,i,f,p,g,h,d,m)||null,c&&(U&get_type(c)?n=n.concat(c):n.push(c));return e.Parser=n,e.cTokens=h,e.Style=i,e.Comments=d,e.Keywords=m,e.Extra=e.Extra||{},e.__parsed=1,e},St="undefined"!=typeof ace?ace:{require:function(){return{}},config:{}},Lt=St.require,Mt=St.config,It=function(e,t,n){var r=this,o=Lt,i=Mt;r.$sendDeltaQueue=r.$sendDeltaQueue.bind(r),r.changeListener=r.changeListener.bind(r),r.onMessage=r.onMessage.bind(r),o.nameToUrl&&!o.toUrl&&(o.toUrl=o.nameToUrl);var l;if(i.get("packaged")||!o.toUrl)l=i.moduleUrl(t,"worker");else{var s=r.$normalizePath;l=s(o.toUrl("ace/worker/worker.js",null,"_"));var a={};e.forEach(function(e){a[e]=s(o.toUrl(e,null,"_").replace(/(\.js)?(\?.*)?$/,""))})}r.$worker=new Worker(l),r.$worker.postMessage({load:!0,ace_worker_base:thisPath.base+"/"+Mt.moduleUrl("ace/worker/json")}),r.$worker.postMessage({init:!0,tlns:a,module:t,classname:n}),r.callbackId=1,r.callbacks={},r.$worker.onmessage=r.onMessage};It[I]=Extend(Lt("ace/worker/worker_client").WorkerClient[I]);var At=function(e,t){var n,r=this;r.LC=e.Comments.line||null,r.BC=e.Comments.block?{start:e.Comments.block[0][0],end:e.Comments.block[0][1]}:null,r.LC&&(n=U&get_type(r.LC)?r.LC.map(escRegexp).join("|"):escRegexp(r.LC),r.rxLine=new RegExp("^(\\s*)(?:"+n+") ?")),r.BC&&(r.rxStart=new RegExp("^(\\s*)(?:"+escRegexp(r.BC.start)+")"),r.rxEnd=new RegExp("(?:"+escRegexp(r.BC.end)+")\\s*$")),r.DEF=t.DEFAULT,r.ERR=e.Style.error||t.ERROR,r.Keywords=e.Keywords.autocomplete||null,r.Tokens=e.Parser||[],r.cTokens=e.cTokens.length?e.cTokens:null,r.Style=e.Style};At[I]=Merge(Extend(Lt("ace/tokenizer").Tokenizer[I]),{constructor:At,ERR:null,DEF:null,LC:null,BC:null,rxLine:null,rxStart:null,rxEnd:null,Keywords:null,cTokens:null,Tokens:null,Style:null,parse:function(e){e=e||"";var t,n,r=e.split(/\r\n|\r|\n/g),o=r.length,i=[];for(n={state:new ot,tokens:null},t=0;o>t;t++)n=this.getLineTokens(r[t],n.state,t),i.push(n.tokens);return i},getLineTokens:function(e,t,n){var r,o,i,l,s,a,u,c,f,p,d,m=this,k=m.cTokens,v=m.Tokens,_=v.length,y=null,E=m.DEF,R=m.ERR,w=m.Style;for(a=[],p=new nt(e),t=t?t.clone(1):new ot(1,1),t.l=1+n,d=t.stack,u={type:null,value:"",error:null},c=null,f=null,!d.isEmpty()&&g==d.peek().tt&&p.sol()&&d.pop();!p.eol();)if(o=0,f&&f!==u.type?(u.type&&a.push(u),u={type:f,value:p.cur(1),error:y},y=null):u.type&&(u.value+=p.cur(1)),f=!1,!d.isEmpty()&&h==d.peek().tt||!p.spc()){for(;!d.isEmpty()&&!p.eol();){if(k){for(l=0,i=0;l<k.length;)if(s=k[l++],t.t=c=s.get(p,t),!1!==c){f=w[c]||E,i=1;break}if(i){o=1;break}}if(s=d.pop(),t.t=c=s.get(p,t),!1!==c){if(!0!==c){f=w[c]||E,s.MTCH&&(d.empty("sID",s.sID),t.t=c=R,f=R,y=s.err()),o=1;break}}else{if(s.ERR||s.REQ){d.empty("sID",s.sID),p.nxt(),t.t=c=R,f=R,y=s.err(),o=1;break}f=!1}}if(!o){if(p.eol())break;for(r=0;_>r;r++)if(s=v[r],t.t=c=s.get(p,t),!1!==c){if(!0!==c){f=w[c]||E,s.MTCH&&(d.empty("sID",s.sID),t.t=c=R,f=R,y=s.err()),o=1;break}}else{if(s.ERR||s.REQ){d.empty("sID",s.sID),p.nxt(),t.t=c=R,f=R,y=s.err(),o=1;break}f=!1}if(!o){if(p.eol())break;p.nxt(),t.t=c=E,f=E}}}else t.t=c=E,f=E;return f&&f!==u.type?(u.type&&a.push(u),a.push({type:f,value:p.cur(1),error:y}),y=null):u.type&&(u.value+=p.cur(1),a.push(u)),u=null,{state:t,tokens:a}},tCL:function(e,t,n,r){function o(e){for(var t=n;r>=t;t++)e(c.getLine(t),t)}var i,l,s,a,u=this,c=t.doc,f=!0,p=!0,g=1/0,h=t.getTabSize(),d=!1;if(u.LC){var m,k=U==get_type(u.LC)?u.LC[0]:u.LC,v=u.rxLine,_=k+" ";d=t.getUseSoftTabs(),l=function(e,t){var n,r,o=e.match(v);o&&(n=o[1].length,r=o[0].length,a(e,n,r)||" "!=o[0][r-1]||r--,c.removeInLine(t,n,r))},i=function(e,t){(!f||/\S/.test(e))&&(a(e,g,g)?c.insertInLine({row:t,column:g},_):c.insertInLine({row:t,column:g},k))},s=function(e){return v.test(e)},a=function(e,t,n){for(var r=0;t--&&" "==e.charAt(t);)r++;if(r%h!=0)return!1;for(r=0;" "==e.charAt(n++);)r++;return h>2?r%h!=h-1:r%h==0}}else{if(!u.BC)return!1;var k=u.BC.start,y=u.BC.end,E=u.rxStart,R=u.rxEnd;i=function(e,t){s(e,t)||(!f||/\S/.test(e))&&(c.insertInLine({row:t,column:e.length},y),c.insertInLine({row:t,column:g},k))},l=function(e,t){var n;(n=e.match(R))&&c.removeInLine(t,e.length-n[0].length,e.length),(n=e.match(E))&&c.removeInLine(t,n[1].length,n[0].length)},s=function(e,n){if(E.test(e))return!0;for(var r=t.getTokens(n),o=0;o<r.length;o++)if("comment"===r[o].type)return!0}}m=1/0,o(function(e,t){var n=e.search(/\S/);-1!==n?(g>n&&(g=n),p&&!s(e,t)&&(p=!1)):m>e.length&&(m=e.length)}),1/0==g&&(g=m,f=!1,p=!1),d&&g%h!=0&&(g=Math.floor(g/h)*h),o(p?l:i)},tBC:function(e,t,n,r){var o,i,l,s,a,u,c,f,p,g,h,d=this,m=Lt("ace/token_iterator").TokenIterator,k=Lt("ace/range").Range,v=d.BC;if(v){if(o=new m(t,r.row,r.column),i=o.getCurrentToken(),l=t.selection,s=l.toOrientedRange(),i&&/comment/.test(i.type)){for(;i&&/comment/.test(i.type);){if(p=i.value.indexOf(v.start),-1!=p){g=o.getCurrentTokenRow(),h=o.getCurrentTokenColumn()+p,c=new k(g,h,g,h+v.start.length);break}i=o.stepBackward()}for(o=new m(t,r.row,r.column),i=o.getCurrentToken();i&&/comment/.test(i.type);){if(p=i.value.indexOf(v.end),-1!=p){g=o.getCurrentTokenRow(),h=o.getCurrentTokenColumn()+p,f=new k(g,h,g,h+v.end.length);break}i=o.stepForward()}f&&t.remove(f),c&&(t.remove(c),a=c.start.row,u=-v.start.length)}else u=v.start.length,a=n.start.row,t.insert(n.end,v.end),t.insert(n.start,v.start);s.start.row==a&&(s.start.column+=u),s.end.row==a&&(s.end.column+=u),t.selection.fromOrientedRange(s)}},indent:function(e){return e.match(/^\s*/)[0]},getNextLineIndent:function(e,t){return t.match(/^\s*/)[0]}});var Ot=function(e,t){var n;return n={getTokenizer:function(){return e},supportGrammarAnnotations:0,createWorker:function(e){if(!n.supportGrammarAnnotations)return null;Mt.setModuleUrl("ace/grammar_worker",thisPath.file);var r=new It(["ace"],"ace/grammar_worker","AceGrammarWorker");return r.attachToDocument(e.getDocument()),r.call("Init",[t],function(){r.on("error",function(t){e.setAnnotations(t.data)}),r.on("ok",function(){e.clearAnnotations()})}),r},transformAction:function(){},toggleCommentLines:function(t,n,r,o){return e.tCL(t,n,r,o)},toggleBlockComment:function(t,n,r,o){return e.tBC(t,n,r,o)},getNextLineIndent:function(t,n,r){return e.getNextLineIndent(t,n,r)},checkOutdent:function(){return!1},autoOutdent:function(){},getKeywords:function(){var t=e.Keywords;return t?t.map(function(e){var t=e.word,n=e.meta;return{name:t,value:t,score:1e3,meta:n}}):[]},getCompletions:function(t,n,r,o){var i=e.Keywords;if(!i)return[];var l=o.length;return i.map(function(e){var t=e.word,n=e.meta,r=t.length,i=r>=l&&o==t.substr(0,l);return{name:t,value:t,score:i?1e3-r:0,meta:n}})}}},Bt=function(e,t){var n={DEFAULT:t||o,ERROR:s};e=clone(e);var r=Tt(e);return Ot(new At(r,n),e)};if(isWorker){var Dt=this;onmessage=function(e){var t=e.data;t.load&&t.ace_worker_base&&(importScripts(t.ace_worker_base),r.call(Dt))}}o="text",s="invalid";e.AceGrammar={VERSION:"0.9",extend:extend,parse:Tt,getMode:Bt};return e.AceGrammar});