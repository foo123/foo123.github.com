!function(e,t){"use strict";"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define(function(e){return t()}):e.InfoPopup=t()}("undefined"!=typeof self?self:this,function(e){"use strict";var t=/^\s+|\s+$/g,f=String.prototype.trim?function(e){return e.trim()}:function(e){return e.replace(t,"")},s=null;function i(){var t=!1,e={};try{Object.defineProperty(e,"passive",{get:function(){return!(t=!0)}}),window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(e){t=!1}return t}function m(e,t){var n,o;e.classList?e.classList.add(t):(o=t,((n=e).classList?n.classList.contains(o):-1!==(" "+n.className+" ").indexOf(" "+o+" "))||(e.className=""===e.className?t:e.className+" "+t))}function v(e,t){e.classList?e.classList.remove(t):e.className=f((" "+e.className+" ").replace(" "+t+" "," "))}function r(e,t,n,o){null==s&&(s=i()),e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener(t,n,s?o:"object"==typeof o?!!o.capture:!!o)}function h(e,t,n,o){null==s&&(s=i()),e.detachEvent?e.detachEvent("on"+t,n):e.removeEventListener(t,n,s?o:"object"==typeof o?!!o.capture:!!o)}function y(e){var a,u,t,n,l,o,s,p,i,c,d=this;if(!(d instanceof y))return new y(e);p=function(){n&&clearTimeout(n)},o=function(){l&&v(l,"hovered"),a&&a.parentNode&&a.parentNode.removeChild(a),l=null},s=function(){p(),n=setTimeout(o,+(d.options.closeDelay||0))},i=function(t){var e=t.target&&t.target.closest(d.options.item||".info-item");e&&"function"==typeof d.options.content&&(d.show(e,t),"click"!==d.options.trigger&&r(document.body,"touchstart"===t.type?"touchend":"mouseleave",function e(){h(document.body,"touchstart"===t.type?"touchend":"mouseleave",e,{capture:!0,passive:!0}),s()},{capture:!0,passive:!0}))},d.options=e||{},d.dispose=function(){p(),o(),t&&h(t,"click",o,{capture:!0,passive:!0}),"click"===d.options.trigger?h(document.body,"click",i,{capture:!0,passive:!1}):(a&&h(a,"mouseenter",c,{capture:!0,passive:!0}),a&&h(a,"touchstart",p,{capture:!0,passive:!0}),h(document.body,"mouseenter",i,{capture:!0,passive:!1}),h(document.body,"touchstart",i,{capture:!0,passive:!1}))},d.show=function(e,t){var n,o,s,i,c,r=d.options.content(e);null!=r&&!1!==r&&(r instanceof window.Node?(u.textContent="",u.appendChild(r)):u.innerHTML=f(String(r)),t&&t.preventDefault&&t.preventDefault(),p(),v(a,"below"),v(a,"left"),v(a,"right"),document.body.appendChild(a),l&&v(l,"hovered"),m(l=e,"hovered"),n=e.getBoundingClientRect(),o=a.getBoundingClientRect(),s=window.innerWidth,i=window.innerHeight,c=document.body.scrollLeft||0,r=document.body.scrollTop||0,t=c+n.left+n.width/2-o.width/2,e=r+n.top-o.height,t<0?-t<=c?(document.body.scrollLeft+=t,c=document.body.scrollLeft,t=0):(t=c+n.left,m(a,"left")):t+o.width>s&&(t=c+n.left+n.width-o.width,m(a,"right")),n.top+n.height/2<i/2&&(e=r+n.top+n.height,m(a,"below")),a.style.left=String(t)+"px",a.style.top=String(e)+"px")},a||(m(a=document.createElement("div"),"info"),d.options.className&&m(a,d.options.className),a.appendChild(document.createElement("div")),m(a.firstChild,"header"),a.firstChild.appendChild(t=document.createElement("button")),m(t,"close"),t.setAttribute("title",d.options.closeMsg||"Close Popup"),r(t,"click",o,{capture:!0,passive:!0}),a.appendChild(u=document.createElement("div")),m(u,"content"),"click"===d.options.trigger?r(document.body,"click",i,{capture:!0,passive:!1}):(r(a,"mouseenter",c=function(e){p(),r(a,"mouseleave",function e(t){h(a,"mouseleave",e,{capture:!0,passive:!0}),s()},{capture:!0,passive:!0})},{capture:!0,passive:!0}),r(a,"touchstart",p,{capture:!0,passive:!0}),r(document.body,"mouseenter",i,{capture:!0,passive:!1}),r(document.body,"touchstart",i,{capture:!0,passive:!1})))}return y.prototype={constructor:y,options:null,dispose:null,show:null},y.VERSION="1.0.0",y});