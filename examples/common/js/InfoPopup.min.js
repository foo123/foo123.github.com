/**
*  InfoPopup
*  A simple js class to show info popups easily for various items and events (Desktop and Mobile)
*  @VERSION: 1.0.0
*
*  https://github.com/foo123/InfoPopup
*
**/
!function(e,t){"use strict";"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define(function(e){return t()}):e.InfoPopup=t()}("undefined"!=typeof self?self:this,function(e){"use strict";var t=/^\s+|\s+$/g,m=String.prototype.trim?function(e){return e.trim()}:function(e){return e.replace(t,"")},i=null;function s(){var t=!1,e={};try{Object.defineProperty(e,"passive",{get:function(){return!(t=!0)}}),window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(e){t=!1}return t}function v(e,t){var n,o;e.classList?e.classList.add(t):(o=t,((n=e).classList?n.classList.contains(o):-1!==(" "+n.className+" ").indexOf(" "+o+" "))||(e.className=""===e.className?t:e.className+" "+t))}function h(e,t){e.classList?e.classList.remove(t):e.className=m((" "+e.className+" ").replace(" "+t+" "," "))}function u(e,t,n,o){null==i&&(i=s()),e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener(t,n,i?o:"object"==typeof o?!!o.capture:!!o)}function a(e,t,n,o){null==i&&(i=s()),e.detachEvent?e.detachEvent("on"+t,n):e.removeEventListener(t,n,i?o:"object"==typeof o?!!o.capture:!!o)}function y(e){var r,l,t,n,p,o,i,d,s,c,f=this;if(!(f instanceof y))return new y(e);d=function(){n&&clearTimeout(n)},o=function(){p&&h(p,"hovered"),r&&r.parentNode&&r.parentNode.removeChild(r),p=null},i=function(){d(),n=setTimeout(o,+(f.options.closeDelay||0))},s=function(t){var e=t.target&&t.target.closest(f.options.item||".info-item");e&&"function"==typeof f.options.content&&(f.show(e,t),"click"!==f.options.trigger&&u(document.body,"touchstart"===t.type?"touchend":"mouseleave",function e(){a(document.body,"touchstart"===t.type?"touchend":"mouseleave",e,{capture:!0,passive:!0}),i()},{capture:!0,passive:!0}))},f.options=e||{},f.dispose=function(){d(),o(),t&&a(t,"click",o,{capture:!0,passive:!0}),"click"===f.options.trigger?a(document.body,"click",s,{capture:!0,passive:!1}):(r&&a(r,"mouseenter",c,{capture:!0,passive:!0}),r&&a(r,"touchstart",d,{capture:!0,passive:!0}),a(document.body,"mouseenter",s,{capture:!0,passive:!1}),a(document.body,"touchstart",s,{capture:!0,passive:!1}))},f.show=function(e,t){var n,o,i,s,c,u,a=f.options.content(e);null!=a&&!1!==a&&(a instanceof window.Node?(l.textContent="",l.appendChild(a)):l.innerHTML=m(String(a)),t&&t.preventDefault&&t.preventDefault(),d(),h(r,"below"),h(r,"left"),h(r,"right"),document.body.appendChild(r),p&&h(p,"hovered"),v(p=e,"hovered"),n=document.body.getBoundingClientRect(),o=e.getBoundingClientRect(),i=r.getBoundingClientRect(),s=window.innerWidth,c=window.innerHeight,u=document.body.scrollLeft||0,a=document.body.scrollTop||0,t=u+o.left-n.left+o.width/2-i.width/2,e=a+o.top-n.top-i.height,t<0?-t<=u?(document.body.scrollLeft+=t,u=document.body.scrollLeft,t=0):(t=u+o.left-n.left,v(r,"left")):t+i.width>s&&(t=u+o.left-n.left+o.width-i.width,v(r,"right")),o.top+o.height/2<c/2&&(e=a+o.top-n.top+o.height,v(r,"below")),r.style.position="absolute",r.style.left=String(t)+"px",r.style.top=String(e)+"px")},r||(v(r=document.createElement("div"),"info"),f.options.className&&v(r,f.options.className),r.appendChild(document.createElement("div")),v(r.firstChild,"header"),r.firstChild.appendChild(t=document.createElement("button")),v(t,"close"),t.setAttribute("title",f.options.closeMsg||"Close Popup"),u(t,"click",o,{capture:!0,passive:!0}),r.appendChild(l=document.createElement("div")),v(l,"content"),"click"===f.options.trigger?u(document.body,"click",s,{capture:!0,passive:!1}):(u(r,"mouseenter",c=function(e){d(),u(r,"mouseleave",function e(t){a(r,"mouseleave",e,{capture:!0,passive:!0}),i()},{capture:!0,passive:!0})},{capture:!0,passive:!0}),u(r,"touchstart",d,{capture:!0,passive:!0}),u(document.body,"mouseenter",s,{capture:!0,passive:!1}),u(document.body,"touchstart",s,{capture:!0,passive:!1})))}return y.prototype={constructor:y,options:null,dispose:null,show:null},y.VERSION="1.0.0",y});